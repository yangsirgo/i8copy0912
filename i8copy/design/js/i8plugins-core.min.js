function onceSubmit(a) {
    return a.hasClass("btn-disabled") ? !1 : a instanceof jQuery ? ($(document).ajaxStart(function () {
        a.addClass("btn-disabled")
    }).ajaxComplete(function () {
        a.removeClass("btn-disabled")
    }), !0) : !1
}
    //jQuery
!function (a, b) {
    function c(a) {
        var b = oa[a] = {};
        return $.each(a.split(ba), function (a, c) {
            b[c] = !0
        }), b
    }

    function d(a, c, d) {
        if (d === b && 1 === a.nodeType) {
            var e = "data-" + c.replace(qa, "-$1").toLowerCase();
            if (d = a.getAttribute(e), "string" == typeof d) {
                try {
                    d = "true" === d ? !0 : "false" === d ? !1 : "null" === d ? null : +d + "" === d ? +d : pa.test(d) ? $.parseJSON(d) : d
                } catch (f) {
                }
                $.data(a, c, d)
            } else d = b
        }
        return d
    }

    function e(a) {
        var b;
        for (b in a)if (("data" !== b || !$.isEmptyObject(a[b])) && "toJSON" !== b)return !1;
        return !0
    }

    function f() {
        return !1
    }

    function g() {
        return !0
    }

    function h(a) {
        return !a || !a.parentNode || 11 === a.parentNode.nodeType
    }

    function i(a, b) {
        do a = a[b]; while (a && 1 !== a.nodeType);
        return a
    }

    function j(a, b, c) {
        if (b = b || 0, $.isFunction(b))return $.grep(a, function (a, d) {
            var e = !!b.call(a, d, a);
            return e === c
        });
        if (b.nodeType)return $.grep(a, function (a) {
            return a === b === c
        });
        if ("string" == typeof b) {
            var d = $.grep(a, function (a) {
                return 1 === a.nodeType
            });
            if (Ka.test(b))return $.filter(b, d, !c);
            b = $.filter(b, d)
        }
        return $.grep(a, function (a) {
            return $.inArray(a, b) >= 0 === c
        })
    }

    function k(a) {
        var b = Na.split("|"), c = a.createDocumentFragment();
        if (c.createElement)for (; b.length;)c.createElement(b.pop());
        return c
    }

    function l(a, b) {
        return a.getElementsByTagName(b)[0] || a.appendChild(a.ownerDocument.createElement(b))
    }

    function m(a, b) {
        if (1 === b.nodeType && $.hasData(a)) {
            var c, d, e, f = $._data(a), g = $._data(b, f), h = f.events;
            if (h) {
                delete g.handle, g.events = {};
                for (c in h)for (d = 0, e = h[c].length; e > d; d++)$.event.add(b, c, h[c][d])
            }
            g.data && (g.data = $.extend({}, g.data))
        }
    }

    function n(a, b) {
        var c;
        1 === b.nodeType && (b.clearAttributes && b.clearAttributes(), b.mergeAttributes && b.mergeAttributes(a), c = b.nodeName.toLowerCase(), "object" === c ? (b.parentNode && (b.outerHTML = a.outerHTML), $.support.html5Clone && a.innerHTML && !$.trim(b.innerHTML) && (b.innerHTML = a.innerHTML)) : "input" === c && Xa.test(a.type) ? (b.defaultChecked = b.checked = a.checked, b.value !== a.value && (b.value = a.value)) : "option" === c ? b.selected = a.defaultSelected : "input" === c || "textarea" === c ? b.defaultValue = a.defaultValue : "script" === c && b.text !== a.text && (b.text = a.text), b.removeAttribute($.expando))
    }

    function o(a) {
        return "undefined" != typeof a.getElementsByTagName ? a.getElementsByTagName("*") : "undefined" != typeof a.querySelectorAll ? a.querySelectorAll("*") : []
    }

    function p(a) {
        Xa.test(a.type) && (a.defaultChecked = a.checked)
    }

    function q(a, b) {
        if (b in a)return b;
        for (var c = b.charAt(0).toUpperCase() + b.slice(1), d = b, e = rb.length; e--;)if (b = rb[e] + c, b in a)return b;
        return d
    }

    function r(a, b) {
        return a = b || a, "none" === $.css(a, "display") || !$.contains(a.ownerDocument, a)
    }

    function s(a, b) {
        for (var c, d, e = [], f = 0, g = a.length; g > f; f++)c = a[f], c.style && (e[f] = $._data(c, "olddisplay"), b ? (!e[f] && "none" === c.style.display && (c.style.display = ""), "" === c.style.display && r(c) && (e[f] = $._data(c, "olddisplay", w(c.nodeName)))) : (d = cb(c, "display"), !e[f] && "none" !== d && $._data(c, "olddisplay", d)));
        for (f = 0; g > f; f++)c = a[f], c.style && (b && "none" !== c.style.display && "" !== c.style.display || (c.style.display = b ? e[f] || "" : "none"));
        return a
    }

    function t(a, b, c) {
        var d = kb.exec(b);
        return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b
    }

    function u(a, b, c, d) {
        for (var e = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0, f = 0; 4 > e; e += 2)"margin" === c && (f += $.css(a, c + qb[e], !0)), d ? ("content" === c && (f -= parseFloat(cb(a, "padding" + qb[e])) || 0), "margin" !== c && (f -= parseFloat(cb(a, "border" + qb[e] + "Width")) || 0)) : (f += parseFloat(cb(a, "padding" + qb[e])) || 0, "padding" !== c && (f += parseFloat(cb(a, "border" + qb[e] + "Width")) || 0));
        return f
    }

    function v(a, b, c) {
        var d = "width" === b ? a.offsetWidth : a.offsetHeight, e = !0, f = $.support.boxSizing && "border-box" === $.css(a, "boxSizing");
        if (0 >= d || null == d) {
            if (d = cb(a, b), (0 > d || null == d) && (d = a.style[b]), lb.test(d))return d;
            e = f && ($.support.boxSizingReliable || d === a.style[b]), d = parseFloat(d) || 0
        }
        return d + u(a, b, c || (f ? "border" : "content"), e) + "px"
    }

    function w(a) {
        if (nb[a])return nb[a];
        var b = $("<" + a + ">").appendTo(P.body), c = b.css("display");
        return b.remove(), ("none" === c || "" === c) && (db = P.body.appendChild(db || $.extend(P.createElement("iframe"), {
                frameBorder: 0,
                width: 0,
                height: 0
            })), eb && db.createElement || (eb = (db.contentWindow || db.contentDocument).document, eb.write("<!doctype html><html><body>"), eb.close()), b = eb.body.appendChild(eb.createElement(a)), c = cb(b, "display"), P.body.removeChild(db)), nb[a] = c, c
    }

    function x(a, b, c, d) {
        var e;
        if ($.isArray(b))$.each(b, function (b, e) {
            c || ub.test(a) ? d(a, e) : x(a + "[" + ("object" == typeof e ? b : "") + "]", e, c, d)
        }); else if (c || "object" !== $.type(b))d(a, b); else for (e in b)x(a + "[" + e + "]", b[e], c, d)
    }

    function y(a) {
        return function (b, c) {
            "string" != typeof b && (c = b, b = "*");
            var d, e, f, g = b.toLowerCase().split(ba), h = 0, i = g.length;
            if ($.isFunction(c))for (; i > h; h++)d = g[h], f = /^\+/.test(d), f && (d = d.substr(1) || "*"), e = a[d] = a[d] || [], e[f ? "unshift" : "push"](c)
        }
    }

    function z(a, c, d, e, f, g) {
        f = f || c.dataTypes[0], g = g || {}, g[f] = !0;
        for (var h, i = a[f], j = 0, k = i ? i.length : 0, l = a === Kb; k > j && (l || !h); j++)h = i[j](c, d, e), "string" == typeof h && (!l || g[h] ? h = b : (c.dataTypes.unshift(h), h = z(a, c, d, e, h, g)));
        return (l || !h) && !g["*"] && (h = z(a, c, d, e, "*", g)), h
    }

    function A(a, c) {
        var d, e, f = $.ajaxSettings.flatOptions || {};
        for (d in c)c[d] !== b && ((f[d] ? a : e || (e = {}))[d] = c[d]);
        e && $.extend(!0, a, e)
    }

    function B(a, c, d) {
        var e, f, g, h, i = a.contents, j = a.dataTypes, k = a.responseFields;
        for (f in k)f in d && (c[k[f]] = d[f]);
        for (; "*" === j[0];)j.shift(), e === b && (e = a.mimeType || c.getResponseHeader("content-type"));
        if (e)for (f in i)if (i[f] && i[f].test(e)) {
            j.unshift(f);
            break
        }
        if (j[0]in d)g = j[0]; else {
            for (f in d) {
                if (!j[0] || a.converters[f + " " + j[0]]) {
                    g = f;
                    break
                }
                h || (h = f)
            }
            g = g || h
        }
        return g ? (g !== j[0] && j.unshift(g), d[g]) : void 0
    }

    function C(a, b) {
        var c, d, e, f, g = a.dataTypes.slice(), h = g[0], i = {}, j = 0;
        if (a.dataFilter && (b = a.dataFilter(b, a.dataType)), g[1])for (c in a.converters)i[c.toLowerCase()] = a.converters[c];
        for (; e = g[++j];)if ("*" !== e) {
            if ("*" !== h && h !== e) {
                if (c = i[h + " " + e] || i["* " + e], !c)for (d in i)if (f = d.split(" "), f[1] === e && (c = i[h + " " + f[0]] || i["* " + f[0]])) {
                    c === !0 ? c = i[d] : i[d] !== !0 && (e = f[0], g.splice(j--, 0, e));
                    break
                }
                if (c !== !0)if (c && a["throws"])b = c(b); else try {
                    b = c(b)
                } catch (k) {
                    return {state: "parsererror", error: c ? k : "No conversion from " + h + " to " + e}
                }
            }
            h = e
        }
        return {state: "success", data: b}
    }

    function D() {
        try {
            return new a.XMLHttpRequest
        } catch (b) {
        }
    }

    function E() {
        try {
            return new a.ActiveXObject("Microsoft.XMLHTTP")
        } catch (b) {
        }
    }

    function F() {
        return setTimeout(function () {
            Vb = b
        }, 0), Vb = $.now()
    }

    function G(a, b) {
        $.each(b, function (b, c) {
            for (var d = (_b[b] || []).concat(_b["*"]), e = 0, f = d.length; f > e; e++)if (d[e].call(a, b, c))return
        })
    }

    function H(a, b, c) {
        var d, e = 0, f = $b.length, g = $.Deferred().always(function () {
            delete h.elem
        }), h = function () {
            for (var b = Vb || F(), c = Math.max(0, i.startTime + i.duration - b), d = c / i.duration || 0, e = 1 - d, f = 0, h = i.tweens.length; h > f; f++)i.tweens[f].run(e);
            return g.notifyWith(a, [i, e, c]), 1 > e && h ? c : (g.resolveWith(a, [i]), !1)
        }, i = g.promise({
            elem: a,
            props: $.extend({}, b),
            opts: $.extend(!0, {specialEasing: {}}, c),
            originalProperties: b,
            originalOptions: c,
            startTime: Vb || F(),
            duration: c.duration,
            tweens: [],
            createTween: function (b, c) {
                var d = $.Tween(a, i.opts, b, c, i.opts.specialEasing[b] || i.opts.easing);
                return i.tweens.push(d), d
            },
            stop: function (b) {
                for (var c = 0, d = b ? i.tweens.length : 0; d > c; c++)i.tweens[c].run(1);
                return b ? g.resolveWith(a, [i, b]) : g.rejectWith(a, [i, b]), this
            }
        }), j = i.props;
        for (I(j, i.opts.specialEasing); f > e; e++)if (d = $b[e].call(i, a, j, i.opts))return d;
        return G(i, j), $.isFunction(i.opts.start) && i.opts.start.call(a, i), $.fx.timer($.extend(h, {
            anim: i,
            queue: i.opts.queue,
            elem: a
        })), i.progress(i.opts.progress).done(i.opts.done, i.opts.complete).fail(i.opts.fail).always(i.opts.always)
    }

    function I(a, b) {
        var c, d, e, f, g;
        for (c in a)if (d = $.camelCase(c), e = b[d], f = a[c], $.isArray(f) && (e = f[1], f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = $.cssHooks[d], g && "expand"in g) {
            f = g.expand(f), delete a[d];
            for (c in f)c in a || (a[c] = f[c], b[c] = e)
        } else b[d] = e
    }

    function J(a, b, c) {
        var d, e, f, g, h, i, j, k, l, m = this, n = a.style, o = {}, p = [], q = a.nodeType && r(a);
        c.queue || (k = $._queueHooks(a, "fx"), null == k.unqueued && (k.unqueued = 0, l = k.empty.fire, k.empty.fire = function () {
            k.unqueued || l()
        }), k.unqueued++, m.always(function () {
            m.always(function () {
                k.unqueued--, $.queue(a, "fx").length || k.empty.fire()
            })
        })), 1 === a.nodeType && ("height"in b || "width"in b) && (c.overflow = [n.overflow, n.overflowX, n.overflowY], "inline" === $.css(a, "display") && "none" === $.css(a, "float") && ($.support.inlineBlockNeedsLayout && "inline" !== w(a.nodeName) ? n.zoom = 1 : n.display = "inline-block")), c.overflow && (n.overflow = "hidden", $.support.shrinkWrapBlocks || m.done(function () {
            n.overflow = c.overflow[0], n.overflowX = c.overflow[1], n.overflowY = c.overflow[2]
        }));
        for (d in b)if (f = b[d], Xb.exec(f)) {
            if (delete b[d], i = i || "toggle" === f, f === (q ? "hide" : "show"))continue;
            p.push(d)
        }
        if (g = p.length) {
            h = $._data(a, "fxshow") || $._data(a, "fxshow", {}), "hidden"in h && (q = h.hidden), i && (h.hidden = !q), q ? $(a).show() : m.done(function () {
                $(a).hide()
            }), m.done(function () {
                var b;
                $.removeData(a, "fxshow", !0);
                for (b in o)$.style(a, b, o[b])
            });
            for (d = 0; g > d; d++)e = p[d], j = m.createTween(e, q ? h[e] : 0), o[e] = h[e] || $.style(a, e), e in h || (h[e] = j.start, q && (j.end = j.start, j.start = "width" === e || "height" === e ? 1 : 0))
        }
    }

    function K(a, b, c, d, e) {
        return new K.prototype.init(a, b, c, d, e)
    }

    function L(a, b) {
        var c, d = {height: a}, e = 0;
        for (b = b ? 1 : 0; 4 > e; e += 2 - b)c = qb[e], d["margin" + c] = d["padding" + c] = a;
        return b && (d.opacity = d.width = a), d
    }

    function M(a) {
        return $.isWindow(a) ? a : 9 === a.nodeType ? a.defaultView || a.parentWindow : !1
    }

    var N, O, P = a.document, Q = a.location, R = a.navigator, S = a.jQuery, T = a.$, U = Array.prototype.push, V = Array.prototype.slice, W = Array.prototype.indexOf, X = Object.prototype.toString, Y = Object.prototype.hasOwnProperty, Z = String.prototype.trim, $ = function (a, b) {
        return new $.fn.init(a, b, N)
    }, _ = /[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source, aa = /\S/, ba = /\s+/, ca = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, da = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/, ea = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, fa = /^[\],:{}\s]*$/, ga = /(?:^|:|,)(?:\s*\[)+/g, ha = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g, ia = /"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g, ja = /^-ms-/, ka = /-([\da-z])/gi, la = function (a, b) {
        return (b + "").toUpperCase()
    }, ma = function () {
        P.addEventListener ? (P.removeEventListener("DOMContentLoaded", ma, !1), $.ready()) : "complete" === P.readyState && (P.detachEvent("onreadystatechange", ma), $.ready())
    }, na = {};
    $.fn = $.prototype = {
        constructor: $, init: function (a, c, d) {
            var e, f, g;
            if (!a)return this;
            if (a.nodeType)return this.context = this[0] = a, this.length = 1, this;
            if ("string" == typeof a) {
                if (e = "<" === a.charAt(0) && ">" === a.charAt(a.length - 1) && a.length >= 3 ? [null, a, null] : da.exec(a), e && (e[1] || !c)) {
                    if (e[1])return c = c instanceof $ ? c[0] : c, g = c && c.nodeType ? c.ownerDocument || c : P, a = $.parseHTML(e[1], g, !0), ea.test(e[1]) && $.isPlainObject(c) && this.attr.call(a, c, !0), $.merge(this, a);
                    if (f = P.getElementById(e[2]), f && f.parentNode) {
                        if (f.id !== e[2])return d.find(a);
                        this.length = 1, this[0] = f
                    }
                    return this.context = P, this.selector = a, this
                }
                return !c || c.jquery ? (c || d).find(a) : this.constructor(c).find(a)
            }
            return $.isFunction(a) ? d.ready(a) : (a.selector !== b && (this.selector = a.selector, this.context = a.context), $.makeArray(a, this))
        }, selector: "", jquery: "1.8.3", length: 0, size: function () {
            return this.length
        }, toArray: function () {
            return V.call(this)
        }, get: function (a) {
            return null == a ? this.toArray() : 0 > a ? this[this.length + a] : this[a]
        }, pushStack: function (a, b, c) {
            var d = $.merge(this.constructor(), a);
            return d.prevObject = this, d.context = this.context, "find" === b ? d.selector = this.selector + (this.selector ? " " : "") + c : b && (d.selector = this.selector + "." + b + "(" + c + ")"), d
        }, each: function (a, b) {
            return $.each(this, a, b)
        }, ready: function (a) {
            return $.ready.promise().done(a), this
        }, eq: function (a) {
            return a = +a, -1 === a ? this.slice(a) : this.slice(a, a + 1)
        }, first: function () {
            return this.eq(0)
        }, last: function () {
            return this.eq(-1)
        }, slice: function () {
            return this.pushStack(V.apply(this, arguments), "slice", V.call(arguments).join(","))
        }, map: function (a) {
            return this.pushStack($.map(this, function (b, c) {
                return a.call(b, c, b)
            }))
        }, end: function () {
            return this.prevObject || this.constructor(null)
        }, push: U, sort: [].sort, splice: [].splice
    }, $.fn.init.prototype = $.fn, $.extend = $.fn.extend = function () {
        var a, c, d, e, f, g, h = arguments[0] || {}, i = 1, j = arguments.length, k = !1;
        for ("boolean" == typeof h && (k = h, h = arguments[1] || {}, i = 2), "object" != typeof h && !$.isFunction(h) && (h = {}), j === i && (h = this, --i); j > i; i++)if (null != (a = arguments[i]))for (c in a)d = h[c], e = a[c], h !== e && (k && e && ($.isPlainObject(e) || (f = $.isArray(e))) ? (f ? (f = !1, g = d && $.isArray(d) ? d : []) : g = d && $.isPlainObject(d) ? d : {}, h[c] = $.extend(k, g, e)) : e !== b && (h[c] = e));
        return h
    }, $.extend({
        noConflict: function (b) {
            return a.$ === $ && (a.$ = T), b && a.jQuery === $ && (a.jQuery = S), $
        }, isReady: !1, readyWait: 1, holdReady: function (a) {
            a ? $.readyWait++ : $.ready(!0)
        }, ready: function (a) {
            if (a === !0 ? !--$.readyWait : !$.isReady) {
                if (!P.body)return setTimeout($.ready, 1);
                $.isReady = !0, a !== !0 && --$.readyWait > 0 || (O.resolveWith(P, [$]), $.fn.trigger && $(P).trigger("ready").off("ready"))
            }
        }, isFunction: function (a) {
            return "function" === $.type(a)
        }, isArray: Array.isArray || function (a) {
            return "array" === $.type(a)
        }, isWindow: function (a) {
            return null != a && a == a.window
        }, isNumeric: function (a) {
            return !isNaN(parseFloat(a)) && isFinite(a)
        }, type: function (a) {
            return null == a ? String(a) : na[X.call(a)] || "object"
        }, isPlainObject: function (a) {
            if (!a || "object" !== $.type(a) || a.nodeType || $.isWindow(a))return !1;
            try {
                if (a.constructor && !Y.call(a, "constructor") && !Y.call(a.constructor.prototype, "isPrototypeOf"))return !1
            } catch (c) {
                return !1
            }
            var d;
            for (d in a);
            return d === b || Y.call(a, d)
        }, isEmptyObject: function (a) {
            var b;
            for (b in a)return !1;
            return !0
        }, error: function (a) {
            throw new Error(a)
        }, parseHTML: function (a, b, c) {
            var d;
            return a && "string" == typeof a ? ("boolean" == typeof b && (c = b, b = 0), b = b || P, (d = ea.exec(a)) ? [b.createElement(d[1])] : (d = $.buildFragment([a], b, c ? null : []), $.merge([], (d.cacheable ? $.clone(d.fragment) : d.fragment).childNodes))) : null
        }, parseJSON: function (b) {
            return b && "string" == typeof b ? (b = $.trim(b), a.JSON && a.JSON.parse ? a.JSON.parse(b) : fa.test(b.replace(ha, "@").replace(ia, "]").replace(ga, "")) ? new Function("return " + b)() : void $.error("Invalid JSON: " + b)) : null
        }, parseXML: function (c) {
            var d, e;
            if (!c || "string" != typeof c)return null;
            try {
                a.DOMParser ? (e = new DOMParser, d = e.parseFromString(c, "text/xml")) : (d = new ActiveXObject("Microsoft.XMLDOM"), d.async = "false", d.loadXML(c))
            } catch (f) {
                d = b
            }
            return (!d || !d.documentElement || d.getElementsByTagName("parsererror").length) && $.error("Invalid XML: " + c), d
        }, noop: function () {
        }, globalEval: function (b) {
            b && aa.test(b) && (a.execScript || function (b) {
                a.eval.call(a, b)
            })(b)
        }, camelCase: function (a) {
            return a.replace(ja, "ms-").replace(ka, la)
        }, nodeName: function (a, b) {
            return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase()
        }, each: function (a, c, d) {
            var e, f = 0, g = a.length, h = g === b || $.isFunction(a);
            if (d)if (h) {
                for (e in a)if (c.apply(a[e], d) === !1)break
            } else for (; g > f && c.apply(a[f++], d) !== !1;); else if (h) {
                for (e in a)if (c.call(a[e], e, a[e]) === !1)break
            } else for (; g > f && c.call(a[f], f, a[f++]) !== !1;);
            return a
        }, trim: Z && !Z.call("\ufeff ") ? function (a) {
            return null == a ? "" : Z.call(a)
        } : function (a) {
            return null == a ? "" : (a + "").replace(ca, "")
        }, makeArray: function (a, b) {
            var c, d = b || [];
            return null != a && (c = $.type(a), null == a.length || "string" === c || "function" === c || "regexp" === c || $.isWindow(a) ? U.call(d, a) : $.merge(d, a)), d
        }, inArray: function (a, b, c) {
            var d;
            if (b) {
                if (W)return W.call(b, a, c);
                for (d = b.length, c = c ? 0 > c ? Math.max(0, d + c) : c : 0; d > c; c++)if (c in b && b[c] === a)return c
            }
            return -1
        }, merge: function (a, c) {
            var d = c.length, e = a.length, f = 0;
            if ("number" == typeof d)for (; d > f; f++)a[e++] = c[f]; else for (; c[f] !== b;)a[e++] = c[f++];
            return a.length = e, a
        }, grep: function (a, b, c) {
            var d, e = [], f = 0, g = a.length;
            for (c = !!c; g > f; f++)d = !!b(a[f], f), c !== d && e.push(a[f]);
            return e
        }, map: function (a, c, d) {
            var e, f, g = [], h = 0, i = a.length, j = a instanceof $ || i !== b && "number" == typeof i && (i > 0 && a[0] && a[i - 1] || 0 === i || $.isArray(a));
            if (j)for (; i > h; h++)e = c(a[h], h, d), null != e && (g[g.length] = e); else for (f in a)e = c(a[f], f, d), null != e && (g[g.length] = e);
            return g.concat.apply([], g)
        }, guid: 1, proxy: function (a, c) {
            var d, e, f;
            return "string" == typeof c && (d = a[c], c = a, a = d), $.isFunction(a) ? (e = V.call(arguments, 2), f = function () {
                return a.apply(c, e.concat(V.call(arguments)))
            }, f.guid = a.guid = a.guid || $.guid++, f) : b
        }, access: function (a, c, d, e, f, g, h) {
            var i, j = null == d, k = 0, l = a.length;
            if (d && "object" == typeof d) {
                for (k in d)$.access(a, c, k, d[k], 1, g, e);
                f = 1
            } else if (e !== b) {
                if (i = h === b && $.isFunction(e), j && (i ? (i = c, c = function (a, b, c) {
                        return i.call($(a), c)
                    }) : (c.call(a, e), c = null)), c)for (; l > k; k++)c(a[k], d, i ? e.call(a[k], k, c(a[k], d)) : e, h);
                f = 1
            }
            return f ? a : j ? c.call(a) : l ? c(a[0], d) : g
        }, now: function () {
            return (new Date).getTime()
        }
    }), $.ready.promise = function (b) {
        if (!O)if (O = $.Deferred(), "complete" === P.readyState)setTimeout($.ready, 1); else if (P.addEventListener)P.addEventListener("DOMContentLoaded", ma, !1), a.addEventListener("load", $.ready, !1); else {
            P.attachEvent("onreadystatechange", ma), a.attachEvent("onload", $.ready);
            var c = !1;
            try {
                c = null == a.frameElement && P.documentElement
            } catch (d) {
            }
            c && c.doScroll && function e() {
                if (!$.isReady) {
                    try {
                        c.doScroll("left")
                    } catch (a) {
                        return setTimeout(e, 50)
                    }
                    $.ready()
                }
            }()
        }
        return O.promise(b)
    }, $.each("Boolean Number String Function Array Date RegExp Object".split(" "), function (a, b) {
        na["[object " + b + "]"] = b.toLowerCase()
    }), N = $(P);
    var oa = {};
    $.Callbacks = function (a) {
        a = "string" == typeof a ? oa[a] || c(a) : $.extend({}, a);
        var d, e, f, g, h, i, j = [], k = !a.once && [], l = function (b) {
            for (d = a.memory && b, e = !0, i = g || 0, g = 0, h = j.length, f = !0; j && h > i; i++)if (j[i].apply(b[0], b[1]) === !1 && a.stopOnFalse) {
                d = !1;
                break
            }
            f = !1, j && (k ? k.length && l(k.shift()) : d ? j = [] : m.disable())
        }, m = {
            add: function () {
                if (j) {
                    var b = j.length;
                    !function c(b) {
                        $.each(b, function (b, d) {
                            var e = $.type(d);
                            "function" === e ? (!a.unique || !m.has(d)) && j.push(d) : d && d.length && "string" !== e && c(d)
                        })
                    }(arguments), f ? h = j.length : d && (g = b, l(d))
                }
                return this
            }, remove: function () {
                return j && $.each(arguments, function (a, b) {
                    for (var c; (c = $.inArray(b, j, c)) > -1;)j.splice(c, 1), f && (h >= c && h--, i >= c && i--)
                }), this
            }, has: function (a) {
                return $.inArray(a, j) > -1
            }, empty: function () {
                return j = [], this
            }, disable: function () {
                return j = k = d = b, this
            }, disabled: function () {
                return !j
            }, lock: function () {
                return k = b, d || m.disable(), this
            }, locked: function () {
                return !k
            }, fireWith: function (a, b) {
                return b = b || [], b = [a, b.slice ? b.slice() : b], j && (!e || k) && (f ? k.push(b) : l(b)), this
            }, fire: function () {
                return m.fireWith(this, arguments), this
            }, fired: function () {
                return !!e
            }
        };
        return m
    }, $.extend({
        Deferred: function (a) {
            var b = [["resolve", "done", $.Callbacks("once memory"), "resolved"], ["reject", "fail", $.Callbacks("once memory"), "rejected"], ["notify", "progress", $.Callbacks("memory")]], c = "pending", d = {
                state: function () {
                    return c
                }, always: function () {
                    return e.done(arguments).fail(arguments), this
                }, then: function () {
                    var a = arguments;
                    return $.Deferred(function (c) {
                        $.each(b, function (b, d) {
                            var f = d[0], g = a[b];
                            e[d[1]]($.isFunction(g) ? function () {
                                var a = g.apply(this, arguments);
                                a && $.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[f + "With"](this === e ? c : this, [a])
                            } : c[f])
                        }), a = null
                    }).promise()
                }, promise: function (a) {
                    return null != a ? $.extend(a, d) : d
                }
            }, e = {};
            return d.pipe = d.then, $.each(b, function (a, f) {
                var g = f[2], h = f[3];
                d[f[1]] = g.add, h && g.add(function () {
                    c = h
                }, b[1 ^ a][2].disable, b[2][2].lock), e[f[0]] = g.fire, e[f[0] + "With"] = g.fireWith
            }), d.promise(e), a && a.call(e, e), e
        }, when: function (a) {
            var b, c, d, e = 0, f = V.call(arguments), g = f.length, h = 1 !== g || a && $.isFunction(a.promise) ? g : 0, i = 1 === h ? a : $.Deferred(), j = function (a, c, d) {
                return function (e) {
                    c[a] = this, d[a] = arguments.length > 1 ? V.call(arguments) : e, d === b ? i.notifyWith(c, d) : --h || i.resolveWith(c, d)
                }
            };
            if (g > 1)for (b = new Array(g), c = new Array(g), d = new Array(g); g > e; e++)f[e] && $.isFunction(f[e].promise) ? f[e].promise().done(j(e, d, f)).fail(i.reject).progress(j(e, c, b)) : --h;
            return h || i.resolveWith(d, f), i.promise()
        }
    }), $.support = function () {
        var b, c, d, e, f, g, h, i, j, k, l, m = P.createElement("div");
        if (m.setAttribute("className", "t"), m.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", c = m.getElementsByTagName("*"), d = m.getElementsByTagName("a")[0], !c || !d || !c.length)return {};
        e = P.createElement("select"), f = e.appendChild(P.createElement("option")), g = m.getElementsByTagName("input")[0], d.style.cssText = "top:1px;float:left;opacity:.5", b = {
            leadingWhitespace: 3 === m.firstChild.nodeType,
            tbody: !m.getElementsByTagName("tbody").length,
            htmlSerialize: !!m.getElementsByTagName("link").length,
            style: /top/.test(d.getAttribute("style")),
            hrefNormalized: "/a" === d.getAttribute("href"),
            opacity: /^0.5/.test(d.style.opacity),
            cssFloat: !!d.style.cssFloat,
            checkOn: "on" === g.value,
            optSelected: f.selected,
            getSetAttribute: "t" !== m.className,
            enctype: !!P.createElement("form").enctype,
            html5Clone: "<:nav></:nav>" !== P.createElement("nav").cloneNode(!0).outerHTML,
            boxModel: "CSS1Compat" === P.compatMode,
            submitBubbles: !0,
            changeBubbles: !0,
            focusinBubbles: !1,
            deleteExpando: !0,
            noCloneEvent: !0,
            inlineBlockNeedsLayout: !1,
            shrinkWrapBlocks: !1,
            reliableMarginRight: !0,
            boxSizingReliable: !0,
            pixelPosition: !1
        }, g.checked = !0, b.noCloneChecked = g.cloneNode(!0).checked, e.disabled = !0, b.optDisabled = !f.disabled;
        try {
            delete m.test
        } catch (n) {
            b.deleteExpando = !1
        }
        if (!m.addEventListener && m.attachEvent && m.fireEvent && (m.attachEvent("onclick", l = function () {
                b.noCloneEvent = !1
            }), m.cloneNode(!0).fireEvent("onclick"), m.detachEvent("onclick", l)), g = P.createElement("input"), g.value = "t", g.setAttribute("type", "radio"), b.radioValue = "t" === g.value, g.setAttribute("checked", "checked"), g.setAttribute("name", "t"), m.appendChild(g), h = P.createDocumentFragment(), h.appendChild(m.lastChild), b.checkClone = h.cloneNode(!0).cloneNode(!0).lastChild.checked, b.appendChecked = g.checked, h.removeChild(g), h.appendChild(m), m.attachEvent)for (j in{
            submit: !0,
            change: !0,
            focusin: !0
        })i = "on" + j, k = i in m, k || (m.setAttribute(i, "return;"), k = "function" == typeof m[i]), b[j + "Bubbles"] = k;
        return $(function () {
            var c, d, e, f, g = "padding:0;margin:0;border:0;display:block;overflow:hidden;", h = P.getElementsByTagName("body")[0];
            h && (c = P.createElement("div"), c.style.cssText = "visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px", h.insertBefore(c, h.firstChild), d = P.createElement("div"), c.appendChild(d), d.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", e = d.getElementsByTagName("td"), e[0].style.cssText = "padding:0;margin:0;border:0;display:none", k = 0 === e[0].offsetHeight, e[0].style.display = "", e[1].style.display = "none", b.reliableHiddenOffsets = k && 0 === e[0].offsetHeight, d.innerHTML = "", d.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;", b.boxSizing = 4 === d.offsetWidth, b.doesNotIncludeMarginInBodyOffset = 1 !== h.offsetTop, a.getComputedStyle && (b.pixelPosition = "1%" !== (a.getComputedStyle(d, null) || {}).top, b.boxSizingReliable = "4px" === (a.getComputedStyle(d, null) || {width: "4px"}).width, f = P.createElement("div"), f.style.cssText = d.style.cssText = g, f.style.marginRight = f.style.width = "0", d.style.width = "1px", d.appendChild(f), b.reliableMarginRight = !parseFloat((a.getComputedStyle(f, null) || {}).marginRight)), "undefined" != typeof d.style.zoom && (d.innerHTML = "", d.style.cssText = g + "width:1px;padding:1px;display:inline;zoom:1", b.inlineBlockNeedsLayout = 3 === d.offsetWidth, d.style.display = "block", d.style.overflow = "visible", d.innerHTML = "<div></div>", d.firstChild.style.width = "5px", b.shrinkWrapBlocks = 3 !== d.offsetWidth, c.style.zoom = 1), h.removeChild(c), c = d = e = f = null)
        }), h.removeChild(m), c = d = e = f = g = h = m = null, b
    }();
    var pa = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/, qa = /([A-Z])/g;
    $.extend({
        cache: {},
        deletedIds: [],
        uuid: 0,
        expando: "jQuery" + ($.fn.jquery + Math.random()).replace(/\D/g, ""),
        noData: {embed: !0, object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000", applet: !0},
        hasData: function (a) {
            return a = a.nodeType ? $.cache[a[$.expando]] : a[$.expando], !!a && !e(a)
        },
        data: function (a, c, d, e) {
            if ($.acceptData(a)) {
                var f, g, h = $.expando, i = "string" == typeof c, j = a.nodeType, k = j ? $.cache : a, l = j ? a[h] : a[h] && h;
                if (l && k[l] && (e || k[l].data) || !i || d !== b)return l || (j ? a[h] = l = $.deletedIds.pop() || $.guid++ : l = h), k[l] || (k[l] = {}, j || (k[l].toJSON = $.noop)), ("object" == typeof c || "function" == typeof c) && (e ? k[l] = $.extend(k[l], c) : k[l].data = $.extend(k[l].data, c)), f = k[l], e || (f.data || (f.data = {}), f = f.data), d !== b && (f[$.camelCase(c)] = d), i ? (g = f[c], null == g && (g = f[$.camelCase(c)])) : g = f, g
            }
        },
        removeData: function (a, b, c) {
            if ($.acceptData(a)) {
                var d, f, g, h = a.nodeType, i = h ? $.cache : a, j = h ? a[$.expando] : $.expando;
                if (i[j]) {
                    if (b && (d = c ? i[j] : i[j].data)) {
                        $.isArray(b) || (b in d ? b = [b] : (b = $.camelCase(b), b = b in d ? [b] : b.split(" ")));
                        for (f = 0, g = b.length; g > f; f++)delete d[b[f]];
                        if (!(c ? e : $.isEmptyObject)(d))return
                    }
                    (c || (delete i[j].data, e(i[j]))) && (h ? $.cleanData([a], !0) : $.support.deleteExpando || i != i.window ? delete i[j] : i[j] = null)
                }
            }
        },
        _data: function (a, b, c) {
            return $.data(a, b, c, !0)
        },
        acceptData: function (a) {
            var b = a.nodeName && $.noData[a.nodeName.toLowerCase()];
            return !b || b !== !0 && a.getAttribute("classid") === b
        }
    }), $.fn.extend({
        data: function (a, c) {
            var e, f, g, h, i, j = this[0], k = 0, l = null;
            if (a === b) {
                if (this.length && (l = $.data(j), 1 === j.nodeType && !$._data(j, "parsedAttrs"))) {
                    for (g = j.attributes, i = g.length; i > k; k++)h = g[k].name, h.indexOf("data-") || (h = $.camelCase(h.substring(5)), d(j, h, l[h]));
                    $._data(j, "parsedAttrs", !0)
                }
                return l
            }
            return "object" == typeof a ? this.each(function () {
                $.data(this, a)
            }) : (e = a.split(".", 2), e[1] = e[1] ? "." + e[1] : "", f = e[1] + "!", $.access(this, function (c) {
                return c === b ? (l = this.triggerHandler("getData" + f, [e[0]]), l === b && j && (l = $.data(j, a), l = d(j, a, l)), l === b && e[1] ? this.data(e[0]) : l) : (e[1] = c, void this.each(function () {
                    var b = $(this);
                    b.triggerHandler("setData" + f, e), $.data(this, a, c), b.triggerHandler("changeData" + f, e)
                }))
            }, null, c, arguments.length > 1, null, !1))
        }, removeData: function (a) {
            return this.each(function () {
                $.removeData(this, a)
            })
        }
    }), $.extend({
        queue: function (a, b, c) {
            var d;
            return a ? (b = (b || "fx") + "queue", d = $._data(a, b), c && (!d || $.isArray(c) ? d = $._data(a, b, $.makeArray(c)) : d.push(c)), d || []) : void 0
        }, dequeue: function (a, b) {
            b = b || "fx";
            var c = $.queue(a, b), d = c.length, e = c.shift(), f = $._queueHooks(a, b), g = function () {
                $.dequeue(a, b)
            };
            "inprogress" === e && (e = c.shift(), d--), e && ("fx" === b && c.unshift("inprogress"), delete f.stop, e.call(a, g, f)), !d && f && f.empty.fire()
        }, _queueHooks: function (a, b) {
            var c = b + "queueHooks";
            return $._data(a, c) || $._data(a, c, {
                    empty: $.Callbacks("once memory").add(function () {
                        $.removeData(a, b + "queue", !0), $.removeData(a, c, !0)
                    })
                })
        }
    }), $.fn.extend({
        queue: function (a, c) {
            var d = 2;
            return "string" != typeof a && (c = a, a = "fx", d--), arguments.length < d ? $.queue(this[0], a) : c === b ? this : this.each(function () {
                var b = $.queue(this, a, c);
                $._queueHooks(this, a), "fx" === a && "inprogress" !== b[0] && $.dequeue(this, a)
            })
        }, dequeue: function (a) {
            return this.each(function () {
                $.dequeue(this, a)
            })
        }, delay: function (a, b) {
            return a = $.fx ? $.fx.speeds[a] || a : a, b = b || "fx", this.queue(b, function (b, c) {
                var d = setTimeout(b, a);
                c.stop = function () {
                    clearTimeout(d)
                }
            })
        }, clearQueue: function (a) {
            return this.queue(a || "fx", [])
        }, promise: function (a, c) {
            var d, e = 1, f = $.Deferred(), g = this, h = this.length, i = function () {
                --e || f.resolveWith(g, [g])
            };
            for ("string" != typeof a && (c = a, a = b), a = a || "fx"; h--;)d = $._data(g[h], a + "queueHooks"), d && d.empty && (e++, d.empty.add(i));
            return i(), f.promise(c)
        }
    });
    var ra, sa, ta, ua = /[\t\r\n]/g, va = /\r/g, wa = /^(?:button|input)$/i, xa = /^(?:button|input|object|select|textarea)$/i, ya = /^a(?:rea|)$/i, za = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i, Aa = $.support.getSetAttribute;
    $.fn.extend({
        attr: function (a, b) {
            return $.access(this, $.attr, a, b, arguments.length > 1)
        }, removeAttr: function (a) {
            return this.each(function () {
                $.removeAttr(this, a)
            })
        }, prop: function (a, b) {
            return $.access(this, $.prop, a, b, arguments.length > 1)
        }, removeProp: function (a) {
            return a = $.propFix[a] || a, this.each(function () {
                try {
                    this[a] = b, delete this[a]
                } catch (c) {
                }
            })
        }, addClass: function (a) {
            var b, c, d, e, f, g, h;
            if ($.isFunction(a))return this.each(function (b) {
                $(this).addClass(a.call(this, b, this.className))
            });
            if (a && "string" == typeof a)for (b = a.split(ba), c = 0, d = this.length; d > c; c++)if (e = this[c], 1 === e.nodeType)if (e.className || 1 !== b.length) {
                for (f = " " + e.className + " ", g = 0, h = b.length; h > g; g++)f.indexOf(" " + b[g] + " ") < 0 && (f += b[g] + " ");
                e.className = $.trim(f)
            } else e.className = a;
            return this
        }, removeClass: function (a) {
            var c, d, e, f, g, h, i;
            if ($.isFunction(a))return this.each(function (b) {
                $(this).removeClass(a.call(this, b, this.className))
            });
            if (a && "string" == typeof a || a === b)for (c = (a || "").split(ba), h = 0, i = this.length; i > h; h++)if (e = this[h], 1 === e.nodeType && e.className) {
                for (d = (" " + e.className + " ").replace(ua, " "), f = 0, g = c.length; g > f; f++)for (; d.indexOf(" " + c[f] + " ") >= 0;)d = d.replace(" " + c[f] + " ", " ");
                e.className = a ? $.trim(d) : ""
            }
            return this
        }, toggleClass: function (a, b) {
            var c = typeof a, d = "boolean" == typeof b;
            return this.each($.isFunction(a) ? function (c) {
                $(this).toggleClass(a.call(this, c, this.className, b), b)
            } : function () {
                if ("string" === c)for (var e, f = 0, g = $(this), h = b, i = a.split(ba); e = i[f++];)h = d ? h : !g.hasClass(e), g[h ? "addClass" : "removeClass"](e); else("undefined" === c || "boolean" === c) && (this.className && $._data(this, "__className__", this.className), this.className = this.className || a === !1 ? "" : $._data(this, "__className__") || "")
            })
        }, hasClass: function (a) {
            for (var b = " " + a + " ", c = 0, d = this.length; d > c; c++)if (1 === this[c].nodeType && (" " + this[c].className + " ").replace(ua, " ").indexOf(b) >= 0)return !0;
            return !1
        }, val: function (a) {
            var c, d, e, f = this[0];
            {
                if (arguments.length)return e = $.isFunction(a), this.each(function (d) {
                    var f, g = $(this);
                    1 === this.nodeType && (f = e ? a.call(this, d, g.val()) : a, null == f ? f = "" : "number" == typeof f ? f += "" : $.isArray(f) && (f = $.map(f, function (a) {
                        return null == a ? "" : a + ""
                    })), c = $.valHooks[this.type] || $.valHooks[this.nodeName.toLowerCase()], c && "set"in c && c.set(this, f, "value") !== b || (this.value = f))
                });
                if (f)return c = $.valHooks[f.type] || $.valHooks[f.nodeName.toLowerCase()], c && "get"in c && (d = c.get(f, "value")) !== b ? d : (d = f.value, "string" == typeof d ? d.replace(va, "") : null == d ? "" : d)
            }
        }
    }), $.extend({
        valHooks: {
            option: {
                get: function (a) {
                    var b = a.attributes.value;
                    return !b || b.specified ? a.value : a.text
                }
            }, select: {
                get: function (a) {
                    for (var b, c, d = a.options, e = a.selectedIndex, f = "select-one" === a.type || 0 > e, g = f ? null : [], h = f ? e + 1 : d.length, i = 0 > e ? h : f ? e : 0; h > i; i++)if (c = d[i], !(!c.selected && i !== e || ($.support.optDisabled ? c.disabled : null !== c.getAttribute("disabled")) || c.parentNode.disabled && $.nodeName(c.parentNode, "optgroup"))) {
                        if (b = $(c).val(), f)return b;
                        g.push(b)
                    }
                    return g
                }, set: function (a, b) {
                    var c = $.makeArray(b);
                    return $(a).find("option").each(function () {
                        this.selected = $.inArray($(this).val(), c) >= 0
                    }), c.length || (a.selectedIndex = -1), c
                }
            }
        },
        attrFn: {},
        attr: function (a, c, d, e) {
            var f, g, h, i = a.nodeType;
            if (a && 3 !== i && 8 !== i && 2 !== i)return e && $.isFunction($.fn[c]) ? $(a)[c](d) : "undefined" == typeof a.getAttribute ? $.prop(a, c, d) : (h = 1 !== i || !$.isXMLDoc(a), h && (c = c.toLowerCase(), g = $.attrHooks[c] || (za.test(c) ? sa : ra)), d !== b ? null === d ? void $.removeAttr(a, c) : g && "set"in g && h && (f = g.set(a, d, c)) !== b ? f : (a.setAttribute(c, d + ""), d) : g && "get"in g && h && null !== (f = g.get(a, c)) ? f : (f = a.getAttribute(c), null === f ? b : f))
        },
        removeAttr: function (a, b) {
            var c, d, e, f, g = 0;
            if (b && 1 === a.nodeType)for (d = b.split(ba); g < d.length; g++)e = d[g], e && (c = $.propFix[e] || e, f = za.test(e), f || $.attr(a, e, ""), a.removeAttribute(Aa ? e : c), f && c in a && (a[c] = !1))
        },
        attrHooks: {
            type: {
                set: function (a, b) {
                    if (wa.test(a.nodeName) && a.parentNode)$.error("type property can't be changed"); else if (!$.support.radioValue && "radio" === b && $.nodeName(a, "input")) {
                        var c = a.value;
                        return a.setAttribute("type", b), c && (a.value = c), b
                    }
                }
            }, value: {
                get: function (a, b) {
                    return ra && $.nodeName(a, "button") ? ra.get(a, b) : b in a ? a.value : null
                }, set: function (a, b, c) {
                    return ra && $.nodeName(a, "button") ? ra.set(a, b, c) : void(a.value = b)
                }
            }
        },
        propFix: {
            tabindex: "tabIndex",
            readonly: "readOnly",
            "for": "htmlFor",
            "class": "className",
            maxlength: "maxLength",
            cellspacing: "cellSpacing",
            cellpadding: "cellPadding",
            rowspan: "rowSpan",
            colspan: "colSpan",
            usemap: "useMap",
            frameborder: "frameBorder",
            contenteditable: "contentEditable"
        },
        prop: function (a, c, d) {
            var e, f, g, h = a.nodeType;
            if (a && 3 !== h && 8 !== h && 2 !== h)return g = 1 !== h || !$.isXMLDoc(a), g && (c = $.propFix[c] || c, f = $.propHooks[c]), d !== b ? f && "set"in f && (e = f.set(a, d, c)) !== b ? e : a[c] = d : f && "get"in f && null !== (e = f.get(a, c)) ? e : a[c]
        },
        propHooks: {
            tabIndex: {
                get: function (a) {
                    var c = a.getAttributeNode("tabindex");
                    return c && c.specified ? parseInt(c.value, 10) : xa.test(a.nodeName) || ya.test(a.nodeName) && a.href ? 0 : b
                }
            }
        }
    }), sa = {
        get: function (a, c) {
            var d, e = $.prop(a, c);
            return e === !0 || "boolean" != typeof e && (d = a.getAttributeNode(c)) && d.nodeValue !== !1 ? c.toLowerCase() : b
        }, set: function (a, b, c) {
            var d;
            return b === !1 ? $.removeAttr(a, c) : (d = $.propFix[c] || c, d in a && (a[d] = !0), a.setAttribute(c, c.toLowerCase())), c
        }
    }, Aa || (ta = {name: !0, id: !0, coords: !0}, ra = $.valHooks.button = {
        get: function (a, c) {
            var d;
            return d = a.getAttributeNode(c), d && (ta[c] ? "" !== d.value : d.specified) ? d.value : b;

        }, set: function (a, b, c) {
            var d = a.getAttributeNode(c);
            return d || (d = P.createAttribute(c), a.setAttributeNode(d)), d.value = b + ""
        }
    }, $.each(["width", "height"], function (a, b) {
        $.attrHooks[b] = $.extend($.attrHooks[b], {
            set: function (a, c) {
                return "" === c ? (a.setAttribute(b, "auto"), c) : void 0
            }
        })
    }), $.attrHooks.contenteditable = {
        get: ra.get, set: function (a, b, c) {
            "" === b && (b = "false"), ra.set(a, b, c)
        }
    }), $.support.hrefNormalized || $.each(["href", "src", "width", "height"], function (a, c) {
        $.attrHooks[c] = $.extend($.attrHooks[c], {
            get: function (a) {
                var d = a.getAttribute(c, 2);
                return null === d ? b : d
            }
        })
    }), $.support.style || ($.attrHooks.style = {
        get: function (a) {
            return a.style.cssText.toLowerCase() || b
        }, set: function (a, b) {
            return a.style.cssText = b + ""
        }
    }), $.support.optSelected || ($.propHooks.selected = $.extend($.propHooks.selected, {
        get: function (a) {
            var b = a.parentNode;
            return b && (b.selectedIndex, b.parentNode && b.parentNode.selectedIndex), null
        }
    })), $.support.enctype || ($.propFix.enctype = "encoding"), $.support.checkOn || $.each(["radio", "checkbox"], function () {
        $.valHooks[this] = {
            get: function (a) {
                return null === a.getAttribute("value") ? "on" : a.value
            }
        }
    }), $.each(["radio", "checkbox"], function () {
        $.valHooks[this] = $.extend($.valHooks[this], {
            set: function (a, b) {
                return $.isArray(b) ? a.checked = $.inArray($(a).val(), b) >= 0 : void 0
            }
        })
    });
    var Ba = /^(?:textarea|input|select)$/i, Ca = /^([^\.]*|)(?:\.(.+)|)$/, Da = /(?:^|\s)hover(\.\S+|)\b/, Ea = /^key/, Fa = /^(?:mouse|contextmenu)|click/, Ga = /^(?:focusinfocus|focusoutblur)$/, Ha = function (a) {
        return $.event.special.hover ? a : a.replace(Da, "mouseenter$1 mouseleave$1")
    };
    $.event = {
        add: function (a, c, d, e, f) {
            var g, h, i, j, k, l, m, n, o, p, q;
            if (3 !== a.nodeType && 8 !== a.nodeType && c && d && (g = $._data(a))) {
                for (d.handler && (o = d, d = o.handler, f = o.selector), d.guid || (d.guid = $.guid++), i = g.events, i || (g.events = i = {}), h = g.handle, h || (g.handle = h = function (a) {
                    return "undefined" == typeof $ || a && $.event.triggered === a.type ? b : $.event.dispatch.apply(h.elem, arguments)
                }, h.elem = a), c = $.trim(Ha(c)).split(" "), j = 0; j < c.length; j++)k = Ca.exec(c[j]) || [], l = k[1], m = (k[2] || "").split(".").sort(), q = $.event.special[l] || {}, l = (f ? q.delegateType : q.bindType) || l, q = $.event.special[l] || {}, n = $.extend({
                    type: l,
                    origType: k[1],
                    data: e,
                    handler: d,
                    guid: d.guid,
                    selector: f,
                    needsContext: f && $.expr.match.needsContext.test(f),
                    namespace: m.join(".")
                }, o), p = i[l], p || (p = i[l] = [], p.delegateCount = 0, q.setup && q.setup.call(a, e, m, h) !== !1 || (a.addEventListener ? a.addEventListener(l, h, !1) : a.attachEvent && a.attachEvent("on" + l, h))), q.add && (q.add.call(a, n), n.handler.guid || (n.handler.guid = d.guid)), f ? p.splice(p.delegateCount++, 0, n) : p.push(n), $.event.global[l] = !0;
                a = null
            }
        },
        global: {},
        remove: function (a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q = $.hasData(a) && $._data(a);
            if (q && (m = q.events)) {
                for (b = $.trim(Ha(b || "")).split(" "), f = 0; f < b.length; f++)if (g = Ca.exec(b[f]) || [], h = i = g[1], j = g[2], h) {
                    for (n = $.event.special[h] || {}, h = (d ? n.delegateType : n.bindType) || h, o = m[h] || [], k = o.length, j = j ? new RegExp("(^|\\.)" + j.split(".").sort().join("\\.(?:.*\\.|)") + "(\\.|$)") : null, l = 0; l < o.length; l++)p = o[l], !(!e && i !== p.origType || c && c.guid !== p.guid || j && !j.test(p.namespace) || d && d !== p.selector && ("**" !== d || !p.selector) || (o.splice(l--, 1), p.selector && o.delegateCount--, !n.remove || !n.remove.call(a, p)));
                    0 === o.length && k !== o.length && ((!n.teardown || n.teardown.call(a, j, q.handle) === !1) && $.removeEvent(a, h, q.handle), delete m[h])
                } else for (h in m)$.event.remove(a, h + b[f], c, d, !0);
                $.isEmptyObject(m) && (delete q.handle, $.removeData(a, "events", !0))
            }
        },
        customEvent: {getData: !0, setData: !0, changeData: !0},
        trigger: function (c, d, e, f) {
            if (!e || 3 !== e.nodeType && 8 !== e.nodeType) {
                var g, h, i, j, k, l, m, n, o, p, q = c.type || c, r = [];
                if (Ga.test(q + $.event.triggered))return;
                if (q.indexOf("!") >= 0 && (q = q.slice(0, -1), h = !0), q.indexOf(".") >= 0 && (r = q.split("."), q = r.shift(), r.sort()), (!e || $.event.customEvent[q]) && !$.event.global[q])return;
                if (c = "object" == typeof c ? c[$.expando] ? c : new $.Event(q, c) : new $.Event(q), c.type = q, c.isTrigger = !0, c.exclusive = h, c.namespace = r.join("."), c.namespace_re = c.namespace ? new RegExp("(^|\\.)" + r.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, l = q.indexOf(":") < 0 ? "on" + q : "", !e) {
                    g = $.cache;
                    for (i in g)g[i].events && g[i].events[q] && $.event.trigger(c, d, g[i].handle.elem, !0);
                    return
                }
                if (c.result = b, c.target || (c.target = e), d = null != d ? $.makeArray(d) : [], d.unshift(c), m = $.event.special[q] || {}, m.trigger && m.trigger.apply(e, d) === !1)return;
                if (o = [[e, m.bindType || q]], !f && !m.noBubble && !$.isWindow(e)) {
                    for (p = m.delegateType || q, j = Ga.test(p + q) ? e : e.parentNode, k = e; j; j = j.parentNode)o.push([j, p]), k = j;
                    k === (e.ownerDocument || P) && o.push([k.defaultView || k.parentWindow || a, p])
                }
                for (i = 0; i < o.length && !c.isPropagationStopped(); i++)j = o[i][0], c.type = o[i][1], n = ($._data(j, "events") || {})[c.type] && $._data(j, "handle"), n && n.apply(j, d), n = l && j[l], n && $.acceptData(j) && n.apply && n.apply(j, d) === !1 && c.preventDefault();
                return c.type = q, !(f || c.isDefaultPrevented() || m._default && m._default.apply(e.ownerDocument, d) !== !1 || "click" === q && $.nodeName(e, "a") || !$.acceptData(e) || !l || !e[q] || ("focus" === q || "blur" === q) && 0 === c.target.offsetWidth || $.isWindow(e) || (k = e[l], k && (e[l] = null), $.event.triggered = q, e[q](), $.event.triggered = b, !k || !(e[l] = k))), c.result
            }
        },
        dispatch: function (c) {
            c = $.event.fix(c || a.event);
            var d, e, f, g, h, i, j, k, l, m = ($._data(this, "events") || {})[c.type] || [], n = m.delegateCount, o = V.call(arguments), p = !c.exclusive && !c.namespace, q = $.event.special[c.type] || {}, r = [];
            if (o[0] = c, c.delegateTarget = this, !q.preDispatch || q.preDispatch.call(this, c) !== !1) {
                if (n && (!c.button || "click" !== c.type))for (f = c.target; f != this; f = f.parentNode || this)if (f.disabled !== !0 || "click" !== c.type) {
                    for (h = {}, j = [], d = 0; n > d; d++)k = m[d], l = k.selector, h[l] === b && (h[l] = k.needsContext ? $(l, this).index(f) >= 0 : $.find(l, this, null, [f]).length), h[l] && j.push(k);
                    j.length && r.push({elem: f, matches: j})
                }
                for (m.length > n && r.push({
                    elem: this,
                    matches: m.slice(n)
                }), d = 0; d < r.length && !c.isPropagationStopped(); d++)for (i = r[d], c.currentTarget = i.elem, e = 0; e < i.matches.length && !c.isImmediatePropagationStopped(); e++)k = i.matches[e], (p || !c.namespace && !k.namespace || c.namespace_re && c.namespace_re.test(k.namespace)) && (c.data = k.data, c.handleObj = k, g = (($.event.special[k.origType] || {}).handle || k.handler).apply(i.elem, o), g !== b && (c.result = g, g === !1 && (c.preventDefault(), c.stopPropagation())));
                return q.postDispatch && q.postDispatch.call(this, c), c.result
            }
        },
        props: "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "), filter: function (a, b) {
                return null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode), a
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function (a, c) {
                var d, e, f, g = c.button, h = c.fromElement;
                return null == a.pageX && null != c.clientX && (d = a.target.ownerDocument || P, e = d.documentElement, f = d.body, a.pageX = c.clientX + (e && e.scrollLeft || f && f.scrollLeft || 0) - (e && e.clientLeft || f && f.clientLeft || 0), a.pageY = c.clientY + (e && e.scrollTop || f && f.scrollTop || 0) - (e && e.clientTop || f && f.clientTop || 0)), !a.relatedTarget && h && (a.relatedTarget = h === a.target ? c.toElement : h), !a.which && g !== b && (a.which = 1 & g ? 1 : 2 & g ? 3 : 4 & g ? 2 : 0), a
            }
        },
        fix: function (a) {
            if (a[$.expando])return a;
            var b, c, d = a, e = $.event.fixHooks[a.type] || {}, f = e.props ? this.props.concat(e.props) : this.props;
            for (a = $.Event(d), b = f.length; b;)c = f[--b], a[c] = d[c];
            return a.target || (a.target = d.srcElement || P), 3 === a.target.nodeType && (a.target = a.target.parentNode), a.metaKey = !!a.metaKey, e.filter ? e.filter(a, d) : a
        },
        special: {
            load: {noBubble: !0},
            focus: {delegateType: "focusin"},
            blur: {delegateType: "focusout"},
            beforeunload: {
                setup: function (a, b, c) {
                    $.isWindow(this) && (this.onbeforeunload = c)
                }, teardown: function (a, b) {
                    this.onbeforeunload === b && (this.onbeforeunload = null)
                }
            }
        },
        simulate: function (a, b, c, d) {
            var e = $.extend(new $.Event, c, {type: a, isSimulated: !0, originalEvent: {}});
            d ? $.event.trigger(e, null, b) : $.event.dispatch.call(b, e), e.isDefaultPrevented() && c.preventDefault()
        }
    }, $.event.handle = $.event.dispatch, $.removeEvent = P.removeEventListener ? function (a, b, c) {
        a.removeEventListener && a.removeEventListener(b, c, !1)
    } : function (a, b, c) {
        var d = "on" + b;
        a.detachEvent && ("undefined" == typeof a[d] && (a[d] = null), a.detachEvent(d, c))
    }, $.Event = function (a, b) {
        return this instanceof $.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || a.returnValue === !1 || a.getPreventDefault && a.getPreventDefault() ? g : f) : this.type = a, b && $.extend(this, b), this.timeStamp = a && a.timeStamp || $.now(), this[$.expando] = !0, void 0) : new $.Event(a, b)
    }, $.Event.prototype = {
        preventDefault: function () {
            this.isDefaultPrevented = g;
            var a = this.originalEvent;
            a && (a.preventDefault ? a.preventDefault() : a.returnValue = !1)
        }, stopPropagation: function () {
            this.isPropagationStopped = g;
            var a = this.originalEvent;
            a && (a.stopPropagation && a.stopPropagation(), a.cancelBubble = !0)
        }, stopImmediatePropagation: function () {
            this.isImmediatePropagationStopped = g, this.stopPropagation()
        }, isDefaultPrevented: f, isPropagationStopped: f, isImmediatePropagationStopped: f
    }, $.each({mouseenter: "mouseover", mouseleave: "mouseout"}, function (a, b) {
        $.event.special[a] = {
            delegateType: b, bindType: b, handle: function (a) {
                {
                    var c, d = this, e = a.relatedTarget, f = a.handleObj;
                    f.selector
                }
                return (!e || e !== d && !$.contains(d, e)) && (a.type = f.origType, c = f.handler.apply(this, arguments), a.type = b), c
            }
        }
    }), $.support.submitBubbles || ($.event.special.submit = {
        setup: function () {
            return $.nodeName(this, "form") ? !1 : void $.event.add(this, "click._submit keypress._submit", function (a) {
                var c = a.target, d = $.nodeName(c, "input") || $.nodeName(c, "button") ? c.form : b;
                d && !$._data(d, "_submit_attached") && ($.event.add(d, "submit._submit", function (a) {
                    a._submit_bubble = !0
                }), $._data(d, "_submit_attached", !0))
            })
        }, postDispatch: function (a) {
            a._submit_bubble && (delete a._submit_bubble, this.parentNode && !a.isTrigger && $.event.simulate("submit", this.parentNode, a, !0))
        }, teardown: function () {
            return $.nodeName(this, "form") ? !1 : void $.event.remove(this, "._submit")
        }
    }), $.support.changeBubbles || ($.event.special.change = {
        setup: function () {
            return Ba.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && ($.event.add(this, "propertychange._change", function (a) {
                "checked" === a.originalEvent.propertyName && (this._just_changed = !0)
            }), $.event.add(this, "click._change", function (a) {
                this._just_changed && !a.isTrigger && (this._just_changed = !1), $.event.simulate("change", this, a, !0)
            })), !1) : void $.event.add(this, "beforeactivate._change", function (a) {
                var b = a.target;
                Ba.test(b.nodeName) && !$._data(b, "_change_attached") && ($.event.add(b, "change._change", function (a) {
                    this.parentNode && !a.isSimulated && !a.isTrigger && $.event.simulate("change", this.parentNode, a, !0)
                }), $._data(b, "_change_attached", !0))
            })
        }, handle: function (a) {
            var b = a.target;
            return this !== b || a.isSimulated || a.isTrigger || "radio" !== b.type && "checkbox" !== b.type ? a.handleObj.handler.apply(this, arguments) : void 0
        }, teardown: function () {
            return $.event.remove(this, "._change"), !Ba.test(this.nodeName)
        }
    }), $.support.focusinBubbles || $.each({focus: "focusin", blur: "focusout"}, function (a, b) {
        var c = 0, d = function (a) {
            $.event.simulate(b, a.target, $.event.fix(a), !0)
        };
        $.event.special[b] = {
            setup: function () {
                0 === c++ && P.addEventListener(a, d, !0)
            }, teardown: function () {
                0 === --c && P.removeEventListener(a, d, !0)
            }
        }
    }), $.fn.extend({
        on: function (a, c, d, e, g) {
            var h, i;
            if ("object" == typeof a) {
                "string" != typeof c && (d = d || c, c = b);
                for (i in a)this.on(i, c, d, a[i], g);
                return this
            }
            if (null == d && null == e ? (e = c, d = c = b) : null == e && ("string" == typeof c ? (e = d, d = b) : (e = d, d = c, c = b)), e === !1)e = f; else if (!e)return this;
            return 1 === g && (h = e, e = function (a) {
                return $().off(a), h.apply(this, arguments)
            }, e.guid = h.guid || (h.guid = $.guid++)), this.each(function () {
                $.event.add(this, a, e, d, c)
            })
        }, one: function (a, b, c, d) {
            return this.on(a, b, c, d, 1)
        }, off: function (a, c, d) {
            var e, g;
            if (a && a.preventDefault && a.handleObj)return e = a.handleObj, $(a.delegateTarget).off(e.namespace ? e.origType + "." + e.namespace : e.origType, e.selector, e.handler), this;
            if ("object" == typeof a) {
                for (g in a)this.off(g, c, a[g]);
                return this
            }
            return (c === !1 || "function" == typeof c) && (d = c, c = b), d === !1 && (d = f), this.each(function () {
                $.event.remove(this, a, d, c)
            })
        }, bind: function (a, b, c) {
            return this.on(a, null, b, c)
        }, unbind: function (a, b) {
            return this.off(a, null, b)
        }, live: function (a, b, c) {
            return $(this.context).on(a, this.selector, b, c), this
        }, die: function (a, b) {
            return $(this.context).off(a, this.selector || "**", b), this
        }, delegate: function (a, b, c, d) {
            return this.on(b, a, c, d)
        }, undelegate: function (a, b, c) {
            return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c)
        }, trigger: function (a, b) {
            return this.each(function () {
                $.event.trigger(a, b, this)
            })
        }, triggerHandler: function (a, b) {
            return this[0] ? $.event.trigger(a, b, this[0], !0) : void 0
        }, toggle: function (a) {
            var b = arguments, c = a.guid || $.guid++, d = 0, e = function (c) {
                var e = ($._data(this, "lastToggle" + a.guid) || 0) % d;
                return $._data(this, "lastToggle" + a.guid, e + 1), c.preventDefault(), b[e].apply(this, arguments) || !1
            };
            for (e.guid = c; d < b.length;)b[d++].guid = c;
            return this.click(e)
        }, hover: function (a, b) {
            return this.mouseenter(a).mouseleave(b || a)
        }
    }), $.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (a, b) {
        $.fn[b] = function (a, c) {
            return null == c && (c = a, a = null), arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b)
        }, Ea.test(b) && ($.event.fixHooks[b] = $.event.keyHooks), Fa.test(b) && ($.event.fixHooks[b] = $.event.mouseHooks)
    }), function (a, b) {
        function c(a, b, c, d) {
            c = c || [], b = b || F;
            var e, f, g, h, i = b.nodeType;
            if (!a || "string" != typeof a)return c;
            if (1 !== i && 9 !== i)return [];
            if (g = v(b), !g && !d && (e = ca.exec(a)))if (h = e[1]) {
                if (9 === i) {
                    if (f = b.getElementById(h), !f || !f.parentNode)return c;
                    if (f.id === h)return c.push(f), c
                } else if (b.ownerDocument && (f = b.ownerDocument.getElementById(h)) && w(b, f) && f.id === h)return c.push(f), c
            } else {
                if (e[2])return K.apply(c, L.call(b.getElementsByTagName(a), 0)), c;
                if ((h = e[3]) && ma && b.getElementsByClassName)return K.apply(c, L.call(b.getElementsByClassName(h), 0)), c
            }
            return p(a.replace(Z, "$1"), b, c, d, g)
        }

        function d(a) {
            return function (b) {
                var c = b.nodeName.toLowerCase();
                return "input" === c && b.type === a
            }
        }

        function e(a) {
            return function (b) {
                var c = b.nodeName.toLowerCase();
                return ("input" === c || "button" === c) && b.type === a
            }
        }

        function f(a) {
            return N(function (b) {
                return b = +b, N(function (c, d) {
                    for (var e, f = a([], c.length, b), g = f.length; g--;)c[e = f[g]] && (c[e] = !(d[e] = c[e]))
                })
            })
        }

        function g(a, b, c) {
            if (a === b)return c;
            for (var d = a.nextSibling; d;) {
                if (d === b)return -1;
                d = d.nextSibling
            }
            return 1
        }

        function h(a, b) {
            var d, e, f, g, h, i, j, k = Q[D][a + " "];
            if (k)return b ? 0 : k.slice(0);
            for (h = a, i = [], j = t.preFilter; h;) {
                (!d || (e = _.exec(h))) && (e && (h = h.slice(e[0].length) || h), i.push(f = [])), d = !1, (e = aa.exec(h)) && (f.push(d = new E(e.shift())), h = h.slice(d.length), d.type = e[0].replace(Z, " "));
                for (g in t.filter)(e = ha[g].exec(h)) && (!j[g] || (e = j[g](e))) && (f.push(d = new E(e.shift())), h = h.slice(d.length), d.type = g, d.matches = e);
                if (!d)break
            }
            return b ? h.length : h ? c.error(a) : Q(a, i).slice(0)
        }

        function i(a, b, c) {
            var d = b.dir, e = c && "parentNode" === b.dir, f = I++;
            return b.first ? function (b, c, f) {
                for (; b = b[d];)if (e || 1 === b.nodeType)return a(b, c, f)
            } : function (b, c, g) {
                if (g) {
                    for (; b = b[d];)if ((e || 1 === b.nodeType) && a(b, c, g))return b
                } else for (var h, i = H + " " + f + " ", j = i + r; b = b[d];)if (e || 1 === b.nodeType) {
                    if ((h = b[D]) === j)return b.sizset;
                    if ("string" == typeof h && 0 === h.indexOf(i)) {
                        if (b.sizset)return b
                    } else {
                        if (b[D] = j, a(b, c, g))return b.sizset = !0, b;
                        b.sizset = !1
                    }
                }
            }
        }

        function j(a) {
            return a.length > 1 ? function (b, c, d) {
                for (var e = a.length; e--;)if (!a[e](b, c, d))return !1;
                return !0
            } : a[0]
        }

        function k(a, b, c, d, e) {
            for (var f, g = [], h = 0, i = a.length, j = null != b; i > h; h++)(f = a[h]) && (!c || c(f, d, e)) && (g.push(f), j && b.push(h));
            return g
        }

        function l(a, b, c, d, e, f) {
            return d && !d[D] && (d = l(d)), e && !e[D] && (e = l(e, f)), N(function (f, g, h, i) {
                var j, l, m, n = [], p = [], q = g.length, r = f || o(b || "*", h.nodeType ? [h] : h, []), s = !a || !f && b ? r : k(r, n, a, h, i), t = c ? e || (f ? a : q || d) ? [] : g : s;
                if (c && c(s, t, h, i), d)for (j = k(t, p), d(j, [], h, i), l = j.length; l--;)(m = j[l]) && (t[p[l]] = !(s[p[l]] = m));
                if (f) {
                    if (e || a) {
                        if (e) {
                            for (j = [], l = t.length; l--;)(m = t[l]) && j.push(s[l] = m);
                            e(null, t = [], j, i)
                        }
                        for (l = t.length; l--;)(m = t[l]) && (j = e ? M.call(f, m) : n[l]) > -1 && (f[j] = !(g[j] = m))
                    }
                } else t = k(t === g ? t.splice(q, t.length) : t), e ? e(null, g, t, i) : K.apply(g, t)
            })
        }

        function m(a) {
            for (var b, c, d, e = a.length, f = t.relative[a[0].type], g = f || t.relative[" "], h = f ? 1 : 0, k = i(function (a) {
                return a === b
            }, g, !0), n = i(function (a) {
                return M.call(b, a) > -1
            }, g, !0), o = [function (a, c, d) {
                return !f && (d || c !== A) || ((b = c).nodeType ? k(a, c, d) : n(a, c, d))
            }]; e > h; h++)if (c = t.relative[a[h].type])o = [i(j(o), c)]; else {
                if (c = t.filter[a[h].type].apply(null, a[h].matches), c[D]) {
                    for (d = ++h; e > d && !t.relative[a[d].type]; d++);
                    return l(h > 1 && j(o), h > 1 && a.slice(0, h - 1).join("").replace(Z, "$1"), c, d > h && m(a.slice(h, d)), e > d && m(a = a.slice(d)), e > d && a.join(""))
                }
                o.push(c)
            }
            return j(o)
        }

        function n(a, b) {
            var d = b.length > 0, e = a.length > 0, f = function (g, h, i, j, l) {
                var m, n, o, p = [], q = 0, s = "0", u = g && [], v = null != l, w = A, x = g || e && t.find.TAG("*", l && h.parentNode || h), y = H += null == w ? 1 : Math.E;
                for (v && (A = h !== F && h, r = f.el); null != (m = x[s]); s++) {
                    if (e && m) {
                        for (n = 0; o = a[n]; n++)if (o(m, h, i)) {
                            j.push(m);
                            break
                        }
                        v && (H = y, r = ++f.el)
                    }
                    d && ((m = !o && m) && q--, g && u.push(m))
                }
                if (q += s, d && s !== q) {
                    for (n = 0; o = b[n]; n++)o(u, p, h, i);
                    if (g) {
                        if (q > 0)for (; s--;)!u[s] && !p[s] && (p[s] = J.call(j));
                        p = k(p)
                    }
                    K.apply(j, p), v && !g && p.length > 0 && q + b.length > 1 && c.uniqueSort(j)
                }
                return v && (H = y, A = w), u
            };
            return f.el = 0, d ? N(f) : f
        }

        function o(a, b, d) {
            for (var e = 0, f = b.length; f > e; e++)c(a, b[e], d);
            return d
        }

        function p(a, b, c, d, e) {
            {
                var f, g, i, j, k, l = h(a);
                l.length
            }
            if (!d && 1 === l.length) {
                if (g = l[0] = l[0].slice(0), g.length > 2 && "ID" === (i = g[0]).type && 9 === b.nodeType && !e && t.relative[g[1].type]) {
                    if (b = t.find.ID(i.matches[0].replace(ga, ""), b, e)[0], !b)return c;
                    a = a.slice(g.shift().length)
                }
                for (f = ha.POS.test(a) ? -1 : g.length - 1; f >= 0 && (i = g[f], !t.relative[j = i.type]); f--)if ((k = t.find[j]) && (d = k(i.matches[0].replace(ga, ""), da.test(g[0].type) && b.parentNode || b, e))) {
                    if (g.splice(f, 1), a = d.length && g.join(""), !a)return K.apply(c, L.call(d, 0)), c;
                    break
                }
            }
            return x(a, l)(d, b, e, c, da.test(a)), c
        }

        function q() {
        }

        var r, s, t, u, v, w, x, y, z, A, B = !0, C = "undefined", D = ("sizcache" + Math.random()).replace(".", ""), E = String, F = a.document, G = F.documentElement, H = 0, I = 0, J = [].pop, K = [].push, L = [].slice, M = [].indexOf || function (a) {
                for (var b = 0, c = this.length; c > b; b++)if (this[b] === a)return b;
                return -1
            }, N = function (a, b) {
            return a[D] = null == b || b, a
        }, O = function () {
            var a = {}, b = [];
            return N(function (c, d) {
                return b.push(c) > t.cacheLength && delete a[b.shift()], a[c + " "] = d
            }, a)
        }, P = O(), Q = O(), R = O(), S = "[\\x20\\t\\r\\n\\f]", T = "(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+", U = T.replace("w", "w#"), V = "([*^$|!~]?=)", W = "\\[" + S + "*(" + T + ")" + S + "*(?:" + V + S + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + U + ")|)|)" + S + "*\\]", X = ":(" + T + ")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:" + W + ")|[^:]|\\\\.)*|.*))\\)|)", Y = ":(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + S + "*((?:-\\d)?\\d*)" + S + "*\\)|)(?=[^-]|$)", Z = new RegExp("^" + S + "+|((?:^|[^\\\\])(?:\\\\.)*)" + S + "+$", "g"), _ = new RegExp("^" + S + "*," + S + "*"), aa = new RegExp("^" + S + "*([\\x20\\t\\r\\n\\f>+~])" + S + "*"), ba = new RegExp(X), ca = /^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/, da = /[\x20\t\r\n\f]*[+~]/, ea = /h\d/i, fa = /input|select|textarea|button/i, ga = /\\(?!\\)/g, ha = {
            ID: new RegExp("^#(" + T + ")"),
            CLASS: new RegExp("^\\.(" + T + ")"),
            NAME: new RegExp("^\\[name=['\"]?(" + T + ")['\"]?\\]"),
            TAG: new RegExp("^(" + T.replace("w", "w*") + ")"),
            ATTR: new RegExp("^" + W),
            PSEUDO: new RegExp("^" + X),
            POS: new RegExp(Y, "i"),
            CHILD: new RegExp("^:(only|nth|first|last)-child(?:\\(" + S + "*(even|odd|(([+-]|)(\\d*)n|)" + S + "*(?:([+-]|)" + S + "*(\\d+)|))" + S + "*\\)|)", "i"),
            needsContext: new RegExp("^" + S + "*[>+~]|" + Y, "i")
        }, ia = function (a) {
            var b = F.createElement("div");
            try {
                return a(b)
            } catch (c) {
                return !1
            } finally {
                b = null
            }
        }, ja = ia(function (a) {
            return a.appendChild(F.createComment("")), !a.getElementsByTagName("*").length
        }), ka = ia(function (a) {
            return a.innerHTML = "<a href='#'></a>", a.firstChild && typeof a.firstChild.getAttribute !== C && "#" === a.firstChild.getAttribute("href")
        }), la = ia(function (a) {
            a.innerHTML = "<select></select>";
            var b = typeof a.lastChild.getAttribute("multiple");
            return "boolean" !== b && "string" !== b
        }), ma = ia(function (a) {
            return a.innerHTML = "<div class='hidden e'></div><div class='hidden'></div>", a.getElementsByClassName && a.getElementsByClassName("e").length ? (a.lastChild.className = "e", 2 === a.getElementsByClassName("e").length) : !1
        }), na = ia(function (a) {
            a.id = D + 0, a.innerHTML = "<a name='" + D + "'></a><div name='" + D + "'></div>", G.insertBefore(a, G.firstChild);
            var b = F.getElementsByName && F.getElementsByName(D).length === 2 + F.getElementsByName(D + 0).length;
            return s = !F.getElementById(D), G.removeChild(a), b
        });
        try {
            L.call(G.childNodes, 0)[0].nodeType
        } catch (oa) {
            L = function (a) {
                for (var b, c = []; b = this[a]; a++)c.push(b);
                return c
            }
        }
        c.matches = function (a, b) {
            return c(a, null, null, b)
        }, c.matchesSelector = function (a, b) {
            return c(b, null, null, [a]).length > 0
        }, u = c.getText = function (a) {
            var b, c = "", d = 0, e = a.nodeType;
            if (e) {
                if (1 === e || 9 === e || 11 === e) {
                    if ("string" == typeof a.textContent)return a.textContent;
                    for (a = a.firstChild; a; a = a.nextSibling)c += u(a)
                } else if (3 === e || 4 === e)return a.nodeValue
            } else for (; b = a[d]; d++)c += u(b);
            return c
        }, v = c.isXML = function (a) {
            var b = a && (a.ownerDocument || a).documentElement;
            return b ? "HTML" !== b.nodeName : !1
        }, w = c.contains = G.contains ? function (a, b) {
            var c = 9 === a.nodeType ? a.documentElement : a, d = b && b.parentNode;
            return a === d || !!(d && 1 === d.nodeType && c.contains && c.contains(d))
        } : G.compareDocumentPosition ? function (a, b) {
            return b && !!(16 & a.compareDocumentPosition(b))
        } : function (a, b) {
            for (; b = b.parentNode;)if (b === a)return !0;
            return !1
        }, c.attr = function (a, b) {
            var c, d = v(a);
            return d || (b = b.toLowerCase()), (c = t.attrHandle[b]) ? c(a) : d || la ? a.getAttribute(b) : (c = a.getAttributeNode(b), c ? "boolean" == typeof a[b] ? a[b] ? b : null : c.specified ? c.value : null : null)
        }, t = c.selectors = {
            cacheLength: 50,
            createPseudo: N,
            match: ha,
            attrHandle: ka ? {} : {
                href: function (a) {
                    return a.getAttribute("href", 2)
                }, type: function (a) {
                    return a.getAttribute("type")
                }
            },
            find: {
                ID: s ? function (a, b, c) {
                    if (typeof b.getElementById !== C && !c) {
                        var d = b.getElementById(a);
                        return d && d.parentNode ? [d] : []
                    }
                } : function (a, c, d) {
                    if (typeof c.getElementById !== C && !d) {
                        var e = c.getElementById(a);
                        return e ? e.id === a || typeof e.getAttributeNode !== C && e.getAttributeNode("id").value === a ? [e] : b : []
                    }
                }, TAG: ja ? function (a, b) {
                    return typeof b.getElementsByTagName !== C ? b.getElementsByTagName(a) : void 0
                } : function (a, b) {
                    var c = b.getElementsByTagName(a);
                    if ("*" === a) {
                        for (var d, e = [], f = 0; d = c[f]; f++)1 === d.nodeType && e.push(d);
                        return e
                    }
                    return c
                }, NAME: na && function (a, b) {
                    return typeof b.getElementsByName !== C ? b.getElementsByName(name) : void 0
                }, CLASS: ma && function (a, b, c) {
                    return typeof b.getElementsByClassName === C || c ? void 0 : b.getElementsByClassName(a)
                }
            },
            relative: {
                ">": {dir: "parentNode", first: !0},
                " ": {dir: "parentNode"},
                "+": {dir: "previousSibling", first: !0},
                "~": {dir: "previousSibling"}
            },
            preFilter: {
                ATTR: function (a) {
                    return a[1] = a[1].replace(ga, ""), a[3] = (a[4] || a[5] || "").replace(ga, ""), "~=" === a[2] && (a[3] = " " + a[3] + " "), a.slice(0, 4)
                }, CHILD: function (a) {
                    return a[1] = a[1].toLowerCase(), "nth" === a[1] ? (a[2] || c.error(a[0]), a[3] = +(a[3] ? a[4] + (a[5] || 1) : 2 * ("even" === a[2] || "odd" === a[2])), a[4] = +(a[6] + a[7] || "odd" === a[2])) : a[2] && c.error(a[0]), a
                }, PSEUDO: function (a) {
                    var b, c;
                    return ha.CHILD.test(a[0]) ? null : (a[3] ? a[2] = a[3] : (b = a[4]) && (ba.test(b) && (c = h(b, !0)) && (c = b.indexOf(")", b.length - c) - b.length) && (b = b.slice(0, c), a[0] = a[0].slice(0, c)), a[2] = b), a.slice(0, 3))
                }
            },
            filter: {
                ID: s ? function (a) {
                    return a = a.replace(ga, ""), function (b) {
                        return b.getAttribute("id") === a
                    }
                } : function (a) {
                    return a = a.replace(ga, ""), function (b) {
                        var c = typeof b.getAttributeNode !== C && b.getAttributeNode("id");
                        return c && c.value === a
                    }
                }, TAG: function (a) {
                    return "*" === a ? function () {
                        return !0
                    } : (a = a.replace(ga, "").toLowerCase(), function (b) {
                        return b.nodeName && b.nodeName.toLowerCase() === a
                    })
                }, CLASS: function (a) {
                    var b = P[D][a + " "];
                    return b || (b = new RegExp("(^|" + S + ")" + a + "(" + S + "|$)")) && P(a, function (a) {
                            return b.test(a.className || typeof a.getAttribute !== C && a.getAttribute("class") || "")
                        })
                }, ATTR: function (a, b, d) {
                    return function (e) {
                        var f = c.attr(e, a);
                        return null == f ? "!=" === b : b ? (f += "", "=" === b ? f === d : "!=" === b ? f !== d : "^=" === b ? d && 0 === f.indexOf(d) : "*=" === b ? d && f.indexOf(d) > -1 : "$=" === b ? d && f.substr(f.length - d.length) === d : "~=" === b ? (" " + f + " ").indexOf(d) > -1 : "|=" === b ? f === d || f.substr(0, d.length + 1) === d + "-" : !1) : !0
                    }
                }, CHILD: function (a, b, c, d) {
                    return "nth" === a ? function (a) {
                        var b, e, f = a.parentNode;
                        if (1 === c && 0 === d)return !0;
                        if (f)for (e = 0, b = f.firstChild; b && (1 !== b.nodeType || (e++, a !== b)); b = b.nextSibling);
                        return e -= d, e === c || e % c === 0 && e / c >= 0
                    } : function (b) {
                        var c = b;
                        switch (a) {
                            case"only":
                            case"first":
                                for (; c = c.previousSibling;)if (1 === c.nodeType)return !1;
                                if ("first" === a)return !0;
                                c = b;
                            case"last":
                                for (; c = c.nextSibling;)if (1 === c.nodeType)return !1;
                                return !0
                        }
                    }
                }, PSEUDO: function (a, b) {
                    var d, e = t.pseudos[a] || t.setFilters[a.toLowerCase()] || c.error("unsupported pseudo: " + a);
                    return e[D] ? e(b) : e.length > 1 ? (d = [a, a, "", b], t.setFilters.hasOwnProperty(a.toLowerCase()) ? N(function (a, c) {
                        for (var d, f = e(a, b), g = f.length; g--;)d = M.call(a, f[g]), a[d] = !(c[d] = f[g])
                    }) : function (a) {
                        return e(a, 0, d)
                    }) : e
                }
            },
            pseudos: {
                not: N(function (a) {
                    var b = [], c = [], d = x(a.replace(Z, "$1"));
                    return d[D] ? N(function (a, b, c, e) {
                        for (var f, g = d(a, null, e, []), h = a.length; h--;)(f = g[h]) && (a[h] = !(b[h] = f))
                    }) : function (a, e, f) {
                        return b[0] = a, d(b, null, f, c), !c.pop()
                    }
                }),
                has: N(function (a) {
                    return function (b) {
                        return c(a, b).length > 0
                    }
                }),
                contains: N(function (a) {
                    return function (b) {
                        return (b.textContent || b.innerText || u(b)).indexOf(a) > -1
                    }
                }),
                enabled: function (a) {
                    return a.disabled === !1
                },
                disabled: function (a) {
                    return a.disabled === !0
                },
                checked: function (a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && !!a.checked || "option" === b && !!a.selected
                },
                selected: function (a) {
                    return a.parentNode && a.parentNode.selectedIndex, a.selected === !0
                },
                parent: function (a) {
                    return !t.pseudos.empty(a)
                },
                empty: function (a) {
                    var b;
                    for (a = a.firstChild; a;) {
                        if (a.nodeName > "@" || 3 === (b = a.nodeType) || 4 === b)return !1;
                        a = a.nextSibling
                    }
                    return !0
                },
                header: function (a) {
                    return ea.test(a.nodeName)
                },
                text: function (a) {
                    var b, c;
                    return "input" === a.nodeName.toLowerCase() && "text" === (b = a.type) && (null == (c = a.getAttribute("type")) || c.toLowerCase() === b)
                },
                radio: d("radio"),
                checkbox: d("checkbox"),
                file: d("file"),
                password: d("password"),
                image: d("image"),
                submit: e("submit"),
                reset: e("reset"),
                button: function (a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && "button" === a.type || "button" === b
                },
                input: function (a) {
                    return fa.test(a.nodeName)
                },
                focus: function (a) {
                    var b = a.ownerDocument;
                    return a === b.activeElement && (!b.hasFocus || b.hasFocus()) && !!(a.type || a.href || ~a.tabIndex)
                },
                active: function (a) {
                    return a === a.ownerDocument.activeElement
                },
                first: f(function () {
                    return [0]
                }),
                last: f(function (a, b) {
                    return [b - 1]
                }),
                eq: f(function (a, b, c) {
                    return [0 > c ? c + b : c]
                }),
                even: f(function (a, b) {
                    for (var c = 0; b > c; c += 2)a.push(c);
                    return a
                }),
                odd: f(function (a, b) {
                    for (var c = 1; b > c; c += 2)a.push(c);
                    return a
                }),
                lt: f(function (a, b, c) {
                    for (var d = 0 > c ? c + b : c; --d >= 0;)a.push(d);
                    return a
                }),
                gt: f(function (a, b, c) {
                    for (var d = 0 > c ? c + b : c; ++d < b;)a.push(d);
                    return a
                })
            }
        }, y = G.compareDocumentPosition ? function (a, b) {
            return a === b ? (z = !0, 0) : (a.compareDocumentPosition && b.compareDocumentPosition ? 4 & a.compareDocumentPosition(b) : a.compareDocumentPosition) ? -1 : 1
        } : function (a, b) {
            if (a === b)return z = !0, 0;
            if (a.sourceIndex && b.sourceIndex)return a.sourceIndex - b.sourceIndex;
            var c, d, e = [], f = [], h = a.parentNode, i = b.parentNode, j = h;
            if (h === i)return g(a, b);
            if (!h)return -1;
            if (!i)return 1;
            for (; j;)e.unshift(j), j = j.parentNode;
            for (j = i; j;)f.unshift(j), j = j.parentNode;
            c = e.length, d = f.length;
            for (var k = 0; c > k && d > k; k++)if (e[k] !== f[k])return g(e[k], f[k]);
            return k === c ? g(a, f[k], -1) : g(e[k], b, 1)
        }, [0, 0].sort(y), B = !z, c.uniqueSort = function (a) {
            var b, c = [], d = 1, e = 0;
            if (z = B, a.sort(y), z) {
                for (; b = a[d]; d++)b === a[d - 1] && (e = c.push(d));
                for (; e--;)a.splice(c[e], 1)
            }
            return a
        }, c.error = function (a) {
            throw new Error("Syntax error, unrecognized expression: " + a)
        }, x = c.compile = function (a, b) {
            var c, d = [], e = [], f = R[D][a + " "];
            if (!f) {
                for (b || (b = h(a)), c = b.length; c--;)f = m(b[c]), f[D] ? d.push(f) : e.push(f);
                f = R(a, n(e, d))
            }
            return f
        }, F.querySelectorAll && function () {
            var a, b = p, d = /'|\\/g, e = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g, f = [":focus"], g = [":active"], i = G.matchesSelector || G.mozMatchesSelector || G.webkitMatchesSelector || G.oMatchesSelector || G.msMatchesSelector;
            ia(function (a) {
                a.innerHTML = "<select><option selected=''></option></select>", a.querySelectorAll("[selected]").length || f.push("\\[" + S + "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"), a.querySelectorAll(":checked").length || f.push(":checked")
            }), ia(function (a) {
                a.innerHTML = "<p routerTest=''></p>", a.querySelectorAll("[routerTest^='']").length && f.push("[*^$]=" + S + "*(?:\"\"|'')"), a.innerHTML = "<input type='hidden'/>", a.querySelectorAll(":enabled").length || f.push(":enabled", ":disabled")
            }), f = new RegExp(f.join("|")), p = function (a, c, e, g, i) {
                if (!g && !i && !f.test(a)) {
                    var j, k, l = !0, m = D, n = c, o = 9 === c.nodeType && a;
                    if (1 === c.nodeType && "object" !== c.nodeName.toLowerCase()) {
                        for (j = h(a), (l = c.getAttribute("id")) ? m = l.replace(d, "\\$&") : c.setAttribute("id", m), m = "[id='" + m + "'] ", k = j.length; k--;)j[k] = m + j[k].join("");
                        n = da.test(a) && c.parentNode || c, o = j.join(",")
                    }
                    if (o)try {
                        return K.apply(e, L.call(n.querySelectorAll(o), 0)), e
                    } catch (p) {
                    } finally {
                        l || c.removeAttribute("id")
                    }
                }
                return b(a, c, e, g, i)
            }, i && (ia(function (b) {
                a = i.call(b, "div");
                try {
                    i.call(b, "[routerTest!='']:sizzle"), g.push("!=", X)
                } catch (c) {
                }
            }), g = new RegExp(g.join("|")), c.matchesSelector = function (b, d) {
                if (d = d.replace(e, "='$1']"), !v(b) && !g.test(d) && !f.test(d))try {
                    var h = i.call(b, d);
                    if (h || a || b.document && 11 !== b.document.nodeType)return h
                } catch (j) {
                }
                return c(d, null, null, [b]).length > 0
            })
        }(), t.pseudos.nth = t.pseudos.eq, t.filters = q.prototype = t.pseudos, t.setFilters = new q, c.attr = $.attr, $.find = c, $.expr = c.selectors, $.expr[":"] = $.expr.pseudos, $.unique = c.uniqueSort, $.text = c.getText, $.isXMLDoc = c.isXML, $.contains = c.contains
    }(a);
    var Ia = /Until$/, Ja = /^(?:parents|prev(?:Until|All))/, Ka = /^.[^:#\[\.,]*$/, La = $.expr.match.needsContext, Ma = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    $.fn.extend({
        find: function (a) {
            var b, c, d, e, f, g, h = this;
            if ("string" != typeof a)return $(a).filter(function () {
                for (b = 0, c = h.length; c > b; b++)if ($.contains(h[b], this))return !0
            });
            for (g = this.pushStack("", "find", a), b = 0, c = this.length; c > b; b++)if (d = g.length, $.find(a, this[b], g), b > 0)for (e = d; e < g.length; e++)for (f = 0; d > f; f++)if (g[f] === g[e]) {
                g.splice(e--, 1);
                break
            }
            return g
        }, has: function (a) {
            var b, c = $(a, this), d = c.length;
            return this.filter(function () {
                for (b = 0; d > b; b++)if ($.contains(this, c[b]))return !0
            })
        }, not: function (a) {
            return this.pushStack(j(this, a, !1), "not", a)
        }, filter: function (a) {
            return this.pushStack(j(this, a, !0), "filter", a)
        }, is: function (a) {
            return !!a && ("string" == typeof a ? La.test(a) ? $(a, this.context).index(this[0]) >= 0 : $.filter(a, this).length > 0 : this.filter(a).length > 0)
        }, closest: function (a, b) {
            for (var c, d = 0, e = this.length, f = [], g = La.test(a) || "string" != typeof a ? $(a, b || this.context) : 0; e > d; d++)for (c = this[d]; c && c.ownerDocument && c !== b && 11 !== c.nodeType;) {
                if (g ? g.index(c) > -1 : $.find.matchesSelector(c, a)) {
                    f.push(c);
                    break
                }
                c = c.parentNode
            }
            return f = f.length > 1 ? $.unique(f) : f, this.pushStack(f, "closest", a)
        }, index: function (a) {
            return a ? "string" == typeof a ? $.inArray(this[0], $(a)) : $.inArray(a.jquery ? a[0] : a, this) : this[0] && this[0].parentNode ? this.prevAll().length : -1
        }, add: function (a, b) {
            var c = "string" == typeof a ? $(a, b) : $.makeArray(a && a.nodeType ? [a] : a), d = $.merge(this.get(), c);
            return this.pushStack(h(c[0]) || h(d[0]) ? d : $.unique(d))
        }, addBack: function (a) {
            return this.add(null == a ? this.prevObject : this.prevObject.filter(a))
        }
    }), $.fn.andSelf = $.fn.addBack, $.each({
        parent: function (a) {
            var b = a.parentNode;
            return b && 11 !== b.nodeType ? b : null
        }, parents: function (a) {
            return $.dir(a, "parentNode")
        }, parentsUntil: function (a, b, c) {
            return $.dir(a, "parentNode", c)
        }, next: function (a) {
            return i(a, "nextSibling")
        }, prev: function (a) {
            return i(a, "previousSibling")
        }, nextAll: function (a) {
            return $.dir(a, "nextSibling")
        }, prevAll: function (a) {
            return $.dir(a, "previousSibling")
        }, nextUntil: function (a, b, c) {
            return $.dir(a, "nextSibling", c)
        }, prevUntil: function (a, b, c) {
            return $.dir(a, "previousSibling", c)
        }, siblings: function (a) {
            return $.sibling((a.parentNode || {}).firstChild, a)
        }, children: function (a) {
            return $.sibling(a.firstChild)
        }, contents: function (a) {
            return $.nodeName(a, "iframe") ? a.contentDocument || a.contentWindow.document : $.merge([], a.childNodes)
        }
    }, function (a, b) {
        $.fn[a] = function (c, d) {
            var e = $.map(this, b, c);
            return Ia.test(a) || (d = c), d && "string" == typeof d && (e = $.filter(d, e)), e = this.length > 1 && !Ma[a] ? $.unique(e) : e, this.length > 1 && Ja.test(a) && (e = e.reverse()), this.pushStack(e, a, V.call(arguments).join(","))
        }
    }), $.extend({
        filter: function (a, b, c) {
            return c && (a = ":not(" + a + ")"), 1 === b.length ? $.find.matchesSelector(b[0], a) ? [b[0]] : [] : $.find.matches(a, b)
        }, dir: function (a, c, d) {
            for (var e = [], f = a[c]; f && 9 !== f.nodeType && (d === b || 1 !== f.nodeType || !$(f).is(d));)1 === f.nodeType && e.push(f),
                f = f[c];
            return e
        }, sibling: function (a, b) {
            for (var c = []; a; a = a.nextSibling)1 === a.nodeType && a !== b && c.push(a);
            return c
        }
    });
    var Na = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video", Oa = / jQuery\d+="(?:null|\d+)"/g, Pa = /^\s+/, Qa = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, Ra = /<([\w:]+)/, Sa = /<tbody/i, Ta = /<|&#?\w+;/, Ua = /<(?:script|style|link)/i, Va = /<(?:script|object|embed|option|style)/i, Wa = new RegExp("<(?:" + Na + ")[\\s/>]", "i"), Xa = /^(?:checkbox|radio)$/, Ya = /checked\s*(?:[^=]|=\s*.checked.)/i, Za = /\/(java|ecma)script/i, $a = /^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g, _a = {
        option: [1, "<select multiple='multiple'>", "</select>"],
        legend: [1, "<fieldset>", "</fieldset>"],
        thead: [1, "<table>", "</table>"],
        tr: [2, "<table><tbody>", "</tbody></table>"],
        td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
        col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
        area: [1, "<map>", "</map>"],
        _default: [0, "", ""]
    }, ab = k(P), bb = ab.appendChild(P.createElement("div"));
    _a.optgroup = _a.option, _a.tbody = _a.tfoot = _a.colgroup = _a.caption = _a.thead, _a.th = _a.td, $.support.htmlSerialize || (_a._default = [1, "X<div>", "</div>"]), $.fn.extend({
        text: function (a) {
            return $.access(this, function (a) {
                return a === b ? $.text(this) : this.empty().append((this[0] && this[0].ownerDocument || P).createTextNode(a))
            }, null, a, arguments.length)
        }, wrapAll: function (a) {
            if ($.isFunction(a))return this.each(function (b) {
                $(this).wrapAll(a.call(this, b))
            });
            if (this[0]) {
                var b = $(a, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && b.insertBefore(this[0]), b.map(function () {
                    for (var a = this; a.firstChild && 1 === a.firstChild.nodeType;)a = a.firstChild;
                    return a
                }).append(this)
            }
            return this
        }, wrapInner: function (a) {
            return this.each($.isFunction(a) ? function (b) {
                $(this).wrapInner(a.call(this, b))
            } : function () {
                var b = $(this), c = b.contents();
                c.length ? c.wrapAll(a) : b.append(a)
            })
        }, wrap: function (a) {
            var b = $.isFunction(a);
            return this.each(function (c) {
                $(this).wrapAll(b ? a.call(this, c) : a)
            })
        }, unwrap: function () {
            return this.parent().each(function () {
                $.nodeName(this, "body") || $(this).replaceWith(this.childNodes)
            }).end()
        }, append: function () {
            return this.domManip(arguments, !0, function (a) {
                (1 === this.nodeType || 11 === this.nodeType) && this.appendChild(a)
            })
        }, prepend: function () {
            return this.domManip(arguments, !0, function (a) {
                (1 === this.nodeType || 11 === this.nodeType) && this.insertBefore(a, this.firstChild)
            })
        }, before: function () {
            if (!h(this[0]))return this.domManip(arguments, !1, function (a) {
                this.parentNode.insertBefore(a, this)
            });
            if (arguments.length) {
                var a = $.clean(arguments);
                return this.pushStack($.merge(a, this), "before", this.selector)
            }
        }, after: function () {
            if (!h(this[0]))return this.domManip(arguments, !1, function (a) {
                this.parentNode.insertBefore(a, this.nextSibling)
            });
            if (arguments.length) {
                var a = $.clean(arguments);
                return this.pushStack($.merge(this, a), "after", this.selector)
            }
        }, remove: function (a, b) {
            for (var c, d = 0; null != (c = this[d]); d++)(!a || $.filter(a, [c]).length) && (!b && 1 === c.nodeType && ($.cleanData(c.getElementsByTagName("*")), $.cleanData([c])), c.parentNode && c.parentNode.removeChild(c));
            return this
        }, empty: function () {
            for (var a, b = 0; null != (a = this[b]); b++)for (1 === a.nodeType && $.cleanData(a.getElementsByTagName("*")); a.firstChild;)a.removeChild(a.firstChild);
            return this
        }, clone: function (a, b) {
            return a = null == a ? !1 : a, b = null == b ? a : b, this.map(function () {
                return $.clone(this, a, b)
            })
        }, html: function (a) {
            return $.access(this, function (a) {
                var c = this[0] || {}, d = 0, e = this.length;
                if (a === b)return 1 === c.nodeType ? c.innerHTML.replace(Oa, "") : b;
                if (!("string" != typeof a || Ua.test(a) || !$.support.htmlSerialize && Wa.test(a) || !$.support.leadingWhitespace && Pa.test(a) || _a[(Ra.exec(a) || ["", ""])[1].toLowerCase()])) {
                    a = a.replace(Qa, "<$1></$2>");
                    try {
                        for (; e > d; d++)c = this[d] || {}, 1 === c.nodeType && ($.cleanData(c.getElementsByTagName("*")), c.innerHTML = a);
                        c = 0
                    } catch (f) {
                    }
                }
                c && this.empty().append(a)
            }, null, a, arguments.length)
        }, replaceWith: function (a) {
            return h(this[0]) ? this.length ? this.pushStack($($.isFunction(a) ? a() : a), "replaceWith", a) : this : $.isFunction(a) ? this.each(function (b) {
                var c = $(this), d = c.html();
                c.replaceWith(a.call(this, b, d))
            }) : ("string" != typeof a && (a = $(a).detach()), this.each(function () {
                var b = this.nextSibling, c = this.parentNode;
                $(this).remove(), b ? $(b).before(a) : $(c).append(a)
            }))
        }, detach: function (a) {
            return this.remove(a, !0)
        }, domManip: function (a, c, d) {
            a = [].concat.apply([], a);
            var e, f, g, h, i = 0, j = a[0], k = [], m = this.length;
            if (!$.support.checkClone && m > 1 && "string" == typeof j && Ya.test(j))return this.each(function () {
                $(this).domManip(a, c, d)
            });
            if ($.isFunction(j))return this.each(function (e) {
                var f = $(this);
                a[0] = j.call(this, e, c ? f.html() : b), f.domManip(a, c, d)
            });
            if (this[0]) {
                if (e = $.buildFragment(a, this, k), g = e.fragment, f = g.firstChild, 1 === g.childNodes.length && (g = f), f)for (c = c && $.nodeName(f, "tr"), h = e.cacheable || m - 1; m > i; i++)d.call(c && $.nodeName(this[i], "table") ? l(this[i], "tbody") : this[i], i === h ? g : $.clone(g, !0, !0));
                g = f = null, k.length && $.each(k, function (a, b) {
                    b.src ? $.ajax ? $.ajax({
                        url: b.src,
                        type: "GET",
                        dataType: "script",
                        async: !1,
                        global: !1,
                        "throws": !0
                    }) : $.error("no ajax") : $.globalEval((b.text || b.textContent || b.innerHTML || "").replace($a, "")), b.parentNode && b.parentNode.removeChild(b)
                })
            }
            return this
        }
    }), $.buildFragment = function (a, c, d) {
        var e, f, g, h = a[0];
        return c = c || P, c = !c.nodeType && c[0] || c, c = c.ownerDocument || c, 1 === a.length && "string" == typeof h && h.length < 512 && c === P && "<" === h.charAt(0) && !Va.test(h) && ($.support.checkClone || !Ya.test(h)) && ($.support.html5Clone || !Wa.test(h)) && (f = !0, e = $.fragments[h], g = e !== b), e || (e = c.createDocumentFragment(), $.clean(a, c, e, d), f && ($.fragments[h] = g && e)), {
            fragment: e,
            cacheable: f
        }
    }, $.fragments = {}, $.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function (a, b) {
        $.fn[a] = function (c) {
            var d, e = 0, f = [], g = $(c), h = g.length, i = 1 === this.length && this[0].parentNode;
            if ((null == i || i && 11 === i.nodeType && 1 === i.childNodes.length) && 1 === h)return g[b](this[0]), this;
            for (; h > e; e++)d = (e > 0 ? this.clone(!0) : this).get(), $(g[e])[b](d), f = f.concat(d);
            return this.pushStack(f, a, g.selector)
        }
    }), $.extend({
        clone: function (a, b, c) {
            var d, e, f, g;
            if ($.support.html5Clone || $.isXMLDoc(a) || !Wa.test("<" + a.nodeName + ">") ? g = a.cloneNode(!0) : (bb.innerHTML = a.outerHTML, bb.removeChild(g = bb.firstChild)), !($.support.noCloneEvent && $.support.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || $.isXMLDoc(a)))for (n(a, g), d = o(a), e = o(g), f = 0; d[f]; ++f)e[f] && n(d[f], e[f]);
            if (b && (m(a, g), c))for (d = o(a), e = o(g), f = 0; d[f]; ++f)m(d[f], e[f]);
            return d = e = null, g
        }, clean: function (a, b, c, d) {
            var e, f, g, h, i, j, l, m, n, o, q, r = b === P && ab, s = [];
            for (b && "undefined" != typeof b.createDocumentFragment || (b = P), e = 0; null != (g = a[e]); e++)if ("number" == typeof g && (g += ""), g) {
                if ("string" == typeof g)if (Ta.test(g)) {
                    for (r = r || k(b), l = b.createElement("div"), r.appendChild(l), g = g.replace(Qa, "<$1></$2>"), h = (Ra.exec(g) || ["", ""])[1].toLowerCase(), i = _a[h] || _a._default, j = i[0], l.innerHTML = i[1] + g + i[2]; j--;)l = l.lastChild;
                    if (!$.support.tbody)for (m = Sa.test(g), n = "table" !== h || m ? "<table>" !== i[1] || m ? [] : l.childNodes : l.firstChild && l.firstChild.childNodes, f = n.length - 1; f >= 0; --f)$.nodeName(n[f], "tbody") && !n[f].childNodes.length && n[f].parentNode.removeChild(n[f]);
                    !$.support.leadingWhitespace && Pa.test(g) && l.insertBefore(b.createTextNode(Pa.exec(g)[0]), l.firstChild), g = l.childNodes, l.parentNode.removeChild(l)
                } else g = b.createTextNode(g);
                g.nodeType ? s.push(g) : $.merge(s, g)
            }
            if (l && (g = l = r = null), !$.support.appendChecked)for (e = 0; null != (g = s[e]); e++)$.nodeName(g, "input") ? p(g) : "undefined" != typeof g.getElementsByTagName && $.grep(g.getElementsByTagName("input"), p);
            if (c)for (o = function (a) {
                return !a.type || Za.test(a.type) ? d ? d.push(a.parentNode ? a.parentNode.removeChild(a) : a) : c.appendChild(a) : void 0
            }, e = 0; null != (g = s[e]); e++)$.nodeName(g, "script") && o(g) || (c.appendChild(g), "undefined" != typeof g.getElementsByTagName && (q = $.grep($.merge([], g.getElementsByTagName("script")), o), s.splice.apply(s, [e + 1, 0].concat(q)), e += q.length));
            return s
        }, cleanData: function (a, b) {
            for (var c, d, e, f, g = 0, h = $.expando, i = $.cache, j = $.support.deleteExpando, k = $.event.special; null != (e = a[g]); g++)if ((b || $.acceptData(e)) && (d = e[h], c = d && i[d])) {
                if (c.events)for (f in c.events)k[f] ? $.event.remove(e, f) : $.removeEvent(e, f, c.handle);
                i[d] && (delete i[d], j ? delete e[h] : e.removeAttribute ? e.removeAttribute(h) : e[h] = null, $.deletedIds.push(d))
            }
        }
    }), function () {
        var a, b;
        $.uaMatch = function (a) {
            a = a.toLowerCase();
            var b = /(chrome)[ \/]([\w.]+)/.exec(a) || /(webkit)[ \/]([\w.]+)/.exec(a) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a) || /(msie) ([\w.]+)/.exec(a) || a.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a) || [];
            return {browser: b[1] || "", version: b[2] || "0"}
        }, a = $.uaMatch(R.userAgent), b = {}, a.browser && (b[a.browser] = !0, b.version = a.version), b.chrome ? b.webkit = !0 : b.webkit && (b.safari = !0), $.browser = b, $.sub = function () {
            function a(b, c) {
                return new a.fn.init(b, c)
            }

            $.extend(!0, a, this), a.superclass = this, a.fn = a.prototype = this(), a.fn.constructor = a, a.sub = this.sub, a.fn.init = function (c, d) {
                return d && d instanceof $ && !(d instanceof a) && (d = a(d)), $.fn.init.call(this, c, d, b)
            }, a.fn.init.prototype = a.fn;
            var b = a(P);
            return a
        }
    }();
    var cb, db, eb, fb = /alpha\([^)]*\)/i, gb = /opacity=([^)]*)/, hb = /^(top|right|bottom|left)$/, ib = /^(none|table(?!-c[ea]).+)/, jb = /^margin/, kb = new RegExp("^(" + _ + ")(.*)$", "i"), lb = new RegExp("^(" + _ + ")(?!px)[a-z%]+$", "i"), mb = new RegExp("^([-+])=(" + _ + ")", "i"), nb = {BODY: "block"}, ob = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }, pb = {
        letterSpacing: 0,
        fontWeight: 400
    }, qb = ["Top", "Right", "Bottom", "Left"], rb = ["Webkit", "O", "Moz", "ms"], sb = $.fn.toggle;
    $.fn.extend({
        css: function (a, c) {
            return $.access(this, function (a, c, d) {
                return d !== b ? $.style(a, c, d) : $.css(a, c)
            }, a, c, arguments.length > 1)
        }, show: function () {
            return s(this, !0)
        }, hide: function () {
            return s(this)
        }, toggle: function (a, b) {
            var c = "boolean" == typeof a;
            return $.isFunction(a) && $.isFunction(b) ? sb.apply(this, arguments) : this.each(function () {
                (c ? a : r(this)) ? $(this).show() : $(this).hide()
            })
        }
    }), $.extend({
        cssHooks: {
            opacity: {
                get: function (a, b) {
                    if (b) {
                        var c = cb(a, "opacity");
                        return "" === c ? "1" : c
                    }
                }
            }
        },
        cssNumber: {
            fillOpacity: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {"float": $.support.cssFloat ? "cssFloat" : "styleFloat"},
        style: function (a, c, d, e) {
            if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
                var f, g, h, i = $.camelCase(c), j = a.style;
                if (c = $.cssProps[i] || ($.cssProps[i] = q(j, i)), h = $.cssHooks[c] || $.cssHooks[i], d === b)return h && "get"in h && (f = h.get(a, !1, e)) !== b ? f : j[c];
                if (g = typeof d, "string" === g && (f = mb.exec(d)) && (d = (f[1] + 1) * f[2] + parseFloat($.css(a, c)), g = "number"), !(null == d || "number" === g && isNaN(d) || ("number" === g && !$.cssNumber[i] && (d += "px"), h && "set"in h && (d = h.set(a, d, e)) === b)))try {
                    j[c] = d
                } catch (k) {
                }
            }
        },
        css: function (a, c, d, e) {
            var f, g, h, i = $.camelCase(c);
            return c = $.cssProps[i] || ($.cssProps[i] = q(a.style, i)), h = $.cssHooks[c] || $.cssHooks[i], h && "get"in h && (f = h.get(a, !0, e)), f === b && (f = cb(a, c)), "normal" === f && c in pb && (f = pb[c]), d || e !== b ? (g = parseFloat(f), d || $.isNumeric(g) ? g || 0 : f) : f
        },
        swap: function (a, b, c) {
            var d, e, f = {};
            for (e in b)f[e] = a.style[e], a.style[e] = b[e];
            d = c.call(a);
            for (e in b)a.style[e] = f[e];
            return d
        }
    }), a.getComputedStyle ? cb = function (b, c) {
        var d, e, f, g, h = a.getComputedStyle(b, null), i = b.style;
        return h && (d = h.getPropertyValue(c) || h[c], "" === d && !$.contains(b.ownerDocument, b) && (d = $.style(b, c)), lb.test(d) && jb.test(c) && (e = i.width, f = i.minWidth, g = i.maxWidth, i.minWidth = i.maxWidth = i.width = d, d = h.width, i.width = e, i.minWidth = f, i.maxWidth = g)), d
    } : P.documentElement.currentStyle && (cb = function (a, b) {
        var c, d, e = a.currentStyle && a.currentStyle[b], f = a.style;
        return null == e && f && f[b] && (e = f[b]), lb.test(e) && !hb.test(b) && (c = f.left, d = a.runtimeStyle && a.runtimeStyle.left, d && (a.runtimeStyle.left = a.currentStyle.left), f.left = "fontSize" === b ? "1em" : e, e = f.pixelLeft + "px", f.left = c, d && (a.runtimeStyle.left = d)), "" === e ? "auto" : e
    }), $.each(["height", "width"], function (a, b) {
        $.cssHooks[b] = {
            get: function (a, c, d) {
                return c ? 0 === a.offsetWidth && ib.test(cb(a, "display")) ? $.swap(a, ob, function () {
                    return v(a, b, d)
                }) : v(a, b, d) : void 0
            }, set: function (a, c, d) {
                return t(a, c, d ? u(a, b, d, $.support.boxSizing && "border-box" === $.css(a, "boxSizing")) : 0)
            }
        }
    }), $.support.opacity || ($.cssHooks.opacity = {
        get: function (a, b) {
            return gb.test((b && a.currentStyle ? a.currentStyle.filter : a.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : b ? "1" : ""
        }, set: function (a, b) {
            var c = a.style, d = a.currentStyle, e = $.isNumeric(b) ? "alpha(opacity=" + 100 * b + ")" : "", f = d && d.filter || c.filter || "";
            c.zoom = 1, b >= 1 && "" === $.trim(f.replace(fb, "")) && c.removeAttribute && (c.removeAttribute("filter"), d && !d.filter) || (c.filter = fb.test(f) ? f.replace(fb, e) : f + " " + e)
        }
    }), $(function () {
        $.support.reliableMarginRight || ($.cssHooks.marginRight = {
            get: function (a, b) {
                return $.swap(a, {display: "inline-block"}, function () {
                    return b ? cb(a, "marginRight") : void 0
                })
            }
        }), !$.support.pixelPosition && $.fn.position && $.each(["top", "left"], function (a, b) {
            $.cssHooks[b] = {
                get: function (a, c) {
                    if (c) {
                        var d = cb(a, b);
                        return lb.test(d) ? $(a).position()[b] + "px" : d
                    }
                }
            }
        })
    }), $.expr && $.expr.filters && ($.expr.filters.hidden = function (a) {
        return 0 === a.offsetWidth && 0 === a.offsetHeight || !$.support.reliableHiddenOffsets && "none" === (a.style && a.style.display || cb(a, "display"))
    }, $.expr.filters.visible = function (a) {
        return !$.expr.filters.hidden(a)
    }), $.each({margin: "", padding: "", border: "Width"}, function (a, b) {
        $.cssHooks[a + b] = {
            expand: function (c) {
                var d, e = "string" == typeof c ? c.split(" ") : [c], f = {};
                for (d = 0; 4 > d; d++)f[a + qb[d] + b] = e[d] || e[d - 2] || e[0];
                return f
            }
        }, jb.test(a) || ($.cssHooks[a + b].set = t)
    });
    var tb = /%20/g, ub = /\[\]$/, vb = /\r?\n/g, wb = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i, xb = /^(?:select|textarea)/i;
    $.fn.extend({
        serialize: function () {
            return $.param(this.serializeArray())
        }, serializeArray: function () {
            return this.map(function () {
                return this.elements ? $.makeArray(this.elements) : this
            }).filter(function () {
                return this.name && !this.disabled && (this.checked || xb.test(this.nodeName) || wb.test(this.type))
            }).map(function (a, b) {
                var c = $(this).val();
                return null == c ? null : $.isArray(c) ? $.map(c, function (a) {
                    return {name: b.name, value: a.replace(vb, "\r\n")}
                }) : {name: b.name, value: c.replace(vb, "\r\n")}
            }).get()
        }
    }), $.param = function (a, c) {
        var d, e = [], f = function (a, b) {
            b = $.isFunction(b) ? b() : null == b ? "" : b, e[e.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b)
        };
        if (c === b && (c = $.ajaxSettings && $.ajaxSettings.traditional), $.isArray(a) || a.jquery && !$.isPlainObject(a))$.each(a, function () {
            f(this.name, this.value)
        }); else for (d in a)x(d, a[d], c, f);
        return e.join("&").replace(tb, "+")
    };
    var yb, zb, Ab = /#.*$/, Bb = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, Cb = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/, Db = /^(?:GET|HEAD)$/, Eb = /^\/\//, Fb = /\?/, Gb = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, Hb = /([?&])_=[^&]*/, Ib = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/, Jb = $.fn.load, Kb = {}, Lb = {}, Mb = ["*/"] + ["*"];
    try {
        zb = Q.href
    } catch (Nb) {
        zb = P.createElement("a"), zb.href = "", zb = zb.href
    }
    yb = Ib.exec(zb.toLowerCase()) || [], $.fn.load = function (a, c, d) {
        if ("string" != typeof a && Jb)return Jb.apply(this, arguments);
        if (!this.length)return this;
        var e, f, g, h = this, i = a.indexOf(" ");
        return i >= 0 && (e = a.slice(i, a.length), a = a.slice(0, i)), $.isFunction(c) ? (d = c, c = b) : c && "object" == typeof c && (f = "POST"), $.ajax({
            url: a,
            type: f,
            dataType: "html",
            data: c,
            complete: function (a, b) {
                d && h.each(d, g || [a.responseText, b, a])
            }
        }).done(function (a) {
            g = arguments, h.html(e ? $("<div>").append(a.replace(Gb, "")).find(e) : a)
        }), this
    }, $.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function (a, b) {
        $.fn[b] = function (a) {
            return this.on(b, a)
        }
    }), $.each(["get", "post"], function (a, c) {
        $[c] = function (a, d, e, f) {
            return $.isFunction(d) && (f = f || e, e = d, d = b), $.ajax({
                type: c,
                url: a,
                data: d,
                success: e,
                dataType: f
            })
        }
    }), $.extend({
        getScript: function (a, c) {
            return $.get(a, b, c, "script")
        },
        getJSON: function (a, b, c) {
            return $.get(a, b, c, "json")
        },
        ajaxSetup: function (a, b) {
            return b ? A(a, $.ajaxSettings) : (b = a, a = $.ajaxSettings), A(a, b), a
        },
        ajaxSettings: {
            url: zb,
            isLocal: Cb.test(yb[1]),
            global: !0,
            type: "GET",
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            processData: !0,
            async: !0,
            accepts: {
                xml: "application/xml, text/xml",
                html: "text/html",
                text: "text/plain",
                json: "application/json, text/javascript",
                "*": Mb
            },
            contents: {xml: /xml/, html: /html/, json: /json/},
            responseFields: {xml: "responseXML", text: "responseText"},
            converters: {"* text": a.String, "text html": !0, "text json": $.parseJSON, "text xml": $.parseXML},
            flatOptions: {context: !0, url: !0}
        },
        ajaxPrefilter: y(Kb),
        ajaxTransport: y(Lb),
        ajax: function (a, c) {
            function d(a, c, d, g) {
                var j, l, s, t, v, x = c;
                2 !== u && (u = 2, i && clearTimeout(i), h = b, f = g || "", w.readyState = a > 0 ? 4 : 0, d && (t = B(m, w, d)), a >= 200 && 300 > a || 304 === a ? (m.ifModified && (v = w.getResponseHeader("Last-Modified"), v && ($.lastModified[e] = v), v = w.getResponseHeader("Etag"), v && ($.etag[e] = v)), 304 === a ? (x = "notmodified", j = !0) : (j = C(m, t), x = j.state, l = j.data, s = j.error, j = !s)) : (s = x, (!x || a) && (x = "error", 0 > a && (a = 0))), w.status = a, w.statusText = (c || x) + "", j ? p.resolveWith(n, [l, x, w]) : p.rejectWith(n, [w, x, s]), w.statusCode(r), r = b, k && o.trigger("ajax" + (j ? "Success" : "Error"), [w, m, j ? l : s]), q.fireWith(n, [w, x]), k && (o.trigger("ajaxComplete", [w, m]), --$.active || $.event.trigger("ajaxStop")))
            }

            "object" == typeof a && (c = a, a = b), c = c || {};
            var e, f, g, h, i, j, k, l, m = $.ajaxSetup({}, c), n = m.context || m, o = n !== m && (n.nodeType || n instanceof $) ? $(n) : $.event, p = $.Deferred(), q = $.Callbacks("once memory"), r = m.statusCode || {}, s = {}, t = {}, u = 0, v = "canceled", w = {
                readyState: 0,
                setRequestHeader: function (a, b) {
                    if (!u) {
                        var c = a.toLowerCase();
                        a = t[c] = t[c] || a, s[a] = b
                    }
                    return this
                },
                getAllResponseHeaders: function () {
                    return 2 === u ? f : null
                },
                getResponseHeader: function (a) {
                    var c;
                    if (2 === u) {
                        if (!g)for (g = {}; c = Bb.exec(f);)g[c[1].toLowerCase()] = c[2];
                        c = g[a.toLowerCase()]
                    }
                    return c === b ? null : c
                },
                overrideMimeType: function (a) {
                    return u || (m.mimeType = a), this
                },
                abort: function (a) {
                    return a = a || v, h && h.abort(a), d(0, a), this
                }
            };
            if (p.promise(w), w.success = w.done, w.error = w.fail, w.complete = q.add, w.statusCode = function (a) {
                    if (a) {
                        var b;
                        if (2 > u)for (b in a)r[b] = [r[b], a[b]]; else b = a[w.status], w.always(b)
                    }
                    return this
                }, m.url = ((a || m.url) + "").replace(Ab, "").replace(Eb, yb[1] + "//"), m.dataTypes = $.trim(m.dataType || "*").toLowerCase().split(ba), null == m.crossDomain && (j = Ib.exec(m.url.toLowerCase()), m.crossDomain = !(!j || j[1] === yb[1] && j[2] === yb[2] && (j[3] || ("http:" === j[1] ? 80 : 443)) == (yb[3] || ("http:" === yb[1] ? 80 : 443)))), m.data && m.processData && "string" != typeof m.data && (m.data = $.param(m.data, m.traditional)), z(Kb, m, c, w), 2 === u)return w;
            if (k = m.global, m.type = m.type.toUpperCase(), m.hasContent = !Db.test(m.type), k && 0 === $.active++ && $.event.trigger("ajaxStart"), !m.hasContent && (m.data && (m.url += (Fb.test(m.url) ? "&" : "?") + m.data, delete m.data), e = m.url, m.cache === !1)) {
                var x = $.now(), y = m.url.replace(Hb, "$1_=" + x);
                m.url = y + (y === m.url ? (Fb.test(m.url) ? "&" : "?") + "_=" + x : "")
            }
            (m.data && m.hasContent && m.contentType !== !1 || c.contentType) && w.setRequestHeader("Content-Type", m.contentType), m.ifModified && (e = e || m.url, $.lastModified[e] && w.setRequestHeader("If-Modified-Since", $.lastModified[e]), $.etag[e] && w.setRequestHeader("If-None-Match", $.etag[e])), w.setRequestHeader("Accept", m.dataTypes[0] && m.accepts[m.dataTypes[0]] ? m.accepts[m.dataTypes[0]] + ("*" !== m.dataTypes[0] ? ", " + Mb + "; q=0.01" : "") : m.accepts["*"]);
            for (l in m.headers)w.setRequestHeader(l, m.headers[l]);
            if (!m.beforeSend || m.beforeSend.call(n, w, m) !== !1 && 2 !== u) {
                v = "abort";
                for (l in{success: 1, error: 1, complete: 1})w[l](m[l]);
                if (h = z(Lb, m, c, w)) {
                    w.readyState = 1, k && o.trigger("ajaxSend", [w, m]), m.async && m.timeout > 0 && (i = setTimeout(function () {
                        w.abort("timeout")
                    }, m.timeout));
                    try {
                        u = 1, h.send(s, d)
                    } catch (A) {
                        if (!(2 > u))throw A;
                        d(-1, A)
                    }
                } else d(-1, "No Transport");
                return w
            }
            return w.abort()
        },
        active: 0,
        lastModified: {},
        etag: {}
    });
    var Ob = [], Pb = /\?/, Qb = /(=)\?(?=&|$)|\?\?/, Rb = $.now();
    $.ajaxSetup({
        jsonp: "callback", jsonpCallback: function () {
            var a = Ob.pop() || $.expando + "_" + Rb++;
            return this[a] = !0, a
        }
    }), $.ajaxPrefilter("json jsonp", function (c, d, e) {
        var f, g, h, i = c.data, j = c.url, k = c.jsonp !== !1, l = k && Qb.test(j), m = k && !l && "string" == typeof i && !(c.contentType || "").indexOf("application/x-www-form-urlencoded") && Qb.test(i);
        return "jsonp" === c.dataTypes[0] || l || m ? (f = c.jsonpCallback = $.isFunction(c.jsonpCallback) ? c.jsonpCallback() : c.jsonpCallback, g = a[f], l ? c.url = j.replace(Qb, "$1" + f) : m ? c.data = i.replace(Qb, "$1" + f) : k && (c.url += (Pb.test(j) ? "&" : "?") + c.jsonp + "=" + f), c.converters["script json"] = function () {
            return h || $.error(f + " was not called"), h[0]
        }, c.dataTypes[0] = "json", a[f] = function () {
            h = arguments
        }, e.always(function () {
            a[f] = g, c[f] && (c.jsonpCallback = d.jsonpCallback, Ob.push(f)), h && $.isFunction(g) && g(h[0]), h = g = b
        }), "script") : void 0
    }), $.ajaxSetup({
        accepts: {script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
        contents: {script: /javascript|ecmascript/},
        converters: {
            "text script": function (a) {
                return $.globalEval(a), a
            }
        }
    }), $.ajaxPrefilter("script", function (a) {
        a.cache === b && (a.cache = !1), a.crossDomain && (a.type = "GET", a.global = !1)
    }), $.ajaxTransport("script", function (a) {
        if (a.crossDomain) {
            var c, d = P.head || P.getElementsByTagName("head")[0] || P.documentElement;
            return {
                send: function (e, f) {
                    c = P.createElement("script"), c.async = "async", a.scriptCharset && (c.charset = a.scriptCharset), c.src = a.url, c.onload = c.onreadystatechange = function (a, e) {
                        (e || !c.readyState || /loaded|complete/.test(c.readyState)) && (c.onload = c.onreadystatechange = null, d && c.parentNode && d.removeChild(c), c = b, e || f(200, "success"))
                    }, d.insertBefore(c, d.firstChild)
                }, abort: function () {
                    c && c.onload(0, 1)
                }
            }
        }
    });
    var Sb, Tb = a.ActiveXObject ? function () {
        for (var a in Sb)Sb[a](0, 1)
    } : !1, Ub = 0;
    $.ajaxSettings.xhr = a.ActiveXObject ? function () {
        return !this.isLocal && D() || E()
    } : D, function (a) {
        $.extend($.support, {ajax: !!a, cors: !!a && "withCredentials"in a})
    }($.ajaxSettings.xhr()), $.support.ajax && $.ajaxTransport(function (c) {
        if (!c.crossDomain || $.support.cors) {
            var d;
            return {
                send: function (e, f) {
                    var g, h, i = c.xhr();
                    if (c.username ? i.open(c.type, c.url, c.async, c.username, c.password) : i.open(c.type, c.url, c.async), c.xhrFields)for (h in c.xhrFields)i[h] = c.xhrFields[h];
                    c.mimeType && i.overrideMimeType && i.overrideMimeType(c.mimeType), !c.crossDomain && !e["X-Requested-With"] && (e["X-Requested-With"] = "XMLHttpRequest");
                    try {
                        for (h in e)i.setRequestHeader(h, e[h])
                    } catch (j) {
                    }
                    i.send(c.hasContent && c.data || null), d = function (a, e) {
                        var h, j, k, l, m;
                        try {
                            if (d && (e || 4 === i.readyState))if (d = b, g && (i.onreadystatechange = $.noop, Tb && delete Sb[g]), e)4 !== i.readyState && i.abort(); else {
                                h = i.status, k = i.getAllResponseHeaders(), l = {}, m = i.responseXML, m && m.documentElement && (l.xml = m);
                                try {
                                    l.text = i.responseText
                                } catch (n) {
                                }
                                try {
                                    j = i.statusText
                                } catch (n) {
                                    j = ""
                                }
                                h || !c.isLocal || c.crossDomain ? 1223 === h && (h = 204) : h = l.text ? 200 : 404
                            }
                        } catch (o) {
                            e || f(-1, o)
                        }
                        l && f(h, j, l, k)
                    }, c.async ? 4 === i.readyState ? setTimeout(d, 0) : (g = ++Ub, Tb && (Sb || (Sb = {}, $(a).unload(Tb)), Sb[g] = d), i.onreadystatechange = d) : d()
                }, abort: function () {
                    d && d(0, 1)
                }
            }
        }
    });
    var Vb, Wb, Xb = /^(?:toggle|show|hide)$/, Yb = new RegExp("^(?:([-+])=|)(" + _ + ")([a-z%]*)$", "i"), Zb = /queueHooks$/, $b = [J], _b = {
        "*": [function (a, b) {
            var c, d, e = this.createTween(a, b), f = Yb.exec(b), g = e.cur(), h = +g || 0, i = 1, j = 20;
            if (f) {
                if (c = +f[2], d = f[3] || ($.cssNumber[a] ? "" : "px"), "px" !== d && h) {
                    h = $.css(e.elem, a, !0) || c || 1;
                    do i = i || ".5", h /= i, $.style(e.elem, a, h + d); while (i !== (i = e.cur() / g) && 1 !== i && --j)
                }
                e.unit = d, e.start = h, e.end = f[1] ? h + (f[1] + 1) * c : c
            }
            return e
        }]
    };
    $.Animation = $.extend(H, {
        tweener: function (a, b) {
            $.isFunction(a) ? (b = a, a = ["*"]) : a = a.split(" ");
            for (var c, d = 0, e = a.length; e > d; d++)c = a[d], _b[c] = _b[c] || [], _b[c].unshift(b)
        }, prefilter: function (a, b) {
            b ? $b.unshift(a) : $b.push(a)
        }
    }), $.Tween = K, K.prototype = {
        constructor: K, init: function (a, b, c, d, e, f) {
            this.elem = a, this.prop = c, this.easing = e || "swing", this.options = b, this.start = this.now = this.cur(), this.end = d, this.unit = f || ($.cssNumber[c] ? "" : "px")
        }, cur: function () {
            var a = K.propHooks[this.prop];
            return a && a.get ? a.get(this) : K.propHooks._default.get(this)
        }, run: function (a) {
            var b, c = K.propHooks[this.prop];
            return this.pos = b = this.options.duration ? $.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : a, this.now = (this.end - this.start) * b + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), c && c.set ? c.set(this) : K.propHooks._default.set(this), this
        }
    }, K.prototype.init.prototype = K.prototype, K.propHooks = {
        _default: {
            get: function (a) {
                var b;
                return null == a.elem[a.prop] || a.elem.style && null != a.elem.style[a.prop] ? (b = $.css(a.elem, a.prop, !1, ""), b && "auto" !== b ? b : 0) : a.elem[a.prop]
            }, set: function (a) {
                $.fx.step[a.prop] ? $.fx.step[a.prop](a) : a.elem.style && (null != a.elem.style[$.cssProps[a.prop]] || $.cssHooks[a.prop]) ? $.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now
            }
        }
    }, K.propHooks.scrollTop = K.propHooks.scrollLeft = {
        set: function (a) {
            a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now)
        }
    }, $.each(["toggle", "show", "hide"], function (a, b) {
        var c = $.fn[b];
        $.fn[b] = function (d, e, f) {
            return null == d || "boolean" == typeof d || !a && $.isFunction(d) && $.isFunction(e) ? c.apply(this, arguments) : this.animate(L(b, !0), d, e, f)
        }
    }), $.fn.extend({
        fadeTo: function (a, b, c, d) {
            return this.filter(r).css("opacity", 0).show().end().animate({opacity: b}, a, c, d)
        }, animate: function (a, b, c, d) {
            var e = $.isEmptyObject(a), f = $.speed(b, c, d), g = function () {
                var b = H(this, $.extend({}, a), f);
                e && b.stop(!0)
            };
            return e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g)
        }, stop: function (a, c, d) {
            var e = function (a) {
                var b = a.stop;
                delete a.stop, b(d)
            };
            return "string" != typeof a && (d = c, c = a, a = b), c && a !== !1 && this.queue(a || "fx", []), this.each(function () {
                var b = !0, c = null != a && a + "queueHooks", f = $.timers, g = $._data(this);
                if (c)g[c] && g[c].stop && e(g[c]); else for (c in g)g[c] && g[c].stop && Zb.test(c) && e(g[c]);
                for (c = f.length; c--;)f[c].elem === this && (null == a || f[c].queue === a) && (f[c].anim.stop(d), b = !1, f.splice(c, 1));
                (b || !d) && $.dequeue(this, a)
            })
        }
    }), $.each({
        slideDown: L("show"),
        slideUp: L("hide"),
        slideToggle: L("toggle"),
        fadeIn: {opacity: "show"},
        fadeOut: {opacity: "hide"},
        fadeToggle: {opacity: "toggle"}
    }, function (a, b) {
        $.fn[a] = function (a, c, d) {
            return this.animate(b, a, c, d)
        }
    }), $.speed = function (a, b, c) {
        var d = a && "object" == typeof a ? $.extend({}, a) : {
            complete: c || !c && b || $.isFunction(a) && a,
            duration: a,
            easing: c && b || b && !$.isFunction(b) && b
        };
        return d.duration = $.fx.off ? 0 : "number" == typeof d.duration ? d.duration : d.duration in $.fx.speeds ? $.fx.speeds[d.duration] : $.fx.speeds._default, (null == d.queue || d.queue === !0) && (d.queue = "fx"), d.old = d.complete, d.complete = function () {
            $.isFunction(d.old) && d.old.call(this), d.queue && $.dequeue(this, d.queue)
        }, d
    }, $.easing = {
        linear: function (a) {
            return a
        }, swing: function (a) {
            return .5 - Math.cos(a * Math.PI) / 2
        }
    }, $.timers = [], $.fx = K.prototype.init, $.fx.tick = function () {
        var a, c = $.timers, d = 0;
        for (Vb = $.now(); d < c.length; d++)a = c[d], !a() && c[d] === a && c.splice(d--, 1);
        c.length || $.fx.stop(), Vb = b
    }, $.fx.timer = function (a) {
        a() && $.timers.push(a) && !Wb && (Wb = setInterval($.fx.tick, $.fx.interval))
    }, $.fx.interval = 13, $.fx.stop = function () {
        clearInterval(Wb), Wb = null
    }, $.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    }, $.fx.step = {}, $.expr && $.expr.filters && ($.expr.filters.animated = function (a) {
        return $.grep($.timers, function (b) {
            return a === b.elem
        }).length
    });
    var ac = /^(?:body|html)$/i;
    $.fn.offset = function (a) {
        if (arguments.length)return a === b ? this : this.each(function (b) {
            $.offset.setOffset(this, a, b)
        });
        var c, d, e, f, g, h, i, j = {top: 0, left: 0}, k = this[0], l = k && k.ownerDocument;
        if (l)return (d = l.body) === k ? $.offset.bodyOffset(k) : (c = l.documentElement, $.contains(c, k) ? ("undefined" != typeof k.getBoundingClientRect && (j = k.getBoundingClientRect()), e = M(l), f = c.clientTop || d.clientTop || 0, g = c.clientLeft || d.clientLeft || 0, h = e.pageYOffset || c.scrollTop, i = e.pageXOffset || c.scrollLeft, {
            top: j.top + h - f,
            left: j.left + i - g
        }) : j)
    }, $.offset = {
        bodyOffset: function (a) {
            var b = a.offsetTop, c = a.offsetLeft;
            return $.support.doesNotIncludeMarginInBodyOffset && (b += parseFloat($.css(a, "marginTop")) || 0, c += parseFloat($.css(a, "marginLeft")) || 0), {
                top: b,
                left: c
            }
        }, setOffset: function (a, b, c) {
            var d = $.css(a, "position");
            "static" === d && (a.style.position = "relative");
            var e, f, g = $(a), h = g.offset(), i = $.css(a, "top"), j = $.css(a, "left"), k = ("absolute" === d || "fixed" === d) && $.inArray("auto", [i, j]) > -1, l = {}, m = {};
            k ? (m = g.position(), e = m.top, f = m.left) : (e = parseFloat(i) || 0, f = parseFloat(j) || 0), $.isFunction(b) && (b = b.call(a, c, h)), null != b.top && (l.top = b.top - h.top + e), null != b.left && (l.left = b.left - h.left + f), "using"in b ? b.using.call(a, l) : g.css(l)
        }
    }, $.fn.extend({
        position: function () {
            if (this[0]) {
                var a = this[0], b = this.offsetParent(), c = this.offset(), d = ac.test(b[0].nodeName) ? {
                    top: 0,
                    left: 0
                } : b.offset();
                return c.top -= parseFloat($.css(a, "marginTop")) || 0, c.left -= parseFloat($.css(a, "marginLeft")) || 0, d.top += parseFloat($.css(b[0], "borderTopWidth")) || 0, d.left += parseFloat($.css(b[0], "borderLeftWidth")) || 0, {
                    top: c.top - d.top,
                    left: c.left - d.left
                }
            }
        }, offsetParent: function () {
            return this.map(function () {
                for (var a = this.offsetParent || P.body; a && !ac.test(a.nodeName) && "static" === $.css(a, "position");)a = a.offsetParent;
                return a || P.body
            })
        }
    }), $.each({scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function (a, c) {
        var d = /Y/.test(c);
        $.fn[a] = function (e) {
            return $.access(this, function (a, e, f) {
                var g = M(a);
                return f === b ? g ? c in g ? g[c] : g.document.documentElement[e] : a[e] : void(g ? g.scrollTo(d ? $(g).scrollLeft() : f, d ? f : $(g).scrollTop()) : a[e] = f)
            }, a, e, arguments.length, null)
        }
    }), $.each({Height: "height", Width: "width"}, function (a, c) {
        $.each({padding: "inner" + a, content: c, "": "outer" + a}, function (d, e) {
            $.fn[e] = function (e, f) {
                var g = arguments.length && (d || "boolean" != typeof e), h = d || (e === !0 || f === !0 ? "margin" : "border");
                return $.access(this, function (c, d, e) {
                    var f;
                    return $.isWindow(c) ? c.document.documentElement["client" + a] : 9 === c.nodeType ? (f = c.documentElement, Math.max(c.body["scroll" + a], f["scroll" + a], c.body["offset" + a], f["offset" + a], f["client" + a])) : e === b ? $.css(c, d, e, h) : $.style(c, d, e, h)
                }, c, g ? e : b, g, null)
            }
        })
    }), a.jQuery = a.$ = $, "function" == typeof define && define.amd && define.amd.jQuery && define("jquery", [], function () {
        return $
    })
}(window),
    //jQuery-url插件
    jQuery.url = function () {
    var a = {}, b = {}, c = {
        url: window.location,
        strictMode: !1,
        key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
        q: {name: "queryKey", parser: /(?:^|&)([^&=]*)=?([^&]*)/g},
        parser: {
            strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
            loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
        }
    }, d = function () {
        var a, b, d;
        for (str = decodeURI(c.url), a = c.parser[c.strictMode ? "strict" : "loose"].exec(str), b = {}, d = 14; d--;)b[c.key[d]] = a[d] || "";
        return b[c.q.name] = {}, b[c.key[12]].replace(c.q.parser, function (a, d, e) {
            d && (b[c.q.name][d] = e)
        }), b
    }, e = function (a) {
        return jQuery.isEmptyObject(b) && g(), "base" == a ? null !== b.port && "" !== b.port ? b.protocol + "://" + b.host + ":" + b.port + "/" : b.protocol + "://" + b.host + "/" : "" === b[a] ? null : b[a]
    }, f = function (a) {
        return jQuery.isEmptyObject(b) && g(), null === b.queryKey[a] ? null : b.queryKey[a]
    }, g = function () {
        b = d(), h()
    }, h = function () {
        var c = b.path;
        a = [], a = 1 == b.path.length ? {} : ("/" == c.charAt(c.length - 1) ? c.substring(1, c.length - 1) : path = c.substring(1)).split("/")
    };
    return {
        setMode: function (a) {
            return c.strictMode = "strict" == a ? !0 : !1, this
        }, setUrl: function (a) {
            return c.url = void 0 === a ? window.location : a, g(), this
        }, segment: function (c) {
            return jQuery.isEmptyObject(b) && g(), void 0 === c ? a.length : "" === a[c] || void 0 === a[c] ? null : a[c]
        }, attr: e, param: f
    }
}(),
    //seajs
!function (a, b) {
    function c(a) {
        return function (b) {
            return {}.toString.call(b) == "[object " + a + "]"
        }
    }

    function d() {
        return A++
    }

    function e(a) {
        return a.match(D)[0]
    }

    function f(a) {
        for (a = a.replace(E, "/"); a.match(F);)a = a.replace(F, "/");
        return a = a.replace(G, "$1/")
    }

    function g(a) {
        var b = a.length - 1, c = a.charAt(b);
        return "#" === c ? a.substring(0, b) : ".js" === a.substring(b - 2) || a.indexOf("?") > 0 || ".css" === a.substring(b - 3) || "/" === c ? a : a + ".js"
    }

    function h(a) {
        var b = v.alias;
        return b && x(b[a]) ? b[a] : a
    }

    function i(a) {
        var b, c = v.paths;
        return c && (b = a.match(H)) && x(c[b[1]]) && (a = c[b[1]] + b[2]), a
    }

    function j(a) {
        var b = v.vars;
        return b && a.indexOf("{") > -1 && (a = a.replace(I, function (a, c) {
            return x(b[c]) ? b[c] : a
        })), a
    }

    function k(a) {
        var b = v.map, c = a;
        if (b)for (var d = 0, e = b.length; e > d; d++) {
            var f = b[d];
            if (c = z(f) ? f(a) || a : a.replace(f[0], f[1]), c !== a)break
        }
        return c
    }

    function l(a, b) {
        var c, d = a.charAt(0);
        if (J.test(a))c = a; else if ("." === d)c = f((b ? e(b) : v.cwd) + a); else if ("/" === d) {
            var g = v.cwd.match(K);
            c = g ? g[0] + a.substring(1) : a
        } else c = v.base + a;
        return 0 === c.indexOf("//") && (c = location.protocol + c), c
    }

    function m(a, b) {
        if (!a)return "";
        a = h(a), a = i(a), a = j(a), a = g(a);
        var c = l(a, b);
        return c = k(c)
    }

    function n(a) {
        return a.hasAttribute ? a.src : a.getAttribute("src", 4)
    }

    function o(a, b, c) {
        var d = U.test(a), e = L.createElement(d ? "link" : "script");
        if (c) {
            var f = z(c) ? c(a) : c;
            f && (e.charset = f);

        }
        p(e, b, d, a), d ? (e.rel = "stylesheet", e.href = a) : (e.async = !0, e.src = a), Q = e, T ? S.insertBefore(e, T) : S.appendChild(e), Q = null
    }

    function p(a, c, d, e) {
        function f() {
            a.onload = a.onerror = a.onreadystatechange = null, d || v.debug || S.removeChild(a), a = null, c()
        }

        var g = "onload"in a;
        return !d || !V && g ? (g ? (a.onload = f, a.onerror = function () {
            C("error", {uri: e, node: a}), f()
        }) : a.onreadystatechange = function () {
            /loaded|complete/.test(a.readyState) && f()
        }, b) : (setTimeout(function () {
            q(a, c)
        }, 1), b)
    }

    function q(a, b) {
        var c, d = a.sheet;
        if (V)d && (c = !0); else if (d)try {
            d.cssRules && (c = !0)
        } catch (e) {
            "NS_ERROR_DOM_SECURITY_ERR" === e.name && (c = !0)
        }
        setTimeout(function () {
            c ? b() : q(a, b)
        }, 20)
    }

    function r() {
        if (Q)return Q;
        if (R && "interactive" === R.readyState)return R;
        for (var a = S.getElementsByTagName("script"), b = a.length - 1; b >= 0; b--) {
            var c = a[b];
            if ("interactive" === c.readyState)return R = c
        }
    }

    function s(a) {
        var b = [];
        return a.replace(Y, "").replace(X, function (a, c, d) {
            d && b.push(d)
        }), b
    }

    function t(a, b) {
        this.uri = a, this.dependencies = b || [], this.exports = null, this.status = 0, this._waitings = {}, this._remain = 0
    }

    if (!a.seajs) {
        var u = a.seajs = {version: "2.2.0"}, v = u.data = {}, w = c("Object"), x = c("String"), y = Array.isArray || c("Array"), z = c("Function"), A = 0, B = v.events = {};
        u.on = function (a, b) {
            var c = B[a] || (B[a] = []);
            return c.push(b), u
        }, u.off = function (a, b) {
            if (!a && !b)return B = v.events = {}, u;
            var c = B[a];
            if (c)if (b)for (var d = c.length - 1; d >= 0; d--)c[d] === b && c.splice(d, 1); else delete B[a];
            return u
        };
        var C = u.emit = function (a, b) {
            var c, d = B[a];
            if (d)for (d = d.slice(); c = d.shift();)c(b);
            return u
        }, D = /[^?#]*\//, E = /\/\.\//g, F = /\/[^/]+\/\.\.\//, G = /([^:/])\/\//g, H = /^([^/:]+)(\/.+)$/, I = /{([^{]+)}/g, J = /^\/\/.|:\//, K = /^.*?\/\/.*?\//, L = document, M = e(L.URL), N = L.scripts, O = L.getElementById("seajsnode") || N[N.length - 1], P = e(n(O) || M);
        u.resolve = m;
        var Q, R, S = L.head || L.getElementsByTagName("head")[0] || L.documentElement, T = S.getElementsByTagName("base")[0], U = /\.css(?:\?|$)/i, V = +navigator.userAgent.replace(/.*AppleWebKit\/(\d+)\..*/, "$1") < 536;
        u.request = o;
        var W, X = /"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g, Y = /\\\\/g, Z = u.cache = {}, $ = {}, _ = {}, aa = {}, ba = t.STATUS = {
            FETCHING: 1,
            SAVED: 2,
            LOADING: 3,
            LOADED: 4,
            EXECUTING: 5,
            EXECUTED: 6
        };
        t.prototype.resolve = function () {
            for (var a = this, b = a.dependencies, c = [], d = 0, e = b.length; e > d; d++)c[d] = t.resolve(b[d], a.uri);
            return c
        }, t.prototype.load = function () {
            var a = this;
            if (!(a.status >= ba.LOADING)) {
                a.status = ba.LOADING;
                var c = a.resolve();
                C("load", c);
                for (var d, e = a._remain = c.length, f = 0; e > f; f++)d = t.get(c[f]), d.status < ba.LOADED ? d._waitings[a.uri] = (d._waitings[a.uri] || 0) + 1 : a._remain--;
                if (0 === a._remain)return a.onload(), b;
                var g = {};
                for (f = 0; e > f; f++)d = Z[c[f]], d.status < ba.FETCHING ? d.fetch(g) : d.status === ba.SAVED && d.load();
                for (var h in g)g.hasOwnProperty(h) && g[h]()
            }
        }, t.prototype.onload = function () {
            var a = this;
            a.status = ba.LOADED, a.callback && a.callback();
            var b, c, d = a._waitings;
            for (b in d)d.hasOwnProperty(b) && (c = Z[b], c._remain -= d[b], 0 === c._remain && c.onload());
            delete a._waitings, delete a._remain
        }, t.prototype.fetch = function (a) {
            function c() {
                u.request(g.requestUri, g.onRequest, g.charset)
            }

            function d() {
                delete $[h], _[h] = !0, W && (t.save(f, W), W = null);
                var a, b = aa[h];
                for (delete aa[h]; a = b.shift();)a.load()
            }

            var e = this, f = e.uri;
            e.status = ba.FETCHING;
            var g = {uri: f};
            C("fetch", g);
            var h = g.requestUri || f;
            return !h || _[h] ? (e.load(), b) : $[h] ? (aa[h].push(e), b) : ($[h] = !0, aa[h] = [e], C("request", g = {
                uri: f,
                requestUri: h,
                onRequest: d,
                charset: v.charset
            }), g.requested || (a ? a[g.requestUri] = c : c()), b)
        }, t.prototype.exec = function () {
            function a(b) {
                return t.get(a.resolve(b)).exec()
            }

            var c = this;
            if (c.status >= ba.EXECUTING)return c.exports;
            c.status = ba.EXECUTING;
            var e = c.uri;
            a.resolve = function (a) {
                return t.resolve(a, e)
            }, a.async = function (b, c) {
                return t.use(b, c, e + "_async_" + d()), a
            };
            var f = c.factory, g = z(f) ? f(a, c.exports = {}, c) : f;
            return g === b && (g = c.exports), delete c.factory, c.exports = g, c.status = ba.EXECUTED, C("exec", c), g
        }, t.resolve = function (a, b) {
            var c = {id: a, refUri: b};
            return C("resolve", c), c.uri || u.resolve(c.id, b)
        }, t.define = function (a, c, d) {
            var e = arguments.length;
            1 === e ? (d = a, a = b) : 2 === e && (d = c, y(a) ? (c = a, a = b) : c = b), !y(c) && z(d) && (c = s("" + d));
            var f = {id: a, uri: t.resolve(a), deps: c, factory: d};
            if (!f.uri && L.attachEvent) {
                var g = r();
                g && (f.uri = g.src)
            }
            C("define", f), f.uri ? t.save(f.uri, f) : W = f
        }, t.save = function (a, b) {
            var c = t.get(a);
            c.status < ba.SAVED && (c.id = b.id || a, c.dependencies = b.deps || [], c.factory = b.factory, c.status = ba.SAVED)
        }, t.get = function (a, b) {
            return Z[a] || (Z[a] = new t(a, b))
        }, t.use = function (b, c, d) {
            var e = t.get(d, y(b) ? b : [b]);
            e.callback = function () {
                for (var b = [], d = e.resolve(), f = 0, g = d.length; g > f; f++)b[f] = Z[d[f]].exec();
                c && c.apply(a, b), delete e.callback
            }, e.load()
        }, t.preload = function (a) {
            var b = v.preload, c = b.length;
            c ? t.use(b, function () {
                b.splice(0, c), t.preload(a)
            }, v.cwd + "_preload_" + d()) : a()
        }, u.use = function (a, b) {
            return t.preload(function () {
                t.use(a, b, v.cwd + "_use_" + d())
            }), u
        }, t.define.cmd = {}, a.define = t.define, u.Module = t, v.fetchedList = _, v.cid = d, u.require = function (a) {
            var b = t.get(t.resolve(a));
            return b.status < ba.EXECUTING && (b.onload(), b.exec()), b.exports
        };
        var ca = /^(.+?\/)(\?\?)?(seajs\/)+/;
        v.base = (P.match(ca) || ["", P])[1], v.dir = P, v.cwd = M, v.charset = "utf-8", v.preload = function () {
            var a = [], b = location.search.replace(/(seajs-\w+)(&|$)/g, "$1=1$2");
            return b += " " + L.cookie, b.replace(/(seajs-\w+)=1/g, function (b, c) {
                a.push(c)
            }), a
        }(), u.config = function (a) {
            for (var b in a) {
                var c = a[b], d = v[b];
                if (d && w(d))for (var e in c)d[e] = c[e]; else y(d) ? c = d.concat(c) : "base" === b && ("/" !== c.slice(-1) && (c += "/"), c = l(c)), v[b] = c
            }
            return C("config", a), u
        }
    }
}(this),
!function () {
    var a, b = /\W/g, c = document, d = document.getElementsByTagName("head")[0] || document.documentElement;
    seajs.importStyle = function (e, f) {
        if (!f || (f = f.replace(b, "-"), !c.getElementById(f))) {
            var g;
            if (!a || f ? (g = c.createElement("style"), f && (g.id = f), d.appendChild(g)) : g = a, g.styleSheet) {
                if (c.getElementsByTagName("style").length > 31)throw new Error("Exceed the maximal count of style tags in IE");
                g.styleSheet.cssText += e
            } else g.appendChild(c.createTextNode(e));
            f || (a = g)
        }
    }, define("seajs/seajs-style/1.0.2/seajs-style", [], {})
}();
//arttemplate2.0.1
var template = function (a, b) {
    return template["object" == typeof b ? "render" : "compile"].apply(template, arguments)
};
!function (a, b) {
    "use strict";
    a.version = "2.0.1", a.openTag = "<%", a.closeTag = "%>", a.isEscape = !0, a.isCompress = !1, a.parser = null, a.render = function (a, b) {
        var c = d(a);
        return void 0 === c ? e({id: a, name: "Render Error", message: "No Template"}) : c(b)
    }, a.compile = function (b, d) {
        function g(c) {
            try {
                return new k(c) + ""
            } catch (f) {
                return i ? (f.id = b || d, f.name = "Render Error", f.source = d, e(f)) : a.compile(b, d, !0)(c)
            }
        }

        var h = arguments, i = h[2], j = "anonymous";
        "string" != typeof d && (i = h[1], d = h[0], b = j);
        try {
            var k = f(d, i)
        } catch (l) {
            return l.id = b || d, l.name = "Syntax Error", e(l)
        }
        return g.prototype = k.prototype, g.toString = function () {
            return k.toString()
        }, b !== j && (c[b] = g), g
    }, a.helper = function (b, c) {
        a.prototype[b] = c
    }, a.onerror = function (a) {
        var c = "[template]:\n" + a.id + "\n\n[name]:\n" + a.name;
        a.message && (c += "\n\n[message]:\n" + a.message), a.line && (c += "\n\n[line]:\n" + a.line, c += "\n\n[source]:\n" + a.source.split(/\n/)[a.line - 1].replace(/^[\s\t]+/, "")), a.temp && (c += "\n\n[temp]:\n" + a.temp), b.console && console.error(c)
    };
    var c = {}, d = function (d) {
        var e = c[d];
        if (void 0 === e && "document"in b) {
            var f = document.getElementById(d);
            if (f) {
                var g = f.value || f.innerHTML;
                return a.compile(d, g.replace(/^\s*|\s*$/g, ""))
            }
        } else if (c.hasOwnProperty(d))return e
    }, e = function (b) {
        function c() {
            return c + ""
        }

        return a.onerror(b), c.toString = function () {
            return "{Template Error}"
        }, c
    }, f = function () {
        a.prototype = {
            $render: a.render, $escape: function (a) {
                return "string" == typeof a ? a.replace(/&(?![\w#]+;)|[<>"']/g, function (a) {
                    return {"<": "&#60;", ">": "&#62;", '"': "&#34;", "'": "&#39;", "&": "&#38;"}[a]
                }) : a
            }, $string: function (a) {
                return "string" == typeof a || "number" == typeof a ? a : "function" == typeof a ? a() : ""
            }
        };
        var b = Array.prototype.forEach || function (a, b) {
                for (var c = this.length >>> 0, d = 0; c > d; d++)d in this && a.call(b, this[d], d, this)
            }, c = function (a, c) {
            b.call(a, c)
        }, d = "break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined", e = /\/\*(?:.|\n)*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|'[^']*'|"[^"]*"|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g, f = /[^\w$]+/g, g = new RegExp(["\\b" + d.replace(/,/g, "\\b|\\b") + "\\b"].join("|"), "g"), h = /\b\d[^,]*/g, i = /^,+|,+$/g, j = function (a) {
            return a = a.replace(e, "").replace(f, ",").replace(g, "").replace(h, "").replace(i, ""), a = a ? a.split(/,+/) : []
        };
        return function (b, d) {
            function e(b) {
                return o += b.split(/\n/).length - 1, a.isCompress && (b = b.replace(/[\n\r\t\s]+/g, " ")), b = b.replace(/('|\\)/g, "\\$1").replace(/\r/g, "\\r").replace(/\n/g, "\\n"), b = u[1] + "'" + b + "'" + u[2], b + "\n"
            }

            function f(b) {
                var c = o;
                if (l ? b = l(b) : d && (b = b.replace(/\n/g, function () {
                        return o++, "$line=" + o + ";"
                    })), 0 === b.indexOf("=")) {
                    var e = 0 !== b.indexOf("==");
                    if (b = b.replace(/^=*|[\s;]*$/g, ""), e && a.isEscape) {
                        var f = b.replace(/\s*\([^\)]+\)/, "");
                        q.hasOwnProperty(f) || /^(include|print)$/.test(f) || (b = "$escape($string(" + b + "))")
                    } else b = "$string(" + b + ")";
                    b = u[1] + b + u[2]
                }
                return d && (b = "$line=" + c + ";" + b), g(b), b + "\n"
            }

            function g(a) {
                a = j(a), c(a, function (a) {
                    p.hasOwnProperty(a) || (h(a), p[a] = !0)
                })
            }

            function h(a) {
                var b;
                "print" === a ? b = w : "include" === a ? (r.$render = q.$render, b = x) : (b = "$data." + a, q.hasOwnProperty(a) && (r[a] = q[a], b = 0 === a.indexOf("$") ? "$helpers." + a : b + "===undefined?$helpers." + a + ":" + b)), s += a + "=" + b + ","
            }

            var i = a.openTag, k = a.closeTag, l = a.parser, m = b, n = "", o = 1, p = {
                $data: !0,
                $helpers: !0,
                $out: !0,
                $line: !0
            }, q = a.prototype, r = {}, s = "var $helpers=this," + (d ? "$line=0," : ""), t = "".trim, u = t ? ["$out='';", "$out+=", ";", "$out"] : ["$out=[];", "$out.push(", ");", "$out.join('')"], v = t ? "if(content!==undefined){$out+=content;return content}" : "$out.push(content);", w = "function(content){" + v + "}", x = "function(id,data){if(data===undefined){data=$data}var content=$helpers.$render(id,data);" + v + "}";
            c(m.split(i), function (a) {
                a = a.split(k);
                var b = a[0], c = a[1];
                1 === a.length ? n += e(b) : (n += f(b), c && (n += e(c)))
            }), m = n, d && (m = "try{" + m + "}catch(e){e.line=$line;throw e}"), m = "'use strict';" + s + u[0] + m + "return new String(" + u[3] + ")";
            try {
                var y = new Function("$data", m);
                return y.prototype = r, y
            } catch (z) {
                throw z.temp = "function anonymous($data) {" + m + "}", z
            }
        }
    }()
}(template, this), "function" == typeof define ? define(function (a, b, c) {
    c.exports = template
}) : "undefined" != typeof exports && (module.exports = template),
    //以上是适配requireJS和seaJS 或者NodeJS
    function (a) {
    a.openTag = "{", a.closeTag = "}", a.parser = function (b) {
        b = b.replace(/^\s/, "");
        var c = b.split(" "), d = c.shift(), e = a.keywords, f = e[d];
        return f && e.hasOwnProperty(d) ? (c = c.join(" "), b = f.call(b, c)) : a.prototype.hasOwnProperty(d) ? (c = c.join(","), b = "==" + d + "(" + c + ");") : (b = b.replace(/[\s;]*$/, ""), b = "=" + b), b
    }, a.keywords = {
        "if": function (a) {
            return "if(" + a + "){"
        }, "else": function (a) {
            return a = a.split(" "), a = "if" === a.shift() ? " if(" + a.join(" ") + ")" : "", "}else" + a + "{"
        }, "/if": function () {
            return "}"
        }, each: function (a) {
            a = a.split(" ");
            var b = a[0] || "$data", c = a[1] || "as", d = a[2] || "$value", e = a[3] || "$index", f = d + "," + e;
            return "as" !== c && (b = "[]"), "$each(" + b + ",function(" + f + "){"
        }, "/each": function () {
            return "});"
        }, echo: function (a) {
            return "print(" + a + ");"
        }, include: function (a) {
            a = a.split(" ");
            var b = a[0], c = a[1], d = b + (c ? "," + c : "");
            return "include(" + d + ");"
        }
    }, a.helper("$each", function (a, b) {
        var c = Array.isArray || function (a) {
                return "[object Array]" === Object.prototype.toString.call(a)
            };
        if (c(a))for (var d = 0, e = a.length; e > d; d++)b.call(a, a[d], d, a); else for (d in a)b.call(a, a[d], d)
    })
}(template), function () {
    var a = this, b = a._, c = {}, d = Array.prototype, e = Object.prototype, f = Function.prototype, g = d.push, h = d.slice, i = d.concat, j = e.toString, k = e.hasOwnProperty, l = d.forEach, m = d.map, n = d.reduce, o = d.reduceRight, p = d.filter, q = d.every, r = d.some, s = d.indexOf, t = d.lastIndexOf, u = Array.isArray, v = Object.keys, w = f.bind, x = function (a) {
        return a instanceof x ? a : this instanceof x ? void(this._wrapped = a) : new x(a)
    };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = x), exports._ = x) : a._ = x, x.VERSION = "1.6.0";
    var y = x.each = x.forEach = function (a, b, d) {
        if (null == a)return a;
        if (l && a.forEach === l)a.forEach(b, d); else if (a.length === +a.length) {
            for (var e = 0, f = a.length; f > e; e++)if (b.call(d, a[e], e, a) === c)return
        } else for (var g = x.keys(a), e = 0, f = g.length; f > e; e++)if (b.call(d, a[g[e]], g[e], a) === c)return;
        return a
    };
    x.map = x.collect = function (a, b, c) {
        var d = [];
        return null == a ? d : m && a.map === m ? a.map(b, c) : (y(a, function (a, e, f) {
            d.push(b.call(c, a, e, f))
        }), d)
    };
    var z = "Reduce of empty array with no initial value";
    x.reduce = x.foldl = x.inject = function (a, b, c, d) {
        var e = arguments.length > 2;
        if (null == a && (a = []), n && a.reduce === n)return d && (b = x.bind(b, d)), e ? a.reduce(b, c) : a.reduce(b);
        if (y(a, function (a, f, g) {
                e ? c = b.call(d, c, a, f, g) : (c = a, e = !0)
            }), !e)throw new TypeError(z);
        return c
    }, x.reduceRight = x.foldr = function (a, b, c, d) {
        var e = arguments.length > 2;
        if (null == a && (a = []), o && a.reduceRight === o)return d && (b = x.bind(b, d)), e ? a.reduceRight(b, c) : a.reduceRight(b);
        var f = a.length;
        if (f !== +f) {
            var g = x.keys(a);
            f = g.length
        }
        if (y(a, function (h, i, j) {
                i = g ? g[--f] : --f, e ? c = b.call(d, c, a[i], i, j) : (c = a[i], e = !0)
            }), !e)throw new TypeError(z);
        return c
    }, x.find = x.detect = function (a, b, c) {
        var d;
        return A(a, function (a, e, f) {
            return b.call(c, a, e, f) ? (d = a, !0) : void 0
        }), d
    }, x.filter = x.select = function (a, b, c) {
        var d = [];
        return null == a ? d : p && a.filter === p ? a.filter(b, c) : (y(a, function (a, e, f) {
            b.call(c, a, e, f) && d.push(a)
        }), d)
    }, x.reject = function (a, b, c) {
        return x.filter(a, function (a, d, e) {
            return !b.call(c, a, d, e)
        }, c)
    }, x.every = x.all = function (a, b, d) {
        b || (b = x.identity);
        var e = !0;
        return null == a ? e : q && a.every === q ? a.every(b, d) : (y(a, function (a, f, g) {
            return (e = e && b.call(d, a, f, g)) ? void 0 : c
        }), !!e)
    };
    var A = x.some = x.any = function (a, b, d) {
        b || (b = x.identity);
        var e = !1;
        return null == a ? e : r && a.some === r ? a.some(b, d) : (y(a, function (a, f, g) {
            return e || (e = b.call(d, a, f, g)) ? c : void 0
        }), !!e)
    };
    x.contains = x.include = function (a, b) {
        return null == a ? !1 : s && a.indexOf === s ? -1 != a.indexOf(b) : A(a, function (a) {
            return a === b
        })
    }, x.invoke = function (a, b) {
        var c = h.call(arguments, 2), d = x.isFunction(b);
        return x.map(a, function (a) {
            return (d ? b : a[b]).apply(a, c)
        })
    }, x.pluck = function (a, b) {
        return x.map(a, x.property(b))
    }, x.where = function (a, b) {
        return x.filter(a, x.matches(b))
    }, x.findWhere = function (a, b) {
        return x.find(a, x.matches(b))
    }, x.max = function (a, b, c) {
        if (!b && x.isArray(a) && a[0] === +a[0] && a.length < 65535)return Math.max.apply(Math, a);
        var d = -1 / 0, e = -1 / 0;
        return y(a, function (a, f, g) {
            var h = b ? b.call(c, a, f, g) : a;
            h > e && (d = a, e = h)
        }), d
    }, x.min = function (a, b, c) {
        if (!b && x.isArray(a) && a[0] === +a[0] && a.length < 65535)return Math.min.apply(Math, a);
        var d = 1 / 0, e = 1 / 0;
        return y(a, function (a, f, g) {
            var h = b ? b.call(c, a, f, g) : a;
            e > h && (d = a, e = h)
        }), d
    }, x.shuffle = function (a) {
        var b, c = 0, d = [];
        return y(a, function (a) {
            b = x.random(c++), d[c - 1] = d[b], d[b] = a
        }), d
    }, x.sample = function (a, b, c) {
        return null == b || c ? (a.length !== +a.length && (a = x.values(a)), a[x.random(a.length - 1)]) : x.shuffle(a).slice(0, Math.max(0, b))
    };
    var B = function (a) {
        return null == a ? x.identity : x.isFunction(a) ? a : x.property(a)
    };
    x.sortBy = function (a, b, c) {
        return b = B(b), x.pluck(x.map(a, function (a, d, e) {
            return {value: a, index: d, criteria: b.call(c, a, d, e)}
        }).sort(function (a, b) {
            var c = a.criteria, d = b.criteria;
            if (c !== d) {
                if (c > d || void 0 === c)return 1;
                if (d > c || void 0 === d)return -1
            }
            return a.index - b.index
        }), "value")
    };
    var C = function (a) {
        return function (b, c, d) {
            var e = {};
            return c = B(c), y(b, function (f, g) {
                var h = c.call(d, f, g, b);
                a(e, h, f)
            }), e
        }
    };
    x.groupBy = C(function (a, b, c) {
        x.has(a, b) ? a[b].push(c) : a[b] = [c]
    }), x.indexBy = C(function (a, b, c) {
        a[b] = c
    }), x.countBy = C(function (a, b) {
        x.has(a, b) ? a[b]++ : a[b] = 1
    }), x.sortedIndex = function (a, b, c, d) {
        c = B(c);
        for (var e = c.call(d, b), f = 0, g = a.length; g > f;) {
            var h = f + g >>> 1;
            c.call(d, a[h]) < e ? f = h + 1 : g = h
        }
        return f
    }, x.toArray = function (a) {
        return a ? x.isArray(a) ? h.call(a) : a.length === +a.length ? x.map(a, x.identity) : x.values(a) : []
    }, x.size = function (a) {
        return null == a ? 0 : a.length === +a.length ? a.length : x.keys(a).length
    }, x.first = x.head = x.take = function (a, b, c) {
        return null == a ? void 0 : null == b || c ? a[0] : 0 > b ? [] : h.call(a, 0, b)
    }, x.initial = function (a, b, c) {
        return h.call(a, 0, a.length - (null == b || c ? 1 : b))
    }, x.last = function (a, b, c) {
        return null == a ? void 0 : null == b || c ? a[a.length - 1] : h.call(a, Math.max(a.length - b, 0))
    }, x.rest = x.tail = x.drop = function (a, b, c) {
        return h.call(a, null == b || c ? 1 : b)
    }, x.compact = function (a) {
        return x.filter(a, x.identity)
    };
    var D = function (a, b, c) {
        return b && x.every(a, x.isArray) ? i.apply(c, a) : (y(a, function (a) {
            x.isArray(a) || x.isArguments(a) ? b ? g.apply(c, a) : D(a, b, c) : c.push(a)
        }), c)
    };
    x.flatten = function (a, b) {
        return D(a, b, [])
    }, x.without = function (a) {
        return x.difference(a, h.call(arguments, 1))
    }, x.partition = function (a, b) {
        var c = [], d = [];
        return y(a, function (a) {
            (b(a) ? c : d).push(a)
        }), [c, d]
    }, x.uniq = x.unique = function (a, b, c, d) {
        x.isFunction(b) && (d = c, c = b, b = !1);
        var e = c ? x.map(a, c, d) : a, f = [], g = [];
        return y(e, function (c, d) {
            (b ? d && g[g.length - 1] === c : x.contains(g, c)) || (g.push(c), f.push(a[d]))
        }), f
    }, x.union = function () {
        return x.uniq(x.flatten(arguments, !0))
    }, x.intersection = function (a) {
        var b = h.call(arguments, 1);
        return x.filter(x.uniq(a), function (a) {
            return x.every(b, function (b) {
                return x.contains(b, a)
            })
        })
    }, x.difference = function (a) {
        var b = i.apply(d, h.call(arguments, 1));
        return x.filter(a, function (a) {
            return !x.contains(b, a)
        })
    }, x.zip = function () {
        for (var a = x.max(x.pluck(arguments, "length").concat(0)), b = new Array(a), c = 0; a > c; c++)b[c] = x.pluck(arguments, "" + c);
        return b
    }, x.object = function (a, b) {
        if (null == a)return {};
        for (var c = {}, d = 0, e = a.length; e > d; d++)b ? c[a[d]] = b[d] : c[a[d][0]] = a[d][1];
        return c
    }, x.indexOf = function (a, b, c) {
        if (null == a)return -1;
        var d = 0, e = a.length;
        if (c) {
            if ("number" != typeof c)return d = x.sortedIndex(a, b), a[d] === b ? d : -1;
            d = 0 > c ? Math.max(0, e + c) : c
        }
        if (s && a.indexOf === s)return a.indexOf(b, c);
        for (; e > d; d++)if (a[d] === b)return d;
        return -1
    }, x.lastIndexOf = function (a, b, c) {
        if (null == a)return -1;
        var d = null != c;
        if (t && a.lastIndexOf === t)return d ? a.lastIndexOf(b, c) : a.lastIndexOf(b);
        for (var e = d ? c : a.length; e--;)if (a[e] === b)return e;
        return -1
    }, x.range = function (a, b, c) {
        arguments.length <= 1 && (b = a || 0, a = 0), c = arguments[2] || 1;
        for (var d = Math.max(Math.ceil((b - a) / c), 0), e = 0, f = new Array(d); d > e;)f[e++] = a, a += c;
        return f
    };
    var E = function () {
    };
    x.bind = function (a, b) {
        var c, d;
        if (w && a.bind === w)return w.apply(a, h.call(arguments, 1));
        if (!x.isFunction(a))throw new TypeError;
        return c = h.call(arguments, 2), d = function () {
            if (!(this instanceof d))return a.apply(b, c.concat(h.call(arguments)));
            E.prototype = a.prototype;
            var e = new E;
            E.prototype = null;
            var f = a.apply(e, c.concat(h.call(arguments)));
            return Object(f) === f ? f : e
        }
    }, x.partial = function (a) {
        var b = h.call(arguments, 1);
        return function () {
            for (var c = 0, d = b.slice(), e = 0, f = d.length; f > e; e++)d[e] === x && (d[e] = arguments[c++]);
            for (; c < arguments.length;)d.push(arguments[c++]);
            return a.apply(this, d)
        }
    }, x.bindAll = function (a) {
        var b = h.call(arguments, 1);
        if (0 === b.length)throw new Error("bindAll must be passed function names");
        return y(b, function (b) {
            a[b] = x.bind(a[b], a)
        }), a
    }, x.memoize = function (a, b) {
        var c = {};
        return b || (b = x.identity), function () {
            var d = b.apply(this, arguments);
            return x.has(c, d) ? c[d] : c[d] = a.apply(this, arguments)
        }
    }, x.delay = function (a, b) {
        var c = h.call(arguments, 2);
        return setTimeout(function () {
            return a.apply(null, c)
        }, b)
    }, x.defer = function (a) {
        return x.delay.apply(x, [a, 1].concat(h.call(arguments, 1)))
    }, x.throttle = function (a, b, c) {
        var d, e, f, g = null, h = 0;
        c || (c = {});
        var i = function () {
            h = c.leading === !1 ? 0 : x.now(), g = null, f = a.apply(d, e), d = e = null
        };
        return function () {
            var j = x.now();
            h || c.leading !== !1 || (h = j);
            var k = b - (j - h);
            return d = this, e = arguments, 0 >= k ? (clearTimeout(g), g = null, h = j, f = a.apply(d, e), d = e = null) : g || c.trailing === !1 || (g = setTimeout(i, k)), f
        }
    }, x.debounce = function (a, b, c) {
        var d, e, f, g, h, i = function () {
            var j = x.now() - g;
            b > j ? d = setTimeout(i, b - j) : (d = null, c || (h = a.apply(f, e), f = e = null))
        };
        return function () {
            f = this, e = arguments, g = x.now();
            var j = c && !d;
            return d || (d = setTimeout(i, b)), j && (h = a.apply(f, e), f = e = null), h
        }
    }, x.once = function (a) {
        var b, c = !1;
        return function () {
            return c ? b : (c = !0, b = a.apply(this, arguments), a = null, b)
        }
    }, x.wrap = function (a, b) {
        return x.partial(b, a)
    }, x.compose = function () {
        var a = arguments;
        return function () {
            for (var b = arguments, c = a.length - 1; c >= 0; c--)b = [a[c].apply(this, b)];
            return b[0]
        }
    }, x.after = function (a, b) {
        return function () {
            return --a < 1 ? b.apply(this, arguments) : void 0
        }
    }, x.keys = function (a) {
        if (!x.isObject(a))return [];
        if (v)return v(a);
        var b = [];
        for (var c in a)x.has(a, c) && b.push(c);
        return b
    }, x.values = function (a) {
        for (var b = x.keys(a), c = b.length, d = new Array(c), e = 0; c > e; e++)d[e] = a[b[e]];
        return d
    }, x.pairs = function (a) {
        for (var b = x.keys(a), c = b.length, d = new Array(c), e = 0; c > e; e++)d[e] = [b[e], a[b[e]]];
        return d
    }, x.invert = function (a) {
        for (var b = {}, c = x.keys(a), d = 0, e = c.length; e > d; d++)b[a[c[d]]] = c[d];
        return b
    }, x.functions = x.methods = function (a) {
        var b = [];
        for (var c in a)x.isFunction(a[c]) && b.push(c);
        return b.sort()
    }, x.extend = function (a) {
        return y(h.call(arguments, 1), function (b) {
            if (b)for (var c in b)a[c] = b[c]
        }), a
    }, x.pick = function (a) {
        var b = {}, c = i.apply(d, h.call(arguments, 1));
        return y(c, function (c) {
            c in a && (b[c] = a[c])
        }), b
    }, x.omit = function (a) {
        var b = {}, c = i.apply(d, h.call(arguments, 1));
        for (var e in a)x.contains(c, e) || (b[e] = a[e]);
        return b
    }, x.defaults = function (a) {
        return y(h.call(arguments, 1), function (b) {
            if (b)for (var c in b)void 0 === a[c] && (a[c] = b[c])
        }), a
    }, x.clone = function (a) {
        return x.isObject(a) ? x.isArray(a) ? a.slice() : x.extend({}, a) : a
    }, x.tap = function (a, b) {
        return b(a), a
    };
    var F = function (a, b, c, d) {
        if (a === b)return 0 !== a || 1 / a == 1 / b;
        if (null == a || null == b)return a === b;
        a instanceof x && (a = a._wrapped), b instanceof x && (b = b._wrapped);
        var e = j.call(a);
        if (e != j.call(b))return !1;
        switch (e) {
            case"[object String]":
                return a == String(b);
            case"[object Number]":
                return a != +a ? b != +b : 0 == a ? 1 / a == 1 / b : a == +b;
            case"[object Date]":
            case"[object Boolean]":
                return +a == +b;
            case"[object RegExp]":
                return a.source == b.source && a.global == b.global && a.multiline == b.multiline && a.ignoreCase == b.ignoreCase
        }
        if ("object" != typeof a || "object" != typeof b)return !1;
        for (var f = c.length; f--;)if (c[f] == a)return d[f] == b;
        var g = a.constructor, h = b.constructor;
        if (g !== h && !(x.isFunction(g) && g instanceof g && x.isFunction(h) && h instanceof h) && "constructor"in a && "constructor"in b)return !1;
        c.push(a), d.push(b);
        var i = 0, k = !0;
        if ("[object Array]" == e) {
            if (i = a.length, k = i == b.length)for (; i-- && (k = F(a[i], b[i], c, d)););
        } else {
            for (var l in a)if (x.has(a, l) && (i++, !(k = x.has(b, l) && F(a[l], b[l], c, d))))break;
            if (k) {
                for (l in b)if (x.has(b, l) && !i--)break;
                k = !i
            }
        }
        return c.pop(), d.pop(), k
    };
    x.isEqual = function (a, b) {
        return F(a, b, [], [])
    }, x.isEmpty = function (a) {
        if (null == a)return !0;
        if (x.isArray(a) || x.isString(a))return 0 === a.length;
        for (var b in a)if (x.has(a, b))return !1;
        return !0
    }, x.isElement = function (a) {
        return !(!a || 1 !== a.nodeType)
    }, x.isArray = u || function (a) {
            return "[object Array]" == j.call(a)
        }, x.isObject = function (a) {
        return a === Object(a)
    }, y(["Arguments", "Function", "String", "Number", "Date", "RegExp"], function (a) {
        x["is" + a] = function (b) {
            return j.call(b) == "[object " + a + "]"
        }
    }), x.isArguments(arguments) || (x.isArguments = function (a) {
        return !(!a || !x.has(a, "callee"))
    }), "function" != typeof/./ && (x.isFunction = function (a) {
        return "function" == typeof a
    }), x.isFinite = function (a) {
        return isFinite(a) && !isNaN(parseFloat(a))
    }, x.isNaN = function (a) {
        return x.isNumber(a) && a != +a
    }, x.isBoolean = function (a) {
        return a === !0 || a === !1 || "[object Boolean]" == j.call(a)
    }, x.isNull = function (a) {
        return null === a
    }, x.isUndefined = function (a) {
        return void 0 === a
    }, x.has = function (a, b) {
        return k.call(a, b)
    }, x.noConflict = function () {
        return a._ = b, this
    }, x.identity = function (a) {
        return a
    }, x.constant = function (a) {
        return function () {
            return a
        }
    }, x.property = function (a) {
        return function (b) {
            return b[a]
        }
    }, x.matches = function (a) {
        return function (b) {
            if (b === a)return !0;
            for (var c in a)if (a[c] !== b[c])return !1;
            return !0
        }
    }, x.times = function (a, b, c) {
        for (var d = Array(Math.max(0, a)), e = 0; a > e; e++)d[e] = b.call(c, e);
        return d
    }, x.random = function (a, b) {
        return null == b && (b = a, a = 0), a + Math.floor(Math.random() * (b - a + 1))
    }, x.now = Date.now || function () {
            return (new Date).getTime()
        };
    var G = {escape: {"&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#x27;"}};
    G.unescape = x.invert(G.escape);
    var H = {
        escape: new RegExp("[" + x.keys(G.escape).join("") + "]", "g"),
        unescape: new RegExp("(" + x.keys(G.unescape).join("|") + ")", "g")
    };
    x.each(["escape", "unescape"], function (a) {
        x[a] = function (b) {
            return null == b ? "" : ("" + b).replace(H[a], function (b) {
                return G[a][b]
            })
        }
    }), x.result = function (a, b) {
        if (null == a)return void 0;
        var c = a[b];
        return x.isFunction(c) ? c.call(a) : c
    }, x.mixin = function (a) {
        y(x.functions(a), function (b) {
            var c = x[b] = a[b];
            x.prototype[b] = function () {
                var a = [this._wrapped];
                return g.apply(a, arguments), M.call(this, c.apply(x, a))
            }
        })
    };
    var I = 0;
    x.uniqueId = function (a) {
        var b = ++I + "";
        return a ? a + b : b
    }, x.templateSettings = {evaluate: /<%([\s\S]+?)%>/g, interpolate: /<%=([\s\S]+?)%>/g, escape: /<%-([\s\S]+?)%>/g};
    var J = /(.)^/, K = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "	": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }, L = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    x.template = function (a, b, c) {
        var d;
        c = x.defaults({}, c, x.templateSettings);
        var e = new RegExp([(c.escape || J).source, (c.interpolate || J).source, (c.evaluate || J).source].join("|") + "|$", "g"), f = 0, g = "__p+='";
        a.replace(e, function (b, c, d, e, h) {
            return g += a.slice(f, h).replace(L, function (a) {
                return "\\" + K[a]
            }), c && (g += "'+\n((__t=(" + c + "))==null?'':_.escape(__t))+\n'"), d && (g += "'+\n((__t=(" + d + "))==null?'':__t)+\n'"), e && (g += "';\n" + e + "\n__p+='"), f = h + b.length, b
        }), g += "';\n", c.variable || (g = "with(obj||{}){\n" + g + "}\n"), g = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + g + "return __p;\n";
        try {
            d = new Function(c.variable || "obj", "_", g)
        } catch (h) {
            throw h.source = g, h
        }
        if (b)return d(b, x);
        var i = function (a) {
            return d.call(this, a, x)
        };
        return i.source = "function(" + (c.variable || "obj") + "){\n" + g + "}", i
    }, x.chain = function (a) {
        return x(a).chain()
    };
    var M = function (a) {
        return this._chain ? x(a).chain() : a
    };
    x.mixin(x), y(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (a) {
        var b = d[a];
        x.prototype[a] = function () {
            var c = this._wrapped;
            return b.apply(c, arguments), "shift" != a && "splice" != a || 0 !== c.length || delete c[0], M.call(this, c)
        }
    }), y(["concat", "join", "slice"], function (a) {
        var b = d[a];
        x.prototype[a] = function () {
            return M.call(this, b.apply(this._wrapped, arguments))
        }
    }), x.extend(x.prototype, {
        chain: function () {
            return this._chain = !0, this
        }, value: function () {
            return this._wrapped
        }
    }), "function" == typeof define && define.amd && define("underscore", [], function () {
        return x
    })
}.call(this),
    !function (a, b) {
    "use strict";
    function c(a, b) {
        for (var c, d = [], f = 0; f < a.length; ++f) {
            if (c = g[a[f]] || e(a[f]), !c)throw"module definition dependecy not found: " + a[f];
            d.push(c)
        }
        b.apply(null, d)
    }

    function d(a, d, e) {
        if ("string" != typeof a)throw"invalid module definition, module id must be defined and be a string";
        if (d === b)throw"invalid module definition, dependencies must be specified";
        if (e === b)throw"invalid module definition, definition function must be specified";
        c(d, function () {
            g[a] = e.apply(null, arguments)
        })
    }

    function e(b) {
        for (var c = a, d = b.split(/[.\/]/), e = 0; e < d.length; ++e) {
            if (!c[d[e]])return;
            c = c[d[e]]
        }
        return c
    }

    function f(c) {
        for (var d = 0; d < c.length; d++) {
            for (var e = a, f = c[d], h = f.split(/[.\/]/), i = 0; i < h.length - 1; ++i)e[h[i]] === b && (e[h[i]] = {}), e = e[h[i]];
            e[h[h.length - 1]] = g[f]
        }
    }

    var g = {}, h = "moxie/core/utils/Basic", i = "moxie/core/I18n", j = "moxie/core/utils/Mime", k = "moxie/core/utils/Env", l = "moxie/core/utils/Dom", m = "moxie/core/Exceptions", n = "moxie/core/EventTarget", o = "moxie/core/utils/Encode", p = "moxie/runtime/Runtime", q = "moxie/runtime/RuntimeClient", r = "moxie/file/Blob", s = "moxie/file/File", t = "moxie/file/FileInput", u = "moxie/file/FileDrop", v = "moxie/runtime/RuntimeTarget", w = "moxie/file/FileReader", x = "moxie/core/utils/Url", y = "moxie/file/FileReaderSync", z = "moxie/xhr/FormData", A = "moxie/xhr/XMLHttpRequest", B = "moxie/runtime/Transporter", C = "moxie/image/Image", D = "moxie/runtime/html5/Runtime", E = "moxie/runtime/html5/file/Blob", F = "moxie/core/utils/Events", G = "moxie/runtime/html5/file/FileInput", H = "moxie/runtime/html5/file/FileDrop", I = "moxie/runtime/html5/file/FileReader", J = "moxie/runtime/html5/xhr/XMLHttpRequest", K = "moxie/runtime/html5/utils/BinaryReader", L = "moxie/runtime/html5/image/JPEGHeaders", M = "moxie/runtime/html5/image/ExifParser", N = "moxie/runtime/html5/image/JPEG", O = "moxie/runtime/html5/image/PNG", P = "moxie/runtime/html5/image/ImageInfo", Q = "moxie/runtime/html5/image/MegaPixel", R = "moxie/runtime/html5/image/Image", S = "moxie/runtime/flash/Runtime", T = "moxie/runtime/flash/file/Blob", U = "moxie/runtime/flash/file/FileInput", V = "moxie/runtime/flash/file/FileReader", W = "moxie/runtime/flash/file/FileReaderSync", X = "moxie/runtime/flash/xhr/XMLHttpRequest", Y = "moxie/runtime/flash/runtime/Transporter", Z = "moxie/runtime/flash/image/Image", $ = "moxie/runtime/silverlight/Runtime", _ = "moxie/runtime/silverlight/file/Blob", aa = "moxie/runtime/silverlight/file/FileInput", ba = "moxie/runtime/silverlight/file/FileDrop", ca = "moxie/runtime/silverlight/file/FileReader", da = "moxie/runtime/silverlight/file/FileReaderSync", ea = "moxie/runtime/silverlight/xhr/XMLHttpRequest", fa = "moxie/runtime/silverlight/runtime/Transporter", ga = "moxie/runtime/silverlight/image/Image", ha = "moxie/runtime/html4/Runtime", ia = "moxie/runtime/html4/file/FileInput", ja = "moxie/runtime/html4/file/FileReader", ka = "moxie/runtime/html4/xhr/XMLHttpRequest", la = "moxie/runtime/html4/image/Image";
    d(h, [], function () {
        var a = function (a) {
            var b;
            return a === b ? "undefined" : null === a ? "null" : a.nodeType ? "node" : {}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()
        }, b = function (d) {
            var e;
            return c(arguments, function (f, h) {
                h > 0 && c(f, function (c, f) {
                    c !== e && (a(d[f]) === a(c) && ~g(a(c), ["array", "object"]) ? b(d[f], c) : d[f] = c)
                })
            }), d
        }, c = function (a, b) {
            var c, d, e, f;
            if (a) {
                try {
                    c = a.length
                } catch (g) {
                    c = f
                }
                if (c === f) {
                    for (d in a)if (a.hasOwnProperty(d) && b(a[d], d) === !1)return
                } else for (e = 0; c > e; e++)if (b(a[e], e) === !1)return
            }
        }, d = function (b) {
            var c;
            if (!b || "object" !== a(b))return !0;
            for (c in b)return !1;
            return !0
        }, e = function (b, c) {
            function d(e) {
                "function" === a(b[e]) && b[e](function (a) {
                    ++e < f && !a ? d(e) : c(a)
                })
            }

            var e = 0, f = b.length;
            "function" !== a(c) && (c = function () {
            }), b && b.length || c(), d(e)
        }, f = function (a, b) {
            var d = 0, e = a.length, f = new Array(e);
            c(a, function (a, c) {
                a(function (a) {
                    if (a)return b(a);
                    var g = [].slice.call(arguments);
                    g.shift(), f[c] = g, d++, d === e && (f.unshift(null), b.apply(this, f))
                })
            })
        }, g = function (a, b) {
            if (b) {
                if (Array.prototype.indexOf)return Array.prototype.indexOf.call(b, a);
                for (var c = 0, d = b.length; d > c; c++)if (b[c] === a)return c
            }
            return -1
        }, h = function (b, c) {
            var d = [];
            "array" !== a(b) && (b = [b]), "array" !== a(c) && (c = [c]);
            for (var e in b)-1 === g(b[e], c) && d.push(b[e]);
            return d.length ? d : !1
        }, i = function (a, b) {
            var d = [];
            return c(a, function (a) {
                -1 !== g(a, b) && d.push(a)
            }), d.length ? d : null
        }, j = function (a) {
            var b, c = [];
            for (b = 0; b < a.length; b++)c[b] = a[b];
            return c
        }, k = function () {
            var a = 0;
            return function (b) {
                var c, d = (new Date).getTime().toString(32);
                for (c = 0; 5 > c; c++)d += Math.floor(65535 * Math.random()).toString(32);
                return (b || "o_") + d + (a++).toString(32)
            }
        }(), l = function (a) {
            return a ? String.prototype.trim ? String.prototype.trim.call(a) : a.toString().replace(/^\s*/, "").replace(/\s*$/, "") : a
        }, m = function (a) {
            if ("string" != typeof a)return a;
            var b, c = {t: 1099511627776, g: 1073741824, m: 1048576, k: 1024};
            return a = /^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g, "")), b = a[2], a = +a[1], c.hasOwnProperty(b) && (a *= c[b]), a
        };
        return {
            guid: k,
            typeOf: a,
            extend: b,
            each: c,
            isEmptyObj: d,
            inSeries: e,
            inParallel: f,
            inArray: g,
            arrayDiff: h,
            arrayIntersect: i,
            toArray: j,
            trim: l,
            parseSizeStr: m
        }
    }), d(i, [h], function (a) {
        var b = {};
        return {
            addI18n: function (c) {
                return a.extend(b, c)
            }, translate: function (a) {
                return b[a] || a
            }, _: function (a) {
                return this.translate(a)
            }, sprintf: function (b) {
                var c = [].slice.call(arguments, 1);
                return b.replace(/%[a-z]/g, function () {
                    var b = c.shift();
                    return "undefined" !== a.typeOf(b) ? b : ""
                })
            }
        }
    }), d(j, [h, i], function (a, b) {
        var c = "application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe", d = {
            mimes: {}, extensions: {}, addMimeType: function (a) {
                var b, c, d, e = a.split(/,/);
                for (b = 0; b < e.length; b += 2) {
                    for (d = e[b + 1].split(/ /), c = 0; c < d.length; c++)this.mimes[d[c]] = e[b];
                    this.extensions[e[b]] = d
                }
            }, extList2mimes: function (b, c) {
                var d, e, f, g, h = this, i = [];
                for (e = 0; e < b.length; e++)for (d = b[e].extensions.split(/\s*,\s*/), f = 0; f < d.length; f++) {
                    if ("*" === d[f])return [];
                    if (g = h.mimes[d[f]])-1 === a.inArray(g, i) && i.push(g); else {
                        if (!c || !/^\w+$/.test(d[f]))return [];
                        i.push("." + d[f])
                    }
                }
                return i
            }, mimes2exts: function (b) {
                var c = this, d = [];
                return a.each(b, function (b) {
                    if ("*" === b)return d = [], !1;
                    var e = b.match(/^(\w+)\/(\*|\w+)$/);
                    e && ("*" === e[2] ? a.each(c.extensions, function (a, b) {
                        new RegExp("^" + e[1] + "/").test(b) && [].push.apply(d, c.extensions[b])
                    }) : c.extensions[b] && [].push.apply(d, c.extensions[b]))
                }), d
            }, mimes2extList: function (c) {
                var d = [], e = [];
                return "string" === a.typeOf(c) && (c = a.trim(c).split(/\s*,\s*/)), e = this.mimes2exts(c), d.push({
                    title: b.translate("Files"),
                    extensions: e.length ? e.join(",") : "*"
                }), d.mimes = c, d
            }, getFileExtension: function (a) {
                var b = a && a.match(/\.([^.]+)$/);
                return b ? b[1].toLowerCase() : ""
            }, getFileMime: function (a) {
                return this.mimes[this.getFileExtension(a)] || ""
            }
        };
        return d.addMimeType(c), d
    }), d(k, [h], function (a) {
        function b(a, b, c) {
            var d = 0, e = 0, f = 0, g = {
                dev: -6,
                alpha: -5,
                a: -5,
                beta: -4,
                b: -4,
                RC: -3,
                rc: -3,
                "#": -2,
                p: 1,
                pl: 1
            }, h = function (a) {
                return a = ("" + a).replace(/[_\-+]/g, "."), a = a.replace(/([^.\d]+)/g, ".$1.").replace(/\.{2,}/g, "."), a.length ? a.split(".") : [-8]
            }, i = function (a) {
                return a ? isNaN(a) ? g[a] || -7 : parseInt(a, 10) : 0
            };
            for (a = h(a), b = h(b), e = Math.max(a.length, b.length), d = 0; e > d; d++)if (a[d] != b[d]) {
                if (a[d] = i(a[d]), b[d] = i(b[d]), a[d] < b[d]) {
                    f = -1;
                    break
                }
                if (a[d] > b[d]) {
                    f = 1;
                    break
                }
            }
            if (!c)return f;
            switch (c) {
                case">":
                case"gt":
                    return f > 0;
                case">=":
                case"ge":
                    return f >= 0;
                case"<=":
                case"le":
                    return 0 >= f;
                case"==":
                case"=":
                case"eq":
                    return 0 === f;
                case"<>":
                case"!=":
                case"ne":
                    return 0 !== f;
                case"":
                case"<":
                case"lt":
                    return 0 > f;
                default:
                    return null
            }
        }

        var c = function (a) {
            var b = "", c = "?", d = "function", e = "undefined", f = "object", g = "major", h = "name", i = "version", j = {
                has: function (a, b) {
                    return -1 !== b.toLowerCase().indexOf(a.toLowerCase())
                }, lowerize: function (a) {
                    return a.toLowerCase()
                }
            }, k = {
                rgx: function () {
                    for (var b, c, g, h, i, j, k, l = 0, m = arguments; l < m.length; l += 2) {
                        var n = m[l], o = m[l + 1];
                        if (typeof b === e) {
                            b = {};
                            for (h in o)i = o[h], typeof i === f ? b[i[0]] = a : b[i] = a
                        }
                        for (c = g = 0; c < n.length; c++)if (j = n[c].exec(this.getUA())) {
                            for (h = 0; h < o.length; h++)k = j[++g], i = o[h], typeof i === f && i.length > 0 ? 2 == i.length ? b[i[0]] = typeof i[1] == d ? i[1].call(this, k) : i[1] : 3 == i.length ? b[i[0]] = typeof i[1] !== d || i[1].exec && i[1].test ? k ? k.replace(i[1], i[2]) : a : k ? i[1].call(this, k, i[2]) : a : 4 == i.length && (b[i[0]] = k ? i[3].call(this, k.replace(i[1], i[2])) : a) : b[i] = k ? k : a;
                            break
                        }
                        if (j)break
                    }
                    return b
                }, str: function (b, d) {
                    for (var e in d)if (typeof d[e] === f && d[e].length > 0) {
                        for (var g = 0; g < d[e].length; g++)if (j.has(d[e][g], b))return e === c ? a : e
                    } else if (j.has(d[e], b))return e === c ? a : e;
                    return b
                }
            }, l = {
                browser: {
                    oldsafari: {
                        major: {1: ["/8", "/1", "/3"], 2: "/4", "?": "/"},
                        version: {
                            "1.0": "/8",
                            1.2: "/1",
                            1.3: "/3",
                            "2.0": "/412",
                            "2.0.2": "/416",
                            "2.0.3": "/417",
                            "2.0.4": "/419",
                            "?": "/"
                        }
                    }
                },
                device: {sprint: {model: {"Evo Shift 4G": "7373KT"}, vendor: {HTC: "APA", Sprint: "Sprint"}}},
                os: {
                    windows: {
                        version: {
                            ME: "4.90",
                            "NT 3.11": "NT3.51",
                            "NT 4.0": "NT4.0",
                            2e3: "NT 5.0",
                            XP: ["NT 5.1", "NT 5.2"],
                            Vista: "NT 6.0",
                            7: "NT 6.1",
                            8: "NT 6.2",
                            8.1: "NT 6.3",
                            RT: "ARM"
                        }
                    }
                }
            }, m = {
                browser: [[/(opera\smini)\/((\d+)?[\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i, /(opera).+version\/((\d+)?[\w\.]+)/i, /(opera)[\/\s]+((\d+)?[\w\.]+)/i], [h, i, g], [/\s(opr)\/((\d+)?[\w\.]+)/i], [[h, "Opera"], i, g], [/(kindle)\/((\d+)?[\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i, /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i, /(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i, /(rekonq)((?:\/)[\w\.]+)*/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i], [h, i, g], [/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i], [[h, "IE"], i, g], [/(yabrowser)\/((\d+)?[\w\.]+)/i], [[h, "Yandex"], i, g], [/(comodo_dragon)\/((\d+)?[\w\.]+)/i], [[h, /_/g, " "], i, g], [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i], [h, i, g], [/(dolfin)\/((\d+)?[\w\.]+)/i], [[h, "Dolphin"], i, g], [/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i], [[h, "Chrome"], i, g], [/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i], [[h, "Android Browser"], i, g], [/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i], [i, g, [h, "Mobile Safari"]], [/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i], [i, g, h], [/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i], [h, [g, k.str, l.browser.oldsafari.major], [i, k.str, l.browser.oldsafari.version]], [/(konqueror)\/((\d+)?[\w\.]+)/i, /(webkit|khtml)\/((\d+)?[\w\.]+)/i], [h, i, g], [/(navigator|netscape)\/((\d+)?[\w\.-]+)/i], [[h, "Netscape"], i, g], [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i, /(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i, /(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i, /(links)\s\(((\d+)?[\w\.]+)/i, /(gobrowser)\/?((\d+)?[\w\.]+)*/i, /(ice\s?browser)\/v?((\d+)?[\w\._]+)/i, /(mosaic)[\/\s]((\d+)?[\w\.]+)/i], [h, i, g]],
                engine: [[/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i], [h, i], [/rv\:([\w\.]+).*(gecko)/i], [i, h]],
                os: [[/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i], [h, [i, k.str, l.os.windows.version]], [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i], [[h, "Windows"], [i, k.str, l.os.windows.version]], [/\((bb)(10);/i], [[h, "BlackBerry"], i], [/(blackberry)\w*\/?([\w\.]+)*/i, /(tizen)\/([\w\.]+)/i, /(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i], [h, i], [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i], [[h, "Symbian"], i], [/mozilla.+\(mobile;.+gecko.+firefox/i], [[h, "Firefox OS"], i], [/(nintendo|playstation)\s([wids3portablevu]+)/i, /(mint)[\/\s\(]?(\w+)*/i, /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i, /(hurd|linux)\s?([\w\.]+)*/i, /(gnu)\s?([\w\.]+)*/i], [h, i], [/(cros)\s[\w]+\s([\w\.]+\w)/i], [[h, "Chromium OS"], i], [/(sunos)\s?([\w\.]+\d)*/i], [[h, "Solaris"], i], [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i], [h, i], [/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i], [[h, "iOS"], [i, /_/g, "."]], [/(mac\sos\sx)\s?([\w\s\.]+\w)*/i], [h, [i, /_/g, "."]], [/(haiku)\s(\w+)/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i, /(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i, /(unix)\s?([\w\.]+)*/i], [h, i]]
            }, n = function (a) {
                var c = a || (window && window.navigator && window.navigator.userAgent ? window.navigator.userAgent : b);
                this.getBrowser = function () {
                    return k.rgx.apply(this, m.browser)
                }, this.getEngine = function () {
                    return k.rgx.apply(this, m.engine)
                }, this.getOS = function () {
                    return k.rgx.apply(this, m.os)
                }, this.getResult = function () {
                    return {ua: this.getUA(), browser: this.getBrowser(), engine: this.getEngine(), os: this.getOS()}
                }, this.getUA = function () {
                    return c
                }, this.setUA = function (a) {
                    return c = a, this
                }, this.setUA(c)
            };
            return (new n).getResult()
        }(), d = function () {
            var b = {
                define_property: function () {
                    return !1
                }(), create_canvas: function () {
                    var a = document.createElement("canvas");
                    return !(!a.getContext || !a.getContext("2d"))
                }(), return_response_type: function (b) {
                    try {
                        if (-1 !== a.inArray(b, ["", "text", "document"]))return !0;
                        if (window.XMLHttpRequest) {
                            var c = new XMLHttpRequest;
                            if (c.open("get", "/"), "responseType"in c)return c.responseType = b, c.responseType !== b ? !1 : !0
                        }
                    } catch (d) {
                    }
                    return !1
                }, use_data_uri: function () {
                    var a = new Image;
                    return a.onload = function () {
                        b.use_data_uri = 1 === a.width && 1 === a.height
                    }, setTimeout(function () {
                        a.src = "data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="
                    }, 1), !1
                }(), use_data_uri_over32kb: function () {
                    return b.use_data_uri && ("IE" !== e.browser || e.version >= 9)
                }, use_data_uri_of: function (a) {
                    return b.use_data_uri && 33e3 > a || b.use_data_uri_over32kb()
                }, use_fileinput: function () {
                    var a = document.createElement("input");
                    return a.setAttribute("type", "file"), !a.disabled
                }
            };
            return function (c) {
                var d = [].slice.call(arguments);
                return d.shift(), "function" === a.typeOf(b[c]) ? b[c].apply(this, d) : !!b[c]
            }
        }(), e = {
            can: d,
            browser: c.browser.name,
            version: parseFloat(c.browser.major),
            os: c.os.name,
            osVersion: c.os.version,
            verComp: b,
            swf_url: "../flash/Moxie.swf",
            xap_url: "../silverlight/Moxie.xap",
            global_event_dispatcher: "moxie.core.EventTarget.instance.dispatchEvent"
        };
        return e.OS = e.os, e
    }), d(l, [k], function (a) {
        var b = function (a) {
            return "string" != typeof a ? a : document.getElementById(a)
        }, c = function (a, b) {
            if (!a.className)return !1;
            var c = new RegExp("(^|\\s+)" + b + "(\\s+|$)");
            return c.test(a.className)
        }, d = function (a, b) {
            c(a, b) || (a.className = a.className ? a.className.replace(/\s+$/, "") + " " + b : b)
        }, e = function (a, b) {
            if (a.className) {
                var c = new RegExp("(^|\\s+)" + b + "(\\s+|$)");
                a.className = a.className.replace(c, function (a, b, c) {
                    return " " === b && " " === c ? " " : ""
                })
            }
        }, f = function (a, b) {
            return a.currentStyle ? a.currentStyle[b] : window.getComputedStyle ? window.getComputedStyle(a, null)[b] : void 0
        }, g = function (b, c) {
            function d(a) {
                var b, c, d = 0, e = 0;
                return a && (c = a.getBoundingClientRect(), b = "CSS1Compat" === j.compatMode ? j.documentElement : j.body, d = c.left + b.scrollLeft, e = c.top + b.scrollTop), {
                    x: d,
                    y: e
                }
            }

            var e, f, g, h = 0, i = 0, j = document;
            if (b = b, c = c || j.body, b && b.getBoundingClientRect && "IE" === a.browser && (!j.documentMode || j.documentMode < 8))return f = d(b), g = d(c), {
                x: f.x - g.x,
                y: f.y - g.y
            };
            for (e = b; e && e != c && e.nodeType;)h += e.offsetLeft || 0, i += e.offsetTop || 0, e = e.offsetParent;
            for (e = b.parentNode; e && e != c && e.nodeType;)h -= e.scrollLeft || 0, i -= e.scrollTop || 0, e = e.parentNode;
            return {x: h, y: i}
        }, h = function (a) {
            return {w: a.offsetWidth || a.clientWidth, h: a.offsetHeight || a.clientHeight}
        };
        return {get: b, hasClass: c, addClass: d, removeClass: e, getStyle: f, getPos: g, getSize: h}
    }), d(m, [h], function (a) {
        function b(a, b) {
            var c;
            for (c in a)if (a[c] === b)return c;
            return null
        }

        return {
            RuntimeError: function () {
                function c(a) {
                    this.code = a, this.name = b(d, a), this.message = this.name + ": RuntimeError " + this.code
                }

                var d = {NOT_INIT_ERR: 1, NOT_SUPPORTED_ERR: 9, JS_ERR: 4};
                return a.extend(c, d), c.prototype = Error.prototype, c
            }(), OperationNotAllowedException: function () {
                function b(a) {
                    this.code = a, this.name = "OperationNotAllowedException"
                }

                return a.extend(b, {NOT_ALLOWED_ERR: 1}), b.prototype = Error.prototype, b
            }(), ImageError: function () {
                function c(a) {
                    this.code = a, this.name = b(d, a), this.message = this.name + ": ImageError " + this.code
                }

                var d = {WRONG_FORMAT: 1, MAX_RESOLUTION_ERR: 2};
                return a.extend(c, d), c.prototype = Error.prototype, c
            }(), FileException: function () {
                function c(a) {
                    this.code = a, this.name = b(d, a), this.message = this.name + ": FileException " + this.code
                }

                var d = {
                    NOT_FOUND_ERR: 1,
                    SECURITY_ERR: 2,
                    ABORT_ERR: 3,
                    NOT_READABLE_ERR: 4,
                    ENCODING_ERR: 5,
                    NO_MODIFICATION_ALLOWED_ERR: 6,
                    INVALID_STATE_ERR: 7,
                    SYNTAX_ERR: 8
                };
                return a.extend(c, d), c.prototype = Error.prototype, c
            }(), DOMException: function () {
                function c(a) {
                    this.code = a, this.name = b(d, a), this.message = this.name + ": DOMException " + this.code
                }

                var d = {
                    INDEX_SIZE_ERR: 1,
                    DOMSTRING_SIZE_ERR: 2,
                    HIERARCHY_REQUEST_ERR: 3,
                    WRONG_DOCUMENT_ERR: 4,
                    INVALID_CHARACTER_ERR: 5,
                    NO_DATA_ALLOWED_ERR: 6,
                    NO_MODIFICATION_ALLOWED_ERR: 7,
                    NOT_FOUND_ERR: 8,
                    NOT_SUPPORTED_ERR: 9,
                    INUSE_ATTRIBUTE_ERR: 10,
                    INVALID_STATE_ERR: 11,
                    SYNTAX_ERR: 12,
                    INVALID_MODIFICATION_ERR: 13,
                    NAMESPACE_ERR: 14,
                    INVALID_ACCESS_ERR: 15,
                    VALIDATION_ERR: 16,
                    TYPE_MISMATCH_ERR: 17,
                    SECURITY_ERR: 18,
                    NETWORK_ERR: 19,
                    ABORT_ERR: 20,
                    URL_MISMATCH_ERR: 21,
                    QUOTA_EXCEEDED_ERR: 22,
                    TIMEOUT_ERR: 23,
                    INVALID_NODE_TYPE_ERR: 24,
                    DATA_CLONE_ERR: 25
                };
                return a.extend(c, d), c.prototype = Error.prototype, c
            }(), EventException: function () {
                function b(a) {
                    this.code = a, this.name = "EventException"
                }

                return a.extend(b, {UNSPECIFIED_EVENT_TYPE_ERR: 0}), b.prototype = Error.prototype, b
            }()
        }
    }), d(n, [m, h], function (a, b) {
        function c() {
            var c = {};
            b.extend(this, {
                uid: null, init: function () {
                    this.uid || (this.uid = b.guid("uid_"))
                }, addEventListener: function (a, d, e, f) {
                    var g, h = this;
                    return a = b.trim(a), /\s/.test(a) ? void b.each(a.split(/\s+/), function (a) {
                        h.addEventListener(a, d, e, f)
                    }) : (a = a.toLowerCase(), e = parseInt(e, 10) || 0, g = c[this.uid] && c[this.uid][a] || [], g.push({
                        fn: d,
                        priority: e,
                        scope: f || this
                    }), c[this.uid] || (c[this.uid] = {}), void(c[this.uid][a] = g))
                }, hasEventListener: function (a) {
                    return a ? !(!c[this.uid] || !c[this.uid][a]) : !!c[this.uid]
                }, removeEventListener: function (a, d) {
                    a = a.toLowerCase();
                    var e, f = c[this.uid] && c[this.uid][a];
                    if (f) {
                        if (d) {
                            for (e = f.length - 1; e >= 0; e--)if (f[e].fn === d) {
                                f.splice(e, 1);
                                break
                            }
                        } else f = [];
                        f.length || (delete c[this.uid][a], b.isEmptyObj(c[this.uid]) && delete c[this.uid])
                    }
                }, removeAllEventListeners: function () {
                    c[this.uid] && delete c[this.uid]
                }, dispatchEvent: function (d) {
                    var e, f, g, h, i, j = {}, k = !0;
                    if ("string" !== b.typeOf(d)) {
                        if (h = d, "string" !== b.typeOf(h.type))throw new a.EventException(a.EventException.UNSPECIFIED_EVENT_TYPE_ERR);
                        d = h.type, h.total !== i && h.loaded !== i && (j.total = h.total, j.loaded = h.loaded), j.async = h.async || !1
                    }
                    if (-1 !== d.indexOf("::") ? function (a) {
                            e = a[0], d = a[1]
                        }(d.split("::")) : e = this.uid, d = d.toLowerCase(), f = c[e] && c[e][d]) {
                        f.sort(function (a, b) {
                            return b.priority - a.priority
                        }), g = [].slice.call(arguments), g.shift(), j.type = d, g.unshift(j);
                        var l = [];
                        b.each(f, function (a) {
                            g[0].target = a.scope, l.push(j.async ? function (b) {
                                setTimeout(function () {
                                    b(a.fn.apply(a.scope, g) === !1)
                                }, 1)
                            } : function (b) {
                                b(a.fn.apply(a.scope, g) === !1)
                            })
                        }), l.length && b.inSeries(l, function (a) {
                            k = !a
                        })
                    }
                    return k
                }, bind: function () {
                    this.addEventListener.apply(this, arguments)
                }, unbind: function () {
                    this.removeEventListener.apply(this, arguments)
                }, unbindAll: function () {
                    this.removeAllEventListeners.apply(this, arguments)
                }, trigger: function () {
                    return this.dispatchEvent.apply(this, arguments)
                }, convertEventPropsToHandlers: function (a) {
                    var c;
                    "array" !== b.typeOf(a) && (a = [a]);
                    for (var d = 0; d < a.length; d++)c = "on" + a[d], "function" === b.typeOf(this[c]) ? this.addEventListener(a[d], this[c]) : "undefined" === b.typeOf(this[c]) && (this[c] = null)
                }
            })
        }

        return c.instance = new c, c
    }), d(o, [], function () {
        var a = function (a) {
            return unescape(encodeURIComponent(a))
        }, b = function (a) {
            return decodeURIComponent(escape(a))
        }, c = function (a, c) {
            if ("function" == typeof window.atob)return c ? b(window.atob(a)) : window.atob(a);
            var d, e, f, g, h, i, j, k, l = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", m = 0, n = 0, o = "", p = [];
            if (!a)return a;
            a += "";
            do g = l.indexOf(a.charAt(m++)), h = l.indexOf(a.charAt(m++)), i = l.indexOf(a.charAt(m++)), j = l.indexOf(a.charAt(m++)), k = g << 18 | h << 12 | i << 6 | j, d = 255 & k >> 16, e = 255 & k >> 8, f = 255 & k, p[n++] = 64 == i ? String.fromCharCode(d) : 64 == j ? String.fromCharCode(d, e) : String.fromCharCode(d, e, f); while (m < a.length);
            return o = p.join(""), c ? b(o) : o
        }, d = function (b, c) {
            if (c && a(b), "function" == typeof window.btoa)return window.btoa(b);
            var d, e, f, g, h, i, j, k, l = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", m = 0, n = 0, o = "", p = [];
            if (!b)return b;
            do d = b.charCodeAt(m++), e = b.charCodeAt(m++), f = b.charCodeAt(m++), k = d << 16 | e << 8 | f, g = 63 & k >> 18, h = 63 & k >> 12, i = 63 & k >> 6, j = 63 & k, p[n++] = l.charAt(g) + l.charAt(h) + l.charAt(i) + l.charAt(j); while (m < b.length);
            o = p.join("");
            var q = b.length % 3;
            return (q ? o.slice(0, q - 3) : o) + "===".slice(q || 3)
        };
        return {utf8_encode: a, utf8_decode: b, atob: c, btoa: d}
    }), d(p, [h, l, n], function (a, b, c) {
        function d(c, e, g, h, i) {
            var j, k = this, l = a.guid(e + "_"), m = i || "browser";
            c = c || {}, f[l] = this, g = a.extend({
                access_binary: !1,
                access_image_binary: !1,
                display_media: !1,
                do_cors: !1,
                drag_and_drop: !1,
                filter_by_extension: !0,
                resize_image: !1,
                report_upload_progress: !1,
                return_response_headers: !1,
                return_response_type: !1,
                return_status_code: !0,
                send_custom_headers: !1,
                select_file: !1,
                select_folder: !1,
                select_multiple: !0,
                send_binary_string: !1,
                send_browser_cookies: !0,
                send_multipart: !0,
                slice_blob: !1,
                stream_upload: !1,
                summon_file_dialog: !1,
                upload_filesize: !0,
                use_http_method: !0
            }, g), c.preferred_caps && (m = d.getMode(h, c.preferred_caps, m)), j = function () {
                var b = {};
                return {
                    exec: function (a, c, d, e) {
                        return j[c] && (b[a] || (b[a] = {
                            context: this,
                            instance: new j[c]
                        }), b[a].instance[d]) ? b[a].instance[d].apply(this, e) : void 0
                    }, removeInstance: function (a) {
                        delete b[a]
                    }, removeAllInstances: function () {
                        var c = this;
                        a.each(b, function (b, d) {
                            "function" === a.typeOf(b.instance.destroy) && b.instance.destroy.call(b.context), c.removeInstance(d)
                        })
                    }
                }
            }(), a.extend(this, {
                initialized: !1,
                uid: l,
                type: e,
                mode: d.getMode(h, c.required_caps, m),
                shimid: l + "_container",
                clients: 0,
                options: c,
                can: function (b, c) {
                    var e = arguments[2] || g;
                    if ("string" === a.typeOf(b) && "undefined" === a.typeOf(c) && (b = d.parseCaps(b)), "object" === a.typeOf(b)) {
                        for (var f in b)if (!this.can(f, b[f], e))return !1;
                        return !0
                    }
                    return "function" === a.typeOf(e[b]) ? e[b].call(this, c) : c === e[b]
                },
                getShimContainer: function () {
                    var c, d = b.get(this.shimid);
                    return d || (c = this.options.container ? b.get(this.options.container) : document.body, d = document.createElement("div"), d.id = this.shimid, d.className = "moxie-shim moxie-shim-" + this.type, a.extend(d.style, {
                        position: "absolute",
                        top: "0px",
                        left: "0px",
                        width: "1px",
                        height: "1px",
                        overflow: "hidden"
                    }), c.appendChild(d), c = null), d
                },
                getShim: function () {
                    return j
                },
                shimExec: function (a, b) {
                    var c = [].slice.call(arguments, 2);
                    return k.getShim().exec.call(this, this.uid, a, b, c)
                },
                exec: function (a, b) {
                    var c = [].slice.call(arguments, 2);
                    return k[a] && k[a][b] ? k[a][b].apply(this, c) : k.shimExec.apply(this, arguments)
                },
                destroy: function () {
                    if (k) {
                        var a = b.get(this.shimid);
                        a && a.parentNode.removeChild(a), j && j.removeAllInstances(), this.unbindAll(), delete f[this.uid], this.uid = null, l = k = j = a = null
                    }
                }
            }), this.mode && c.required_caps && !this.can(c.required_caps) && (this.mode = !1)
        }

        var e = {}, f = {};
        return d.order = "html5,flash,silverlight,html4", d.getRuntime = function (a) {
            return f[a] ? f[a] : !1
        }, d.addConstructor = function (a, b) {
            b.prototype = c.instance, e[a] = b
        }, d.getConstructor = function (a) {
            return e[a] || null
        }, d.getInfo = function (a) {
            var b = d.getRuntime(a);
            return b ? {
                uid: b.uid, type: b.type, mode: b.mode, can: function () {
                    return b.can.apply(b, arguments)
                }
            } : null
        }, d.parseCaps = function (b) {
            var c = {};
            return "string" !== a.typeOf(b) ? b || {} : (a.each(b.split(","), function (a) {
                c[a] = !0
            }), c)
        }, d.can = function (a, b) {
            var c, e, f = d.getConstructor(a);
            return f ? (c = new f({required_caps: b}), e = c.mode, c.destroy(), !!e) : !1
        }, d.thatCan = function (a, b) {
            var c = (b || d.order).split(/\s*,\s*/);
            for (var e in c)if (d.can(c[e], a))return c[e];
            return null
        }, d.getMode = function (b, c, d) {
            var e = null;
            if ("undefined" === a.typeOf(d) && (d = "browser"), c && !a.isEmptyObj(b)) {
                if (a.each(c, function (c, d) {
                        if (b.hasOwnProperty(d)) {
                            var f = b[d](c);
                            if ("string" == typeof f && (f = [f]), e) {
                                if (!(e = a.arrayIntersect(e, f)))return e = !1
                            } else e = f
                        }
                    }), e)return -1 !== a.inArray(d, e) ? d : e[0];
                if (e === !1)return !1
            }
            return d
        }, d.capTrue = function () {
            return !0
        }, d.capFalse = function () {
            return !1
        }, d.capTest = function (a) {
            return function () {
                return !!a
            }
        }, d
    }), d(q, [m, h, p], function (a, b, c) {
        return function d() {
            var d;
            b.extend(this, {
                connectRuntime: function (e) {
                    function f(b) {
                        var g, i;
                        return b.length ? (g = b.shift(), (i = c.getConstructor(g)) ? (d = new i(e), d.bind("Init", function () {
                            d.initialized = !0, setTimeout(function () {
                                d.clients++, h.trigger("RuntimeInit", d)
                            }, 1)
                        }), d.bind("Error", function () {
                            d.destroy(), f(b)
                        }), d.mode ? void d.init() : void d.trigger("Error")) : void f(b)) : (h.trigger("RuntimeError", new a.RuntimeError(a.RuntimeError.NOT_INIT_ERR)), void(d = null))
                    }

                    var g, h = this;
                    if ("string" === b.typeOf(e) ? g = e : "string" === b.typeOf(e.ruid) && (g = e.ruid), g) {
                        if (d = c.getRuntime(g))return d.clients++, d;
                        throw new a.RuntimeError(a.RuntimeError.NOT_INIT_ERR)
                    }
                    f((e.runtime_order || c.order).split(/\s*,\s*/))
                }, getRuntime: function () {
                    return d && d.uid ? d : (d = null, null)
                }, disconnectRuntime: function () {
                    d && --d.clients <= 0 && (d.destroy(), d = null)
                }
            })
        }
    }), d(r, [h, o, q], function (a, b, c) {
        function d(f, g) {
            function h(b, c, f) {
                var g, h = e[this.uid];
                return "string" === a.typeOf(h) && h.length ? (g = new d(null, {
                    type: f,
                    size: c - b
                }), g.detach(h.substr(b, g.size)), g) : null
            }

            c.call(this), f && this.connectRuntime(f), g ? "string" === a.typeOf(g) && (g = {data: g}) : g = {}, a.extend(this, {
                uid: g.uid || a.guid("uid_"),
                ruid: f,
                size: g.size || 0,
                type: g.type || "",
                slice: function (a, b, c) {
                    return this.isDetached() ? h.apply(this, arguments) : this.getRuntime().exec.call(this, "Blob", "slice", this.getSource(), a, b, c)
                },
                getSource: function () {
                    return e[this.uid] ? e[this.uid] : null
                },
                detach: function (a) {
                    this.ruid && (this.getRuntime().exec.call(this, "Blob", "destroy", e[this.uid]), this.disconnectRuntime(), this.ruid = null), a = a || "";
                    var c = a.match(/^data:([^;]*);base64,/);
                    c && (this.type = c[1], a = b.atob(a.substring(a.indexOf("base64,") + 7))), this.size = a.length, e[this.uid] = a
                },
                isDetached: function () {
                    return !this.ruid && "string" === a.typeOf(e[this.uid])
                },
                destroy: function () {
                    this.detach(), delete e[this.uid]
                }
            }), g.data ? this.detach(g.data) : e[this.uid] = g
        }

        var e = {};
        return d
    }), d(s, [h, j, r], function (a, b, c) {
        function d(d, e) {
            var f, g;
            if (e || (e = {}), g = e.type && "" !== e.type ? e.type : b.getFileMime(e.name), e.name)f = e.name.replace(/\\/g, "/"), f = f.substr(f.lastIndexOf("/") + 1); else {
                var h = g.split("/")[0];
                f = a.guid(("" !== h ? h : "file") + "_"), b.extensions[g] && (f += "." + b.extensions[g][0])
            }
            c.apply(this, arguments), a.extend(this, {
                type: g || "",
                name: f || a.guid("file_"),
                lastModifiedDate: e.lastModifiedDate || (new Date).toLocaleString()
            })
        }

        return d.prototype = c.prototype, d
    }), d(t, [h, j, l, m, n, i, s, p, q], function (a, b, c, d, e, f, g, h, i) {
        function j(e) {
            var j, l, m, n = this;
            if (-1 !== a.inArray(a.typeOf(e), ["string", "node"]) && (e = {browse_button: e}), l = c.get(e.browse_button), !l)throw new d.DOMException(d.DOMException.NOT_FOUND_ERR);
            m = {
                accept: [{title: f.translate("All Files"), extensions: "*"}],
                name: "file",
                multiple: !1,
                required_caps: !1,
                container: l.parentNode || document.body
            }, e = a.extend({}, m, e), "string" == typeof e.required_caps && (e.required_caps = h.parseCaps(e.required_caps)), "string" == typeof e.accept && (e.accept = b.mimes2extList(e.accept)), j = c.get(e.container), j || (j = document.body), "static" === c.getStyle(j, "position") && (j.style.position = "relative"), j = l = null, i.call(n), a.extend(n, {
                uid: a.guid("uid_"),
                ruid: null,
                shimid: null,
                files: null,
                init: function () {
                    n.convertEventPropsToHandlers(k), n.bind("RuntimeInit", function (b, d) {
                        n.ruid = d.uid, n.shimid = d.shimid, n.bind("Ready", function () {
                            n.trigger("Refresh")
                        }, 999), n.bind("Change", function () {
                            var b = d.exec.call(n, "FileInput", "getFiles");
                            n.files = [], a.each(b, function (a) {
                                return 0 === a.size ? !0 : void n.files.push(new g(n.ruid, a))
                            })
                        }, 999), n.bind("Refresh", function () {
                            var b, f, g, h;
                            g = c.get(e.browse_button), h = c.get(d.shimid), g && (b = c.getPos(g, c.get(e.container)), f = c.getSize(g), h && a.extend(h.style, {
                                top: b.y + "px",
                                left: b.x + "px",
                                width: f.w + "px",
                                height: f.h + "px"
                            })), h = g = null
                        }), d.exec.call(n, "FileInput", "init", e)
                    }), n.connectRuntime(a.extend({}, e, {required_caps: {select_file: !0}}))
                },
                disable: function (b) {
                    var c = this.getRuntime();
                    c && c.exec.call(this, "FileInput", "disable", "undefined" === a.typeOf(b) ? !0 : b)
                },
                refresh: function () {
                    n.trigger("Refresh")
                },
                destroy: function () {
                    var b = this.getRuntime();
                    b && (b.exec.call(this, "FileInput", "destroy"), this.disconnectRuntime()), "array" === a.typeOf(this.files) && a.each(this.files, function (a) {
                        a.destroy()
                    }), this.files = null
                }
            })
        }

        var k = ["ready", "change", "cancel", "mouseenter", "mouseleave", "mousedown", "mouseup"];
        return j.prototype = e.instance, j
    }), d(u, [i, l, m, h, s, q, n, j], function (a, b, c, d, e, f, g, h) {
        function i(c) {
            var g, i = this;
            "string" == typeof c && (c = {drop_zone: c}), g = {
                accept: [{
                    title: a.translate("All Files"),
                    extensions: "*"
                }], required_caps: {drag_and_drop: !0}
            }, c = "object" == typeof c ? d.extend({}, g, c) : g, c.container = b.get(c.drop_zone) || document.body, "static" === b.getStyle(c.container, "position") && (c.container.style.position = "relative"), "string" == typeof c.accept && (c.accept = h.mimes2extList(c.accept)), f.call(i), d.extend(i, {
                uid: d.guid("uid_"),
                ruid: null,
                files: null,
                init: function () {
                    i.convertEventPropsToHandlers(j), i.bind("RuntimeInit", function (a, b) {
                        i.ruid = b.uid, i.bind("Drop", function () {
                            var a = b.exec.call(i, "FileDrop", "getFiles");
                            i.files = [], d.each(a, function (a) {
                                i.files.push(new e(i.ruid, a))
                            })
                        }, 999), b.exec.call(i, "FileDrop", "init", c), i.dispatchEvent("ready")
                    }), i.connectRuntime(c)
                },
                destroy: function () {
                    var a = this.getRuntime();
                    a && (a.exec.call(this, "FileDrop", "destroy"), this.disconnectRuntime()), this.files = null
                }
            })
        }

        var j = ["ready", "dragenter", "dragleave", "drop", "error"];
        return i.prototype = g.instance, i
    }), d(v, [h, q, n], function (a, b, c) {
        function d() {
            this.uid = a.guid("uid_"), b.call(this), this.destroy = function () {
                this.disconnectRuntime(), this.unbindAll()
            }
        }

        return d.prototype = c.instance, d
    }), d(w, [h, o, m, n, r, s, v], function (a, b, c, d, e, f, g) {
        function h() {
            function d(a, d) {
                function k(a) {
                    j.readyState = h.DONE, j.error = a, j.trigger("error"), l()
                }

                function l() {
                    f.destroy(), f = null, j.trigger("loadend")
                }

                function m(b) {
                    f.bind("Error", function (a, b) {
                        k(b)
                    }), f.bind("Progress", function (a) {
                        j.result = b.exec.call(f, "FileReader", "getResult"), j.trigger(a)
                    }), f.bind("Load", function (a) {
                        j.readyState = h.DONE, j.result = b.exec.call(f, "FileReader", "getResult"), j.trigger(a), l()
                    }), b.exec.call(f, "FileReader", "read", a, d)
                }

                if (f = new g, this.convertEventPropsToHandlers(i), this.readyState === h.LOADING)return k(new c.DOMException(c.DOMException.INVALID_STATE_ERR));
                if (this.readyState = h.LOADING, this.trigger("loadstart"), d instanceof e)if (d.isDetached()) {
                    var n = d.getSource();
                    switch (a) {
                        case"readAsText":
                        case"readAsBinaryString":
                            this.result = n;
                            break;
                        case"readAsDataURL":
                            this.result = "data:" + d.type + ";base64," + b.btoa(n)
                    }
                    this.readyState = h.DONE, this.trigger("load"), l()
                } else m(f.connectRuntime(d.ruid)); else k(new c.DOMException(c.DOMException.NOT_FOUND_ERR))
            }

            var f, j = this;
            a.extend(this, {
                uid: a.guid("uid_"),
                readyState: h.EMPTY,
                result: null,
                error: null,
                readAsBinaryString: function (a) {
                    d.call(this, "readAsBinaryString", a)
                },
                readAsDataURL: function (a) {
                    d.call(this, "readAsDataURL", a)
                },
                readAsText: function (a) {
                    d.call(this, "readAsText", a)
                },
                abort: function () {
                    this.result = null, -1 === a.inArray(this.readyState, [h.EMPTY, h.DONE]) && (this.readyState === h.LOADING && (this.readyState = h.DONE), f && f.getRuntime().exec.call(this, "FileReader", "abort"), this.trigger("abort"), this.trigger("loadend"))
                },
                destroy: function () {
                    this.abort(), f && (f.getRuntime().exec.call(this, "FileReader", "destroy"), f.disconnectRuntime()), j = f = null
                }
            })
        }

        var i = ["loadstart", "progress", "load", "abort", "error", "loadend"];
        return h.EMPTY = 0, h.LOADING = 1, h.DONE = 2, h.prototype = d.instance, h
    }), d(x, [], function () {
        var a = function (b, c) {
            for (var d = ["source", "scheme", "authority", "userInfo", "user", "pass", "host", "port", "relative", "path", "directory", "file", "query", "fragment"], e = d.length, f = {
                http: 80,
                https: 443
            }, g = {}, h = /^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/, i = h.exec(b || ""); e--;)i[e] && (g[d[e]] = i[e]);
            if (!g.scheme) {
                c && "string" != typeof c || (c = a(c || document.location.href)), g.scheme = c.scheme, g.host = c.host, g.port = c.port;
                var j = "";
                /^[^\/]/.test(g.path) && (j = c.path, /(\/|\/[^\.]+)$/.test(j) ? j += "/" : j = j.replace(/\/[^\/]+$/, "/")), g.path = j + (g.path || "")
            }
            return g.port || (g.port = f[g.scheme] || 80), g.port = parseInt(g.port, 10), g.path || (g.path = "/"), delete g.source, g
        }, b = function (b) {
            var c = {http: 80, https: 443}, d = a(b);
            return d.scheme + "://" + d.host + (d.port !== c[d.scheme] ? ":" + d.port : "") + d.path + (d.query ? d.query : "")
        }, c = function (b) {
            function c(a) {
                return [a.scheme, a.host, a.port].join("/")
            }

            return "string" == typeof b && (b = a(b)), c(a()) === c(b)
        };
        return {parseUrl: a, resolveUrl: b, hasSameOrigin: c}
    }), d(y, [h, q, o], function (a, b, c) {
        return function () {
            function d(a, b) {
                if (!b.isDetached()) {
                    var d = this.connectRuntime(b.ruid).exec.call(this, "FileReaderSync", "read", a, b);
                    return this.disconnectRuntime(), d
                }
                var e = b.getSource();
                switch (a) {
                    case"readAsBinaryString":
                        return e;
                    case"readAsDataURL":
                        return "data:" + b.type + ";base64," + c.btoa(e);
                    case"readAsText":
                        for (var f = "", g = 0, h = e.length; h > g; g++)f += String.fromCharCode(e[g]);
                        return f
                }
            }

            b.call(this), a.extend(this, {
                uid: a.guid("uid_"), readAsBinaryString: function (a) {
                    return d.call(this, "readAsBinaryString", a)
                }, readAsDataURL: function (a) {
                    return d.call(this, "readAsDataURL", a)
                }, readAsText: function (a) {
                    return d.call(this, "readAsText", a)
                }
            })
        }
    }), d(z, [m, h, r], function (a, b, c) {
        function d() {
            var a, d = [];
            b.extend(this, {
                append: function (e, f) {
                    var g = this, h = b.typeOf(f);
                    f instanceof c ? a = {name: e, value: f} : "array" === h ? (e += "[]", b.each(f, function (a) {
                        g.append(e, a)
                    })) : "object" === h ? b.each(f, function (a, b) {
                        g.append(e + "[" + b + "]", a)
                    }) : "null" === h || "undefined" === h || "number" === h && isNaN(f) ? g.append(e, "false") : d.push({
                        name: e,
                        value: f.toString()
                    })
                }, hasBlob: function () {
                    return !!this.getBlob()
                }, getBlob: function () {
                    return a && a.value || null
                }, getBlobName: function () {
                    return a && a.name || null
                }, each: function (c) {
                    b.each(d, function (a) {
                        c(a.value, a.name)
                    }), a && c(a.value, a.name)
                }, destroy: function () {
                    a = null, d = []
                }
            })
        }

        return d
    }), d(A, [h, m, n, o, x, p, v, r, y, z, k, j], function (a, b, c, d, e, f, g, h, i, j, k, l) {
        function m() {
            this.uid = a.guid("uid_")
        }

        function n() {
            function c(a, b) {
                return A.hasOwnProperty(a) ? 1 === arguments.length ? k.can("define_property") ? A[a] : z[a] : void(k.can("define_property") ? A[a] = b : z[a] = b) : void 0
            }

            function i(b) {
                function d() {
                    x.destroy(), x = null, h.dispatchEvent("loadend"), h = null
                }

                function e(e) {
                    x.bind("LoadStart", function (a) {
                        c("readyState", n.LOADING), h.dispatchEvent("readystatechange"), h.dispatchEvent(a), H && h.upload.dispatchEvent(a)
                    }), x.bind("Progress", function (a) {
                        c("readyState") !== n.LOADING && (c("readyState", n.LOADING), h.dispatchEvent("readystatechange")), h.dispatchEvent(a)
                    }), x.bind("UploadProgress", function (a) {
                        H && h.upload.dispatchEvent({
                            type: "progress",
                            lengthComputable: !1,
                            total: a.total,
                            loaded: a.loaded
                        })
                    }), x.bind("Load", function (b) {
                        c("readyState", n.DONE), c("status", Number(e.exec.call(x, "XMLHttpRequest", "getStatus") || 0)), c("statusText", o[c("status")] || ""), c("response", e.exec.call(x, "XMLHttpRequest", "getResponse", c("responseType"))), ~a.inArray(c("responseType"), ["text", ""]) ? c("responseText", c("response")) : "document" === c("responseType") && c("responseXML", c("response")), O = e.exec.call(x, "XMLHttpRequest", "getAllResponseHeaders"), h.dispatchEvent("readystatechange"), c("status") > 0 ? (H && h.upload.dispatchEvent(b), h.dispatchEvent(b)) : (J = !0, h.dispatchEvent("error")), d()
                    }), x.bind("Abort", function (a) {
                        h.dispatchEvent(a), d()
                    }), x.bind("Error", function (a) {
                        J = !0, c("readyState", n.DONE), h.dispatchEvent("readystatechange"), I = !0, h.dispatchEvent(a), d()
                    }), e.exec.call(x, "XMLHttpRequest", "send", {
                        url: r,
                        method: s,
                        async: B,
                        user: t,
                        password: u,
                        headers: C,
                        mimeType: E,
                        encoding: D,
                        responseType: h.responseType,
                        withCredentials: h.withCredentials,
                        options: N
                    }, b)
                }

                var h = this;
                v = (new Date).getTime(), x = new g, "string" == typeof N.required_caps && (N.required_caps = f.parseCaps(N.required_caps)), N.required_caps = a.extend({}, N.required_caps, {return_response_type: h.responseType}), b instanceof j && (N.required_caps.send_multipart = !0), K || (N.required_caps.do_cors = !0), N.ruid ? e(x.connectRuntime(N)) : (x.bind("RuntimeInit", function (a, b) {
                    e(b)
                }), x.bind("RuntimeError", function (a, b) {
                    h.dispatchEvent("RuntimeError", b)
                }), x.connectRuntime(N))
            }

            function q() {
                c("responseText", ""), c("responseXML", null), c("response", null), c("status", 0), c("statusText", ""), v = w = null
            }

            var r, s, t, u, v, w, x, y, z = this, A = {
                timeout: 0,
                readyState: n.UNSENT,
                withCredentials: !1,
                status: 0,
                statusText: "",
                responseType: "",
                responseXML: null,
                responseText: null,
                response: null
            }, B = !0, C = {}, D = null, E = null, F = !1, G = !1, H = !1, I = !1, J = !1, K = !1, L = null, M = null, N = {}, O = "";
            a.extend(this, A, {
                uid: a.guid("uid_"), upload: new m, open: function (f, g, h, i, j) {
                    var k;
                    if (!f || !g)throw new b.DOMException(b.DOMException.SYNTAX_ERR);
                    if (/[\u0100-\uffff]/.test(f) || d.utf8_encode(f) !== f)throw new b.DOMException(b.DOMException.SYNTAX_ERR);
                    if (~a.inArray(f.toUpperCase(), ["CONNECT", "DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT", "TRACE", "TRACK"]) && (s = f.toUpperCase()), ~a.inArray(s, ["CONNECT", "TRACE", "TRACK"]))throw new b.DOMException(b.DOMException.SECURITY_ERR);
                    if (g = d.utf8_encode(g), k = e.parseUrl(g), K = e.hasSameOrigin(k), r = e.resolveUrl(g), (i || j) && !K)throw new b.DOMException(b.DOMException.INVALID_ACCESS_ERR);
                    if (t = i || k.user, u = j || k.pass, B = h || !0, B === !1 && (c("timeout") || c("withCredentials") || "" !== c("responseType")))throw new b.DOMException(b.DOMException.INVALID_ACCESS_ERR);
                    F = !B, G = !1, C = {}, q.call(this), c("readyState", n.OPENED), this.convertEventPropsToHandlers(["readystatechange"]), this.dispatchEvent("readystatechange")
                }, setRequestHeader: function (e, f) {
                    var g = ["accept-charset", "accept-encoding", "access-control-request-headers", "access-control-request-method", "connection", "content-length", "cookie", "cookie2", "content-transfer-encoding", "date", "expect", "host", "keep-alive", "origin", "referer", "te", "trailer", "transfer-encoding", "upgrade", "user-agent", "via"];
                    if (c("readyState") !== n.OPENED || G)throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);
                    if (/[\u0100-\uffff]/.test(e) || d.utf8_encode(e) !== e)throw new b.DOMException(b.DOMException.SYNTAX_ERR);
                    return e = a.trim(e).toLowerCase(),
                        ~a.inArray(e, g) || /^(proxy\-|sec\-)/.test(e) ? !1 : (C[e] ? C[e] += ", " + f : C[e] = f, !0)
                }, getAllResponseHeaders: function () {
                    return O || ""
                }, getResponseHeader: function (b) {
                    return b = b.toLowerCase(), J || ~a.inArray(b, ["set-cookie", "set-cookie2"]) ? null : O && "" !== O && (y || (y = {}, a.each(O.split(/\r\n/), function (b) {
                        var c = b.split(/:\s+/);
                        2 === c.length && (c[0] = a.trim(c[0]), y[c[0].toLowerCase()] = {
                            header: c[0],
                            value: a.trim(c[1])
                        })
                    })), y.hasOwnProperty(b)) ? y[b].header + ": " + y[b].value : null
                }, overrideMimeType: function (d) {
                    var e, f;
                    if (~a.inArray(c("readyState"), [n.LOADING, n.DONE]))throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);
                    if (d = a.trim(d.toLowerCase()), /;/.test(d) && (e = d.match(/^([^;]+)(?:;\scharset\=)?(.*)$/)) && (d = e[1], e[2] && (f = e[2])), !l.mimes[d])throw new b.DOMException(b.DOMException.SYNTAX_ERR);
                    L = d, M = f
                }, send: function (c, e) {
                    if (N = "string" === a.typeOf(e) ? {ruid: e} : e ? e : {}, this.convertEventPropsToHandlers(p), this.upload.convertEventPropsToHandlers(p), this.readyState !== n.OPENED || G)throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);
                    if (c instanceof h)N.ruid = c.ruid, E = c.type || "application/octet-stream"; else if (c instanceof j) {
                        if (c.hasBlob()) {
                            var f = c.getBlob();
                            N.ruid = f.ruid, E = f.type || "application/octet-stream"
                        }
                    } else"string" == typeof c && (D = "UTF-8", E = "text/plain;charset=UTF-8", c = d.utf8_encode(c));
                    this.withCredentials || (this.withCredentials = N.required_caps && N.required_caps.send_browser_cookies && !K), H = !F && this.upload.hasEventListener(), J = !1, I = !c, F || (G = !0), i.call(this, c)
                }, abort: function () {
                    if (J = !0, F = !1, ~a.inArray(c("readyState"), [n.UNSENT, n.OPENED, n.DONE]))c("readyState", n.UNSENT); else {
                        if (c("readyState", n.DONE), G = !1, !x)throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);
                        x.getRuntime().exec.call(x, "XMLHttpRequest", "abort", I), I = !0
                    }
                }, destroy: function () {
                    x && ("function" === a.typeOf(x.destroy) && x.destroy(), x = null), this.unbindAll(), this.upload && (this.upload.unbindAll(), this.upload = null)
                }
            })
        }

        var o = {
            100: "Continue",
            101: "Switching Protocols",
            102: "Processing",
            200: "OK",
            201: "Created",
            202: "Accepted",
            203: "Non-Authoritative Information",
            204: "No Content",
            205: "Reset Content",
            206: "Partial Content",
            207: "Multi-Status",
            226: "IM Used",
            300: "Multiple Choices",
            301: "Moved Permanently",
            302: "Found",
            303: "See Other",
            304: "Not Modified",
            305: "Use Proxy",
            306: "Reserved",
            307: "Temporary Redirect",
            400: "Bad Request",
            401: "Unauthorized",
            402: "Payment Required",
            403: "Forbidden",
            404: "Not Found",
            405: "Method Not Allowed",
            406: "Not Acceptable",
            407: "Proxy Authentication Required",
            408: "Request Timeout",
            409: "Conflict",
            410: "Gone",
            411: "Length Required",
            412: "Precondition Failed",
            413: "Request Entity Too Large",
            414: "Request-URI Too Long",
            415: "Unsupported Media Type",
            416: "Requested Range Not Satisfiable",
            417: "Expectation Failed",
            422: "Unprocessable Entity",
            423: "Locked",
            424: "Failed Dependency",
            426: "Upgrade Required",
            500: "Internal Server Error",
            501: "Not Implemented",
            502: "Bad Gateway",
            503: "Service Unavailable",
            504: "Gateway Timeout",
            505: "HTTP Version Not Supported",
            506: "Variant Also Negotiates",
            507: "Insufficient Storage",
            510: "Not Extended"
        };
        m.prototype = c.instance;
        var p = ["loadstart", "progress", "abort", "error", "load", "timeout", "loadend"];
        return n.UNSENT = 0, n.OPENED = 1, n.HEADERS_RECEIVED = 2, n.LOADING = 3, n.DONE = 4, n.prototype = c.instance, n
    }), d(B, [h, o, q, n], function (a, b, c, d) {
        function e() {
            function d() {
                k = l = 0, j = this.result = null
            }

            function f(b, c) {
                var d = this;
                i = c, d.bind("TransportingProgress", function (b) {
                    l = b.loaded, k > l && -1 === a.inArray(d.state, [e.IDLE, e.DONE]) && g.call(d)
                }, 999), d.bind("TransportingComplete", function () {
                    l = k, d.state = e.DONE, j = null, d.result = i.exec.call(d, "Transporter", "getAsBlob", b || "")
                }, 999), d.state = e.BUSY, d.trigger("TransportingStarted"), g.call(d)
            }

            function g() {
                var a, c = this, d = k - l;
                m > d && (m = d), a = b.btoa(j.substr(l, m)), i.exec.call(c, "Transporter", "receive", a, k)
            }

            var h, i, j, k, l, m;
            c.call(this), a.extend(this, {
                uid: a.guid("uid_"),
                state: e.IDLE,
                result: null,
                transport: function (b, c, e) {
                    var g = this;
                    if (e = a.extend({chunk_size: 204798}, e), (h = e.chunk_size % 3) && (e.chunk_size += 3 - h), m = e.chunk_size, d.call(this), j = b, k = b.length, "string" === a.typeOf(e) || e.ruid)f.call(g, c, this.connectRuntime(e)); else {
                        var i = function (a, b) {
                            g.unbind("RuntimeInit", i), f.call(g, c, b)
                        };
                        this.bind("RuntimeInit", i), this.connectRuntime(e)
                    }
                },
                abort: function () {
                    var a = this;
                    a.state = e.IDLE, i && (i.exec.call(a, "Transporter", "clear"), a.trigger("TransportingAborted")), d.call(a)
                },
                destroy: function () {
                    this.unbindAll(), i = null, this.disconnectRuntime(), d.call(this)
                }
            })
        }

        return e.IDLE = 0, e.BUSY = 1, e.DONE = 2, e.prototype = d.instance, e
    }), d(C, [h, l, m, y, A, p, q, B, k, n, r, s, o], function (a, b, c, d, e, f, g, h, i, j, k, l, m) {
        function n() {
            function d(a) {
                a || (a = this.getRuntime().exec.call(this, "Image", "getInfo")), this.size = a.size, this.width = a.width, this.height = a.height, this.type = a.type, this.meta = a.meta, "" === this.name && (this.name = a.name)
            }

            function j(b) {
                var d = a.typeOf(b);
                try {
                    if (b instanceof n) {
                        if (!b.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);
                        p.apply(this, arguments)
                    } else if (b instanceof k) {
                        if (!~a.inArray(b.type, ["image/jpeg", "image/png"]))throw new c.ImageError(c.ImageError.WRONG_FORMAT);
                        q.apply(this, arguments)
                    } else if (-1 !== a.inArray(d, ["blob", "file"]))j.call(this, new l(null, b), arguments[1]); else if ("string" === d)/^data:[^;]*;base64,/.test(b) ? j.call(this, new k(null, {data: b}), arguments[1]) : r.apply(this, arguments); else {
                        if ("node" !== d || "img" !== b.nodeName.toLowerCase())throw new c.DOMException(c.DOMException.TYPE_MISMATCH_ERR);
                        j.call(this, b.src, arguments[1])
                    }
                } catch (e) {
                    this.trigger("error", e)
                }
            }

            function p(b, c) {
                var d = this.connectRuntime(b.ruid);
                this.ruid = d.uid, d.exec.call(this, "Image", "loadFromImage", b, "undefined" === a.typeOf(c) ? !0 : c)
            }

            function q(b, c) {
                function d(a) {
                    e.ruid = a.uid, a.exec.call(e, "Image", "loadFromBlob", b)
                }

                var e = this;
                e.name = b.name || "", b.isDetached() ? (this.bind("RuntimeInit", function (a, b) {
                    d(b)
                }), c && "string" == typeof c.required_caps && (c.required_caps = f.parseCaps(c.required_caps)), this.connectRuntime(a.extend({
                    required_caps: {
                        access_image_binary: !0,
                        resize_image: !0
                    }
                }, c))) : d(this.connectRuntime(b.ruid))
            }

            function r(a, b) {
                var c, d = this;
                c = new e, c.open("get", a), c.responseType = "blob", c.onprogress = function (a) {
                    d.trigger(a)
                }, c.onload = function () {
                    q.call(d, c.response, !0)
                }, c.onerror = function (a) {
                    d.trigger(a)
                }, c.onloadend = function () {
                    c.destroy()
                }, c.bind("RuntimeError", function (a, b) {
                    d.trigger("RuntimeError", b)
                }), c.send(null, b)
            }

            g.call(this), a.extend(this, {
                uid: a.guid("uid_"),
                ruid: null,
                name: "",
                size: 0,
                width: 0,
                height: 0,
                type: "",
                meta: {},
                clone: function () {
                    this.load.apply(this, arguments)
                },
                load: function () {
                    this.bind("Load Resize", function () {
                        d.call(this)
                    }, 999), this.convertEventPropsToHandlers(o), j.apply(this, arguments)
                },
                downsize: function (b, d, e, f) {
                    try {
                        if (!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);
                        if (this.width > n.MAX_RESIZE_WIDTH || this.height > n.MAX_RESIZE_HEIGHT)throw new c.ImageError(c.ImageError.MAX_RESOLUTION_ERR);
                        (!b && !d || "undefined" === a.typeOf(e)) && (e = !1), b = b || this.width, d = d || this.height, f = "undefined" === a.typeOf(f) ? !0 : !!f, this.getRuntime().exec.call(this, "Image", "downsize", b, d, e, f)
                    } catch (g) {
                        this.trigger("error", g)
                    }
                },
                crop: function (a, b, c) {
                    this.downsize(a, b, !0, c)
                },
                getAsCanvas: function () {
                    if (!i.can("create_canvas"))throw new c.RuntimeError(c.RuntimeError.NOT_SUPPORTED_ERR);
                    var a = this.connectRuntime(this.ruid);
                    return a.exec.call(this, "Image", "getAsCanvas")
                },
                getAsBlob: function (a, b) {
                    if (!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);
                    return a || (a = "image/jpeg"), "image/jpeg" !== a || b || (b = 90), this.getRuntime().exec.call(this, "Image", "getAsBlob", a, b)
                },
                getAsDataURL: function (a, b) {
                    if (!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);
                    return this.getRuntime().exec.call(this, "Image", "getAsDataURL", a, b)
                },
                getAsBinaryString: function (a, b) {
                    var c = this.getAsDataURL(a, b);
                    return m.atob(c.substring(c.indexOf("base64,") + 7))
                },
                embed: function (d) {
                    function e() {
                        if (i.can("create_canvas")) {
                            var b = f.getAsCanvas();
                            if (b)return d.appendChild(b), b = null, f.destroy(), void o.trigger("embedded")
                        }
                        var e = f.getAsDataURL(g, j);
                        if (!e)throw new c.ImageError(c.ImageError.WRONG_FORMAT);
                        if (i.can("use_data_uri_of", e.length))d.innerHTML = '<img src="' + e + '" width="' + f.width + '" height="' + f.height + '" />', f.destroy(), o.trigger("embedded"); else {
                            var k = new h;
                            k.bind("TransportingComplete", function () {
                                l = o.connectRuntime(this.result.ruid), o.bind("Embedded", function () {
                                    a.extend(l.getShimContainer().style, {
                                        top: "0px",
                                        left: "0px",
                                        width: f.width + "px",
                                        height: f.height + "px"
                                    }), l = null
                                }, 999), l.exec.call(o, "ImageView", "display", this.result.uid, q, r), f.destroy()
                            }), k.transport(m.atob(e.substring(e.indexOf("base64,") + 7)), g, a.extend({}, p, {
                                required_caps: {display_media: !0},
                                runtime_order: "flash,silverlight",
                                container: d
                            }))
                        }
                    }

                    var f, g, j, k, l, o = this, p = arguments[1] || {}, q = this.width, r = this.height;
                    try {
                        if (!(d = b.get(d)))throw new c.DOMException(c.DOMException.INVALID_NODE_TYPE_ERR);
                        if (!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);
                        if (this.width > n.MAX_RESIZE_WIDTH || this.height > n.MAX_RESIZE_HEIGHT)throw new c.ImageError(c.ImageError.MAX_RESOLUTION_ERR);
                        if (g = p.type || this.type || "image/jpeg", j = p.quality || 90, k = "undefined" !== a.typeOf(p.crop) ? p.crop : !1, p.width)q = p.width, r = p.height || q; else {
                            var s = b.getSize(d);
                            s.w && s.h && (q = s.w, r = s.h)
                        }
                        return f = new n, f.bind("Resize", function () {
                            e.call(o)
                        }), f.bind("Load", function () {
                            f.downsize(q, r, k, !1)
                        }), f.clone(this, !1), f
                    } catch (t) {
                        this.trigger("error", t)
                    }
                },
                destroy: function () {
                    this.ruid && (this.getRuntime().exec.call(this, "Image", "destroy"), this.disconnectRuntime()), this.unbindAll()
                }
            })
        }

        var o = ["progress", "load", "error", "resize", "embedded"];
        return n.MAX_RESIZE_WIDTH = 6500, n.MAX_RESIZE_HEIGHT = 6500, n.prototype = j.instance, n
    }), d(D, [h, m, p, k], function (a, b, c, d) {
        function e(b) {
            var e = this, h = c.capTest, i = c.capTrue, j = a.extend({
                access_binary: h(window.FileReader || window.File && window.File.getAsDataURL),
                access_image_binary: function () {
                    return e.can("access_binary") && !!g.Image
                },
                display_media: h(d.can("create_canvas") || d.can("use_data_uri_over32kb")),
                do_cors: h(window.XMLHttpRequest && "withCredentials"in new XMLHttpRequest),
                drag_and_drop: h(function () {
                    var a = document.createElement("div");
                    return ("draggable"in a || "ondragstart"in a && "ondrop"in a) && ("IE" !== d.browser || d.version > 9)
                }()),
                filter_by_extension: h(function () {
                    return "Chrome" === d.browser && d.version >= 28 || "IE" === d.browser && d.version >= 10
                }()),
                return_response_headers: i,
                return_response_type: function (a) {
                    return "json" === a && window.JSON ? !0 : d.can("return_response_type", a)
                },
                return_status_code: i,
                report_upload_progress: h(window.XMLHttpRequest && (new XMLHttpRequest).upload),
                resize_image: function () {
                    return e.can("access_binary") && d.can("create_canvas")
                },
                select_file: function () {
                    return d.can("use_fileinput") && window.File
                },
                select_folder: function () {
                    return e.can("select_file") && "Chrome" === d.browser && d.version >= 21
                },
                select_multiple: function () {
                    return !(!e.can("select_file") || "Safari" === d.browser && "Windows" === d.os || "iOS" === d.os && d.verComp(d.osVersion, "7.0.4", "<"))
                },
                send_binary_string: h(window.XMLHttpRequest && ((new XMLHttpRequest).sendAsBinary || window.Uint8Array && window.ArrayBuffer)),
                send_custom_headers: h(window.XMLHttpRequest),
                send_multipart: function () {
                    return !!(window.XMLHttpRequest && (new XMLHttpRequest).upload && window.FormData) || e.can("send_binary_string")
                },
                slice_blob: h(window.File && (File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice)),
                stream_upload: function () {
                    return e.can("slice_blob") && e.can("send_multipart")
                },
                summon_file_dialog: h(function () {
                    return "Firefox" === d.browser && d.version >= 4 || "Opera" === d.browser && d.version >= 12 || "IE" === d.browser && d.version >= 10 || !!~a.inArray(d.browser, ["Chrome", "Safari"])
                }()),
                upload_filesize: i
            }, arguments[2]);
            c.call(this, b, arguments[1] || f, j), a.extend(this, {
                init: function () {
                    this.trigger("Init")
                }, destroy: function (a) {
                    return function () {
                        a.call(e), a = e = null
                    }
                }(this.destroy)
            }), a.extend(this.getShim(), g)
        }

        var f = "html5", g = {};
        return c.addConstructor(f, e), g
    }), d(E, [D, r], function (a, b) {
        function c() {
            function a(a, b, c) {
                var d;
                if (!window.File.prototype.slice)return (d = window.File.prototype.webkitSlice || window.File.prototype.mozSlice) ? d.call(a, b, c) : null;
                try {
                    return a.slice(), a.slice(b, c)
                } catch (e) {
                    return a.slice(b, c - b)
                }
            }

            this.slice = function () {
                return new b(this.getRuntime().uid, a.apply(this, arguments))
            }
        }

        return a.Blob = c
    }), d(F, [h], function (a) {
        function b() {
            this.returnValue = !1
        }

        function c() {
            this.cancelBubble = !0
        }

        var d = {}, e = "moxie_" + a.guid(), f = function (f, g, h, i) {
            var j, k;
            g = g.toLowerCase(), f.addEventListener ? (j = h, f.addEventListener(g, j, !1)) : f.attachEvent && (j = function () {
                var a = window.event;
                a.target || (a.target = a.srcElement), a.preventDefault = b, a.stopPropagation = c, h(a)
            }, f.attachEvent("on" + g, j)), f[e] || (f[e] = a.guid()), d.hasOwnProperty(f[e]) || (d[f[e]] = {}), k = d[f[e]], k.hasOwnProperty(g) || (k[g] = []), k[g].push({
                func: j,
                orig: h,
                key: i
            })
        }, g = function (b, c, f) {
            var g, h;
            if (c = c.toLowerCase(), b[e] && d[b[e]] && d[b[e]][c]) {
                g = d[b[e]][c];
                for (var i = g.length - 1; i >= 0 && (g[i].orig !== f && g[i].key !== f || (b.removeEventListener ? b.removeEventListener(c, g[i].func, !1) : b.detachEvent && b.detachEvent("on" + c, g[i].func), g[i].orig = null, g[i].func = null, g.splice(i, 1), f === h)); i--);
                if (g.length || delete d[b[e]][c], a.isEmptyObj(d[b[e]])) {
                    delete d[b[e]];
                    try {
                        delete b[e]
                    } catch (j) {
                        b[e] = h
                    }
                }
            }
        }, h = function (b, c) {
            b && b[e] && a.each(d[b[e]], function (a, d) {
                g(b, d, c)
            })
        };
        return {addEvent: f, removeEvent: g, removeAllEvents: h}
    }), d(G, [D, h, l, F, j, k], function (a, b, c, d, e, f) {
        function g() {
            var a, g = [];
            b.extend(this, {
                init: function (h) {
                    var i, j, k, l, m, n, o = this, p = o.getRuntime();
                    a = h, g = [], k = a.accept.mimes || e.extList2mimes(a.accept, p.can("filter_by_extension")), j = p.getShimContainer(), j.innerHTML = '<input id="' + p.uid + '" type="file" style="font-size:999px;opacity:0;"' + (a.multiple && p.can("select_multiple") ? "multiple" : "") + (a.directory && p.can("select_folder") ? "webkitdirectory directory" : "") + (k ? ' accept="' + k.join(",") + '"' : "") + " />", i = c.get(p.uid), b.extend(i.style, {
                        position: "absolute",
                        top: 0,
                        left: 0,
                        width: "100%",
                        height: "100%"
                    }), l = c.get(a.browse_button), p.can("summon_file_dialog") && ("static" === c.getStyle(l, "position") && (l.style.position = "relative"), m = parseInt(c.getStyle(l, "z-index"), 10) || 1, l.style.zIndex = m, j.style.zIndex = m - 1, d.addEvent(l, "click", function (a) {
                        var b = c.get(p.uid);
                        b && !b.disabled && b.click(), a.preventDefault()
                    }, o.uid)), n = p.can("summon_file_dialog") ? l : j, d.addEvent(n, "mouseover", function () {
                        o.trigger("mouseenter")
                    }, o.uid), d.addEvent(n, "mouseout", function () {
                        o.trigger("mouseleave")
                    }, o.uid), d.addEvent(n, "mousedown", function () {
                        o.trigger("mousedown")
                    }, o.uid), d.addEvent(c.get(a.container), "mouseup", function () {
                        o.trigger("mouseup")
                    }, o.uid), i.onchange = function q() {
                        if (g = [], a.directory ? b.each(this.files, function (a) {
                                "." !== a.name && g.push(a)
                            }) : g = [].slice.call(this.files), "IE" !== f.browser)this.value = ""; else {
                            var c = this.cloneNode(!0);
                            this.parentNode.replaceChild(c, this), c.onchange = q
                        }
                        o.trigger("change")
                    }, o.trigger({type: "ready", async: !0}), j = null
                }, getFiles: function () {
                    return g
                }, disable: function (a) {
                    var b, d = this.getRuntime();
                    (b = c.get(d.uid)) && (b.disabled = !!a)
                }, destroy: function () {
                    var b = this.getRuntime(), e = b.getShim(), f = b.getShimContainer();
                    d.removeAllEvents(f, this.uid), d.removeAllEvents(a && c.get(a.container), this.uid), d.removeAllEvents(a && c.get(a.browse_button), this.uid), f && (f.innerHTML = ""), e.removeInstance(this.uid), g = a = f = e = null
                }
            })
        }

        return a.FileInput = g
    }), d(H, [D, h, l, F, j], function (a, b, c, d, e) {
        function f() {
            function a(a) {
                for (var c = [], d = 0; d < a.length; d++)[].push.apply(c, a[d].extensions.split(/\s*,\s*/));
                return -1 === b.inArray("*", c) ? c : []
            }

            function f(a) {
                var c = e.getFileExtension(a.name);
                return !c || !m.length || -1 !== b.inArray(c, m)
            }

            function g(a, c) {
                var d = [];
                b.each(a, function (a) {
                    var b = a.webkitGetAsEntry();
                    if (b)if (b.isFile) {
                        var c = a.getAsFile();
                        f(c) && l.push(c)
                    } else d.push(b)
                }), d.length ? h(d, c) : c()
            }

            function h(a, c) {
                var d = [];
                b.each(a, function (a) {
                    d.push(function (b) {
                        i(a, b)
                    })
                }), b.inSeries(d, function () {
                    c()
                })
            }

            function i(a, b) {
                a.isFile ? a.file(function (a) {
                    f(a) && l.push(a), b()
                }, function () {
                    b()
                }) : a.isDirectory ? j(a, b) : b()
            }

            function j(a, b) {
                function c(a) {
                    e.readEntries(function (b) {
                        b.length ? ([].push.apply(d, b), c(a)) : a()
                    }, a)
                }

                var d = [], e = a.createReader();
                c(function () {
                    h(d, b)
                })
            }

            var k, l = [], m = [];
            b.extend(this, {
                init: function (c) {
                    var e, h = this;
                    k = c, m = a(k.accept), e = k.container, d.addEvent(e, "dragover", function (a) {
                        a.preventDefault(), a.stopPropagation(), a.dataTransfer.dropEffect = "copy"
                    }, h.uid), d.addEvent(e, "drop", function (a) {
                        a.preventDefault(), a.stopPropagation(), l = [], a.dataTransfer.items && a.dataTransfer.items[0].webkitGetAsEntry ? g(a.dataTransfer.items, function () {
                            h.trigger("drop")
                        }) : (b.each(a.dataTransfer.files, function (a) {
                            f(a) && l.push(a)
                        }), h.trigger("drop"))
                    }, h.uid), d.addEvent(e, "dragenter", function (a) {
                        a.preventDefault(), a.stopPropagation(), h.trigger("dragenter")
                    }, h.uid), d.addEvent(e, "dragleave", function (a) {
                        a.preventDefault(), a.stopPropagation(), h.trigger("dragleave")
                    }, h.uid)
                }, getFiles: function () {
                    return l
                }, destroy: function () {
                    d.removeAllEvents(k && c.get(k.container), this.uid), l = m = k = null
                }
            })
        }

        return a.FileDrop = f
    }), d(I, [D, o, h], function (a, b, c) {
        function d() {
            function a(a) {
                return b.atob(a.substring(a.indexOf("base64,") + 7))
            }

            var d, e = !1;
            c.extend(this, {
                read: function (a, b) {
                    var f = this;
                    d = new window.FileReader, d.addEventListener("progress", function (a) {
                        f.trigger(a)
                    }), d.addEventListener("load", function (a) {
                        f.trigger(a)
                    }), d.addEventListener("error", function (a) {
                        f.trigger(a, d.error)
                    }), d.addEventListener("loadend", function () {
                        d = null
                    }), "function" === c.typeOf(d[a]) ? (e = !1, d[a](b.getSource())) : "readAsBinaryString" === a && (e = !0, d.readAsDataURL(b.getSource()))
                }, getResult: function () {
                    return d && d.result ? e ? a(d.result) : d.result : null
                }, abort: function () {
                    d && d.abort()
                }, destroy: function () {
                    d = null
                }
            })
        }

        return a.FileReader = d
    }), d(J, [D, h, j, x, s, r, z, m, k], function (a, b, c, d, e, f, g, h, i) {
        function j() {
            function a(a, b) {
                var c, d, e = this;
                c = b.getBlob().getSource(), d = new window.FileReader, d.onload = function () {
                    b.append(b.getBlobName(), new f(null, {type: c.type, data: d.result})), o.send.call(e, a, b)
                }, d.readAsBinaryString(c)
            }

            function j() {
                return !window.XMLHttpRequest || "IE" === i.browser && i.version < 8 ? function () {
                    for (var a = ["Msxml2.XMLHTTP.6.0", "Microsoft.XMLHTTP"], b = 0; b < a.length; b++)try {
                        return new ActiveXObject(a[b])
                    } catch (c) {
                    }
                }() : new window.XMLHttpRequest
            }

            function k(a) {
                var b = a.responseXML, c = a.responseText;
                return "IE" === i.browser && c && b && !b.documentElement && /[^\/]+\/[^\+]+\+xml/.test(a.getResponseHeader("Content-Type")) && (b = new window.ActiveXObject("Microsoft.XMLDOM"), b.async = !1, b.validateOnParse = !1, b.loadXML(c)), b && ("IE" === i.browser && 0 !== b.parseError || !b.documentElement || "parsererror" === b.documentElement.tagName) ? null : b
            }

            function l(a) {
                var b = "----moxieboundary" + (new Date).getTime(), c = "--", d = "\r\n", e = "", g = this.getRuntime();
                if (!g.can("send_binary_string"))throw new h.RuntimeError(h.RuntimeError.NOT_SUPPORTED_ERR);
                return m.setRequestHeader("Content-Type", "multipart/form-data; boundary=" + b), a.each(function (a, g) {
                    e += a instanceof f ? c + b + d + 'Content-Disposition: form-data; name="' + g + '"; filename="' + unescape(encodeURIComponent(a.name || "blob")) + '"' + d + "Content-Type: " + (a.type || "application/octet-stream") + d + d + a.getSource() + d : c + b + d + 'Content-Disposition: form-data; name="' + g + '"' + d + d + unescape(encodeURIComponent(a)) + d
                }), e += c + b + c + d
            }

            var m, n, o = this;
            b.extend(this, {
                send: function (c, e) {
                    var h = this, k = "Mozilla" === i.browser && i.version >= 4 && i.version < 7, o = "Android Browser" === i.browser, p = !1;
                    if (n = c.url.replace(/^.+?\/([\w\-\.]+)$/, "$1").toLowerCase(), m = j(), m.open(c.method, c.url, c.async, c.user, c.password), e instanceof f)e.isDetached() && (p = !0), e = e.getSource(); else if (e instanceof g) {
                        if (e.hasBlob())if (e.getBlob().isDetached())e = l.call(h, e), p = !0; else if ((k || o) && "blob" === b.typeOf(e.getBlob().getSource()) && window.FileReader)return void a.call(h, c, e);
                        if (e instanceof g) {
                            var q = new window.FormData;
                            e.each(function (a, b) {
                                a instanceof f ? q.append(b, a.getSource()) : q.append(b, a)
                            }), e = q
                        }
                    }
                    m.upload ? (c.withCredentials && (m.withCredentials = !0), m.addEventListener("load", function (a) {
                        h.trigger(a)
                    }), m.addEventListener("error", function (a) {
                        h.trigger(a)
                    }), m.addEventListener("progress", function (a) {
                        h.trigger(a)
                    }), m.upload.addEventListener("progress", function (a) {
                        h.trigger({type: "UploadProgress", loaded: a.loaded, total: a.total})
                    })) : m.onreadystatechange = function () {
                        switch (m.readyState) {
                            case 1:
                                break;
                            case 2:
                                break;
                            case 3:
                                var a, b;
                                try {
                                    d.hasSameOrigin(c.url) && (a = m.getResponseHeader("Content-Length") || 0), m.responseText && (b = m.responseText.length)
                                } catch (e) {
                                    a = b = 0
                                }
                                h.trigger({type: "progress", lengthComputable: !!a, total: parseInt(a, 10), loaded: b});
                                break;
                            case 4:
                                m.onreadystatechange = function () {
                                }, h.trigger(0 === m.status ? "error" : "load")
                        }
                    }, b.isEmptyObj(c.headers) || b.each(c.headers, function (a, b) {
                        m.setRequestHeader(b, a)
                    }), "" !== c.responseType && "responseType"in m && (m.responseType = "json" !== c.responseType || i.can("return_response_type", "json") ? c.responseType : "text"), p ? m.sendAsBinary ? m.sendAsBinary(e) : function () {
                        for (var a = new Uint8Array(e.length), b = 0; b < e.length; b++)a[b] = 255 & e.charCodeAt(b);
                        m.send(a.buffer)
                    }() : m.send(e), h.trigger("loadstart")
                }, getStatus: function () {
                    try {
                        if (m)return m.status
                    } catch (a) {
                    }
                    return 0
                }, getResponse: function (a) {
                    var b = this.getRuntime();
                    try {
                        switch (a) {
                            case"blob":
                                var d = new e(b.uid, m.response), f = m.getResponseHeader("Content-Disposition");
                                if (f) {
                                    var g = f.match(/filename=([\'\"'])([^\1]+)\1/);
                                    g && (n = g[2])
                                }
                                return d.name = n, d.type || (d.type = c.getFileMime(n)), d;
                            case"json":
                                return i.can("return_response_type", "json") ? m.response : 200 === m.status && window.JSON ? JSON.parse(m.responseText) : null;
                            case"document":
                                return k(m);
                            default:
                                return "" !== m.responseText ? m.responseText : null
                        }
                    } catch (h) {
                        return null
                    }
                }, getAllResponseHeaders: function () {
                    try {
                        return m.getAllResponseHeaders()
                    } catch (a) {
                    }
                    return ""
                }, abort: function () {
                    m && m.abort()
                }, destroy: function () {
                    o = n = null
                }
            })
        }

        return a.XMLHttpRequest = j
    }), d(K, [], function () {
        return function () {
            function a(a, b) {
                var c, d = f ? 0 : -8 * (b - 1), g = 0;
                for (c = 0; b > c; c++)g |= e.charCodeAt(a + c) << Math.abs(d + 8 * c);
                return g
            }

            function c(a, b, c) {
                c = 3 === arguments.length ? c : e.length - b - 1, e = e.substr(0, b) + a + e.substr(c + b)
            }

            function d(a, b, d) {
                var e, g = "", h = f ? 0 : -8 * (d - 1);
                for (e = 0; d > e; e++)g += String.fromCharCode(255 & b >> Math.abs(h + 8 * e));
                c(g, a, d)
            }

            var e, f = !1;
            return {
                II: function (a) {
                    return a === b ? f : void(f = a)
                }, init: function (a) {
                    f = !1, e = a
                }, SEGMENT: function (a, b, d) {
                    switch (arguments.length) {
                        case 1:
                            return e.substr(a, e.length - a - 1);
                        case 2:
                            return e.substr(a, b);
                        case 3:
                            c(d, a, b);
                            break;
                        default:
                            return e
                    }
                }, BYTE: function (b) {
                    return a(b, 1)
                }, SHORT: function (b) {
                    return a(b, 2)
                }, LONG: function (c, e) {
                    return e === b ? a(c, 4) : void d(c, e, 4)
                }, SLONG: function (b) {
                    var c = a(b, 4);
                    return c > 2147483647 ? c - 4294967296 : c
                }, STRING: function (b, c) {
                    var d = "";
                    for (c += b; c > b; b++)d += String.fromCharCode(a(b, 1));
                    return d
                }
            }
        }
    }), d(L, [K], function (a) {
        return function b(c) {
            var d, e, f, g = [], h = 0;
            if (d = new a, d.init(c), 65496 === d.SHORT(0)) {
                for (e = 2; e <= c.length;)if (f = d.SHORT(e), f >= 65488 && 65495 >= f)e += 2; else {
                    if (65498 === f || 65497 === f)break;
                    h = d.SHORT(e + 2) + 2, f >= 65505 && 65519 >= f && g.push({
                        hex: f,
                        name: "APP" + (15 & f),
                        start: e,
                        length: h,
                        segment: d.SEGMENT(e, h)
                    }), e += h
                }
                return d.init(null), {
                    headers: g, restore: function (a) {
                        var b, c;
                        for (d.init(a), e = 65504 == d.SHORT(2) ? 4 + d.SHORT(4) : 2, c = 0, b = g.length; b > c; c++)d.SEGMENT(e, 0, g[c].segment), e += g[c].length;
                        return a = d.SEGMENT(), d.init(null), a
                    }, strip: function (a) {
                        var c, e, f;
                        for (e = new b(a), c = e.headers, e.purge(), d.init(a), f = c.length; f--;)d.SEGMENT(c[f].start, c[f].length, "");
                        return a = d.SEGMENT(), d.init(null), a
                    }, get: function (a) {
                        for (var b = [], c = 0, d = g.length; d > c; c++)g[c].name === a.toUpperCase() && b.push(g[c].segment);
                        return b
                    }, set: function (a, b) {
                        var c, d, e, f = [];
                        for ("string" == typeof b ? f.push(b) : f = b, c = d = 0, e = g.length; e > c && (g[c].name === a.toUpperCase() && (g[c].segment = f[d], g[c].length = f[d].length, d++), !(d >= f.length)); c++);
                    }, purge: function () {
                        g = [], d.init(null), d = null
                    }
                }
            }
        }
    }), d(M, [h, K], function (a, c) {
        return function d() {
            function d(a, c) {
                var d, e, f, h, i, l, m, n, o = g.SHORT(a), p = [], q = {};
                for (d = 0; o > d; d++)if (m = l = a + 12 * d + 2, f = c[g.SHORT(m)], f !== b) {
                    switch (h = g.SHORT(m += 2), i = g.LONG(m += 2), m += 4, p = [], h) {
                        case 1:
                        case 7:
                            for (i > 4 && (m = g.LONG(m) + k.tiffHeader), e = 0; i > e; e++)p[e] = g.BYTE(m + e);
                            break;
                        case 2:
                            i > 4 && (m = g.LONG(m) + k.tiffHeader), q[f] = g.STRING(m, i - 1);
                            continue;
                        case 3:
                            for (i > 2 && (m = g.LONG(m) + k.tiffHeader), e = 0; i > e; e++)p[e] = g.SHORT(m + 2 * e);
                            break;
                        case 4:
                            for (i > 1 && (m = g.LONG(m) + k.tiffHeader), e = 0; i > e; e++)p[e] = g.LONG(m + 4 * e);
                            break;
                        case 5:
                            for (m = g.LONG(m) + k.tiffHeader, e = 0; i > e; e++)p[e] = g.LONG(m + 4 * e) / g.LONG(m + 4 * e + 4);
                            break;
                        case 9:
                            for (m = g.LONG(m) + k.tiffHeader, e = 0; i > e; e++)p[e] = g.SLONG(m + 4 * e);
                            break;
                        case 10:
                            for (m = g.LONG(m) + k.tiffHeader, e = 0; i > e; e++)p[e] = g.SLONG(m + 4 * e) / g.SLONG(m + 4 * e + 4);
                            break;
                        default:
                            continue
                    }
                    n = 1 == i ? p[0] : p, q[f] = j.hasOwnProperty(f) && "object" != typeof n ? j[f][n] : n
                }
                return q
            }

            function e() {
                var a = k.tiffHeader;
                return g.II(18761 == g.SHORT(a)), 42 !== g.SHORT(a += 2) ? !1 : (k.IFD0 = k.tiffHeader + g.LONG(a += 2), i = d(k.IFD0, h.tiff), "ExifIFDPointer"in i && (k.exifIFD = k.tiffHeader + i.ExifIFDPointer, delete i.ExifIFDPointer), "GPSInfoIFDPointer"in i && (k.gpsIFD = k.tiffHeader + i.GPSInfoIFDPointer, delete i.GPSInfoIFDPointer), !0)
            }

            function f(a, b, c) {
                var d, e, f, i = 0;
                if ("string" == typeof b) {
                    var j = h[a.toLowerCase()];
                    for (var l in j)if (j[l] === b) {
                        b = l;
                        break
                    }
                }
                d = k[a.toLowerCase() + "IFD"], e = g.SHORT(d);
                for (var m = 0; e > m; m++)if (f = d + 12 * m + 2, g.SHORT(f) == b) {
                    i = f + 8;
                    break
                }
                return i ? (g.LONG(i, c), !0) : !1
            }

            var g, h, i, j, k = {};
            return g = new c, h = {
                tiff: {
                    274: "Orientation",
                    270: "ImageDescription",
                    271: "Make",
                    272: "Model",
                    305: "Software",
                    34665: "ExifIFDPointer",
                    34853: "GPSInfoIFDPointer"
                },
                exif: {
                    36864: "ExifVersion",
                    40961: "ColorSpace",
                    40962: "PixelXDimension",
                    40963: "PixelYDimension",
                    36867: "DateTimeOriginal",
                    33434: "ExposureTime",
                    33437: "FNumber",
                    34855: "ISOSpeedRatings",
                    37377: "ShutterSpeedValue",
                    37378: "ApertureValue",
                    37383: "MeteringMode",
                    37384: "LightSource",
                    37385: "Flash",
                    37386: "FocalLength",
                    41986: "ExposureMode",
                    41987: "WhiteBalance",
                    41990: "SceneCaptureType",
                    41988: "DigitalZoomRatio",
                    41992: "Contrast",
                    41993: "Saturation",
                    41994: "Sharpness"
                },
                gps: {0: "GPSVersionID", 1: "GPSLatitudeRef", 2: "GPSLatitude", 3: "GPSLongitudeRef", 4: "GPSLongitude"}
            }, j = {
                ColorSpace: {1: "sRGB", 0: "Uncalibrated"},
                MeteringMode: {
                    0: "Unknown",
                    1: "Average",
                    2: "CenterWeightedAverage",
                    3: "Spot",
                    4: "MultiSpot",
                    5: "Pattern",
                    6: "Partial",
                    255: "Other"
                },
                LightSource: {
                    1: "Daylight",
                    2: "Fliorescent",
                    3: "Tungsten",
                    4: "Flash",
                    9: "Fine weather",
                    10: "Cloudy weather",
                    11: "Shade",
                    12: "Daylight fluorescent (D 5700 - 7100K)",
                    13: "Day white fluorescent (N 4600 -5400K)",
                    14: "Cool white fluorescent (W 3900 - 4500K)",
                    15: "White fluorescent (WW 3200 - 3700K)",
                    17: "Standard light A",
                    18: "Standard light B",
                    19: "Standard light C",
                    20: "D55",
                    21: "D65",
                    22: "D75",
                    23: "D50",
                    24: "ISO studio tungsten",
                    255: "Other"
                },
                Flash: {
                    0: "Flash did not fire.",
                    1: "Flash fired.",
                    5: "Strobe return light not detected.",
                    7: "Strobe return light detected.",
                    9: "Flash fired, compulsory flash mode",
                    13: "Flash fired, compulsory flash mode, return light not detected",
                    15: "Flash fired, compulsory flash mode, return light detected",
                    16: "Flash did not fire, compulsory flash mode",
                    24: "Flash did not fire, auto mode",
                    25: "Flash fired, auto mode",
                    29: "Flash fired, auto mode, return light not detected",
                    31: "Flash fired, auto mode, return light detected",
                    32: "No flash function",
                    65: "Flash fired, red-eye reduction mode",
                    69: "Flash fired, red-eye reduction mode, return light not detected",
                    71: "Flash fired, red-eye reduction mode, return light detected",
                    73: "Flash fired, compulsory flash mode, red-eye reduction mode",
                    77: "Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",
                    79: "Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",
                    89: "Flash fired, auto mode, red-eye reduction mode",
                    93: "Flash fired, auto mode, return light not detected, red-eye reduction mode",
                    95: "Flash fired, auto mode, return light detected, red-eye reduction mode"
                },
                ExposureMode: {0: "Auto exposure", 1: "Manual exposure", 2: "Auto bracket"},
                WhiteBalance: {0: "Auto white balance", 1: "Manual white balance"},
                SceneCaptureType: {0: "Standard", 1: "Landscape", 2: "Portrait", 3: "Night scene"},
                Contrast: {0: "Normal", 1: "Soft", 2: "Hard"},
                Saturation: {0: "Normal", 1: "Low saturation", 2: "High saturation"},
                Sharpness: {0: "Normal", 1: "Soft", 2: "Hard"},
                GPSLatitudeRef: {N: "North latitude", S: "South latitude"},
                GPSLongitudeRef: {E: "East longitude", W: "West longitude"}
            }, {
                init: function (a) {
                    return k = {tiffHeader: 10}, a !== b && a.length ? (g.init(a), 65505 === g.SHORT(0) && "EXIF\x00" === g.STRING(4, 5).toUpperCase() ? e() : !1) : !1
                }, TIFF: function () {
                    return i
                }, EXIF: function () {
                    var b;
                    if (b = d(k.exifIFD, h.exif), b.ExifVersion && "array" === a.typeOf(b.ExifVersion)) {
                        for (var c = 0, e = ""; c < b.ExifVersion.length; c++)e += String.fromCharCode(b.ExifVersion[c]);
                        b.ExifVersion = e
                    }
                    return b
                }, GPS: function () {
                    var b;
                    return b = d(k.gpsIFD, h.gps), b.GPSVersionID && "array" === a.typeOf(b.GPSVersionID) && (b.GPSVersionID = b.GPSVersionID.join(".")), b
                }, setExif: function (a, b) {
                    return "PixelXDimension" !== a && "PixelYDimension" !== a ? !1 : f("exif", a, b)
                }, getBinary: function () {
                    return g.SEGMENT()
                }, purge: function () {
                    g.init(null), g = i = null, k = {}
                }
            }
        }
    }), d(N, [h, m, L, K, M], function (a, b, c, d, e) {
        function f(f) {
            function g() {
                for (var a, b, c = 0; c <= i.length;) {
                    if (a = j.SHORT(c += 2), a >= 65472 && 65475 >= a)return c += 5, {
                        height: j.SHORT(c),
                        width: j.SHORT(c += 2)
                    };
                    b = j.SHORT(c += 2), c += b - 2
                }
                return null
            }

            function h() {
                l && k && j && (l.purge(), k.purge(), j.init(null), i = m = k = l = j = null)
            }

            var i, j, k, l, m, n;
            if (i = f, j = new d, j.init(i), 65496 !== j.SHORT(0))throw new b.ImageError(b.ImageError.WRONG_FORMAT);
            k = new c(f), l = new e, n = !!l.init(k.get("app1")[0]), m = g.call(this), a.extend(this, {
                type: "image/jpeg",
                size: i.length,
                width: m && m.width || 0,
                height: m && m.height || 0,
                setExif: function (b, c) {
                    return n ? ("object" === a.typeOf(b) ? a.each(b, function (a, b) {
                        l.setExif(b, a)
                    }) : l.setExif(b, c), void k.set("app1", l.getBinary())) : !1
                },
                writeHeaders: function () {
                    return arguments.length ? k.restore(arguments[0]) : i = k.restore(i)
                },
                stripHeaders: function (a) {
                    return k.strip(a)
                },
                purge: function () {
                    h.call(this)
                }
            }), n && (this.meta = {tiff: l.TIFF(), exif: l.EXIF(), gps: l.GPS()})
        }

        return f
    }), d(O, [m, h, K], function (a, b, c) {
        function d(d) {
            function e() {
                var a, b;
                return a = g.call(this, 8), "IHDR" == a.type ? (b = a.start, {
                    width: i.LONG(b),
                    height: i.LONG(b += 4)
                }) : null
            }

            function f() {
                i && (i.init(null), h = l = j = k = i = null)
            }

            function g(a) {
                var b, c, d, e;
                return b = i.LONG(a), c = i.STRING(a += 4, 4), d = a += 4, e = i.LONG(a + b), {
                    length: b,
                    type: c,
                    start: d,
                    CRC: e
                }
            }

            var h, i, j, k, l;
            h = d, i = new c, i.init(h), function () {
                var b = 0, c = 0, d = [35152, 20039, 3338, 6666];
                for (c = 0; c < d.length; c++, b += 2)if (d[c] != i.SHORT(b))throw new a.ImageError(a.ImageError.WRONG_FORMAT)
            }(), l = e.call(this), b.extend(this, {
                type: "image/png",
                size: h.length,
                width: l.width,
                height: l.height,
                purge: function () {
                    f.call(this)
                }
            }), f.call(this)
        }

        return d
    }), d(P, [h, m, N, O], function (a, b, c, d) {
        return function (e) {
            var f, g = [c, d];
            f = function () {
                for (var a = 0; a < g.length; a++)try {
                    return new g[a](e)
                } catch (c) {
                }
                throw new b.ImageError(b.ImageError.WRONG_FORMAT)
            }(), a.extend(this, {
                type: "", size: 0, width: 0, height: 0, setExif: function () {
                }, writeHeaders: function (a) {
                    return a
                }, stripHeaders: function (a) {
                    return a
                }, purge: function () {
                }
            }), a.extend(this, f), this.purge = function () {
                f.purge(), f = null
            }
        }
    }), d(Q, [], function () {
        function a(a, d, e) {
            var f = a.naturalWidth, g = a.naturalHeight, h = e.width, i = e.height, j = e.x || 0, k = e.y || 0, l = d.getContext("2d");
            b(a) && (f /= 2, g /= 2);
            var m = 1024, n = document.createElement("canvas");
            n.width = n.height = m;
            for (var o = n.getContext("2d"), p = c(a, f, g), q = 0; g > q;) {
                for (var r = q + m > g ? g - q : m, s = 0; f > s;) {
                    var t = s + m > f ? f - s : m;
                    o.clearRect(0, 0, m, m), o.drawImage(a, -s, -q);
                    var u = s * h / f + j << 0, v = Math.ceil(t * h / f), w = q * i / g / p + k << 0, x = Math.ceil(r * i / g / p);
                    l.drawImage(n, 0, 0, t, r, u, w, v, x), s += m
                }
                q += m
            }
            n = o = null
        }

        function b(a) {
            var b = a.naturalWidth, c = a.naturalHeight;
            if (b * c > 1048576) {
                var d = document.createElement("canvas");
                d.width = d.height = 1;
                var e = d.getContext("2d");
                return e.drawImage(a, -b + 1, 0), 0 === e.getImageData(0, 0, 1, 1).data[3]
            }
            return !1
        }

        function c(a, b, c) {
            var d = document.createElement("canvas");
            d.width = 1, d.height = c;
            var e = d.getContext("2d");
            e.drawImage(a, 0, 0);
            for (var f = e.getImageData(0, 0, 1, c).data, g = 0, h = c, i = c; i > g;) {
                var j = f[4 * (i - 1) + 3];
                0 === j ? h = i : g = i, i = h + g >> 1
            }
            d = null;
            var k = i / c;
            return 0 === k ? 1 : k
        }

        return {isSubsampled: b, renderTo: a}
    }), d(R, [D, h, m, o, s, P, Q, j, k], function (a, b, c, d, e, f, g, h, i) {
        function j() {
            function a() {
                if (!t && !r)throw new c.ImageError(c.DOMException.INVALID_STATE_ERR);
                return t || r
            }

            function j(a) {
                return d.atob(a.substring(a.indexOf("base64,") + 7))
            }

            function k(a, b) {
                return "data:" + (b || "") + ";base64," + d.btoa(a)
            }

            function l(a) {
                var b = this;
                r = new Image, r.onerror = function () {
                    q.call(this), b.trigger("error", new c.ImageError(c.ImageError.WRONG_FORMAT))
                }, r.onload = function () {
                    b.trigger("load")
                }, r.src = /^data:[^;]*;base64,/.test(a) ? a : k(a, v.type)
            }

            function m(a, b) {
                var d, e = this;
                return window.FileReader ? (d = new FileReader, d.onload = function () {
                    b(this.result)
                }, d.onerror = function () {
                    e.trigger("error", new c.FileException(c.FileException.NOT_READABLE_ERR))
                }, void d.readAsDataURL(a)) : b(a.getAsDataURL())
            }

            function n(c, d, e, f) {
                var g, h, i, j, k, l, m = this, n = 0, q = 0;
                if (y = f, l = this.meta && this.meta.tiff && this.meta.tiff.Orientation || 1, -1 !== b.inArray(l, [5, 6, 7, 8])) {
                    var r = c;
                    c = d, d = r
                }
                return i = a(), h = e ? Math.max : Math.min, g = h(c / i.width, d / i.height), g > 1 && (!e || f) ? void this.trigger("Resize") : (t || (t = document.createElement("canvas")), j = Math.round(i.width * g), k = Math.round(i.height * g), e ? (t.width = c, t.height = d, j > c && (n = Math.round((j - c) / 2)), k > d && (q = Math.round((k - d) / 2))) : (t.width = j, t.height = k), y || p(t.width, t.height, l), o.call(this, i, t, -n, -q, j, k), this.width = t.width, this.height = t.height, x = !0, void m.trigger("Resize"))
            }

            function o(a, b, c, d, e, f) {
                if ("iOS" === i.OS)g.renderTo(a, b, {width: e, height: f, x: c, y: d}); else {
                    var h = b.getContext("2d");
                    h.drawImage(a, c, d, e, f)
                }
            }

            function p(a, b, c) {
                switch (c) {
                    case 5:
                    case 6:
                    case 7:
                    case 8:
                        t.width = b, t.height = a;
                        break;
                    default:
                        t.width = a, t.height = b
                }
                var d = t.getContext("2d");
                switch (c) {
                    case 2:
                        d.translate(a, 0), d.scale(-1, 1);
                        break;
                    case 3:
                        d.translate(a, b), d.rotate(Math.PI);
                        break;
                    case 4:
                        d.translate(0, b), d.scale(1, -1);
                        break;
                    case 5:
                        d.rotate(.5 * Math.PI), d.scale(1, -1);
                        break;
                    case 6:
                        d.rotate(.5 * Math.PI), d.translate(0, -b);
                        break;
                    case 7:
                        d.rotate(.5 * Math.PI), d.translate(a, -b), d.scale(-1, 1);
                        break;
                    case 8:
                        d.rotate(-.5 * Math.PI), d.translate(-a, 0)
                }
            }

            function q() {
                s && (s.purge(), s = null), u = r = t = v = null, x = !1
            }

            var r, s, t, u, v, w = this, x = !1, y = !0;
            b.extend(this, {
                loadFromBlob: function (a) {
                    var b = this, d = b.getRuntime(), e = arguments.length > 1 ? arguments[1] : !0;
                    if (!d.can("access_binary"))throw new c.RuntimeError(c.RuntimeError.NOT_SUPPORTED_ERR);
                    return v = a, a.isDetached() ? (u = a.getSource(), void l.call(this, u)) : void m.call(this, a.getSource(), function (a) {
                        e && (u = j(a)), l.call(b, a)
                    })
                }, loadFromImage: function (a, b) {
                    this.meta = a.meta, v = new e(null, {
                        name: a.name,
                        size: a.size,
                        type: a.type
                    }), l.call(this, b ? u = a.getAsBinaryString() : a.getAsDataURL())
                }, getInfo: function () {
                    var b, c = this.getRuntime();
                    return !s && u && c.can("access_image_binary") && (s = new f(u)), b = {
                        width: a().width || 0,
                        height: a().height || 0,
                        type: v.type || h.getFileMime(v.name),
                        size: u && u.length || v.size || 0,
                        name: v.name || "",
                        meta: s && s.meta || this.meta || {}
                    }
                }, downsize: function () {
                    n.apply(this, arguments)
                }, getAsCanvas: function () {
                    return t && (t.id = this.uid + "_canvas"), t
                }, getAsBlob: function (a, b) {
                    return a !== this.type && n.call(this, this.width, this.height, !1), new e(null, {
                        name: v.name || "",
                        type: a,
                        data: w.getAsBinaryString.call(this, a, b)
                    })
                }, getAsDataURL: function (a) {
                    var b = arguments[1] || 90;
                    if (!x)return r.src;
                    if ("image/jpeg" !== a)return t.toDataURL("image/png");
                    try {
                        return t.toDataURL("image/jpeg", b / 100)
                    } catch (c) {
                        return t.toDataURL("image/jpeg")
                    }
                }, getAsBinaryString: function (a, b) {
                    if (!x)return u || (u = j(w.getAsDataURL(a, b))), u;
                    if ("image/jpeg" !== a)u = j(w.getAsDataURL(a, b)); else {
                        var c;
                        b || (b = 90);
                        try {
                            c = t.toDataURL("image/jpeg", b / 100)
                        } catch (d) {
                            c = t.toDataURL("image/jpeg")
                        }
                        u = j(c), s && (u = s.stripHeaders(u), y && (s.meta && s.meta.exif && s.setExif({
                            PixelXDimension: this.width,
                            PixelYDimension: this.height
                        }), u = s.writeHeaders(u)), s.purge(), s = null)
                    }
                    return x = !1, u
                }, destroy: function () {
                    w = null, q.call(this), this.getRuntime().getShim().removeInstance(this.uid)
                }
            })
        }

        return a.Image = j
    }), d(S, [h, k, l, m, p], function (a, b, c, d, e) {
        function f() {
            var a;
            try {
                a = navigator.plugins["Shockwave Flash"], a = a.description
            } catch (b) {
                try {
                    a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")
                } catch (c) {
                    a = "0.0"
                }
            }
            return a = a.match(/\d+/g), parseFloat(a[0] + "." + a[1])
        }

        function g(g) {
            var j, k = this;
            g = a.extend({swf_url: b.swf_url}, g), e.call(this, g, h, {
                access_binary: function (a) {
                    return a && "browser" === k.mode
                },
                access_image_binary: function (a) {
                    return a && "browser" === k.mode
                },
                display_media: e.capTrue,
                do_cors: e.capTrue,
                drag_and_drop: !1,
                report_upload_progress: function () {
                    return "client" === k.mode
                },
                resize_image: e.capTrue,
                return_response_headers: !1,
                return_response_type: function (b) {
                    return "json" === b && window.JSON ? !0 : !a.arrayDiff(b, ["", "text", "document"]) || "browser" === k.mode
                },
                return_status_code: function (b) {
                    return "browser" === k.mode || !a.arrayDiff(b, [200, 404])
                },
                select_file: e.capTrue,
                select_multiple: e.capTrue,
                send_binary_string: function (a) {
                    return a && "browser" === k.mode
                },
                send_browser_cookies: function (a) {
                    return a && "browser" === k.mode
                },
                send_custom_headers: function (a) {
                    return a && "browser" === k.mode
                },
                send_multipart: e.capTrue,
                slice_blob: e.capTrue,
                stream_upload: function (a) {
                    return a && "browser" === k.mode
                },
                summon_file_dialog: !1,
                upload_filesize: function (b) {
                    return a.parseSizeStr(b) <= 2097152 || "client" === k.mode
                },
                use_http_method: function (b) {
                    return !a.arrayDiff(b, ["GET", "POST"])
                }
            }, {
                access_binary: function (a) {
                    return a ? "browser" : "client"
                }, access_image_binary: function (a) {
                    return a ? "browser" : "client"
                }, report_upload_progress: function (a) {
                    return a ? "browser" : "client"
                }, return_response_type: function (b) {
                    return a.arrayDiff(b, ["", "text", "json", "document"]) ? "browser" : ["client", "browser"]
                }, return_status_code: function (b) {
                    return a.arrayDiff(b, [200, 404]) ? "browser" : ["client", "browser"]
                }, send_binary_string: function (a) {
                    return a ? "browser" : "client"
                }, send_browser_cookies: function (a) {
                    return a ? "browser" : "client"
                }, send_custom_headers: function (a) {
                    return a ? "browser" : "client"
                }, stream_upload: function (a) {
                    return a ? "client" : "browser"
                }, upload_filesize: function (b) {
                    return a.parseSizeStr(b) >= 2097152 ? "client" : "browser"
                }
            }, "client"), f() < 10 && (this.mode = !1), a.extend(this, {
                getShim: function () {
                    return c.get(this.uid)
                }, shimExec: function (a, b) {
                    var c = [].slice.call(arguments, 2);
                    return k.getShim().exec(this.uid, a, b, c)
                }, init: function () {
                    var c, e, f;
                    f = this.getShimContainer(), a.extend(f.style, {
                        position: "absolute",
                        top: "-8px",
                        left: "-8px",
                        width: "9px",
                        height: "9px",
                        overflow: "hidden"
                    }), c = '<object id="' + this.uid + '" type="application/x-shockwave-flash" data="' + g.swf_url + '" ', "IE" === b.browser && (c += 'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '), c += 'width="100%" height="100%" style="outline:0"><param name="movie" value="' + g.swf_url + '" /><param name="flashvars" value="uid=' + escape(this.uid) + "&target=" + b.global_event_dispatcher + '" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>', "IE" === b.browser ? (e = document.createElement("div"), f.appendChild(e), e.outerHTML = c, e = f = null) : f.innerHTML = c, j = setTimeout(function () {
                        k && !k.initialized && k.trigger("Error", new d.RuntimeError(d.RuntimeError.NOT_INIT_ERR))
                    }, 5e3)
                }, destroy: function (a) {
                    return function () {
                        a.call(k), clearTimeout(j), g = j = a = k = null
                    }
                }(this.destroy)
            }, i)
        }

        var h = "flash", i = {};
        return e.addConstructor(h, g), i
    }), d(T, [S, r], function (a, b) {
        var c = {
            slice: function (a, c, d, e) {
                var f = this.getRuntime();
                return 0 > c ? c = Math.max(a.size + c, 0) : c > 0 && (c = Math.min(c, a.size)), 0 > d ? d = Math.max(a.size + d, 0) : d > 0 && (d = Math.min(d, a.size)), a = f.shimExec.call(this, "Blob", "slice", c, d, e || ""), a && (a = new b(f.uid, a)), a
            }
        };
        return a.Blob = c
    }), d(U, [S], function (a) {
        var b = {
            init: function (a) {
                this.getRuntime().shimExec.call(this, "FileInput", "init", {
                    name: a.name,
                    accept: a.accept,
                    multiple: a.multiple
                }), this.trigger("ready")
            }
        };
        return a.FileInput = b
    }), d(V, [S, o], function (a, b) {
        function c(a, c) {
            switch (c) {
                case"readAsText":
                    return b.atob(a, "utf8");
                case"readAsBinaryString":
                    return b.atob(a);
                case"readAsDataURL":
                    return a
            }
            return null
        }

        var d = "", e = {
            read: function (a, b) {
                var e = this, f = e.getRuntime();
                return "readAsDataURL" === a && (d = "data:" + (b.type || "") + ";base64,"), e.bind("Progress", function (b, e) {
                    e && (d += c(e, a))
                }), f.shimExec.call(this, "FileReader", "readAsBase64", b.uid)
            }, getResult: function () {
                return d
            }, destroy: function () {
                d = null
            }
        };
        return a.FileReader = e
    }), d(W, [S, o], function (a, b) {
        function c(a, c) {
            switch (c) {
                case"readAsText":
                    return b.atob(a, "utf8");
                case"readAsBinaryString":
                    return b.atob(a);
                case"readAsDataURL":
                    return a
            }
            return null
        }

        var d = {
            read: function (a, b) {
                var d, e = this.getRuntime();
                return (d = e.shimExec.call(this, "FileReaderSync", "readAsBase64", b.uid)) ? ("readAsDataURL" === a && (d = "data:" + (b.type || "") + ";base64," + d), c(d, a, b.type)) : null
            }
        };
        return a.FileReaderSync = d
    }), d(X, [S, h, r, s, y, z, B], function (a, b, c, d, e, f, g) {
        var h = {
            send: function (a, d) {
                function e() {
                    a.transport = k.mode, k.shimExec.call(j, "XMLHttpRequest", "send", a, d)
                }

                function h(a, b) {
                    k.shimExec.call(j, "XMLHttpRequest", "appendBlob", a, b.uid), d = null, e()
                }

                function i(a, b) {
                    var c = new g;
                    c.bind("TransportingComplete", function () {
                        b(this.result)
                    }), c.transport(a.getSource(), a.type, {ruid: k.uid})
                }

                var j = this, k = j.getRuntime();
                if (b.isEmptyObj(a.headers) || b.each(a.headers, function (a, b) {
                        k.shimExec.call(j, "XMLHttpRequest", "setRequestHeader", b, a.toString())
                    }), d instanceof f) {
                    var l;
                    if (d.each(function (a, b) {
                            a instanceof c ? l = b : k.shimExec.call(j, "XMLHttpRequest", "append", b, a)
                        }), d.hasBlob()) {
                        var m = d.getBlob();
                        m.isDetached() ? i(m, function (a) {
                            m.destroy(), h(l, a)
                        }) : h(l, m)
                    } else d = null, e()
                } else d instanceof c ? d.isDetached() ? i(d, function (a) {
                    d.destroy(), d = a.uid, e()
                }) : (d = d.uid, e()) : e()
            }, getResponse: function (a) {
                var c, f, g = this.getRuntime();
                if (f = g.shimExec.call(this, "XMLHttpRequest", "getResponseAsBlob")) {
                    if (f = new d(g.uid, f), "blob" === a)return f;
                    try {
                        if (c = new e, ~b.inArray(a, ["", "text"]))return c.readAsText(f);
                        if ("json" === a && window.JSON)return JSON.parse(c.readAsText(f))
                    } finally {
                        f.destroy()
                    }
                }
                return null
            }, abort: function () {
                var a = this.getRuntime();
                a.shimExec.call(this, "XMLHttpRequest", "abort"), this.dispatchEvent("readystatechange"), this.dispatchEvent("abort")
            }
        };
        return a.XMLHttpRequest = h
    }), d(Y, [S, r], function (a, b) {
        var c = {
            getAsBlob: function (a) {
                var c = this.getRuntime(), d = c.shimExec.call(this, "Transporter", "getAsBlob", a);
                return d ? new b(c.uid, d) : null
            }
        };
        return a.Transporter = c
    }), d(Z, [S, h, B, r, y], function (a, b, c, d, e) {
        var f = {
            loadFromBlob: function (a) {
                function b(a) {
                    e.shimExec.call(d, "Image", "loadFromBlob", a.uid), d = e = null
                }

                var d = this, e = d.getRuntime();
                if (a.isDetached()) {
                    var f = new c;
                    f.bind("TransportingComplete", function () {
                        b(f.result.getSource())
                    }), f.transport(a.getSource(), a.type, {ruid: e.uid})
                } else b(a.getSource())
            }, loadFromImage: function (a) {
                var b = this.getRuntime();
                return b.shimExec.call(this, "Image", "loadFromImage", a.uid)
            }, getAsBlob: function (a, b) {
                var c = this.getRuntime(), e = c.shimExec.call(this, "Image", "getAsBlob", a, b);
                return e ? new d(c.uid, e) : null
            }, getAsDataURL: function () {
                var a, b = this.getRuntime(), c = b.Image.getAsBlob.apply(this, arguments);
                return c ? (a = new e, a.readAsDataURL(c)) : null
            }
        };
        return a.Image = f
    }), d($, [h, k, l, m, p], function (a, b, c, d, e) {
        function f(a) {
            var b, c, d, e, f, g = !1, h = null, i = 0;
            try {
                try {
                    h = new ActiveXObject("AgControl.AgControl"), h.IsVersionSupported(a) && (g = !0), h = null
                } catch (j) {
                    var k = navigator.plugins["Silverlight Plug-In"];
                    if (k) {
                        for (b = k.description, "1.0.30226.2" === b && (b = "2.0.30226.2"), c = b.split("."); c.length > 3;)c.pop();
                        for (; c.length < 4;)c.push(0);
                        for (d = a.split("."); d.length > 4;)d.pop();
                        do e = parseInt(d[i], 10), f = parseInt(c[i], 10), i++; while (i < d.length && e === f);
                        f >= e && !isNaN(e) && (g = !0)
                    }
                }
            } catch (l) {
                g = !1
            }
            return g
        }

        function g(g) {
            var j, k = this;
            g = a.extend({xap_url: b.xap_url}, g), e.call(this, g, h, {
                access_binary: e.capTrue,
                access_image_binary: e.capTrue,
                display_media: e.capTrue,
                do_cors: e.capTrue,
                drag_and_drop: !1,
                report_upload_progress: e.capTrue,
                resize_image: e.capTrue,
                return_response_headers: function (a) {
                    return a && "client" === k.mode
                },
                return_response_type: function (a) {
                    return "json" !== a ? !0 : !!window.JSON
                },
                return_status_code: function (b) {
                    return "client" === k.mode || !a.arrayDiff(b, [200, 404])
                },
                select_file: e.capTrue,
                select_multiple: e.capTrue,
                send_binary_string: e.capTrue,
                send_browser_cookies: function (a) {
                    return a && "browser" === k.mode
                },
                send_custom_headers: function (a) {
                    return a && "client" === k.mode
                },
                send_multipart: e.capTrue,
                slice_blob: e.capTrue,
                stream_upload: !0,
                summon_file_dialog: !1,
                upload_filesize: e.capTrue,
                use_http_method: function (b) {
                    return "client" === k.mode || !a.arrayDiff(b, ["GET", "POST"])
                }
            }, {
                return_response_headers: function (a) {
                    return a ? "client" : "browser"
                }, return_status_code: function (b) {
                    return a.arrayDiff(b, [200, 404]) ? "client" : ["client", "browser"]
                }, send_browser_cookies: function (a) {
                    return a ? "browser" : "client"
                }, send_custom_headers: function (a) {
                    return a ? "client" : "browser"
                }, use_http_method: function (b) {
                    return a.arrayDiff(b, ["GET", "POST"]) ? "client" : ["client", "browser"]
                }
            }), f("2.0.31005.0") && "Opera" !== b.browser || (this.mode = !1), a.extend(this, {
                getShim: function () {
                    return c.get(this.uid).content.Moxie
                }, shimExec: function (a, b) {
                    var c = [].slice.call(arguments, 2);
                    return k.getShim().exec(this.uid, a, b, c)
                }, init: function () {
                    var a;
                    a = this.getShimContainer(), a.innerHTML = '<object id="' + this.uid + '" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="' + g.xap_url + '"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid=' + this.uid + ",target=" + b.global_event_dispatcher + '"/></object>', j = setTimeout(function () {
                        k && !k.initialized && k.trigger("Error", new d.RuntimeError(d.RuntimeError.NOT_INIT_ERR))
                    }, "Windows" !== b.OS ? 1e4 : 5e3)
                }, destroy: function (a) {
                    return function () {
                        a.call(k), clearTimeout(j), g = j = a = k = null
                    }
                }(this.destroy)
            }, i)
        }

        var h = "silverlight", i = {};
        return e.addConstructor(h, g), i
    }), d(_, [$, h, T], function (a, b, c) {
        return a.Blob = b.extend({}, c)
    }), d(aa, [$], function (a) {
        var b = {
            init: function (a) {
                function b(a) {
                    for (var b = "", c = 0; c < a.length; c++)b += ("" !== b ? "|" : "") + a[c].title + " | *." + a[c].extensions.replace(/,/g, ";*.");
                    return b
                }

                this.getRuntime().shimExec.call(this, "FileInput", "init", b(a.accept), a.name, a.multiple), this.trigger("ready")
            }
        };
        return a.FileInput = b
    }), d(ba, [$, l, F], function (a, b, c) {
        var d = {
            init: function () {
                var a, d = this, e = d.getRuntime();
                return a = e.getShimContainer(), c.addEvent(a, "dragover", function (a) {
                    a.preventDefault(), a.stopPropagation(), a.dataTransfer.dropEffect = "copy"
                }, d.uid), c.addEvent(a, "dragenter", function (a) {
                    a.preventDefault();
                    var c = b.get(e.uid).dragEnter(a);
                    c && a.stopPropagation()
                }, d.uid), c.addEvent(a, "drop", function (a) {
                    a.preventDefault();
                    var c = b.get(e.uid).dragDrop(a);
                    c && a.stopPropagation()
                }, d.uid), e.shimExec.call(this, "FileDrop", "init")
            }
        };
        return a.FileDrop = d
    }), d(ca, [$, h, V], function (a, b, c) {
        return a.FileReader = b.extend({}, c)
    }), d(da, [$, h, W], function (a, b, c) {
        return a.FileReaderSync = b.extend({}, c)
    }), d(ea, [$, h, X], function (a, b, c) {
        return a.XMLHttpRequest = b.extend({}, c)
    }), d(fa, [$, h, Y], function (a, b, c) {
        return a.Transporter = b.extend({}, c)
    }), d(ga, [$, h, Z], function (a, b, c) {
        return a.Image = b.extend({}, c, {
            getInfo: function () {
                var a = this.getRuntime(), c = ["tiff", "exif", "gps"], d = {meta: {}}, e = a.shimExec.call(this, "Image", "getInfo");
                return e.meta && b.each(c, function (a) {
                    var b, c, f, g, h = e.meta[a];
                    if (h && h.keys)for (d.meta[a] = {}, c = 0, f = h.keys.length; f > c; c++)b = h.keys[c], g = h[b], g && (/^(\d|[1-9]\d+)$/.test(g) ? g = parseInt(g, 10) : /^\d*\.\d+$/.test(g) && (g = parseFloat(g)), d.meta[a][b] = g)
                }), d.width = parseInt(e.width, 10), d.height = parseInt(e.height, 10), d.size = parseInt(e.size, 10), d.type = e.type, d.name = e.name, d
            }
        })
    }), d(ha, [h, m, p, k], function (a, b, c, d) {
        function e(b) {
            var e = this, h = c.capTest, i = c.capTrue;
            c.call(this, b, f, {
                access_binary: h(window.FileReader || window.File && File.getAsDataURL),
                access_image_binary: !1,
                display_media: h(g.Image && (d.can("create_canvas") || d.can("use_data_uri_over32kb"))),
                do_cors: !1,
                drag_and_drop: !1,
                filter_by_extension: h(function () {
                    return "Chrome" === d.browser && d.version >= 28 || "IE" === d.browser && d.version >= 10
                }()),
                resize_image: function () {
                    return g.Image && e.can("access_binary") && d.can("create_canvas")
                },
                report_upload_progress: !1,
                return_response_headers: !1,
                return_response_type: function (b) {
                    return "json" === b && window.JSON ? !0 : !!~a.inArray(b, ["text", "document", ""])
                },
                return_status_code: function (b) {
                    return !a.arrayDiff(b, [200, 404])
                },
                select_file: function () {
                    return d.can("use_fileinput")
                },
                select_multiple: !1,
                send_binary_string: !1,
                send_custom_headers: !1,
                send_multipart: !0,
                slice_blob: !1,
                stream_upload: function () {
                    return e.can("select_file")
                },
                summon_file_dialog: h(function () {
                    return "Firefox" === d.browser && d.version >= 4 || "Opera" === d.browser && d.version >= 12 || !!~a.inArray(d.browser, ["Chrome", "Safari"])
                }()),
                upload_filesize: i,
                use_http_method: function (b) {
                    return !a.arrayDiff(b, ["GET", "POST"])
                }
            }), a.extend(this, {
                init: function () {
                    this.trigger("Init")
                }, destroy: function (a) {
                    return function () {
                        a.call(e), a = e = null
                    }
                }(this.destroy)
            }), a.extend(this.getShim(), g)
        }

        var f = "html4", g = {};
        return c.addConstructor(f, e), g
    }), d(ia, [ha, h, l, F, j, k], function (a, b, c, d, e, f) {
        function g() {
            function a() {
                var e, k, l, m, n, o, p = this, q = p.getRuntime();
                o = b.guid("uid_"), e = q.getShimContainer(), g && (l = c.get(g + "_form"), l && b.extend(l.style, {top: "100%"})), m = document.createElement("form"), m.setAttribute("id", o + "_form"), m.setAttribute("method", "post"), m.setAttribute("enctype", "multipart/form-data"), m.setAttribute("encoding", "multipart/form-data"), b.extend(m.style, {
                    overflow: "hidden",
                    position: "absolute",
                    top: 0,
                    left: 0,
                    width: "100%",
                    height: "100%"
                }), n = document.createElement("input"), n.setAttribute("id", o), n.setAttribute("type", "file"), n.setAttribute("name", h.name || "Filedata"), n.setAttribute("accept", j.join(",")), b.extend(n.style, {
                    fontSize: "999px",
                    opacity: 0
                }), m.appendChild(n), e.appendChild(m), b.extend(n.style, {
                    position: "absolute",
                    top: 0,
                    left: 0,
                    width: "100%",
                    height: "100%"
                }), "IE" === f.browser && f.version < 10 && b.extend(n.style, {filter: "progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}), n.onchange = function () {
                    var b;
                    this.value && (b = this.files ? this.files[0] : {name: this.value}, i = [b], this.onchange = function () {
                    }, a.call(p), p.bind("change", function d() {
                        var a, b = c.get(o), e = c.get(o + "_form");
                        p.unbind("change", d), p.files.length && b && e && (a = p.files[0], b.setAttribute("id", a.uid), e.setAttribute("id", a.uid + "_form"), e.setAttribute("target", a.uid + "_iframe")), b = e = null
                    }, 998), n = m = null, p.trigger("change"))
                }, q.can("summon_file_dialog") && (k = c.get(h.browse_button), d.removeEvent(k, "click", p.uid), d.addEvent(k, "click", function (a) {
                    n && !n.disabled && n.click(), a.preventDefault()
                }, p.uid)), g = o, e = l = k = null
            }

            var g, h, i = [], j = [];
            b.extend(this, {
                init: function (b) {
                    var f, g = this, i = g.getRuntime();
                    h = b, j = b.accept.mimes || e.extList2mimes(b.accept, i.can("filter_by_extension")), f = i.getShimContainer(), function () {
                        var a, e, h;
                        a = c.get(b.browse_button), i.can("summon_file_dialog") && ("static" === c.getStyle(a, "position") && (a.style.position = "relative"), e = parseInt(c.getStyle(a, "z-index"), 10) || 1, a.style.zIndex = e, f.style.zIndex = e - 1), h = i.can("summon_file_dialog") ? a : f, d.addEvent(h, "mouseover", function () {
                            g.trigger("mouseenter")
                        }, g.uid), d.addEvent(h, "mouseout", function () {
                            g.trigger("mouseleave")
                        }, g.uid), d.addEvent(h, "mousedown", function () {
                            g.trigger("mousedown")
                        }, g.uid), d.addEvent(c.get(b.container), "mouseup", function () {
                            g.trigger("mouseup")
                        }, g.uid), a = null
                    }(), a.call(this), f = null, g.trigger({type: "ready", async: !0})
                }, getFiles: function () {
                    return i
                }, disable: function (a) {
                    var b;
                    (b = c.get(g)) && (b.disabled = !!a)
                }, destroy: function () {
                    var a = this.getRuntime(), b = a.getShim(), e = a.getShimContainer();
                    d.removeAllEvents(e, this.uid), d.removeAllEvents(h && c.get(h.container), this.uid), d.removeAllEvents(h && c.get(h.browse_button), this.uid), e && (e.innerHTML = ""), b.removeInstance(this.uid), g = i = j = h = e = b = null
                }
            })
        }

        return a.FileInput = g
    }), d(ja, [ha, I], function (a, b) {
        return a.FileReader = b
    }), d(ka, [ha, h, l, x, m, F, r, z], function (a, b, c, d, e, f, g, h) {
        function i() {
            function a(a) {
                var b, d, e, g, h = this, i = !1;
                if (k) {
                    if (b = k.id.replace(/_iframe$/, ""), d = c.get(b + "_form")) {
                        for (e = d.getElementsByTagName("input"), g = e.length; g--;)switch (e[g].getAttribute("type")) {
                            case"hidden":
                                e[g].parentNode.removeChild(e[g]);
                                break;
                            case"file":
                                i = !0
                        }
                        e = [], i || d.parentNode.removeChild(d), d = null
                    }
                    setTimeout(function () {
                        f.removeEvent(k, "load", h.uid), k.parentNode && k.parentNode.removeChild(k);
                        var b = h.getRuntime().getShimContainer();
                        b.children.length || b.parentNode.removeChild(b), b = k = null, a()
                    }, 1)
                }
            }

            var i, j, k;
            b.extend(this, {
                send: function (l, m) {
                    function n() {
                        var c = t.getShimContainer() || document.body, e = document.createElement("div");
                        e.innerHTML = '<iframe id="' + o + '_iframe" name="' + o + '_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>', k = e.firstChild, c.appendChild(k), f.addEvent(k, "load", function () {
                            var c;
                            try {
                                c = k.contentWindow.document || k.contentDocument || window.frames[k.id].document, /^4(0[0-9]|1[0-7]|2[2346])\s/.test(c.title) ? i = c.title.replace(/^(\d+).*$/, "$1") : (i = 200, j = b.trim(c.body.innerHTML), s.trigger({
                                    type: "progress",
                                    loaded: j.length,
                                    total: j.length
                                }), r && s.trigger({
                                    type: "uploadprogress",
                                    loaded: r.size || 1025,
                                    total: r.size || 1025
                                }))
                            } catch (e) {
                                if (!d.hasSameOrigin(l.url))return void a.call(s, function () {
                                    s.trigger("error")
                                });
                                i = 404
                            }
                            a.call(s, function () {
                                s.trigger("load")
                            })
                        }, s.uid)
                    }

                    var o, p, q, r, s = this, t = s.getRuntime();
                    if (i = j = null, m instanceof h && m.hasBlob()) {
                        if (r = m.getBlob(), o = r.uid, q = c.get(o), p = c.get(o + "_form"), !p)throw new e.DOMException(e.DOMException.NOT_FOUND_ERR)
                    } else o = b.guid("uid_"), p = document.createElement("form"), p.setAttribute("id", o + "_form"), p.setAttribute("method", l.method), p.setAttribute("enctype", "multipart/form-data"), p.setAttribute("encoding", "multipart/form-data"), p.setAttribute("target", o + "_iframe"), t.getShimContainer().appendChild(p);
                    m instanceof h && m.each(function (a, c) {
                        if (a instanceof g)q && q.setAttribute("name", c); else {
                            var d = document.createElement("input");
                            b.extend(d, {
                                type: "hidden",
                                name: c,
                                value: a
                            }), q ? p.insertBefore(d, q) : p.appendChild(d)
                        }
                    }), p.setAttribute("action", l.url), n(), p.submit(), s.trigger("loadstart")
                }, getStatus: function () {
                    return i
                }, getResponse: function (a) {
                    if ("json" === a && "string" === b.typeOf(j) && window.JSON)try {
                        return JSON.parse(j.replace(/^\s*<pre[^>]*>/, "").replace(/<\/pre>\s*$/, ""))
                    } catch (c) {
                        return null
                    }
                    return j
                }, abort: function () {
                    var b = this;
                    k && k.contentWindow && (k.contentWindow.stop ? k.contentWindow.stop() : k.contentWindow.document.execCommand ? k.contentWindow.document.execCommand("Stop") : k.src = "about:blank"), a.call(this, function () {
                        b.dispatchEvent("abort")
                    })
                }
            })
        }

        return a.XMLHttpRequest = i
    }), d(la, [ha, R], function (a, b) {
        return a.Image = b
    }), f([h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, F])
}(this), function () {
    "use strict";
    var a = {}, b = moxie.core.utils.Basic.inArray;
    return function c(d) {
        var e, f;
        for (e in d)f = typeof d[e], "object" !== f || ~b(e, ["Exceptions", "Env", "Mime"]) ? "function" === f && (a[e] = d[e]) : c(d[e])
    }(window.moxie), a.Env = window.moxie.core.utils.Env, a.Mime = window.moxie.core.utils.Mime, a.Exceptions = window.moxie.core.Exceptions, window.mOxie = a, window.o || (window.o = a), a
}(), function (a, b, c) {
    function d(a) {
        function b(a, b, c) {
            var e = {
                chunks: "slice_blob",
                jpgresize: "send_binary_string",
                pngresize: "send_binary_string",
                progress: "report_upload_progress",
                multi_selection: "select_multiple",
                dragdrop: "drag_and_drop",
                drop_element: "drag_and_drop",
                headers: "send_custom_headers",
                canSendBinary: "send_binary",
                triggerDialog: "summon_file_dialog"
            };
            e[a] ? d[e[a]] = b : c || (d[a] = b)
        }

        var c = a.required_features, d = {};
        return "string" == typeof c ? g.each(c.split(/\s*,\s*/), function (a) {
            b(a, !0)
        }) : "object" == typeof c ? g.each(c, function (a, c) {
            b(c, a)
        }) : c === !0 && (a.multipart || (d.send_binary_string = !0), a.chunk_size > 0 && (d.slice_blob = !0), a.resize.enabled && (d.send_binary_string = !0), g.each(a, function (a, c) {
            b(c, !!a, !0)
        })), d
    }

    var e = a.setTimeout, f = {}, g = {
        VERSION: "2.1.1",
        STOPPED: 1,
        STARTED: 2,
        QUEUED: 1,
        UPLOADING: 2,
        FAILED: 4,
        DONE: 5,
        GENERIC_ERROR: -100,
        HTTP_ERROR: -200,
        IO_ERROR: -300,
        SECURITY_ERROR: -400,
        INIT_ERROR: -500,
        FILE_SIZE_ERROR: -600,
        FILE_EXTENSION_ERROR: -601,
        FILE_DUPLICATE_ERROR: -602,
        IMAGE_FORMAT_ERROR: -700,
        IMAGE_MEMORY_ERROR: -701,
        IMAGE_DIMENSIONS_ERROR: -702,
        mimeTypes: b.mimes,
        ua: b.ua,
        typeOf: b.typeOf,
        extend: b.extend,
        guid: b.guid,
        get: function (a) {
            var c, d = [];
            "array" !== b.typeOf(a) && (a = [a]);
            for (var e = a.length; e--;)c = b.get(a[e]), c && d.push(c);
            return d.length ? d : null
        },
        each: b.each,
        getPos: b.getPos,
        getSize: b.getSize,
        xmlEncode: function (a) {
            var b = {"<": "lt", ">": "gt", "&": "amp", '"': "quot", "'": "#39"}, c = /[<>&\"\']/g;
            return a ? ("" + a).replace(c, function (a) {
                return b[a] ? "&" + b[a] + ";" : a
            }) : a
        },
        toArray: b.toArray,
        inArray: b.inArray,
        addI18n: b.addI18n,
        translate: b.translate,
        isEmptyObj: b.isEmptyObj,
        hasClass: b.hasClass,
        addClass: b.addClass,
        removeClass: b.removeClass,
        getStyle: b.getStyle,
        addEvent: b.addEvent,
        removeEvent: b.removeEvent,
        removeAllEvents: b.removeAllEvents,
        cleanName: function (a) {
            var b, c;
            for (c = [/[\300-\306]/g, "A", /[\340-\346]/g, "a", /\307/g, "C", /\347/g, "c", /[\310-\313]/g, "E", /[\350-\353]/g, "e", /[\314-\317]/g, "I", /[\354-\357]/g, "i", /\321/g, "N", /\361/g, "n", /[\322-\330]/g, "O", /[\362-\370]/g, "o", /[\331-\334]/g, "U", /[\371-\374]/g, "u"], b = 0; b < c.length; b += 2)a = a.replace(c[b], c[b + 1]);
            return a = a.replace(/\s+/g, "_"), a = a.replace(/[^a-z0-9_\-\.]+/gi, "")
        },
        buildUrl: function (a, b) {
            var c = "";
            return g.each(b, function (a, b) {
                c += (c ? "&" : "") + encodeURIComponent(b) + "=" + encodeURIComponent(a)
            }), c && (a += (a.indexOf("?") > 0 ? "&" : "?") + c), a
        },
        formatSize: function (a) {
            function b(a, b) {
                return Math.round(a * Math.pow(10, b)) / Math.pow(10, b)
            }

            if (a === c || /\D/.test(a))return g.translate("N/A");
            var d = Math.pow(1024, 4);
            return a > d ? b(a / d, 1) + " " + g.translate("tb") : a > (d /= 1024) ? b(a / d, 1) + " " + g.translate("gb") : a > (d /= 1024) ? b(a / d, 1) + " " + g.translate("mb") : a > 1024 ? Math.round(a / 1024) + " " + g.translate("kb") : a + " " + g.translate("b")
        },
        parseSize: b.parseSizeStr,
        predictRuntime: function (a, c) {
            var d, e;
            return d = new g.Uploader(a), e = b.Runtime.thatCan(d.getOption().required_features, c || a.runtimes), d.destroy(), e
        },
        addFileFilter: function (a, b) {
            f[a] = b
        }
    };
    g.addFileFilter("mime_types", function (a, b, c) {
        a.length && !a.regexp.test(b.name) ? (this.trigger("Error", {
            code: g.FILE_EXTENSION_ERROR,
            message: g.translate("File extension error."),
            file: b
        }), c(!1)) : c(!0)
    }), g.addFileFilter("max_file_size", function (a, b, c) {
        var d;
        a = g.parseSize(a), b.size !== d && a && b.size > a ? (this.trigger("Error", {
            code: g.FILE_SIZE_ERROR,
            message: g.translate("File size error."),
            file: b
        }), c(!1)) : c(!0)
    }), g.addFileFilter("prevent_duplicates", function (a, b, c) {
        if (a)for (var d = this.files.length; d--;)if (b.name === this.files[d].name && b.size === this.files[d].size)return this.trigger("Error", {
            code: g.FILE_DUPLICATE_ERROR,
            message: g.translate("Duplicate file error."),
            file: b
        }), void c(!1);
        c(!0)
    }), g.Uploader = function (a) {
        function h() {
            var a, b, c = 0;
            if (this.state == g.STARTED) {
                for (b = 0; b < E.length; b++)a || E[b].status != g.QUEUED ? c++ : (a = E[b], this.trigger("BeforeUpload", a) && (a.status = g.UPLOADING, this.trigger("UploadFile", a)));
                c == E.length && (this.state !== g.STOPPED && (this.state = g.STOPPED, this.trigger("StateChanged")), this.trigger("UploadComplete", E))
            }
        }

        function i(a) {
            a.percent = a.size > 0 ? Math.ceil(a.loaded / a.size * 100) : 100, j()
        }

        function j() {
            var a, b;
            for (B.reset(), a = 0; a < E.length; a++)b = E[a], b.size !== c ? (B.size += b.origSize, B.loaded += b.loaded * b.origSize / b.size) : B.size = c, b.status == g.DONE ? B.uploaded++ : b.status == g.FAILED ? B.failed++ : B.queued++;
            B.size === c ? B.percent = E.length > 0 ? Math.ceil(B.uploaded / E.length * 100) : 0 : (B.bytesPerSec = Math.ceil(B.loaded / ((+new Date - A || 1) / 1e3)), B.percent = B.size > 0 ? Math.ceil(B.loaded / B.size * 100) : 0)
        }

        function k() {
            var a = G[0] || H[0];
            return a ? a.getRuntime().uid : !1
        }

        function l(a, c) {
            if (a.ruid) {
                var d = b.Runtime.getInfo(a.ruid);
                if (d)return d.can(c)
            }
            return !1
        }

        function m() {
            this.bind("FilesAdded", q), this.bind("CancelUpload", v), this.bind("BeforeUpload", r), this.bind("UploadFile", s), this.bind("UploadProgress", t), this.bind("StateChanged", u), this.bind("QueueChanged", j), this.bind("Error", x), this.bind("FileUploaded", w), this.bind("Destroy", y)
        }

        function n(a, c) {
            var d = this, e = 0, f = [], h = {
                accept: a.filters.mime_types,
                runtime_order: a.runtimes,
                required_caps: a.required_features,
                preferred_caps: F,
                swf_url: a.flash_swf_url,
                xap_url: a.silverlight_xap_url
            };
            g.each(a.runtimes.split(/\s*,\s*/), function (b) {
                a[b] && (h[b] = a[b])
            }), a.browse_button && g.each(a.browse_button, function (c) {
                f.push(function (f) {
                    var i = new b.FileInput(g.extend({}, h, {
                        name: a.file_data_name,
                        multiple: a.multi_selection,
                        container: a.container,
                        browse_button: c
                    }));
                    i.onready = function () {
                        var a = b.Runtime.getInfo(this.ruid);
                        b.extend(d.features, {
                            chunks: a.can("slice_blob"),
                            multipart: a.can("send_multipart"),
                            multi_selection: a.can("select_multiple")
                        }), e++, G.push(this), f()
                    }, i.onchange = function () {
                        d.addFile(this.files)
                    }, i.bind("mouseenter mouseleave mousedown mouseup", function (d) {
                        I || (a.browse_button_hover && ("mouseenter" === d.type ? b.addClass(c, a.browse_button_hover) : "mouseleave" === d.type && b.removeClass(c, a.browse_button_hover)), a.browse_button_active && ("mousedown" === d.type ? b.addClass(c, a.browse_button_active) : "mouseup" === d.type && b.removeClass(c, a.browse_button_active)))
                    }), i.bind("error runtimeerror", function () {
                        i = null, f()
                    }), i.init()
                })
            }), a.drop_element && g.each(a.drop_element, function (a) {
                f.push(function (c) {
                    var f = new b.FileDrop(g.extend({}, h, {drop_zone: a}));
                    f.onready = function () {
                        var a = b.Runtime.getInfo(this.ruid);
                        d.features.dragdrop = a.can("drag_and_drop"), e++, H.push(this), c()
                    }, f.ondrop = function () {
                        d.addFile(this.files)
                    }, f.bind("error runtimeerror", function () {
                        f = null, c()
                    }), f.init()
                })
            }), b.inSeries(f, function () {
                "function" == typeof c && c(e)
            })
        }

        function o(a, c, d) {
            var e = new b.Image;
            try {
                e.onload = function () {
                    e.downsize(c.width, c.height, c.crop, c.preserve_headers)
                }, e.onresize = function () {
                    d(this.getAsBlob(a.type, c.quality)), this.destroy()
                }, e.onerror = function () {
                    d(a)
                }, e.load(a)
            } catch (f) {
                d(a)
            }
        }

        function p(a, c, e) {
            function f(a, b, c) {
                var d = z[a];
                switch (a) {
                    case"max_file_size":
                        "max_file_size" === a && (z.max_file_size = z.filters.max_file_size = b);
                        break;
                    case"chunk_size":
                        (b = g.parseSize(b)) && (z[a] = b);
                        break;
                    case"filters":
                        "array" === g.typeOf(b) && (b = {mime_types: b}), c ? g.extend(z.filters, b) : z.filters = b, b.mime_types && (z.filters.mime_types.regexp = function (a) {
                            var b = [];
                            return g.each(a, function (a) {
                                g.each(a.extensions.split(/,/), function (a) {
                                    b.push(/^\s*\*\s*$/.test(a) ? "\\.*" : "\\." + a.replace(new RegExp("[" + "/^$.*+?|()[]{}\\".replace(/./g, "\\$&") + "]", "g"), "\\$&"))
                                })
                            }), new RegExp("(" + b.join("|") + ")$", "i")
                        }(z.filters.mime_types));
                        break;
                    case"resize":
                        c ? g.extend(z.resize, b, {enabled: !0}) : z.resize = b;
                        break;
                    case"prevent_duplicates":
                        z.prevent_duplicates = z.filters.prevent_duplicates = !!b;
                        break;
                    case"browse_button":
                    case"drop_element":
                        b = g.get(b);
                    case"container":
                    case"runtimes":
                    case"multi_selection":
                    case"flash_swf_url":
                    case"silverlight_xap_url":
                        z[a] = b, c || (i = !0);
                        break;
                    default:
                        z[a] = b
                }
                c || h.trigger("OptionChanged", a, b, d)
            }

            var h = this, i = !1;
            "object" == typeof a ? g.each(a, function (a, b) {
                f(b, a, e)
            }) : f(a, c, e), e ? (z.required_features = d(g.extend({}, z)), F = d(g.extend({}, z, {required_features: !0}))) : i && (h.trigger("Destroy"), n.call(h, z, function (a) {
                a ? (h.runtime = b.Runtime.getInfo(k()).type, h.trigger("Init", {runtime: h.runtime}), h.trigger("PostInit")) : h.trigger("Error", {
                    code: g.INIT_ERROR,
                    message: g.translate("Init error.")
                })
            }))
        }

        function q(a, b) {
            [].push.apply(E, b), a.trigger("QueueChanged"), a.refresh()
        }

        function r(a, b) {
            if (z.unique_names) {
                var c = b.name.match(/\.([^.]+)$/), d = "part";
                c && (d = c[1]), b.target_name = b.id + "." + d
            }
        }

        function s(a, c) {
            function d() {
                k-- > 0 ? e(f, 1e3) : (c.loaded = n, a.trigger("Error", {
                    code: g.HTTP_ERROR,
                    message: g.translate("HTTP Error."),
                    file: c,
                    response: C.responseText,
                    status: C.status,
                    responseHeaders: C.getAllResponseHeaders()
                }))
            }

            function f() {
                var l, o, p, q;
                c.status != g.DONE && c.status != g.FAILED && a.state != g.STOPPED && (p = {name: c.target_name || c.name}, j && m.chunks && h.size > j ? (q = Math.min(j, h.size - n), l = h.slice(n, n + q)) : (q = h.size, l = h), j && m.chunks && (a.settings.send_chunk_number ? (p.chunk = Math.ceil(n / j), p.chunks = Math.ceil(h.size / j)) : (p.offset = n, p.total = h.size)), C = new b.XMLHttpRequest, C.upload && (C.upload.onprogress = function (b) {
                    c.loaded = Math.min(c.size, n + b.loaded), a.trigger("UploadProgress", c)
                }), C.onload = function () {
                    return C.status >= 400 ? void d() : (k = a.settings.max_retries, q < h.size ? (l.destroy(), n += q, c.loaded = Math.min(n, h.size), a.trigger("ChunkUploaded", c, {
                        offset: c.loaded,
                        total: h.size,
                        response: C.responseText,
                        status: C.status,
                        responseHeaders: C.getAllResponseHeaders()
                    }), "Android Browser" === b.Env.browser && a.trigger("UploadProgress", c)) : c.loaded = c.size, l = o = null, !n || n >= h.size ? (c.size != c.origSize && (h.destroy(), h = null), a.trigger("UploadProgress", c), c.status = g.DONE, a.trigger("FileUploaded", c, {
                        response: C.responseText,
                        status: C.status,
                        responseHeaders: C.getAllResponseHeaders()
                    })) : e(f, 1), void 0)
                }, C.onerror = function () {
                    d()
                }, C.onloadend = function () {
                    this.destroy(), C = null
                }, a.settings.multipart && m.multipart ? (p.name = c.target_name || c.name, C.open("post", i, !0), g.each(a.settings.headers, function (a, b) {
                    C.setRequestHeader(b, a)
                }), o = new b.FormData, g.each(g.extend(p, a.settings.multipart_params), function (a, b) {
                    o.append(b, a)
                }), o.append(a.settings.file_data_name, l), C.send(o, {
                    runtime_order: a.settings.runtimes,
                    required_caps: a.settings.required_features,
                    preferred_caps: F,
                    swf_url: a.settings.flash_swf_url,
                    xap_url: a.settings.silverlight_xap_url
                })) : (i = g.buildUrl(a.settings.url, g.extend(p, a.settings.multipart_params)), C.open("post", i, !0), C.setRequestHeader("Content-Type", "application/octet-stream"), g.each(a.settings.headers, function (a, b) {
                    C.setRequestHeader(b, a)
                }), C.send(l, {
                    runtime_order: a.settings.runtimes,
                    required_caps: a.settings.required_features,
                    preferred_caps: F,
                    swf_url: a.settings.flash_swf_url,
                    xap_url: a.settings.silverlight_xap_url
                })))
            }

            var h, i = a.settings.url, j = a.settings.chunk_size, k = a.settings.max_retries, m = a.features, n = 0;
            c.loaded && (n = c.loaded = j * Math.floor(c.loaded / j)),
                h = c.getSource(), a.settings.resize.enabled && l(h, "send_binary_string") && ~b.inArray(h.type, ["image/jpeg", "image/png"]) ? o.call(this, h, a.settings.resize, function (a) {
                h = a, c.size = a.size, f()
            }) : f()
        }

        function t(a, b) {
            i(b)
        }

        function u(a) {
            if (a.state == g.STARTED)A = +new Date; else if (a.state == g.STOPPED)for (var b = a.files.length - 1; b >= 0; b--)a.files[b].status == g.UPLOADING && (a.files[b].status = g.QUEUED, j())
        }

        function v() {
            C && C.abort()
        }

        function w(a) {
            j(), e(function () {
                h.call(a)
            }, 1)
        }

        function x(a, b) {
            b.file && (b.file.status = g.FAILED, i(b.file), a.state == g.STARTED && (a.trigger("CancelUpload"), e(function () {
                h.call(a)
            }, 1)))
        }

        function y(a) {
            a.stop(), g.each(E, function (a) {
                a.destroy()
            }), E = [], G.length && (g.each(G, function (a) {
                a.destroy()
            }), G = []), H.length && (g.each(H, function (a) {
                a.destroy()
            }), H = []), F = {}, I = !1, A = C = null, B.reset()
        }

        var z, A, B, C, D = g.guid(), E = [], F = {}, G = [], H = [], I = !1;
        z = {
            runtimes: b.Runtime.order,
            max_retries: 0,
            chunk_size: 0,
            multipart: !0,
            multi_selection: !0,
            file_data_name: "file",
            flash_swf_url: "js/Moxie.swf",
            silverlight_xap_url: "js/Moxie.xap",
            filters: {mime_types: [], prevent_duplicates: !1, max_file_size: 0},
            resize: {enabled: !1, preserve_headers: !0, crop: !1},
            send_chunk_number: !0
        }, p.call(this, a, null, !0), B = new g.QueueProgress, g.extend(this, {
            id: D,
            uid: D,
            state: g.STOPPED,
            features: {},
            runtime: null,
            files: E,
            settings: z,
            total: B,
            init: function () {
                var a = this;
                return "function" == typeof z.preinit ? z.preinit(a) : g.each(z.preinit, function (b, c) {
                    a.bind(c, b)
                }), z.browse_button && z.url ? (m.call(this), void n.call(this, z, function (c) {
                    "function" == typeof z.init ? z.init(a) : g.each(z.init, function (b, c) {
                        a.bind(c, b)
                    }), c ? (a.runtime = b.Runtime.getInfo(k()).type, a.trigger("Init", {runtime: a.runtime}), a.trigger("PostInit")) : a.trigger("Error", {
                        code: g.INIT_ERROR,
                        message: g.translate("Init error.")
                    })
                })) : void this.trigger("Error", {code: g.INIT_ERROR, message: g.translate("Init error.")})
            },
            setOption: function (a, b) {
                p.call(this, a, b, !this.runtime)
            },
            getOption: function (a) {
                return a ? z[a] : z
            },
            refresh: function () {
                G.length && g.each(G, function (a) {
                    a.trigger("Refresh")
                }), this.trigger("Refresh")
            },
            start: function () {
                this.state != g.STARTED && (this.state = g.STARTED, this.trigger("StateChanged"), h.call(this))
            },
            stop: function () {
                this.state != g.STOPPED && (this.state = g.STOPPED, this.trigger("StateChanged"), this.trigger("CancelUpload"))
            },
            disableBrowse: function () {
                I = arguments[0] !== c ? arguments[0] : !0, G.length && g.each(G, function (a) {
                    a.disable(I)
                }), this.trigger("DisableBrowse", I)
            },
            getFile: function (a) {
                var b;
                for (b = E.length - 1; b >= 0; b--)if (E[b].id === a)return E[b]
            },
            addFile: function (a, c) {
                function d(a, c) {
                    var d = [];
                    b.each(j.settings.filters, function (b, c) {
                        f[c] && d.push(function (d) {
                            f[c].call(j, b, a, function (a) {
                                d(!a)
                            })
                        })
                    }), b.inSeries(d, c)
                }

                function h(a) {
                    var f = b.typeOf(a);
                    if (a instanceof b.File) {
                        if (!a.ruid && !a.isDetached()) {
                            if (!i)return !1;
                            a.ruid = i, a.connectRuntime(i)
                        }
                        h(new g.File(a))
                    } else a instanceof b.Blob ? (h(a.getSource()), a.destroy()) : a instanceof g.File ? (c && (a.name = c), l.push(function (b) {
                        d(a, function (c) {
                            c || (m.push(a), j.trigger("FileFiltered", a)), e(b, 1)
                        })
                    })) : -1 !== b.inArray(f, ["file", "blob"]) ? h(new b.File(null, a)) : "node" === f && "filelist" === b.typeOf(a.files) ? b.each(a.files, h) : "array" === f && (c = null, b.each(a, h))
                }

                var i, j = this, l = [], m = [];
                i = k(), h(a), l.length && b.inSeries(l, function () {
                    m.length && j.trigger("FilesAdded", m)
                })
            },
            removeFile: function (a) {
                for (var b = "string" == typeof a ? a : a.id, c = E.length - 1; c >= 0; c--)if (E[c].id === b)return this.splice(c, 1)[0]
            },
            splice: function (a, b) {
                var d = E.splice(a === c ? 0 : a, b === c ? E.length : b), e = !1;
                return this.state == g.STARTED && (e = !0, this.stop()), this.trigger("FilesRemoved", d), g.each(d, function (a) {
                    a.destroy()
                }), this.trigger("QueueChanged"), this.refresh(), e && this.start(), d
            },
            bind: function (a, b, c) {
                var d = this;
                g.Uploader.prototype.bind.call(this, a, function () {
                    var a = [].slice.call(arguments);
                    return a.splice(0, 1, d), b.apply(this, a)
                }, 0, c)
            },
            destroy: function () {
                this.trigger("Destroy"), z = B = null, this.unbindAll()
            }
        })
    }, g.Uploader.prototype = b.EventTarget.instance, g.File = function () {
        function a(a) {
            g.extend(this, {
                id: g.guid(),
                name: a.name || a.fileName,
                type: a.type || "",
                size: a.size || a.fileSize,
                origSize: a.size || a.fileSize,
                loaded: 0,
                percent: 0,
                status: g.QUEUED,
                lastModifiedDate: a.lastModifiedDate || (new Date).toLocaleString(),
                getNative: function () {
                    var a = this.getSource().getSource();
                    return -1 !== b.inArray(b.typeOf(a), ["blob", "file"]) ? a : null
                },
                getSource: function () {
                    return c[this.id] ? c[this.id] : null
                },
                destroy: function () {
                    var a = this.getSource();
                    a && (a.destroy(), delete c[this.id])
                }
            }), c[this.id] = a
        }

        var c = {};
        return a
    }(), g.QueueProgress = function () {
        var a = this;
        a.size = 0, a.loaded = 0, a.uploaded = 0, a.failed = 0, a.queued = 0, a.percent = 0, a.bytesPerSec = 0, a.reset = function () {
            a.size = a.loaded = a.uploaded = a.failed = a.queued = a.percent = a.bytesPerSec = 0
        }
    }, a.plupload = g
}(window, mOxie),
    !function (a) {
    "function" == typeof define && define.amd ? define(["jquery"], a) : "object" == typeof exports ? module.exports = a : a(jQuery)
}(function (a) {
    function b(b) {
        var g = b || window.event, h = i.call(arguments, 1), j = 0, l = 0, m = 0, n = 0, o = 0, p = 0;
        if (b = a.event.fix(g), b.type = "mousewheel", "detail"in g && (m = -1 * g.detail), "wheelDelta"in g && (m = g.wheelDelta), "wheelDeltaY"in g && (m = g.wheelDeltaY), "wheelDeltaX"in g && (l = -1 * g.wheelDeltaX), "axis"in g && g.axis === g.HORIZONTAL_AXIS && (l = -1 * m, m = 0), j = 0 === m ? l : m, "deltaY"in g && (m = -1 * g.deltaY, j = m), "deltaX"in g && (l = g.deltaX, 0 === m && (j = -1 * l)), 0 !== m || 0 !== l) {
            if (1 === g.deltaMode) {
                var q = a.data(this, "mousewheel-line-height");
                j *= q, m *= q, l *= q
            } else if (2 === g.deltaMode) {
                var r = a.data(this, "mousewheel-page-height");
                j *= r, m *= r, l *= r
            }
            if (n = Math.max(Math.abs(m), Math.abs(l)), (!f || f > n) && (f = n, d(g, n) && (f /= 40)), d(g, n) && (j /= 40, l /= 40, m /= 40), j = Math[j >= 1 ? "floor" : "ceil"](j / f), l = Math[l >= 1 ? "floor" : "ceil"](l / f), m = Math[m >= 1 ? "floor" : "ceil"](m / f), k.settings.normalizeOffset && this.getBoundingClientRect) {
                var s = this.getBoundingClientRect();
                o = b.clientX - s.left, p = b.clientY - s.top
            }
            return b.deltaX = l, b.deltaY = m, b.deltaFactor = f, b.offsetX = o, b.offsetY = p, b.deltaMode = 0, h.unshift(b, j, l, m), e && clearTimeout(e), e = setTimeout(c, 200), (a.event.dispatch || a.event.handle).apply(this, h)
        }
    }

    function c() {
        f = null
    }

    function d(a, b) {
        return k.settings.adjustOldDeltas && "mousewheel" === a.type && b % 120 === 0
    }

    var e, f, g = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"], h = "onwheel"in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"], i = Array.prototype.slice;
    if (a.event.fixHooks)for (var j = g.length; j;)a.event.fixHooks[g[--j]] = a.event.mouseHooks;
    var k = a.event.special.mousewheel = {
        version: "3.1.11", setup: function () {
            if (this.addEventListener)for (var c = h.length; c;)this.addEventListener(h[--c], b, !1); else this.onmousewheel = b;
            a.data(this, "mousewheel-line-height", k.getLineHeight(this)), a.data(this, "mousewheel-page-height", k.getPageHeight(this))
        }, teardown: function () {
            if (this.removeEventListener)for (var c = h.length; c;)this.removeEventListener(h[--c], b, !1); else this.onmousewheel = null;
            a.removeData(this, "mousewheel-line-height"), a.removeData(this, "mousewheel-page-height")
        }, getLineHeight: function (b) {
            var c = a(b)["offsetParent"in a.fn ? "offsetParent" : "parent"]();
            return c.length || (c = a("body")), parseInt(c.css("fontSize"), 10)
        }, getPageHeight: function (b) {
            return a(b).height()
        }, settings: {adjustOldDeltas: !0, normalizeOffset: !0}
    };
    a.fn.extend({
        mousewheel: function (a) {
            return a ? this.bind("mousewheel", a) : this.trigger("mousewheel")
        }, unmousewheel: function (a) {
            return this.unbind("mousewheel", a)
        }
    })
}),
    !function (a, b, c) {
    !function (b) {
        var d = "function" == typeof define && define.amd, e = "https:" == c.location.protocol ? "https:" : "http:", f = "cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.11/jquery.mousewheel.min.js";
        d || a.event.special.mousewheel || a("head").append(decodeURI("%3Cscript src=" + e + "//" + f + "%3E%3C/script%3E")), b()
    }(function () {
        var d = "mCustomScrollbar", e = "mCS", f = ".mCustomScrollbar", g = {
            setWidth: !1,
            setHeight: !1,
            setTop: 0,
            setLeft: 0,
            axis: "y",
            scrollbarPosition: "inside",
            scrollInertia: 950,
            autoDraggerLength: !0,
            autoHideScrollbar: !1,
            autoExpandScrollbar: !1,
            alwaysShowScrollbar: 0,
            snapAmount: null,
            snapOffset: 0,
            mouseWheel: {
                enable: !0,
                scrollAmount: "auto",
                axis: "y",
                preventDefault: !1,
                deltaFactor: "auto",
                normalizeDelta: !1,
                invert: !1,
                disableOver: ["select", "option", "keygen", "datalist", "textarea"]
            },
            scrollButtons: {enable: !1, scrollType: "stepless", scrollAmount: "auto"},
            keyboard: {enable: !0, scrollType: "stepless", scrollAmount: "auto"},
            contentTouchScroll: 25,
            advanced: {
                autoExpandHorizontalScroll: !1,
                autoScrollOnFocus: "input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",
                updateOnContentResize: !0,
                updateOnImageLoad: !0,
                updateOnSelectorChange: !1,
                releaseDraggableSelectors: !1
            },
            theme: "light",
            callbacks: {
                onInit: !1,
                onScrollStart: !1,
                onScroll: !1,
                onTotalScroll: !1,
                onTotalScrollBack: !1,
                whileScrolling: !1,
                onTotalScrollOffset: 0,
                onTotalScrollBackOffset: 0,
                alwaysTriggerOffsets: !0,
                onOverflowY: !1,
                onOverflowX: !1,
                onOverflowYNone: !1,
                onOverflowXNone: !1
            },
            live: !1,
            liveSelector: null
        }, h = 0, i = {}, j = function (a) {
            i[a] && (clearTimeout(i[a]), n._delete.call(null, i[a]))
        }, k = b.attachEvent && !b.addEventListener ? 1 : 0, l = !1, m = {
            init: function (b) {
                var b = a.extend(!0, {}, g, b), c = n._selector.call(this);
                if (b.live) {
                    var d = b.liveSelector || this.selector || f, k = a(d);
                    if ("off" === b.live)return void j(d);
                    i[d] = setTimeout(function () {
                        k.mCustomScrollbar(b), "once" === b.live && k.length && j(d)
                    }, 500)
                } else j(d);
                return b.setWidth = b.set_width ? b.set_width : b.setWidth, b.setHeight = b.set_height ? b.set_height : b.setHeight, b.axis = b.horizontalScroll ? "x" : n._findAxis.call(null, b.axis), b.scrollInertia = b.scrollInertia > 0 && b.scrollInertia < 17 ? 17 : b.scrollInertia, "object" != typeof b.mouseWheel && 1 == b.mouseWheel && (b.mouseWheel = {
                    enable: !0,
                    scrollAmount: "auto",
                    axis: "y",
                    preventDefault: !1,
                    deltaFactor: "auto",
                    normalizeDelta: !1,
                    invert: !1
                }), b.mouseWheel.scrollAmount = b.mouseWheelPixels ? b.mouseWheelPixels : b.mouseWheel.scrollAmount, b.mouseWheel.normalizeDelta = b.advanced.normalizeMouseWheelDelta ? b.advanced.normalizeMouseWheelDelta : b.mouseWheel.normalizeDelta, b.scrollButtons.scrollType = n._findScrollButtonsType.call(null, b.scrollButtons.scrollType), n._theme.call(null, b), a(c).each(function () {
                    var c = a(this);
                    if (!c.data(e)) {
                        c.data(e, {
                            idx: ++h,
                            opt: b,
                            scrollRatio: {y: null, x: null},
                            overflowed: null,
                            contentReset: {y: null, x: null},
                            bindEvents: !1,
                            tweenRunning: !1,
                            sequential: {},
                            langDir: c.css("direction"),
                            cbOffsets: null,
                            trigger: null
                        });
                        var d = c.data(e).opt, f = c.data("mcs-axis"), g = c.data("mcs-scrollbar-position"), i = c.data("mcs-theme");
                        f && (d.axis = f), g && (d.scrollbarPosition = g), i && (d.theme = i, n._theme.call(null, d)), n._pluginMarkup.call(this), m.update.call(null, c)
                    }
                })
            }, update: function (b) {
                var c = b || n._selector.call(this);
                return a(c).each(function () {
                    var b = a(this);
                    if (b.data(e)) {
                        var c = b.data(e), d = c.opt, f = a("#mCSB_" + c.idx + "_container"), g = [a("#mCSB_" + c.idx + "_dragger_vertical"), a("#mCSB_" + c.idx + "_dragger_horizontal")];
                        if (!f.length)return;
                        c.tweenRunning && n._stop.call(null, b), b.hasClass("mCS_disabled") && b.removeClass("mCS_disabled"), b.hasClass("mCS_destroyed") && b.removeClass("mCS_destroyed"), n._maxHeight.call(this), n._expandContentHorizontally.call(this), "y" === d.axis || d.advanced.autoExpandHorizontalScroll || f.css("width", n._contentWidth(f.children())), c.overflowed = n._overflowed.call(this), n._scrollbarVisibility.call(this), d.autoDraggerLength && n._setDraggerLength.call(this), n._scrollRatio.call(this), n._bindEvents.call(this);
                        var h = [Math.abs(f[0].offsetTop), Math.abs(f[0].offsetLeft)];
                        "x" !== d.axis && (c.overflowed[0] ? g[0].height() > g[0].parent().height() ? n._resetContentPosition.call(this) : (n._scrollTo.call(this, b, h[0].toString(), {
                            dir: "y",
                            dur: 0,
                            overwrite: "none"
                        }), c.contentReset.y = null) : (n._resetContentPosition.call(this), "y" === d.axis ? n._unbindEvents.call(this) : "yx" === d.axis && c.overflowed[1] && n._scrollTo.call(this, b, h[1].toString(), {
                            dir: "x",
                            dur: 0,
                            overwrite: "none"
                        }))), "y" !== d.axis && (c.overflowed[1] ? g[1].width() > g[1].parent().width() ? n._resetContentPosition.call(this) : (n._scrollTo.call(this, b, h[1].toString(), {
                            dir: "x",
                            dur: 0,
                            overwrite: "none"
                        }), c.contentReset.x = null) : (n._resetContentPosition.call(this), "x" === d.axis ? n._unbindEvents.call(this) : "yx" === d.axis && c.overflowed[0] && n._scrollTo.call(this, b, h[0].toString(), {
                            dir: "y",
                            dur: 0,
                            overwrite: "none"
                        }))), n._autoUpdate.call(this)
                    }
                })
            }, scrollTo: function (b, c) {
                if ("undefined" != typeof b && null != b) {
                    var d = n._selector.call(this);
                    return a(d).each(function () {
                        var d = a(this);
                        if (d.data(e)) {
                            var f = d.data(e), g = f.opt, h = {
                                trigger: "external",
                                scrollInertia: g.scrollInertia,
                                scrollEasing: "mcsEaseInOut",
                                moveDragger: !1,
                                timeout: 60,
                                callbacks: !0,
                                onStart: !0,
                                onUpdate: !0,
                                onComplete: !0
                            }, i = a.extend(!0, {}, h, c), j = n._arr.call(this, b), k = i.scrollInertia > 0 && i.scrollInertia < 17 ? 17 : i.scrollInertia;
                            j[0] = n._to.call(this, j[0], "y"), j[1] = n._to.call(this, j[1], "x"), i.moveDragger && (j[0] *= f.scrollRatio.y, j[1] *= f.scrollRatio.x), i.dur = k, setTimeout(function () {
                                null !== j[0] && "undefined" != typeof j[0] && "x" !== g.axis && f.overflowed[0] && (i.dir = "y", i.overwrite = "all", n._scrollTo.call(this, d, j[0].toString(), i)), null !== j[1] && "undefined" != typeof j[1] && "y" !== g.axis && f.overflowed[1] && (i.dir = "x", i.overwrite = "none", n._scrollTo.call(this, d, j[1].toString(), i))
                            }, i.timeout)
                        }
                    })
                }
            }, stop: function () {
                var b = n._selector.call(this);
                return a(b).each(function () {
                    var b = a(this);
                    b.data(e) && n._stop.call(null, b)
                })
            }, disable: function (b) {
                var c = n._selector.call(this);
                return a(c).each(function () {
                    var c = a(this);
                    if (c.data(e)) {
                        var d = c.data(e);
                        d.opt, n._autoUpdate.call(this, "remove"), n._unbindEvents.call(this), b && n._resetContentPosition.call(this), n._scrollbarVisibility.call(this, !0), c.addClass("mCS_disabled")
                    }
                })
            }, destroy: function () {
                var b = n._selector.call(this);
                return a(b).each(function () {
                    var c = a(this);
                    if (c.data(e)) {
                        var f = c.data(e), g = f.opt, h = a("#mCSB_" + f.idx), i = a("#mCSB_" + f.idx + "_container"), k = a(".mCSB_" + f.idx + "_scrollbar");
                        g.live && j(b), n._autoUpdate.call(this, "remove"), n._unbindEvents.call(this), n._resetContentPosition.call(this), c.removeData(e), n._delete.call(null, this.mcs), k.remove(), h.replaceWith(i.contents()), c.removeClass(d + " _" + e + "_" + f.idx + " mCS-autoHide mCS-dir-rtl mCS_no_scrollbar mCS_disabled").addClass("mCS_destroyed")
                    }
                })
            }
        }, n = {
            _selector: function () {
                return "object" != typeof a(this) || a(this).length < 1 ? f : this
            }, _theme: function (b) {
                var c = ["rounded", "rounded-dark", "rounded-dots", "rounded-dots-dark"], d = ["rounded-dots", "rounded-dots-dark", "3d", "3d-dark", "3d-thick", "3d-thick-dark", "inset", "inset-dark", "inset-2", "inset-2-dark", "inset-3", "inset-3-dark"], e = ["minimal", "minimal-dark"], f = ["minimal", "minimal-dark"], g = ["minimal", "minimal-dark"];
                b.autoDraggerLength = a.inArray(b.theme, c) > -1 ? !1 : b.autoDraggerLength, b.autoExpandScrollbar = a.inArray(b.theme, d) > -1 ? !1 : b.autoExpandScrollbar, b.scrollButtons.enable = a.inArray(b.theme, e) > -1 ? !1 : b.scrollButtons.enable, b.autoHideScrollbar = a.inArray(b.theme, f) > -1 ? !0 : b.autoHideScrollbar, b.scrollbarPosition = a.inArray(b.theme, g) > -1 ? "outside" : b.scrollbarPosition
            }, _findAxis: function (a) {
                return "yx" === a || "xy" === a || "auto" === a ? "yx" : "x" === a || "horizontal" === a ? "x" : "y"
            }, _findScrollButtonsType: function (a) {
                return "stepped" === a || "pixels" === a || "step" === a || "click" === a ? "stepped" : "stepless"
            }, _pluginMarkup: function () {
                var b = a(this), c = b.data(e), f = c.opt, g = f.autoExpandScrollbar ? " mCSB_scrollTools_onDrag_expand" : "", h = ["<div id='mCSB_" + c.idx + "_scrollbar_vertical' class='mCSB_scrollTools mCSB_" + c.idx + "_scrollbar mCS-" + f.theme + " mCSB_scrollTools_vertical" + g + "'><div class='mCSB_draggerContainer'><div id='mCSB_" + c.idx + "_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>", "<div id='mCSB_" + c.idx + "_scrollbar_horizontal' class='mCSB_scrollTools mCSB_" + c.idx + "_scrollbar mCS-" + f.theme + " mCSB_scrollTools_horizontal" + g + "'><div class='mCSB_draggerContainer'><div id='mCSB_" + c.idx + "_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"], i = "yx" === f.axis ? "mCSB_vertical_horizontal" : "x" === f.axis ? "mCSB_horizontal" : "mCSB_vertical", j = "yx" === f.axis ? h[0] + h[1] : "x" === f.axis ? h[1] : h[0], k = "yx" === f.axis ? "<div id='mCSB_" + c.idx + "_container_wrapper' class='mCSB_container_wrapper' />" : "", l = f.autoHideScrollbar ? " mCS-autoHide" : "", m = "x" !== f.axis && "rtl" === c.langDir ? " mCS-dir-rtl" : "";
                f.setWidth && b.css("width", f.setWidth), f.setHeight && b.css("height", f.setHeight), f.setLeft = "y" !== f.axis && "rtl" === c.langDir ? "989999px" : f.setLeft, b.addClass(d + " _" + e + "_" + c.idx + l + m).wrapInner("<div id='mCSB_" + c.idx + "' class='mCustomScrollBox mCS-" + f.theme + " " + i + "'><div id='mCSB_" + c.idx + "_container' class='mCSB_container' style='position:relative; top:" + f.setTop + "; left:" + f.setLeft + ";' dir=" + c.langDir + " /></div>");
                var o = a("#mCSB_" + c.idx), p = a("#mCSB_" + c.idx + "_container");
                "y" === f.axis || f.advanced.autoExpandHorizontalScroll || p.css("width", n._contentWidth(p.children())), "outside" === f.scrollbarPosition ? ("static" === b.css("position") && b.css("position", "relative"), b.css("overflow", "visible"), o.addClass("mCSB_outside").after(j)) : (o.addClass("mCSB_inside").append(j), p.wrap(k)), n._scrollButtons.call(this);
                var q = [a("#mCSB_" + c.idx + "_dragger_vertical"), a("#mCSB_" + c.idx + "_dragger_horizontal")];
                q[0].css("min-height", q[0].height()), q[1].css("min-width", q[1].width())
            }, _contentWidth: function (b) {
                return Math.max.apply(Math, b.map(function () {
                    return a(this).outerWidth(!0)
                }).get())
            }, _expandContentHorizontally: function () {
                var b = a(this), c = b.data(e), d = c.opt, f = a("#mCSB_" + c.idx + "_container");
                d.advanced.autoExpandHorizontalScroll && "y" !== d.axis && f.css({
                    position: "absolute",
                    width: "auto"
                }).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({
                    width: Math.ceil(f[0].getBoundingClientRect().right + .4) - Math.floor(f[0].getBoundingClientRect().left),
                    position: "relative"
                }).unwrap()
            }, _scrollButtons: function () {
                var b = a(this), c = b.data(e), d = c.opt, f = a(".mCSB_" + c.idx + "_scrollbar:first"), g = ["<a href='#' class='mCSB_buttonUp' oncontextmenu='return false;' />", "<a href='#' class='mCSB_buttonDown' oncontextmenu='return false;' />", "<a href='#' class='mCSB_buttonLeft' oncontextmenu='return false;' />", "<a href='#' class='mCSB_buttonRight' oncontextmenu='return false;' />"], h = ["x" === d.axis ? g[2] : g[0], "x" === d.axis ? g[3] : g[1], g[2], g[3]];
                d.scrollButtons.enable && f.prepend(h[0]).append(h[1]).next(".mCSB_scrollTools").prepend(h[2]).append(h[3])
            }, _maxHeight: function () {
                var b = a(this), c = b.data(e), d = (c.opt, a("#mCSB_" + c.idx)), f = b.css("max-height"), g = -1 !== f.indexOf("%"), h = b.css("box-sizing");
                if ("none" !== f) {
                    var i = g ? b.parent().height() * parseInt(f) / 100 : parseInt(f);
                    "border-box" === h && (i -= b.innerHeight() - b.height() + (b.outerHeight() - b.innerHeight())), d.css("max-height", Math.round(i))
                }
            }, _setDraggerLength: function () {
                var b = a(this), c = b.data(e), d = a("#mCSB_" + c.idx), f = a("#mCSB_" + c.idx + "_container"), g = [a("#mCSB_" + c.idx + "_dragger_vertical"), a("#mCSB_" + c.idx + "_dragger_horizontal")], h = [d.height() / f.outerHeight(!1), d.width() / f.outerWidth(!1)], i = [parseInt(g[0].css("min-height")), Math.round(h[0] * g[0].parent().height()), parseInt(g[1].css("min-width")), Math.round(h[1] * g[1].parent().width())], j = k && i[1] < i[0] ? i[0] : i[1], l = k && i[3] < i[2] ? i[2] : i[3];
                g[0].css({
                    height: j,
                    "max-height": g[0].parent().height() - 10
                }).find(".mCSB_dragger_bar").css({"line-height": i[0] + "px"}), g[1].css({
                    width: l,
                    "max-width": g[1].parent().width() - 10
                })
            }, _scrollRatio: function () {
                var b = a(this), c = b.data(e), d = a("#mCSB_" + c.idx), f = a("#mCSB_" + c.idx + "_container"), g = [a("#mCSB_" + c.idx + "_dragger_vertical"), a("#mCSB_" + c.idx + "_dragger_horizontal")], h = [f.outerHeight(!1) - d.height(), f.outerWidth(!1) - d.width()], i = [h[0] / (g[0].parent().height() - g[0].height()), h[1] / (g[1].parent().width() - g[1].width())];
                c.scrollRatio = {y: i[0], x: i[1]}
            }, _onDragClasses: function (a, b, c) {
                var d = c ? "mCSB_dragger_onDrag_expanded" : "", e = ["mCSB_dragger_onDrag", "mCSB_scrollTools_onDrag"], f = a.closest(".mCSB_scrollTools");
                "active" === b ? (a.toggleClass(e[0] + " " + d), f.toggleClass(e[1]), a[0]._draggable = a[0]._draggable ? 0 : 1) : a[0]._draggable || ("hide" === b ? (a.removeClass(e[0]), f.removeClass(e[1])) : (a.addClass(e[0]), f.addClass(e[1])))
            }, _overflowed: function () {
                var b = a(this), c = b.data(e), d = a("#mCSB_" + c.idx), f = a("#mCSB_" + c.idx + "_container"), g = null == c.overflowed ? f.height() : f.outerHeight(!1), h = null == c.overflowed ? f.width() : f.outerWidth(!1);
                return [g > d.height(), h > d.width()]
            }, _resetContentPosition: function () {
                var b = a(this), c = b.data(e), d = c.opt, f = a("#mCSB_" + c.idx), g = a("#mCSB_" + c.idx + "_container"), h = [a("#mCSB_" + c.idx + "_dragger_vertical"), a("#mCSB_" + c.idx + "_dragger_horizontal")];
                if (n._stop(b), ("x" !== d.axis && !c.overflowed[0] || "y" === d.axis && c.overflowed[0]) && (h[0].add(g).css("top", 0), n._scrollTo(b, "_resetY")), "y" !== d.axis && !c.overflowed[1] || "x" === d.axis && c.overflowed[1]) {
                    var i = dx = 0;
                    "rtl" === c.langDir && (i = f.width() - g.outerWidth(!1), dx = Math.abs(i / c.scrollRatio.x)), g.css("left", i), h[1].css("left", dx), n._scrollTo(b, "_resetX")
                }
            }, _bindEvents: function () {
                function b() {
                    g = setTimeout(function () {
                        a.event.special.mousewheel ? (clearTimeout(g), n._mousewheel.call(c[0])) : b()
                    }, 1e3)
                }

                var c = a(this), d = c.data(e), f = d.opt;
                if (!d.bindEvents) {
                    if (n._draggable.call(this), f.contentTouchScroll && n._contentDraggable.call(this), f.mouseWheel.enable) {
                        var g;
                        b()
                    }
                    n._draggerRail.call(this), n._wrapperScroll.call(this), f.advanced.autoScrollOnFocus && n._focus.call(this), f.scrollButtons.enable && n._buttons.call(this), f.keyboard.enable && n._keyboard.call(this), d.bindEvents = !0
                }
            }, _unbindEvents: function () {
                var b = a(this), d = b.data(e), f = d.opt, g = e + "_" + d.idx, h = ".mCSB_" + d.idx + "_scrollbar", i = a("#mCSB_" + d.idx + ",#mCSB_" + d.idx + "_container,#mCSB_" + d.idx + "_container_wrapper," + h + " .mCSB_draggerContainer,#mCSB_" + d.idx + "_dragger_vertical,#mCSB_" + d.idx + "_dragger_horizontal," + h + ">a"), j = a("#mCSB_" + d.idx + "_container");
                f.advanced.releaseDraggableSelectors && i.add(a(f.advanced.releaseDraggableSelectors)), d.bindEvents && (a(c).unbind("." + g), i.each(function () {
                    a(this).unbind("." + g)
                }), clearTimeout(b[0]._focusTimeout), n._delete.call(null, b[0]._focusTimeout), clearTimeout(d.sequential.step), n._delete.call(null, d.sequential.step), clearTimeout(j[0].onCompleteTimeout), n._delete.call(null, j[0].onCompleteTimeout), d.bindEvents = !1)
            }, _scrollbarVisibility: function (b) {
                var c = a(this), d = c.data(e), f = d.opt, g = a("#mCSB_" + d.idx + "_container_wrapper"), h = g.length ? g : a("#mCSB_" + d.idx + "_container"), i = [a("#mCSB_" + d.idx + "_scrollbar_vertical"), a("#mCSB_" + d.idx + "_scrollbar_horizontal")], j = [i[0].find(".mCSB_dragger"), i[1].find(".mCSB_dragger")];
                "x" !== f.axis && (d.overflowed[0] && !b ? (i[0].add(j[0]).add(i[0].children("a")).css("display", "block"), h.removeClass("mCS_no_scrollbar_y mCS_y_hidden")) : (f.alwaysShowScrollbar ? (2 !== f.alwaysShowScrollbar && j[0].add(i[0].children("a")).css("display", "none"), h.removeClass("mCS_y_hidden")) : (i[0].css("display", "none"), h.addClass("mCS_y_hidden")), h.addClass("mCS_no_scrollbar_y"))), "y" !== f.axis && (d.overflowed[1] && !b ? (i[1].add(j[1]).add(i[1].children("a")).css("display", "block"), h.removeClass("mCS_no_scrollbar_x mCS_x_hidden")) : (f.alwaysShowScrollbar ? (2 !== f.alwaysShowScrollbar && j[1].add(i[1].children("a")).css("display", "none"), h.removeClass("mCS_x_hidden")) : (i[1].css("display", "none"), h.addClass("mCS_x_hidden")), h.addClass("mCS_no_scrollbar_x"))), d.overflowed[0] || d.overflowed[1] ? c.removeClass("mCS_no_scrollbar") : c.addClass("mCS_no_scrollbar")
            }, _coordinates: function (a) {
                var b = a.type;
                switch (b) {
                    case"pointerdown":
                    case"MSPointerDown":
                    case"pointermove":
                    case"MSPointerMove":
                    case"pointerup":
                    case"MSPointerUp":
                        return [a.originalEvent.pageY, a.originalEvent.pageX, !1];
                    case"touchstart":
                    case"touchmove":
                    case"touchend":
                        var c = a.originalEvent.touches[0] || a.originalEvent.changedTouches[0], d = a.originalEvent.touches.length || a.originalEvent.changedTouches.length;
                        return [c.pageY, c.pageX, d > 1];
                    default:
                        return [a.pageY, a.pageX, !1]
                }
            }, _draggable: function () {
                function b(a) {
                    var b = q.find("iframe");
                    if (b.length) {
                        var c = a ? "auto" : "none";
                        b.css("pointer-events", c)
                    }
                }

                function d(a, b, c, d) {
                    if (q[0].idleTimer = m.scrollInertia < 233 ? 250 : 0, f.attr("id") === p[1])var e = "x", g = (f[0].offsetLeft - b + d) * j.scrollRatio.x; else var e = "y", g = (f[0].offsetTop - a + c) * j.scrollRatio.y;
                    n._scrollTo(i, g.toString(), {dir: e, drag: !0})
                }

                var f, g, h, i = a(this), j = i.data(e), m = j.opt, o = e + "_" + j.idx, p = ["mCSB_" + j.idx + "_dragger_vertical", "mCSB_" + j.idx + "_dragger_horizontal"], q = a("#mCSB_" + j.idx + "_container"), r = a("#" + p[0] + ",#" + p[1]), s = m.advanced.releaseDraggableSelectors ? r.add(a(m.advanced.releaseDraggableSelectors)) : r;
                r.bind("mousedown." + o + " touchstart." + o + " pointerdown." + o + " MSPointerDown." + o, function (d) {
                    if (d.stopImmediatePropagation(), d.preventDefault(), n._mouseBtnLeft(d)) {
                        l = !0, k && (c.onselectstart = function () {
                            return !1
                        }), b(!1), n._stop(i), f = a(this);
                        var e = f.offset(), j = n._coordinates(d)[0] - e.top, o = n._coordinates(d)[1] - e.left, p = f.height() + e.top, q = f.width() + e.left;
                        p > j && j > 0 && q > o && o > 0 && (g = j, h = o), n._onDragClasses(f, "active", m.autoExpandScrollbar)
                    }
                }).bind("touchmove." + o, function (a) {
                    a.stopImmediatePropagation(), a.preventDefault();
                    var b = f.offset(), c = n._coordinates(a)[0] - b.top, e = n._coordinates(a)[1] - b.left;
                    d(g, h, c, e)
                }), a(c).bind("mousemove." + o + " pointermove." + o + " MSPointerMove." + o, function (a) {
                    if (f) {
                        var b = f.offset(), c = n._coordinates(a)[0] - b.top, e = n._coordinates(a)[1] - b.left;
                        if (g === c)return;
                        d(g, h, c, e)
                    }
                }).add(s).bind("mouseup." + o + " touchend." + o + " pointerup." + o + " MSPointerUp." + o, function () {
                    f && (n._onDragClasses(f, "active", m.autoExpandScrollbar), f = null), l = !1, k && (c.onselectstart = null), b(!0)
                })
            }, _contentDraggable: function () {
                function b(a, b) {
                    var c = [1.5 * b, 2 * b, b / 1.5, b / 2];
                    return a > 90 ? b > 4 ? c[0] : c[3] : a > 60 ? b > 3 ? c[3] : c[2] : a > 30 ? b > 8 ? c[1] : b > 6 ? c[0] : b > 4 ? b : c[2] : b > 8 ? b : c[3]
                }

                function c(a, b, c, d, e, f) {
                    a && n._scrollTo(r, a.toString(), {dur: b, scrollEasing: c, dir: d, overwrite: e, drag: f})
                }

                var d, f, g, h, i, j, k, m, o, p, q, r = a(this), s = r.data(e), t = s.opt, u = e + "_" + s.idx, v = a("#mCSB_" + s.idx), w = a("#mCSB_" + s.idx + "_container"), x = [a("#mCSB_" + s.idx + "_dragger_vertical"), a("#mCSB_" + s.idx + "_dragger_horizontal")], y = [], z = [], A = 0, B = "yx" === t.axis ? "none" : "all", C = [];
                w.bind("touchstart." + u + " pointerdown." + u + " MSPointerDown." + u, function (a) {
                    if (n._pointerTouch(a) && !l && !n._coordinates(a)[2]) {
                        var b = w.offset();
                        d = n._coordinates(a)[0] - b.top, f = n._coordinates(a)[1] - b.left, C = [n._coordinates(a)[0], n._coordinates(a)[1]]
                    }
                }).bind("touchmove." + u + " pointermove." + u + " MSPointerMove." + u, function (a) {
                    if (n._pointerTouch(a) && !l && !n._coordinates(a)[2]) {
                        a.stopImmediatePropagation(), j = n._getTime();
                        var b = v.offset(), e = n._coordinates(a)[0] - b.top, g = n._coordinates(a)[1] - b.left, h = "mcsLinearOut";
                        if (y.push(e), z.push(g), C[2] = Math.abs(n._coordinates(a)[0] - C[0]), C[3] = Math.abs(n._coordinates(a)[1] - C[1]), s.overflowed[0])var i = x[0].parent().height() - x[0].height(), k = d - e > 0 && e - d > -(i * s.scrollRatio.y) && (2 * C[3] < C[2] || "yx" === t.axis);
                        if (s.overflowed[1])var m = x[1].parent().width() - x[1].width(), o = f - g > 0 && g - f > -(m * s.scrollRatio.x) && (2 * C[2] < C[3] || "yx" === t.axis);
                        (k || o) && a.preventDefault(), p = "yx" === t.axis ? [d - e, f - g] : "x" === t.axis ? [null, f - g] : [d - e, null], w[0].idleTimer = 250, s.overflowed[0] && c(p[0], A, h, "y", "all", !0), s.overflowed[1] && c(p[1], A, h, "x", B, !0)
                    }
                }), v.bind("touchstart." + u + " pointerdown." + u + " MSPointerDown." + u, function (a) {
                    if (n._pointerTouch(a) && !l && !n._coordinates(a)[2]) {
                        a.stopImmediatePropagation(), n._stop(r), i = n._getTime();
                        var b = v.offset();
                        g = n._coordinates(a)[0] - b.top, h = n._coordinates(a)[1] - b.left, y = [], z = []
                    }
                }).bind("touchend." + u + " pointerup." + u + " MSPointerUp." + u, function (a) {
                    if (n._pointerTouch(a) && !l && !n._coordinates(a)[2]) {
                        a.stopImmediatePropagation(), k = n._getTime();
                        var d = v.offset(), e = n._coordinates(a)[0] - d.top, f = n._coordinates(a)[1] - d.left;
                        if (!(k - j > 30)) {
                            o = 1e3 / (k - i);
                            var r = "mcsEaseOut", u = 2.5 > o, x = u ? [y[y.length - 2], z[z.length - 2]] : [0, 0];
                            m = u ? [e - x[0], f - x[1]] : [e - g, f - h];
                            var A = [Math.abs(m[0]), Math.abs(m[1])];
                            o = u ? [Math.abs(m[0] / 4), Math.abs(m[1] / 4)] : [o, o];
                            var C = [Math.abs(w[0].offsetTop) - m[0] * b(A[0] / o[0], o[0]), Math.abs(w[0].offsetLeft) - m[1] * b(A[1] / o[1], o[1])];
                            p = "yx" === t.axis ? [C[0], C[1]] : "x" === t.axis ? [null, C[1]] : [C[0], null], q = [4 * A[0] + t.scrollInertia, 4 * A[1] + t.scrollInertia];
                            var D = parseInt(t.contentTouchScroll) || 0;
                            p[0] = A[0] > D ? p[0] : 0, p[1] = A[1] > D ? p[1] : 0, s.overflowed[0] && c(p[0], q[0], r, "y", B, !1), s.overflowed[1] && c(p[1], q[1], r, "x", B, !1)
                        }
                    }
                })
            }, _mousewheel: function () {
                function b(a) {
                    var b = null;
                    try {
                        var c = a.contentDocument || a.contentWindow.document;
                        b = c.body.innerHTML
                    } catch (d) {
                    }
                    return null !== b
                }

                var c = a(this), d = c.data(e);
                if (d) {
                    var f = d.opt, g = e + "_" + d.idx, h = a("#mCSB_" + d.idx), i = [a("#mCSB_" + d.idx + "_dragger_vertical"), a("#mCSB_" + d.idx + "_dragger_horizontal")], j = a("#mCSB_" + d.idx + "_container").find("iframe"), l = h;
                    j.length && j.each(function () {
                        var c = this;
                        b(c) && (l = l.add(a(c).contents().find("body")))
                    }), l.bind("mousewheel." + g, function (b, e) {
                        if (n._stop(c), !n._disableMousewheel(c, b.target)) {
                            var g = "auto" !== f.mouseWheel.deltaFactor ? parseInt(f.mouseWheel.deltaFactor) : k && b.deltaFactor < 100 ? 100 : b.deltaFactor || 100;
                            if ("x" === f.axis || "x" === f.mouseWheel.axis)var j = "x", l = [Math.round(g * d.scrollRatio.x), parseInt(f.mouseWheel.scrollAmount)], m = "auto" !== f.mouseWheel.scrollAmount ? l[1] : l[0] >= h.width() ? .9 * h.width() : l[0], o = Math.abs(a("#mCSB_" + d.idx + "_container")[0].offsetLeft), p = i[1][0].offsetLeft, q = i[1].parent().width() - i[1].width(), r = b.deltaX || b.deltaY || e; else var j = "y", l = [Math.round(g * d.scrollRatio.y), parseInt(f.mouseWheel.scrollAmount)], m = "auto" !== f.mouseWheel.scrollAmount ? l[1] : l[0] >= h.height() ? .9 * h.height() : l[0], o = Math.abs(a("#mCSB_" + d.idx + "_container")[0].offsetTop), p = i[0][0].offsetTop, q = i[0].parent().height() - i[0].height(), r = b.deltaY || e;
                            "y" === j && !d.overflowed[0] || "x" === j && !d.overflowed[1] || (f.mouseWheel.invert && (r = -r), f.mouseWheel.normalizeDelta && (r = 0 > r ? -1 : 1), (r > 0 && 0 !== p || 0 > r && p !== q || f.mouseWheel.preventDefault) && (b.stopImmediatePropagation(), b.preventDefault()), n._scrollTo(c, (o - r * m).toString(), {dir: j}))
                        }
                    })
                }
            }, _disableMousewheel: function (b, c) {
                var d = c.nodeName.toLowerCase(), f = b.data(e).opt.mouseWheel.disableOver, g = ["select", "textarea"];
                return a.inArray(d, f) > -1 && !(a.inArray(d, g) > -1 && !a(c).is(":focus"))
            }, _draggerRail: function () {
                var b = a(this), c = b.data(e), d = e + "_" + c.idx, f = a("#mCSB_" + c.idx + "_container"), g = f.parent(), h = a(".mCSB_" + c.idx + "_scrollbar .mCSB_draggerContainer");
                h.bind("touchstart." + d + " pointerdown." + d + " MSPointerDown." + d, function () {
                    l = !0
                }).bind("touchend." + d + " pointerup." + d + " MSPointerUp." + d, function () {
                    l = !1
                }).bind("click." + d, function (d) {
                    if (a(d.target).hasClass("mCSB_draggerContainer") || a(d.target).hasClass("mCSB_draggerRail")) {
                        n._stop(b);
                        var e = a(this), h = e.find(".mCSB_dragger");
                        if (e.parent(".mCSB_scrollTools_horizontal").length > 0) {
                            if (!c.overflowed[1])return;
                            var i = "x", j = d.pageX > h.offset().left ? -1 : 1, k = Math.abs(f[0].offsetLeft) - .9 * j * g.width()
                        } else {
                            if (!c.overflowed[0])return;
                            var i = "y", j = d.pageY > h.offset().top ? -1 : 1, k = Math.abs(f[0].offsetTop) - .9 * j * g.height()
                        }
                        n._scrollTo(b, k.toString(), {dir: i, scrollEasing: "mcsEaseInOut"})
                    }
                })
            }, _focus: function () {
                var b = a(this), d = b.data(e), f = d.opt, g = e + "_" + d.idx, h = a("#mCSB_" + d.idx + "_container"), i = h.parent();
                h.bind("focusin." + g, function () {
                    var d = a(c.activeElement), e = h.find(".mCustomScrollBox").length, g = 0;
                    d.is(f.advanced.autoScrollOnFocus) && (n._stop(b), clearTimeout(b[0]._focusTimeout), b[0]._focusTimer = e ? (g + 17) * e : 0, b[0]._focusTimeout = setTimeout(function () {
                        var a = [d.offset().top - h.offset().top, d.offset().left - h.offset().left], c = [h[0].offsetTop, h[0].offsetLeft], e = [c[0] + a[0] >= 0 && c[0] + a[0] < i.height() - d.outerHeight(!1), c[1] + a[1] >= 0 && c[0] + a[1] < i.width() - d.outerWidth(!1)], j = "yx" !== f.axis || e[0] || e[1] ? "all" : "none";
                        "x" === f.axis || e[0] || n._scrollTo(b, a[0].toString(), {
                            dir: "y",
                            scrollEasing: "mcsEaseInOut",
                            overwrite: j,
                            dur: g
                        }), "y" === f.axis || e[1] || n._scrollTo(b, a[1].toString(), {
                            dir: "x",
                            scrollEasing: "mcsEaseInOut",
                            overwrite: j,
                            dur: g
                        })
                    }, b[0]._focusTimer))
                })
            }, _wrapperScroll: function () {
                var b = a(this), c = b.data(e), d = e + "_" + c.idx, f = a("#mCSB_" + c.idx + "_container").parent();
                f.bind("scroll." + d, function () {
                    (0 !== f.scrollTop() || 0 !== f.scrollLeft()) && a(".mCSB_" + c.idx + "_scrollbar").css("visibility", "hidden")
                })
            }, _buttons: function () {
                var b = a(this), c = b.data(e), d = c.opt, f = c.sequential, g = e + "_" + c.idx, h = (a("#mCSB_" + c.idx + "_container"), ".mCSB_" + c.idx + "_scrollbar"), i = a(h + ">a");
                i.bind("mousedown." + g + " touchstart." + g + " pointerdown." + g + " MSPointerDown." + g + " mouseup." + g + " touchend." + g + " pointerup." + g + " MSPointerUp." + g + " mouseout." + g + " pointerout." + g + " MSPointerOut." + g + " click." + g, function (e) {
                    function g(a, c) {
                        f.scrollAmount = d.snapAmount || d.scrollButtons.scrollAmount, n._sequentialScroll.call(this, b, a, c)
                    }

                    if (e.preventDefault(), n._mouseBtnLeft(e)) {
                        var h = a(this).attr("class");
                        switch (f.type = d.scrollButtons.scrollType, e.type) {
                            case"mousedown":
                            case"touchstart":
                            case"pointerdown":
                            case"MSPointerDown":
                                if ("stepped" === f.type)return;
                                l = !0, c.tweenRunning = !1, g("on", h);
                                break;
                            case"mouseup":
                            case"touchend":
                            case"pointerup":
                            case"MSPointerUp":
                            case"mouseout":
                            case"pointerout":
                            case"MSPointerOut":
                                if ("stepped" === f.type)return;
                                l = !1, f.dir && g("off", h);
                                break;
                            case"click":
                                if ("stepped" !== f.type || c.tweenRunning)return;
                                g("on", h)
                        }
                    }
                })
            }, _keyboard: function () {
                var b = a(this), d = b.data(e), f = d.opt, g = d.sequential, h = e + "_" + d.idx, i = a("#mCSB_" + d.idx), j = a("#mCSB_" + d.idx + "_container"), k = j.parent(), l = "input,textarea,select,datalist,keygen,[contenteditable='true']";
                i.attr("tabindex", "0").bind("blur." + h + " keydown." + h + " keyup." + h, function (e) {
                    function h(a, c) {
                        g.type = f.keyboard.scrollType, g.scrollAmount = f.snapAmount || f.keyboard.scrollAmount, "stepped" === g.type && d.tweenRunning || n._sequentialScroll.call(this, b, a, c)
                    }

                    switch (e.type) {
                        case"blur":
                            d.tweenRunning && g.dir && h("off", null);
                            break;
                        case"keydown":
                        case"keyup":
                            var i = e.keyCode ? e.keyCode : e.which, m = "on";
                            if ("x" !== f.axis && (38 === i || 40 === i) || "y" !== f.axis && (37 === i || 39 === i)) {
                                if ((38 === i || 40 === i) && !d.overflowed[0] || (37 === i || 39 === i) && !d.overflowed[1])return;
                                "keyup" === e.type && (m = "off"), a(c.activeElement).is(l) || (e.preventDefault(), e.stopImmediatePropagation(), h(m, i))
                            } else if (33 === i || 34 === i) {
                                if ((d.overflowed[0] || d.overflowed[1]) && (e.preventDefault(), e.stopImmediatePropagation()), "keyup" === e.type) {
                                    n._stop(b);
                                    var o = 34 === i ? -1 : 1;
                                    if ("x" === f.axis || "yx" === f.axis && d.overflowed[1] && !d.overflowed[0])var p = "x", q = Math.abs(j[0].offsetLeft) - .9 * o * k.width(); else var p = "y", q = Math.abs(j[0].offsetTop) - .9 * o * k.height();
                                    n._scrollTo(b, q.toString(), {dir: p, scrollEasing: "mcsEaseInOut"})
                                }
                            } else if ((35 === i || 36 === i) && !a(c.activeElement).is(l) && ((d.overflowed[0] || d.overflowed[1]) && (e.preventDefault(), e.stopImmediatePropagation()), "keyup" === e.type)) {
                                if ("x" === f.axis || "yx" === f.axis && d.overflowed[1] && !d.overflowed[0])var p = "x", q = 35 === i ? Math.abs(k.width() - j.outerWidth(!1)) : 0; else var p = "y", q = 35 === i ? Math.abs(k.height() - j.outerHeight(!1)) : 0;
                                n._scrollTo(b, q.toString(), {dir: p, scrollEasing: "mcsEaseInOut"})
                            }
                    }
                })
            }, _sequentialScroll: function (b, c, d) {
                function f(a) {
                    var c = "stepped" !== j.type, d = a ? c ? i.scrollInertia / 1.5 : i.scrollInertia : 1e3 / 60, e = a ? c ? 7.5 : 40 : 2.5, g = [Math.abs(k[0].offsetTop), Math.abs(k[0].offsetLeft)], l = [h.scrollRatio.y > 10 ? 10 : h.scrollRatio.y, h.scrollRatio.x > 10 ? 10 : h.scrollRatio.x], m = "x" === j.dir[0] ? g[1] + j.dir[1] * l[1] * e : g[0] + j.dir[1] * l[0] * e, o = "x" === j.dir[0] ? g[1] + j.dir[1] * parseInt(j.scrollAmount) : g[0] + j.dir[1] * parseInt(j.scrollAmount), p = "auto" !== j.scrollAmount ? o : m, q = a ? c ? "mcsLinearOut" : "mcsEaseInOut" : "mcsLinear", r = a ? !0 : !1;
                    return a && 17 > d && (p = "x" === j.dir[0] ? g[1] : g[0]), n._scrollTo(b, p.toString(), {
                        dir: j.dir[0],
                        scrollEasing: q,
                        dur: d,
                        onComplete: r
                    }), a ? void(j.dir = !1) : (clearTimeout(j.step), void(j.step = setTimeout(function () {
                        f()
                    }, d)))
                }

                function g() {
                    clearTimeout(j.step), n._stop(b)
                }

                var h = b.data(e), i = h.opt, j = h.sequential, k = a("#mCSB_" + h.idx + "_container"), l = "stepped" === j.type ? !0 : !1;
                switch (c) {
                    case"on":
                        if (j.dir = ["mCSB_buttonRight" === d || "mCSB_buttonLeft" === d || 39 === d || 37 === d ? "x" : "y", "mCSB_buttonUp" === d || "mCSB_buttonLeft" === d || 38 === d || 37 === d ? -1 : 1], n._stop(b), n._isNumeric(d) && "stepped" === j.type)return;
                        f(l);
                        break;
                    case"off":
                        g(), (l || h.tweenRunning && j.dir) && f(!0)
                }
            }, _arr: function (b) {
                var c = a(this).data(e).opt, d = [];
                return "function" == typeof b && (b = b()), b instanceof Array ? d = b.length > 1 ? [b[0], b[1]] : "x" === c.axis ? [null, b[0]] : [b[0], null] : (d[0] = b.y ? b.y : b.x || "x" === c.axis ? null : b, d[1] = b.x ? b.x : b.y || "y" === c.axis ? null : b), "function" == typeof d[0] && (d[0] = d[0]()), "function" == typeof d[1] && (d[1] = d[1]()), d
            }, _to: function (b, c) {
                if (null != b && "undefined" != typeof b) {
                    var d = a(this), f = d.data(e), g = f.opt, h = a("#mCSB_" + f.idx + "_container"), i = h.parent(), j = typeof b;
                    c || (c = "x" === g.axis ? "x" : "y");
                    var k = "x" === c ? h.outerWidth(!1) : h.outerHeight(!1), l = "x" === c ? h.offset().left : h.offset().top, o = "x" === c ? h[0].offsetLeft : h[0].offsetTop, p = "x" === c ? "left" : "top";
                    switch (j) {
                        case"function":
                            return b();
                        case"object":
                            if (b.nodeType)var q = "x" === c ? a(b).offset().left : a(b).offset().top; else if (b.jquery) {
                                if (!b.length)return;
                                var q = "x" === c ? b.offset().left : b.offset().top
                            }
                            return q - l;
                        case"string":
                        case"number":
                            if (n._isNumeric.call(null, b))return Math.abs(b);
                            if (-1 !== b.indexOf("%"))return Math.abs(k * parseInt(b) / 100);
                            if (-1 !== b.indexOf("-="))return Math.abs(o - parseInt(b.split("-=")[1]));
                            if (-1 !== b.indexOf("+=")) {
                                var r = o + parseInt(b.split("+=")[1]);
                                return r >= 0 ? 0 : Math.abs(r)
                            }
                            if (-1 !== b.indexOf("px") && n._isNumeric.call(null, b.split("px")[0]))return Math.abs(b.split("px")[0]);
                            if ("top" === b || "left" === b)return 0;
                            if ("bottom" === b)return Math.abs(i.height() - h.outerHeight(!1));
                            if ("right" === b)return Math.abs(i.width() - h.outerWidth(!1));
                            if ("first" === b || "last" === b) {
                                var s = h.find(":" + b), q = "x" === c ? a(s).offset().left : a(s).offset().top;
                                return q - l
                            }
                            if (a(b).length) {
                                var q = "x" === c ? a(b).offset().left : a(b).offset().top;
                                return q - l
                            }
                            return h.css(p, b), void m.update.call(null, d[0])
                    }
                }
            }, _autoUpdate: function (b) {
                function c() {
                    clearTimeout(l[0].autoUpdate), l[0].autoUpdate = setTimeout(function () {
                        return k.advanced.updateOnSelectorChange && (o = g(), o !== u) ? (h(), void(u = o)) : (k.advanced.updateOnContentResize && (p = [l.outerHeight(!1), l.outerWidth(!1), r.height(), r.width(), t()[0], t()[1]], (p[0] !== v[0] || p[1] !== v[1] || p[2] !== v[2] || p[3] !== v[3] || p[4] !== v[4] || p[5] !== v[5]) && (h(), v = p)), k.advanced.updateOnImageLoad && (q = d(), q !== w && (l.find("img").each(function () {
                            f(this.src)
                        }), w = q)), void((k.advanced.updateOnSelectorChange || k.advanced.updateOnContentResize || k.advanced.updateOnImageLoad) && c()))
                    }, 60)
                }

                function d() {
                    var a = 0;
                    return k.advanced.updateOnImageLoad && (a = l.find("img").length), a
                }

                function f(a) {
                    function b(a, b) {
                        return function () {
                            return b.apply(a, arguments)
                        }
                    }

                    function c() {
                        this.onload = null, h()
                    }

                    var d = new Image;
                    d.onload = b(d, c), d.src = a
                }

                function g() {
                    k.advanced.updateOnSelectorChange === !0 && (k.advanced.updateOnSelectorChange = "*");
                    var b = 0, c = l.find(k.advanced.updateOnSelectorChange);
                    return k.advanced.updateOnSelectorChange && c.length > 0 && c.each(function () {
                        b += a(this).height() + a(this).width()
                    }), b
                }

                function h() {
                    clearTimeout(l[0].autoUpdate), m.update.call(null, i[0])
                }

                var i = a(this), j = i.data(e), k = j.opt, l = a("#mCSB_" + j.idx + "_container");
                if (b)return clearTimeout(l[0].autoUpdate), void n._delete.call(null, l[0].autoUpdate);
                var o, p, q, r = l.parent(), s = [a("#mCSB_" + j.idx + "_scrollbar_vertical"), a("#mCSB_" + j.idx + "_scrollbar_horizontal")], t = function () {
                    return [s[0].is(":visible") ? s[0].outerHeight(!0) : 0, s[1].is(":visible") ? s[1].outerWidth(!0) : 0]
                }, u = g(), v = [l.outerHeight(!1), l.outerWidth(!1), r.height(), r.width(), t()[0], t()[1]], w = d();
                c()
            }, _snapAmount: function (a, b, c) {
                return Math.round(a / b) * b - c
            }, _stop: function (b) {
                var c = b.data(e), d = a("#mCSB_" + c.idx + "_container,#mCSB_" + c.idx + "_container_wrapper,#mCSB_" + c.idx + "_dragger_vertical,#mCSB_" + c.idx + "_dragger_horizontal");
                d.each(function () {
                    n._stopTween.call(this)
                })
            }, _scrollTo: function (b, c, d) {
                function f(a) {
                    return i && j.callbacks[a] && "function" == typeof j.callbacks[a]
                }

                function g() {
                    return [j.callbacks.alwaysTriggerOffsets || u >= v[0] + x, j.callbacks.alwaysTriggerOffsets || -y >= u]
                }

                function h() {
                    var a = [o[0].offsetTop, o[0].offsetLeft], c = [s[0].offsetTop, s[0].offsetLeft], e = [o.outerHeight(!1), o.outerWidth(!1)], f = [m.height(), m.width()];
                    b[0].mcs = {
                        content: o,
                        top: a[0],
                        left: a[1],
                        draggerTop: c[0],
                        draggerLeft: c[1],
                        topPct: Math.round(100 * Math.abs(a[0]) / (Math.abs(e[0]) - f[0])),
                        leftPct: Math.round(100 * Math.abs(a[1]) / (Math.abs(e[1]) - f[1])),
                        direction: d.dir
                    }
                }

                var i = b.data(e), j = i.opt, k = {
                    trigger: "internal",
                    dir: "y",
                    scrollEasing: "mcsEaseOut",
                    drag: !1,
                    dur: j.scrollInertia,
                    overwrite: "all",
                    callbacks: !0,
                    onStart: !0,
                    onUpdate: !0,
                    onComplete: !0
                }, d = a.extend(k, d), l = [d.dur, d.drag ? 0 : d.dur], m = a("#mCSB_" + i.idx), o = a("#mCSB_" + i.idx + "_container"), p = o.parent(), q = j.callbacks.onTotalScrollOffset ? n._arr.call(b, j.callbacks.onTotalScrollOffset) : [0, 0], r = j.callbacks.onTotalScrollBackOffset ? n._arr.call(b, j.callbacks.onTotalScrollBackOffset) : [0, 0];
                if (i.trigger = d.trigger, (0 !== p.scrollTop() || 0 !== p.scrollLeft()) && (a(".mCSB_" + i.idx + "_scrollbar").css("visibility", "visible"), p.scrollTop(0).scrollLeft(0)), "_resetY" !== c || i.contentReset.y || (f("onOverflowYNone") && j.callbacks.onOverflowYNone.call(b[0]), i.contentReset.y = 1), "_resetX" !== c || i.contentReset.x || (f("onOverflowXNone") && j.callbacks.onOverflowXNone.call(b[0]), i.contentReset.x = 1), "_resetY" !== c && "_resetX" !== c) {
                    switch (!i.contentReset.y && b[0].mcs || !i.overflowed[0] || (f("onOverflowY") && j.callbacks.onOverflowY.call(b[0]), i.contentReset.x = null), !i.contentReset.x && b[0].mcs || !i.overflowed[1] || (f("onOverflowX") && j.callbacks.onOverflowX.call(b[0]), i.contentReset.x = null), j.snapAmount && (c = n._snapAmount(c, j.snapAmount, j.snapOffset)), d.dir) {
                        case"x":
                            var s = a("#mCSB_" + i.idx + "_dragger_horizontal"), t = "left", u = o[0].offsetLeft, v = [m.width() - o.outerWidth(!1), s.parent().width() - s.width()], w = [c, 0 === c ? 0 : c / i.scrollRatio.x], x = q[1], y = r[1], z = x > 0 ? x / i.scrollRatio.x : 0, A = y > 0 ? y / i.scrollRatio.x : 0;
                            break;
                        case"y":
                            var s = a("#mCSB_" + i.idx + "_dragger_vertical"), t = "top", u = o[0].offsetTop, v = [m.height() - o.outerHeight(!1), s.parent().height() - s.height()], w = [c, 0 === c ? 0 : c / i.scrollRatio.y], x = q[0], y = r[0], z = x > 0 ? x / i.scrollRatio.y : 0, A = y > 0 ? y / i.scrollRatio.y : 0
                    }
                    w[1] < 0 || 0 === w[0] && 0 === w[1] ? w = [0, 0] : w[1] >= v[1] ? w = [v[0], v[1]] : w[0] = -w[0], b[0].mcs || (h(), f("onInit") && j.callbacks.onInit.call(b[0])), clearTimeout(o[0].onCompleteTimeout), (i.tweenRunning || !(0 === u && w[0] >= 0 || u === v[0] && w[0] <= v[0])) && (n._tweenTo.call(null, s[0], t, Math.round(w[1]), l[1], d.scrollEasing), n._tweenTo.call(null, o[0], t, Math.round(w[0]), l[0], d.scrollEasing, d.overwrite, {
                        onStart: function () {
                            d.callbacks && d.onStart && !i.tweenRunning && (f("onScrollStart") && (h(), j.callbacks.onScrollStart.call(b[0])), i.tweenRunning = !0, n._onDragClasses(s), i.cbOffsets = g())
                        }, onUpdate: function () {
                            d.callbacks && d.onUpdate && f("whileScrolling") && (h(), j.callbacks.whileScrolling.call(b[0]))
                        }, onComplete: function () {
                            if (d.callbacks && d.onComplete) {
                                "yx" === j.axis && clearTimeout(o[0].onCompleteTimeout);
                                var a = o[0].idleTimer || 0;
                                o[0].onCompleteTimeout = setTimeout(function () {
                                    f("onScroll") && (h(), j.callbacks.onScroll.call(b[0])), f("onTotalScroll") && w[1] >= v[1] - z && i.cbOffsets[0] && (h(), j.callbacks.onTotalScroll.call(b[0])), f("onTotalScrollBack") && w[1] <= A && i.cbOffsets[1] && (h(), j.callbacks.onTotalScrollBack.call(b[0])), i.tweenRunning = !1, o[0].idleTimer = 0, n._onDragClasses(s, "hide")
                                }, a)
                            }
                        }
                    }))
                }
            }, _tweenTo: function (a, c, d, e, f, g, h) {
                function i() {
                    x.stop || (u || q.call(), u = n._getTime() - t, j(), u >= x.time && (x.time = u > x.time ? u + o - (u - x.time) : u + o - 1, x.time < u + 1 && (x.time = u + 1)), x.time < e ? x.id = p(i) : s.call())
                }

                function j() {
                    e > 0 ? (x.currVal = m(x.time, v, y, e, f), w[c] = Math.round(x.currVal) + "px") : w[c] = d + "px", r.call()
                }

                function k() {
                    o = 1e3 / 60, x.time = u + o, p = b.requestAnimationFrame ? b.requestAnimationFrame : function (a) {
                        return j(), setTimeout(a, .01)
                    }, x.id = p(i)
                }

                function l() {
                    null != x.id && (b.requestAnimationFrame ? b.cancelAnimationFrame(x.id) : clearTimeout(x.id), x.id = null)
                }

                function m(a, b, c, d, e) {
                    switch (e) {
                        case"linear":
                        case"mcsLinear":
                            return c * a / d + b;
                        case"mcsLinearOut":
                            return a /= d, a--, c * Math.sqrt(1 - a * a) + b;
                        case"easeInOutSmooth":
                            return a /= d / 2, 1 > a ? c / 2 * a * a + b : (a--, -c / 2 * (a * (a - 2) - 1) + b);
                        case"easeInOutStrong":
                            return a /= d / 2, 1 > a ? c / 2 * Math.pow(2, 10 * (a - 1)) + b : (a--, c / 2 * (-Math.pow(2, -10 * a) + 2) + b);
                        case"easeInOut":
                        case"mcsEaseInOut":
                            return a /= d / 2, 1 > a ? c / 2 * a * a * a + b : (a -= 2, c / 2 * (a * a * a + 2) + b);
                        case"easeOutSmooth":
                            return a /= d, a--, -c * (a * a * a * a - 1) + b;
                        case"easeOutStrong":
                            return c * (-Math.pow(2, -10 * a / d) + 1) + b;
                        case"easeOut":
                        case"mcsEaseOut":
                        default:
                            var f = (a /= d) * a, g = f * a;
                            return b + c * (.499999999999997 * g * f + -2.5 * f * f + 5.5 * g + -6.5 * f + 4 * a)
                    }
                }

                a._malihuTween || (a._malihuTween = {top: {}, left: {}});
                var o, p, h = h || {}, q = h.onStart || function () {
                    }, r = h.onUpdate || function () {
                    }, s = h.onComplete || function () {
                    }, t = n._getTime(), u = 0, v = a.offsetTop, w = a.style, x = a._malihuTween[c];
                "left" === c && (v = a.offsetLeft);
                var y = d - v;
                x.stop = 0, "none" !== g && l(), k()
            }, _getTime: function () {
                return b.performance && b.performance.now ? b.performance.now() : b.performance && b.performance.webkitNow ? b.performance.webkitNow() : Date.now ? Date.now() : (new Date).getTime()
            }, _stopTween: function () {
                var a = this;
                a._malihuTween || (a._malihuTween = {
                    top: {},
                    left: {}
                }), a._malihuTween.top.id && (b.requestAnimationFrame ? b.cancelAnimationFrame(a._malihuTween.top.id) : clearTimeout(a._malihuTween.top.id), a._malihuTween.top.id = null, a._malihuTween.top.stop = 1), a._malihuTween.left.id && (b.requestAnimationFrame ? b.cancelAnimationFrame(a._malihuTween.left.id) : clearTimeout(a._malihuTween.left.id), a._malihuTween.left.id = null, a._malihuTween.left.stop = 1)
            }, _delete: function (a) {
                try {
                    delete a
                } catch (b) {
                    a = null
                }
            }, _mouseBtnLeft: function (a) {
                return !(a.which && 1 !== a.which)
            }, _pointerTouch: function (a) {
                var b = a.originalEvent.pointerType;
                return !(b && "touch" !== b && 2 !== b)
            }, _isNumeric: function (a) {
                return !isNaN(parseFloat(a)) && isFinite(a)
            }
        };
        a.fn[d] = function (b) {
            return m[b] ? m[b].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof b && b ? void a.error("Method " + b + " does not exist") : m.init.apply(this, arguments)
        }, a[d] = function (b) {
            return m[b] ? m[b].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof b && b ? void a.error("Method " + b + " does not exist") : m.init.apply(this, arguments)
        }, a[d].defaults = g, b[d] = !0, a(b).load(function () {
            a(f)[d]()
        })
    })
}(jQuery, window, document), function (p) {
    var G, H, I, J, K, L, r = {}, u = {}, v = {}, M = {
        treeId: "",
        treeObj: null,
        view: {
            addDiyDom: null,
            autoCancelSelected: !0,
            dblClickExpand: !0,
            expandSpeed: "fast",
            fontCss: {},
            nameIsHTML: !1,
            selectedMulti: !0,
            showIcon: !0,
            showLine: !0,
            showTitle: !0
        },
        data: {
            key: {children: "children", name: "name", title: "", url: "url"},
            simpleData: {enable: !1, idKey: "id", pIdKey: "pId", rootPId: null},
            keep: {parent: !1, leaf: !1}
        },
        async: {
            enable: !1,
            contentType: "application/x-www-form-urlencoded",
            type: "post",
            dataType: "text",
            url: "",
            autoParam: [],
            otherParam: [],
            dataFilter: null
        },
        callback: {
            beforeAsync: null,
            beforeClick: null,
            beforeDblClick: null,
            beforeRightClick: null,
            beforeMouseDown: null,
            beforeMouseUp: null,
            beforeExpand: null,
            beforeCollapse: null,
            beforeRemove: null,
            onAsyncError: null,
            onAsyncSuccess: null,
            onNodeCreated: null,
            onClick: null,
            onDblClick: null,
            onRightClick: null,
            onMouseDown: null,
            onMouseUp: null,
            onExpand: null,
            onCollapse: null,
            onRemove: null
        }
    }, w = [function (a) {
        var b = a.treeObj, c = e.event;
        b.bind(c.NODECREATED, function (b, c, d) {
            j.apply(a.callback.onNodeCreated, [b, c, d])
        }), b.bind(c.CLICK, function (b, c, d, e, f) {
            j.apply(a.callback.onClick, [c, d, e, f])
        }), b.bind(c.EXPAND, function (b, c, d) {
            j.apply(a.callback.onExpand, [b, c, d])
        }), b.bind(c.COLLAPSE, function (b, c, d) {
            j.apply(a.callback.onCollapse, [b, c, d])
        }), b.bind(c.ASYNC_SUCCESS, function (b, c, d, e) {
            j.apply(a.callback.onAsyncSuccess, [b, c, d, e])
        }), b.bind(c.ASYNC_ERROR, function (b, c, d, e, f, g) {
            j.apply(a.callback.onAsyncError, [b, c, d, e, f, g])
        })
    }], x = [function (a) {
        var b = e.event;
        a.treeObj.unbind(b.NODECREATED).unbind(b.CLICK).unbind(b.EXPAND).unbind(b.COLLAPSE).unbind(b.ASYNC_SUCCESS).unbind(b.ASYNC_ERROR)
    }], y = [function (a) {
        var b = h.getCache(a);
        b || (b = {}, h.setCache(a, b)), b.nodes = [], b.doms = []
    }], z = [function (a, b, c, d, e, f) {
        if (c) {
            var g = h.getRoot(a), i = a.data.key.children;
            c.level = b, c.tId = a.treeId + "_" + ++g.zId, c.parentTId = d ? d.tId : null, c[i] && c[i].length > 0 ? ("string" == typeof c.open && (c.open = j.eqs(c.open, "true")), c.open = !!c.open, c.isParent = !0, c.zAsync = !0) : (c.open = !1, "string" == typeof c.isParent && (c.isParent = j.eqs(c.isParent, "true")), c.isParent = !!c.isParent, c.zAsync = !c.isParent), c.isFirstNode = e, c.isLastNode = f, c.getParentNode = function () {
                return h.getNodeCache(a, c.parentTId)
            }, c.getPreNode = function () {
                return h.getPreNode(a, c)
            }, c.getNextNode = function () {
                return h.getNextNode(a, c)
            }, c.isAjaxing = !1, h.fixPIdKeyValue(a, c)
        }
    }], s = [function (a) {
        var b = a.target, c = h.getSetting(a.data.treeId), d = "", f = null, g = "", i = "", k = null, l = null, m = null;
        if (j.eqs(a.type, "mousedown") ? i = "mousedown" : j.eqs(a.type, "mouseup") ? i = "mouseup" : j.eqs(a.type, "contextmenu") ? i = "contextmenu" : j.eqs(a.type, "click") ? j.eqs(b.tagName, "span") && null !== b.getAttribute("treeNode" + e.id.SWITCH) ? (d = j.getNodeMainDom(b).id, g = "switchNode") : (m = j.getMDom(c, b, [{
                tagName: "a",
                attrName: "treeNode" + e.id.A
            }])) && (d = j.getNodeMainDom(m).id, g = "clickNode") : j.eqs(a.type, "dblclick") && (i = "dblclick", m = j.getMDom(c, b, [{
                tagName: "a",
                attrName: "treeNode" + e.id.A
            }])) && (d = j.getNodeMainDom(m).id, g = "switchNode"), i.length > 0 && 0 == d.length && (m = j.getMDom(c, b, [{
                tagName: "a",
                attrName: "treeNode" + e.id.A
            }])) && (d = j.getNodeMainDom(m).id), d.length > 0)switch (f = h.getNodeCache(c, d), g) {
            case"switchNode":
                f.isParent && (j.eqs(a.type, "click") || j.eqs(a.type, "dblclick") && j.apply(c.view.dblClickExpand, [c.treeId, f], c.view.dblClickExpand)) ? k = G : g = "";
                break;
            case"clickNode":
                k = H
        }
        switch (i) {
            case"mousedown":
                l = I;
                break;
            case"mouseup":
                l = J;
                break;
            case"dblclick":
                l = K;
                break;
            case"contextmenu":
                l = L
        }
        return {stop: !1, node: f, nodeEventType: g, nodeEventCallback: k, treeEventType: i, treeEventCallback: l}
    }], A = [function (a) {
        var b = h.getRoot(a);
        b || (b = {}, h.setRoot(a, b)), b[a.data.key.children] = [], b.expandTriggerFlag = !1, b.curSelectedList = [], b.noSelection = !0, b.createdNodes = [], b.zId = 0, b._ver = (new Date).getTime()
    }], B = [], C = [], D = [], E = [], F = [], h = {
        addNodeCache: function (a, b) {
            h.getCache(a).nodes[h.getNodeCacheId(b.tId)] = b
        }, getNodeCacheId: function (a) {
            return a.substring(a.lastIndexOf("_") + 1)
        }, addAfterA: function (a) {
            C.push(a)
        }, addBeforeA: function (a) {
            B.push(a)
        }, addInnerAfterA: function (a) {
            E.push(a)
        }, addInnerBeforeA: function (a) {
            D.push(a)
        }, addInitBind: function (a) {
            w.push(a)
        }, addInitUnBind: function (a) {
            x.push(a)
        }, addInitCache: function (a) {
            y.push(a)
        }, addInitNode: function (a) {
            z.push(a)
        }, addInitProxy: function (a, b) {
            b ? s.splice(0, 0, a) : s.push(a)
        }, addInitRoot: function (a) {
            A.push(a)
        }, addNodesData: function (a, b, c) {
            var d = a.data.key.children;
            b[d] || (b[d] = []), b[d].length > 0 && (b[d][b[d].length - 1].isLastNode = !1, i.setNodeLineIcos(a, b[d][b[d].length - 1])), b.isParent = !0, b[d] = b[d].concat(c)
        }, addSelectedNode: function (a, b) {
            var c = h.getRoot(a);
            h.isSelectedNode(a, b) || c.curSelectedList.push(b)
        }, addCreatedNode: function (a, b) {
            (a.callback.onNodeCreated || a.view.addDiyDom) && h.getRoot(a).createdNodes.push(b)
        }, addZTreeTools: function (a) {
            F.push(a)
        }, exSetting: function (a) {
            p.extend(!0, M, a)
        }, fixPIdKeyValue: function (a, b) {
            a.data.simpleData.enable && (b[a.data.simpleData.pIdKey] = b.parentTId ? b.getParentNode()[a.data.simpleData.idKey] : a.data.simpleData.rootPId)
        }, getAfterA: function () {
            for (var a = 0, b = C.length; b > a; a++)C[a].apply(this, arguments)
        }, getBeforeA: function () {
            for (var a = 0, b = B.length; b > a; a++)B[a].apply(this, arguments)
        }, getInnerAfterA: function () {
            for (var a = 0, b = E.length; b > a; a++)E[a].apply(this, arguments)
        }, getInnerBeforeA: function () {
            for (var a = 0, b = D.length; b > a; a++)D[a].apply(this, arguments)
        }, getCache: function (a) {
            return v[a.treeId]
        }, getNextNode: function (a, b) {
            if (!b)return null;
            for (var c = a.data.key.children, d = b.parentTId ? b.getParentNode() : h.getRoot(a), e = 0, f = d[c].length - 1; f >= e; e++)if (d[c][e] === b)return e == f ? null : d[c][e + 1];
            return null
        }, getNodeByParam: function (a, b, c, d) {
            if (!b || !c)return null;
            for (var e = a.data.key.children, f = 0, g = b.length; g > f; f++) {
                if (b[f][c] == d)return b[f];
                var i = h.getNodeByParam(a, b[f][e], c, d);
                if (i)return i
            }
            return null
        }, getNodeCache: function (a, b) {
            if (!b)return null;
            var c = v[a.treeId].nodes[h.getNodeCacheId(b)];
            return c ? c : null
        }, getNodeName: function (a, b) {
            return "" + b[a.data.key.name]
        }, getNodeTitle: function (a, b) {
            return "" + b["" === a.data.key.title ? a.data.key.name : a.data.key.title]
        }, getNodes: function (a) {
            return h.getRoot(a)[a.data.key.children]
        }, getNodesByParam: function (a, b, c, d) {
            if (!b || !c)return [];
            for (var e = a.data.key.children, f = [], g = 0, i = b.length; i > g; g++)b[g][c] == d && f.push(b[g]), f = f.concat(h.getNodesByParam(a, b[g][e], c, d));
            return f
        }, getNodesByParamFuzzy: function (a, b, c, d) {
            if (!b || !c)return [];
            for (var e = a.data.key.children, f = [], d = d.toLowerCase(), g = 0, i = b.length; i > g; g++)"string" == typeof b[g][c] && b[g][c].toLowerCase().indexOf(d) > -1 && f.push(b[g]), f = f.concat(h.getNodesByParamFuzzy(a, b[g][e], c, d));
            return f
        }, getNodesByFilter: function (a, b, c, d, e) {
            if (!b)return d ? null : [];
            for (var f = a.data.key.children, g = d ? null : [], i = 0, k = b.length; k > i; i++) {
                if (j.apply(c, [b[i], e], !1)) {
                    if (d)return b[i];
                    g.push(b[i])
                }
                var l = h.getNodesByFilter(a, b[i][f], c, d, e);
                if (d && l)return l;
                g = d ? l : g.concat(l)
            }
            return g
        }, getPreNode: function (a, b) {
            if (!b)return null;
            for (var c = a.data.key.children, d = b.parentTId ? b.getParentNode() : h.getRoot(a), e = 0, f = d[c].length; f > e; e++)if (d[c][e] === b)return 0 == e ? null : d[c][e - 1];
            return null
        }, getRoot: function (a) {
            return a ? u[a.treeId] : null
        }, getRoots: function () {
            return u
        }, getSetting: function (a) {
            return r[a]
        }, getSettings: function () {
            return r
        }, getZTreeTools: function (a) {
            return (a = this.getRoot(this.getSetting(a))) ? a.treeTools : null
        }, initCache: function () {
            for (var a = 0, b = y.length; b > a; a++)y[a].apply(this, arguments)
        }, initNode: function () {
            for (var a = 0, b = z.length; b > a; a++)z[a].apply(this, arguments)
        }, initRoot: function () {
            for (var a = 0, b = A.length; b > a; a++)A[a].apply(this, arguments)
        }, isSelectedNode: function (a, b) {
            for (var c = h.getRoot(a), d = 0, e = c.curSelectedList.length; e > d; d++)if (b === c.curSelectedList[d])return !0;
            return !1
        }, removeNodeCache: function (a, b) {
            var c = a.data.key.children;
            if (b[c])for (var d = 0, e = b[c].length; e > d; d++)arguments.callee(a, b[c][d]);
            h.getCache(a).nodes[h.getNodeCacheId(b.tId)] = null
        }, removeSelectedNode: function (a, b) {
            for (var c = h.getRoot(a), d = 0, e = c.curSelectedList.length; e > d; d++)b !== c.curSelectedList[d] && h.getNodeCache(a, c.curSelectedList[d].tId) || (c.curSelectedList.splice(d, 1), d--, e--)
        }, setCache: function (a, b) {
            v[a.treeId] = b
        }, setRoot: function (a, b) {
            u[a.treeId] = b
        }, setZTreeTools: function () {
            for (var a = 0, b = F.length; b > a; a++)F[a].apply(this, arguments)
        }, transformToArrayFormat: function (a, b) {
            if (!b)return [];
            var c = a.data.key.children, d = [];
            if (j.isArray(b))for (var e = 0, f = b.length; f > e; e++)d.push(b[e]), b[e][c] && (d = d.concat(h.transformToArrayFormat(a, b[e][c]))); else d.push(b), b[c] && (d = d.concat(h.transformToArrayFormat(a, b[c])));
            return d
        }, transformTozTreeFormat: function (a, b) {
            var c, d, e = a.data.simpleData.idKey, f = a.data.simpleData.pIdKey, g = a.data.key.children;
            if (!e || "" == e || !b)return [];
            if (j.isArray(b)) {
                var h = [], i = [];
                for (c = 0, d = b.length; d > c; c++)i[b[c][e]] = b[c];
                for (c = 0, d = b.length; d > c; c++)i[b[c][f]] && b[c][e] != b[c][f] ? (i[b[c][f]][g] || (i[b[c][f]][g] = []), i[b[c][f]][g].push(b[c])) : h.push(b[c]);
                return h
            }
            return [b]
        }
    }, m = {
        bindEvent: function () {
            for (var a = 0, b = w.length; b > a; a++)w[a].apply(this, arguments)
        }, unbindEvent: function () {
            for (var a = 0, b = x.length; b > a; a++)x[a].apply(this, arguments)
        }, bindTree: function (a) {
            var b = {treeId: a.treeId}, a = a.treeObj;
            a.bind("selectstart", function (a) {
                return a = a.originalEvent.srcElement.nodeName.toLowerCase(), "input" === a || "textarea" === a
            }).css({"-moz-user-select": "-moz-none"}), a.bind("click", b, m.proxy), a.bind("dblclick", b, m.proxy), a.bind("mouseover", b, m.proxy), a.bind("mouseout", b, m.proxy), a.bind("mousedown", b, m.proxy), a.bind("mouseup", b, m.proxy), a.bind("contextmenu", b, m.proxy)
        }, unbindTree: function (a) {
            a.treeObj.unbind("click", m.proxy).unbind("dblclick", m.proxy).unbind("mouseover", m.proxy).unbind("mouseout", m.proxy).unbind("mousedown", m.proxy).unbind("mouseup", m.proxy).unbind("contextmenu", m.proxy)
        }, doProxy: function () {
            for (var a = [], b = 0, c = s.length; c > b; b++) {
                var d = s[b].apply(this, arguments);
                if (a.push(d), d.stop)break
            }
            return a
        }, proxy: function (a) {
            var b = h.getSetting(a.data.treeId);
            if (!j.uCanDo(b, a))return !0;
            for (var b = m.doProxy(a), c = !0, d = 0, e = b.length; e > d; d++) {
                var f = b[d];
                f.nodeEventCallback && (c = f.nodeEventCallback.apply(f, [a, f.node]) && c), f.treeEventCallback && (c = f.treeEventCallback.apply(f, [a, f.node]) && c)
            }
            return c
        }
    };
    G = function (a, b) {
        var c = h.getSetting(a.data.treeId);
        if (b.open) {
            if (0 == j.apply(c.callback.beforeCollapse, [c.treeId, b], !0))return !0
        } else if (0 == j.apply(c.callback.beforeExpand, [c.treeId, b], !0))return !0;
        return h.getRoot(c).expandTriggerFlag = !0, i.switchNode(c, b), !0
    }, H = function (a, b) {
        var c = h.getSetting(a.data.treeId), d = c.view.autoCancelSelected && a.ctrlKey && h.isSelectedNode(c, b) ? 0 : c.view.autoCancelSelected && a.ctrlKey && c.view.selectedMulti ? 2 : 1;
        return 0 == j.apply(c.callback.beforeClick, [c.treeId, b, d], !0) ? !0 : (0 === d ? i.cancelPreSelectedNode(c, b) : i.selectNode(c, b, 2 === d), c.treeObj.trigger(e.event.CLICK, [a, c.treeId, b, d]), !0)
    }, I = function (a, b) {
        var c = h.getSetting(a.data.treeId);
        return j.apply(c.callback.beforeMouseDown, [c.treeId, b], !0) && j.apply(c.callback.onMouseDown, [a, c.treeId, b]), !0
    }, J = function (a, b) {
        var c = h.getSetting(a.data.treeId);
        return j.apply(c.callback.beforeMouseUp, [c.treeId, b], !0) && j.apply(c.callback.onMouseUp, [a, c.treeId, b]), !0
    }, K = function (a, b) {
        var c = h.getSetting(a.data.treeId);
        return j.apply(c.callback.beforeDblClick, [c.treeId, b], !0) && j.apply(c.callback.onDblClick, [a, c.treeId, b]), !0
    }, L = function (a, b) {
        var c = h.getSetting(a.data.treeId);
        return j.apply(c.callback.beforeRightClick, [c.treeId, b], !0) && j.apply(c.callback.onRightClick, [a, c.treeId, b]), "function" != typeof c.callback.onRightClick
    };
    var j = {
        apply: function (a, b, c) {
            return "function" == typeof a ? a.apply(N, b ? b : []) : c
        }, canAsync: function (a, b) {
            var c = a.data.key.children;
            return a.async.enable && b && b.isParent && !(b.zAsync || b[c] && b[c].length > 0)
        }, clone: function (a) {
            if (null === a)return null;
            var b, c = j.isArray(a) ? [] : {};
            for (b in a)c[b] = a[b]instanceof Date ? new Date(a[b].getTime()) : "object" == typeof a[b] ? arguments.callee(a[b]) : a[b];
            return c
        }, eqs: function (a, b) {
            return a.toLowerCase() === b.toLowerCase()
        }, isArray: function (a) {
            return "[object Array]" === Object.prototype.toString.apply(a)
        }, $: function (a, b, c) {
            return b && "string" != typeof b && (c = b, b = ""), "string" == typeof a ? p(a, c ? c.treeObj.get(0).ownerDocument : null) : p("#" + a.tId + b, c ? c.treeObj : null)
        }, getMDom: function (a, b, c) {
            if (!b)return null;
            for (; b && b.id !== a.treeId;) {
                for (var d = 0, e = c.length; b.tagName && e > d; d++)if (j.eqs(b.tagName, c[d].tagName) && null !== b.getAttribute(c[d].attrName))return b;
                b = b.parentNode
            }
            return null
        }, getNodeMainDom: function (a) {
            return p(a).parent("li").get(0) || p(a).parentsUntil("li").parent().get(0)
        }, uCanDo: function () {
            return !0
        }
    }, i = {
        addNodes: function (a, b, c, d) {
            if (!a.data.keep.leaf || !b || b.isParent)if (j.isArray(c) || (c = [c]), a.data.simpleData.enable && (c = h.transformTozTreeFormat(a, c)), b) {
                var f = k(b, e.id.SWITCH, a), g = k(b, e.id.ICON, a), l = k(b, e.id.UL, a);
                b.open || (i.replaceSwitchClass(b, f, e.folder.CLOSE), i.replaceIcoClass(b, g, e.folder.CLOSE), b.open = !1, l.css({display: "none"})), h.addNodesData(a, b, c), i.createNodes(a, b.level + 1, c, b), d || i.expandCollapseParentNode(a, b, !0)
            } else h.addNodesData(a, h.getRoot(a), c), i.createNodes(a, 0, c, null)
        }, appendNodes: function (a, b, c, d, e, f) {
            if (!c)return [];
            for (var g = [], j = a.data.key.children, k = 0, l = c.length; l > k; k++) {
                var m = c[k];
                if (e) {
                    var n = (d ? d : h.getRoot(a))[j].length == c.length && 0 == k;
                    h.initNode(a, b, m, d, n, k == c.length - 1, f), h.addNodeCache(a, m)
                }
                n = [], m[j] && m[j].length > 0 && (n = i.appendNodes(a, b + 1, m[j], m, e, f && m.open)), f && (i.makeDOMNodeMainBefore(g, a, m), i.makeDOMNodeLine(g, a, m), h.getBeforeA(a, m, g), i.makeDOMNodeNameBefore(g, a, m), h.getInnerBeforeA(a, m, g), i.makeDOMNodeIcon(g, a, m), h.getInnerAfterA(a, m, g), i.makeDOMNodeNameAfter(g, a, m), h.getAfterA(a, m, g), m.isParent && m.open && i.makeUlHtml(a, m, g, n.join("")), i.makeDOMNodeMainAfter(g, a, m), h.addCreatedNode(a, m))
            }
            return g
        }, appendParentULDom: function (a, b) {
            var c = [], d = k(b, a);
            if (!d.get(0) && b.parentTId && (i.appendParentULDom(a, b.getParentNode()), d = k(b, a)), !k(b, e.id.UL, a).get(0)) {
                var f = i.appendNodes(a, b.level + 1, b[a.data.key.children], b, !1, !0);
                i.makeUlHtml(a, b, c, f.join("")), d.append(c.join(""))
            }
        }, asyncNode: function (b, a, c, d) {
            var f, g;
            if (a && !a.isParent)return j.apply(d), !1;
            if (a && a.isAjaxing)return !1;
            if (0 == j.apply(b.callback.beforeAsync, [b.treeId, a], !0))return j.apply(d), !1;
            a && (a.isAjaxing = !0, k(a, e.id.ICON, b).attr({
                style: "",
                "class": e.className.BUTTON + " " + e.className.ICO_LOADING
            }));
            var l = {};
            for (f = 0, g = b.async.autoParam.length; a && g > f; f++) {
                var q = b.async.autoParam[f].split("="), n = q;
                q.length > 1 && (n = q[1], q = q[0]), l[n] = a[q]
            }
            if (j.isArray(b.async.otherParam))for (f = 0, g = b.async.otherParam.length; g > f; f += 2)l[b.async.otherParam[f]] = b.async.otherParam[f + 1]; else for (var m in b.async.otherParam)l[m] = b.async.otherParam[m];
            var o = h.getRoot(b)._ver;
            return p.ajax({
                contentType: b.async.contentType,
                type: b.async.type,
                url: j.apply(b.async.url, [b.treeId, a], b.async.url),
                data: l,
                dataType: b.async.dataType,
                success: function (f) {
                    if (o == h.getRoot(b)._ver) {
                        var g = [];
                        try {
                            g = f && 0 != f.length ? "string" == typeof f ? eval("(" + f + ")") : f : []
                        } catch (l) {
                            g = f
                        }
                        a && (a.isAjaxing = null, a.zAsync = !0), i.setNodeLineIcos(b, a), g && "" !== g ? (g = j.apply(b.async.dataFilter, [b.treeId, a, g], g), i.addNodes(b, a, g ? j.clone(g) : [], !!c)) : i.addNodes(b, a, [], !!c), b.treeObj.trigger(e.event.ASYNC_SUCCESS, [b.treeId, a, f]), j.apply(d)
                    }
                },
                error: function (c, d, f) {
                    o == h.getRoot(b)._ver && (a && (a.isAjaxing = null), i.setNodeLineIcos(b, a), b.treeObj.trigger(e.event.ASYNC_ERROR, [b.treeId, a, c, d, f]))
                }
            }), !0
        }, cancelPreSelectedNode: function (a, b) {
            for (var c = h.getRoot(a).curSelectedList, d = c.length - 1; d >= 0; d--)if ((!b || b === c[d]) && (k(c[d], e.id.A, a).removeClass(e.node.CURSELECTED), b)) {
                h.removeSelectedNode(a, b);
                break
            }
            b || (h.getRoot(a).curSelectedList = [])
        }, createNodeCallback: function (a) {
            if (a.callback.onNodeCreated || a.view.addDiyDom)for (var b = h.getRoot(a); b.createdNodes.length > 0;) {
                var c = b.createdNodes.shift();
                j.apply(a.view.addDiyDom, [a.treeId, c]), a.callback.onNodeCreated && a.treeObj.trigger(e.event.NODECREATED, [a.treeId, c])
            }
        }, createNodes: function (a, b, c, d) {
            if (c && 0 != c.length) {
                var f = h.getRoot(a), g = a.data.key.children, g = !d || d.open || !!k(d[g][0], a).get(0);
                f.createdNodes = [], b = i.appendNodes(a, b, c, d, !0, g), d ? (d = k(d, e.id.UL, a), d.get(0) && d.append(b.join(""))) : a.treeObj.append(b.join("")), i.createNodeCallback(a)
            }
        }, destroy: function (a) {
            a && (h.initCache(a), h.initRoot(a), m.unbindTree(a), m.unbindEvent(a), a.treeObj.empty())
        }, expandCollapseNode: function (a, b, c, d, f) {
            var g = h.getRoot(a), l = a.data.key.children;
            if (b) {
                if (g.expandTriggerFlag) {
                    var m = f, f = function () {
                        m && m(), b.open ? a.treeObj.trigger(e.event.EXPAND, [a.treeId, b]) : a.treeObj.trigger(e.event.COLLAPSE, [a.treeId, b])
                    };
                    g.expandTriggerFlag = !1
                }
                if (!b.open && b.isParent && (!k(b, e.id.UL, a).get(0) || b[l] && b[l].length > 0 && !k(b[l][0], a).get(0)) && (i.appendParentULDom(a, b), i.createNodeCallback(a)), b.open == c)j.apply(f, []); else {
                    var c = k(b, e.id.UL, a), g = k(b, e.id.SWITCH, a), n = k(b, e.id.ICON, a);
                    b.isParent ? (b.open = !b.open, b.iconOpen && b.iconClose && n.attr("style", i.makeNodeIcoStyle(a, b)), b.open ? (i.replaceSwitchClass(b, g, e.folder.OPEN), i.replaceIcoClass(b, n, e.folder.OPEN), 0 == d || "" == a.view.expandSpeed ? (c.show(), j.apply(f, [])) : b[l] && b[l].length > 0 ? c.slideDown(a.view.expandSpeed, f) : (c.show(), j.apply(f, []))) : (i.replaceSwitchClass(b, g, e.folder.CLOSE), i.replaceIcoClass(b, n, e.folder.CLOSE), 0 != d && "" != a.view.expandSpeed && b[l] && b[l].length > 0 ? c.slideUp(a.view.expandSpeed, f) : (c.hide(), j.apply(f, [])))) : j.apply(f, [])
                }
            } else j.apply(f, [])
        }, expandCollapseParentNode: function (a, b, c, d, e) {
            b && (b.parentTId ? (i.expandCollapseNode(a, b, c, d), b.parentTId && i.expandCollapseParentNode(a, b.getParentNode(), c, d, e)) : i.expandCollapseNode(a, b, c, d, e))
        }, expandCollapseSonNode: function (a, b, c, d, e) {
            var f = h.getRoot(a), g = a.data.key.children, f = b ? b[g] : f[g], g = b ? !1 : d, j = h.getRoot(a).expandTriggerFlag;
            if (h.getRoot(a).expandTriggerFlag = !1, f)for (var k = 0, l = f.length; l > k; k++)f[k] && i.expandCollapseSonNode(a, f[k], c, g);
            h.getRoot(a).expandTriggerFlag = j, i.expandCollapseNode(a, b, c, d, e)
        }, makeDOMNodeIcon: function (a, b, c) {
            var d = h.getNodeName(b, c), d = b.view.nameIsHTML ? d : d.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
            a.push("<span id='", c.tId, e.id.ICON, "' title='' treeNode", e.id.ICON, " class='", i.makeNodeIcoClass(b, c), "' style='", i.makeNodeIcoStyle(b, c), "'></span><span id='", c.tId, e.id.SPAN, "'>", d, "</span>")
        }, makeDOMNodeLine: function (a, b, c) {
            a.push("<span id='", c.tId, e.id.SWITCH, "' title='' class='", i.makeNodeLineClass(b, c), "' treeNode", e.id.SWITCH, "></span>")
        }, makeDOMNodeMainAfter: function (a) {
            a.push("</li>")
        }, makeDOMNodeMainBefore: function (a, b, c) {
            a.push("<li id='", c.tId, "' class='", e.className.LEVEL, c.level, "' tabindex='0' hidefocus='true' treenode>")
        }, makeDOMNodeNameAfter: function (a) {
            a.push("</a>")
        }, makeDOMNodeNameBefore: function (a, b, c) {
            var d, f = h.getNodeTitle(b, c), g = i.makeNodeUrl(b, c), k = i.makeNodeFontCss(b, c), l = [];
            for (d in k)l.push(d, ":", k[d], ";");
            a.push("<a id='", c.tId, e.id.A, "' class='", e.className.LEVEL, c.level, "' treeNode", e.id.A, ' onclick="', c.click || "", '" ', null != g && g.length > 0 ? "href='" + g + "'" : "", " target='", i.makeNodeTarget(c), "' style='", l.join(""), "'"), j.apply(b.view.showTitle, [b.treeId, c], b.view.showTitle) && f && a.push("title='", f.replace(/'/g, "&#39;").replace(/</g, "&lt;").replace(/>/g, "&gt;"), "'"), a.push(">")
        }, makeNodeFontCss: function (a, b) {
            var c = j.apply(a.view.fontCss, [a.treeId, b], a.view.fontCss);
            return c && "function" != typeof c ? c : {}
        }, makeNodeIcoClass: function (a, b) {
            var c = ["ico"];
            return b.isAjaxing || (c[0] = (b.iconSkin ? b.iconSkin + "_" : "") + c[0], c.push(b.isParent ? b.open ? e.folder.OPEN : e.folder.CLOSE : e.folder.DOCU)), e.className.BUTTON + " " + c.join("_")
        }, makeNodeIcoStyle: function (a, b) {
            var c = [];
            if (!b.isAjaxing) {
                var d = b.isParent && b.iconOpen && b.iconClose ? b.open ? b.iconOpen : b.iconClose : b.icon;
                d && c.push("background:url(", d, ") 0 0 no-repeat;"), (0 == a.view.showIcon || !j.apply(a.view.showIcon, [a.treeId, b], !0)) && c.push("width:0px;height:0px;")
            }
            return c.join("");

        }, makeNodeLineClass: function (a, b) {
            var c = [];
            return c.push(a.view.showLine ? 0 == b.level && b.isFirstNode && b.isLastNode ? e.line.ROOT : 0 == b.level && b.isFirstNode ? e.line.ROOTS : b.isLastNode ? e.line.BOTTOM : e.line.CENTER : e.line.NOLINE), c.push(b.isParent ? b.open ? e.folder.OPEN : e.folder.CLOSE : e.folder.DOCU), i.makeNodeLineClassEx(b) + c.join("_")
        }, makeNodeLineClassEx: function (a) {
            return e.className.BUTTON + " " + e.className.LEVEL + a.level + " " + e.className.SWITCH + " "
        }, makeNodeTarget: function (a) {
            return a.target || "_blank"
        }, makeNodeUrl: function (a, b) {
            var c = a.data.key.url;
            return b[c] ? b[c] : null
        }, makeUlHtml: function (a, b, c, d) {
            c.push("<ul id='", b.tId, e.id.UL, "' class='", e.className.LEVEL, b.level, " ", i.makeUlLineClass(a, b), "' style='display:", b.open ? "block" : "none", "'>"), c.push(d), c.push("</ul>")
        }, makeUlLineClass: function (a, b) {
            return a.view.showLine && !b.isLastNode ? e.line.LINE : ""
        }, removeChildNodes: function (a, b) {
            if (b) {
                var c = a.data.key.children, d = b[c];
                if (d) {
                    for (var f = 0, g = d.length; g > f; f++)h.removeNodeCache(a, d[f]);
                    h.removeSelectedNode(a), delete b[c], a.data.keep.parent ? k(b, e.id.UL, a).empty() : (b.isParent = !1, b.open = !1, c = k(b, e.id.SWITCH, a), d = k(b, e.id.ICON, a), i.replaceSwitchClass(b, c, e.folder.DOCU), i.replaceIcoClass(b, d, e.folder.DOCU), k(b, e.id.UL, a).remove())
                }
            }
        }, setFirstNode: function (a, b) {
            var c = a.data.key.children;
            b[c].length > 0 && (b[c][0].isFirstNode = !0)
        }, setLastNode: function (a, b) {
            var c = a.data.key.children, d = b[c].length;
            d > 0 && (b[c][d - 1].isLastNode = !0)
        }, removeNode: function (a, b) {
            var c = h.getRoot(a), d = a.data.key.children, f = b.parentTId ? b.getParentNode() : c;
            if (b.isFirstNode = !1, b.isLastNode = !1, b.getPreNode = function () {
                    return null
                }, b.getNextNode = function () {
                    return null
                }, h.getNodeCache(a, b.tId)) {
                k(b, a).remove(), h.removeNodeCache(a, b), h.removeSelectedNode(a, b);
                for (var g = 0, j = f[d].length; j > g; g++)if (f[d][g].tId == b.tId) {
                    f[d].splice(g, 1);
                    break
                }
                i.setFirstNode(a, f), i.setLastNode(a, f);
                var l, g = f[d].length;
                if (a.data.keep.parent || 0 != g) {
                    if (a.view.showLine && g > 0) {
                        var m = f[d][g - 1], g = k(m, e.id.UL, a), j = k(m, e.id.SWITCH, a);
                        l = k(m, e.id.ICON, a), f == c ? 1 == f[d].length ? i.replaceSwitchClass(m, j, e.line.ROOT) : (c = k(f[d][0], e.id.SWITCH, a), i.replaceSwitchClass(f[d][0], c, e.line.ROOTS), i.replaceSwitchClass(m, j, e.line.BOTTOM)) : i.replaceSwitchClass(m, j, e.line.BOTTOM), g.removeClass(e.line.LINE)
                    }
                } else f.isParent = !1, f.open = !1, g = k(f, e.id.UL, a), j = k(f, e.id.SWITCH, a), l = k(f, e.id.ICON, a), i.replaceSwitchClass(f, j, e.folder.DOCU), i.replaceIcoClass(f, l, e.folder.DOCU), g.css("display", "none")
            }
        }, replaceIcoClass: function (a, b, c) {
            if (b && !a.isAjaxing && (a = b.attr("class"), void 0 != a)) {
                switch (a = a.split("_"), c) {
                    case e.folder.OPEN:
                    case e.folder.CLOSE:
                    case e.folder.DOCU:
                        a[a.length - 1] = c
                }
                b.attr("class", a.join("_"))
            }
        }, replaceSwitchClass: function (a, b, c) {
            if (b) {
                var d = b.attr("class");
                if (void 0 != d) {
                    switch (d = d.split("_"), c) {
                        case e.line.ROOT:
                        case e.line.ROOTS:
                        case e.line.CENTER:
                        case e.line.BOTTOM:
                        case e.line.NOLINE:
                            d[0] = i.makeNodeLineClassEx(a) + c;
                            break;
                        case e.folder.OPEN:
                        case e.folder.CLOSE:
                        case e.folder.DOCU:
                            d[1] = c
                    }
                    b.attr("class", d.join("_")), c !== e.folder.DOCU ? b.removeAttr("disabled") : b.attr("disabled", "disabled")
                }
            }
        }, selectNode: function (a, b, c) {
            c || i.cancelPreSelectedNode(a), k(b, e.id.A, a).addClass(e.node.CURSELECTED), h.addSelectedNode(a, b)
        }, setNodeFontCss: function (a, b) {
            var c = k(b, e.id.A, a), d = i.makeNodeFontCss(a, b);
            d && c.css(d)
        }, setNodeLineIcos: function (a, b) {
            if (b) {
                var c = k(b, e.id.SWITCH, a), d = k(b, e.id.UL, a), f = k(b, e.id.ICON, a), g = i.makeUlLineClass(a, b);
                0 == g.length ? d.removeClass(e.line.LINE) : d.addClass(g), c.attr("class", i.makeNodeLineClass(a, b)), b.isParent ? c.removeAttr("disabled") : c.attr("disabled", "disabled"), f.removeAttr("style"), f.attr("style", i.makeNodeIcoStyle(a, b)), f.attr("class", i.makeNodeIcoClass(a, b))
            }
        }, setNodeName: function (a, b) {
            var c = h.getNodeTitle(a, b), d = k(b, e.id.SPAN, a);
            d.empty(), a.view.nameIsHTML ? d.html(h.getNodeName(a, b)) : d.text(h.getNodeName(a, b)), j.apply(a.view.showTitle, [a.treeId, b], a.view.showTitle) && k(b, e.id.A, a).attr("title", c ? c : "")
        }, setNodeTarget: function (a, b) {
            k(b, e.id.A, a).attr("target", i.makeNodeTarget(b))
        }, setNodeUrl: function (a, b) {
            var c = k(b, e.id.A, a), d = i.makeNodeUrl(a, b);
            null == d || 0 == d.length ? c.removeAttr("href") : c.attr("href", d)
        }, switchNode: function (a, b) {
            b.open || !j.canAsync(a, b) ? i.expandCollapseNode(a, b, !b.open) : a.async.enable ? i.asyncNode(a, b) || i.expandCollapseNode(a, b, !b.open) : b && i.expandCollapseNode(a, b, !b.open)
        }
    };
    p.fn.zTree = {
        consts: {
            className: {BUTTON: "button", LEVEL: "level", ICO_LOADING: "ico_loading", SWITCH: "switch"},
            event: {
                NODECREATED: "ztree_nodeCreated",
                CLICK: "ztree_click",
                EXPAND: "ztree_expand",
                COLLAPSE: "ztree_collapse",
                ASYNC_SUCCESS: "ztree_async_success",
                ASYNC_ERROR: "ztree_async_error"
            },
            id: {A: "_a", ICON: "_ico", SPAN: "_span", SWITCH: "_switch", UL: "_ul"},
            line: {ROOT: "root", ROOTS: "roots", CENTER: "center", BOTTOM: "bottom", NOLINE: "noline", LINE: "line"},
            folder: {OPEN: "open", CLOSE: "close", DOCU: "docu"},
            node: {CURSELECTED: "curSelectedNode"}
        }, _z: {tools: j, view: i, event: m, data: h}, getZTreeObj: function (a) {
            return (a = h.getZTreeTools(a)) ? a : null
        }, destroy: function (a) {
            if (a && a.length > 0)i.destroy(h.getSetting(a)); else for (var b in r)i.destroy(r[b])
        }, init: function (a, b, c) {
            var d = j.clone(M);
            return p.extend(!0, d, b), d.treeId = a.attr("id"), d.treeObj = a, d.treeObj.empty(), r[d.treeId] = d, "undefined" == typeof document.body.style.maxHeight && (d.view.expandSpeed = ""), h.initRoot(d), a = h.getRoot(d), b = d.data.key.children, c = c ? j.clone(j.isArray(c) ? c : [c]) : [], a[b] = d.data.simpleData.enable ? h.transformTozTreeFormat(d, c) : c, h.initCache(d), m.unbindTree(d), m.bindTree(d), m.unbindEvent(d), m.bindEvent(d), c = {
                setting: d,
                addNodes: function (a, b, c) {
                    function e() {
                        i.addNodes(d, a, f, 1 == c)
                    }

                    if (!b)return null;
                    if (a || (a = null), a && !a.isParent && d.data.keep.leaf)return null;
                    var f = j.clone(j.isArray(b) ? b : [b]);
                    return j.canAsync(d, a) ? i.asyncNode(d, a, c, e) : e(), f
                },
                cancelSelectedNode: function (a) {
                    i.cancelPreSelectedNode(d, a)
                },
                destroy: function () {
                    i.destroy(d)
                },
                expandAll: function (a) {
                    return a = !!a, i.expandCollapseSonNode(d, null, a, !0), a
                },
                expandNode: function (a, b, c, e, f) {
                    if (!a || !a.isParent)return null;
                    if (b !== !0 && b !== !1 && (b = !a.open), (f = !!f) && b && 0 == j.apply(d.callback.beforeExpand, [d.treeId, a], !0))return null;
                    if (f && !b && 0 == j.apply(d.callback.beforeCollapse, [d.treeId, a], !0))return null;
                    if (b && a.parentTId && i.expandCollapseParentNode(d, a.getParentNode(), b, !1), b === a.open && !c)return null;
                    if (h.getRoot(d).expandTriggerFlag = f, !j.canAsync(d, a) && c)i.expandCollapseSonNode(d, a, b, !0, function () {
                        if (e !== !1)try {
                            k(a, d).focus().blur()
                        } catch (b) {
                        }
                    }); else if (a.open = !b, i.switchNode(this.setting, a), e !== !1)try {
                        k(a, d).focus().blur()
                    } catch (g) {
                    }
                    return b
                },
                getNodes: function () {
                    return h.getNodes(d)
                },
                getNodeByParam: function (a, b, c) {
                    return a ? h.getNodeByParam(d, c ? c[d.data.key.children] : h.getNodes(d), a, b) : null
                },
                getNodeByTId: function (a) {
                    return h.getNodeCache(d, a)
                },
                getNodesByParam: function (a, b, c) {
                    return a ? h.getNodesByParam(d, c ? c[d.data.key.children] : h.getNodes(d), a, b) : null
                },
                getNodesByParamFuzzy: function (a, b, c) {
                    return a ? h.getNodesByParamFuzzy(d, c ? c[d.data.key.children] : h.getNodes(d), a, b) : null
                },
                getNodesByFilter: function (a, b, c, e) {
                    return b = !!b, a && "function" == typeof a ? h.getNodesByFilter(d, c ? c[d.data.key.children] : h.getNodes(d), a, b, e) : b ? null : []
                },
                getNodeIndex: function (a) {
                    if (!a)return null;
                    for (var b = d.data.key.children, c = a.parentTId ? a.getParentNode() : h.getRoot(d), e = 0, f = c[b].length; f > e; e++)if (c[b][e] == a)return e;
                    return -1
                },
                getSelectedNodes: function () {
                    for (var a = [], b = h.getRoot(d).curSelectedList, c = 0, e = b.length; e > c; c++)a.push(b[c]);
                    return a
                },
                isSelectedNode: function (a) {
                    return h.isSelectedNode(d, a)
                },
                reAsyncChildNodes: function (a, b, c) {
                    if (this.setting.async.enable) {
                        var f = !a;
                        if (f && (a = h.getRoot(d)), "refresh" == b) {
                            for (var b = this.setting.data.key.children, g = 0, j = a[b] ? a[b].length : 0; j > g; g++)h.removeNodeCache(d, a[b][g]);
                            h.removeSelectedNode(d), a[b] = [], f ? this.setting.treeObj.empty() : k(a, e.id.UL, d).empty()
                        }
                        i.asyncNode(this.setting, f ? null : a, !!c)
                    }
                },
                refresh: function () {
                    this.setting.treeObj.empty();
                    var a = h.getRoot(d), b = a[d.data.key.children];
                    h.initRoot(d), a[d.data.key.children] = b, h.initCache(d), i.createNodes(d, 0, a[d.data.key.children])
                },
                removeChildNodes: function (a) {
                    if (!a)return null;
                    var b = a[d.data.key.children];
                    return i.removeChildNodes(d, a), b ? b : null
                },
                removeNode: function (a, b) {
                    a && (b = !!b, b && 0 == j.apply(d.callback.beforeRemove, [d.treeId, a], !0) || (i.removeNode(d, a), b && this.setting.treeObj.trigger(e.event.REMOVE, [d.treeId, a])))
                },
                selectNode: function (a, b) {
                    if (a && j.uCanDo(d)) {
                        if (b = d.view.selectedMulti && b, a.parentTId)i.expandCollapseParentNode(d, a.getParentNode(), !0, !1, function () {
                            try {
                                k(a, d).focus().blur()
                            } catch (b) {
                            }
                        }); else try {
                            k(a, d).focus().blur()
                        } catch (c) {
                        }
                        i.selectNode(d, a, b)
                    }
                },
                transformTozTreeNodes: function (a) {
                    return h.transformTozTreeFormat(d, a)
                },
                transformToArray: function (a) {
                    return h.transformToArrayFormat(d, a)
                },
                updateNode: function (a) {
                    a && k(a, d).get(0) && j.uCanDo(d) && (i.setNodeName(d, a), i.setNodeTarget(d, a), i.setNodeUrl(d, a), i.setNodeLineIcos(d, a), i.setNodeFontCss(d, a))
                }
            }, a.treeTools = c, h.setZTreeTools(d, c), a[b] && a[b].length > 0 ? i.createNodes(d, 0, a[b]) : d.async.enable && d.async.url && "" !== d.async.url && i.asyncNode(d), c
        }
    };
    var N = p.fn.zTree, k = j.$, e = N.consts
}(jQuery), function (a) {
    var b, c, d, e = {
        event: {CHECK: "ztree_check"},
        id: {CHECK: "_check"},
        checkbox: {
            STYLE: "checkbox",
            DEFAULT: "chk",
            DISABLED: "disable",
            FALSE: "false",
            TRUE: "true",
            FULL: "full",
            PART: "part",
            FOCUS: "focus"
        },
        radio: {STYLE: "radio", TYPE_ALL: "all", TYPE_LEVEL: "level"}
    }, f = {
        check: {
            enable: !1,
            autoCheckTrigger: !1,
            chkStyle: e.checkbox.STYLE,
            nocheckInherit: !1,
            chkDisabledInherit: !1,
            radioType: e.radio.TYPE_LEVEL,
            chkboxType: {Y: "ps", N: "ps"}
        }, data: {key: {checked: "checked"}}, callback: {beforeCheck: null, onCheck: null}
    };
    b = function (a, b) {
        if (b.chkDisabled === !0)return !1;
        var c = j.getSetting(a.data.treeId), d = c.data.key.checked;
        return 0 == g.apply(c.callback.beforeCheck, [c.treeId, b], !0) ? !0 : (b[d] = !b[d], i.checkNodeRelation(c, b), d = k(b, h.id.CHECK, c), i.setChkClass(c, d, b), i.repairParentChkClassWithSelf(c, b), c.treeObj.trigger(h.event.CHECK, [a, c.treeId, b]), !0)
    }, c = function (a, b) {
        if (b.chkDisabled === !0)return !1;
        var c = j.getSetting(a.data.treeId), d = k(b, h.id.CHECK, c);
        return b.check_Focus = !0, i.setChkClass(c, d, b), !0
    }, d = function (a, b) {
        if (b.chkDisabled === !0)return !1;
        var c = j.getSetting(a.data.treeId), d = k(b, h.id.CHECK, c);
        return b.check_Focus = !1, i.setChkClass(c, d, b), !0
    }, a.extend(!0, a.fn.zTree.consts, e), a.extend(!0, a.fn.zTree._z, {
        tools: {},
        view: {
            checkNodeRelation: function (a, b) {
                var c, d, e, f = a.data.key.children, g = a.data.key.checked;
                if (c = h.radio, a.check.chkStyle == c.STYLE) {
                    var l = j.getRadioCheckedList(a);
                    if (b[g])if (a.check.radioType == c.TYPE_ALL) {
                        for (d = l.length - 1; d >= 0; d--)c = l[d], c[g] = !1, l.splice(d, 1), i.setChkClass(a, k(c, h.id.CHECK, a), c), c.parentTId != b.parentTId && i.repairParentChkClassWithSelf(a, c);
                        l.push(b)
                    } else for (l = b.parentTId ? b.getParentNode() : j.getRoot(a), d = 0, e = l[f].length; e > d; d++)c = l[f][d], c[g] && c != b && (c[g] = !1, i.setChkClass(a, k(c, h.id.CHECK, a), c)); else if (a.check.radioType == c.TYPE_ALL)for (d = 0, e = l.length; e > d; d++)if (b == l[d]) {
                        l.splice(d, 1);
                        break
                    }
                } else b[g] && (!b[f] || 0 == b[f].length || a.check.chkboxType.Y.indexOf("s") > -1) && i.setSonNodeCheckBox(a, b, !0), !b[g] && (!b[f] || 0 == b[f].length || a.check.chkboxType.N.indexOf("s") > -1) && i.setSonNodeCheckBox(a, b, !1), b[g] && a.check.chkboxType.Y.indexOf("p") > -1 && i.setParentNodeCheckBox(a, b, !0), !b[g] && a.check.chkboxType.N.indexOf("p") > -1 && i.setParentNodeCheckBox(a, b, !1)
            }, makeChkClass: function (a, b) {
                var c = a.data.key.checked, d = h.checkbox, e = h.radio, f = "", f = b.chkDisabled === !0 ? d.DISABLED : b.halfCheck ? d.PART : a.check.chkStyle == e.STYLE ? b.check_Child_State < 1 ? d.FULL : d.PART : b[c] ? 2 === b.check_Child_State || -1 === b.check_Child_State ? d.FULL : d.PART : b.check_Child_State < 1 ? d.FULL : d.PART, c = a.check.chkStyle + "_" + (b[c] ? d.TRUE : d.FALSE) + "_" + f, c = b.check_Focus && b.chkDisabled !== !0 ? c + "_" + d.FOCUS : c;
                return h.className.BUTTON + " " + d.DEFAULT + " " + c
            }, repairAllChk: function (a, b) {
                if (a.check.enable && a.check.chkStyle === h.checkbox.STYLE)for (var c = a.data.key.checked, d = a.data.key.children, e = j.getRoot(a), f = 0, g = e[d].length; g > f; f++) {
                    var k = e[d][f];
                    k.nocheck !== !0 && k.chkDisabled !== !0 && (k[c] = b), i.setSonNodeCheckBox(a, k, b)
                }
            }, repairChkClass: function (a, b) {
                if (b && (j.makeChkFlag(a, b), b.nocheck !== !0)) {
                    var c = k(b, h.id.CHECK, a);
                    i.setChkClass(a, c, b)
                }
            }, repairParentChkClass: function (a, b) {
                if (b && b.parentTId) {
                    var c = b.getParentNode();
                    i.repairChkClass(a, c), i.repairParentChkClass(a, c)
                }
            }, repairParentChkClassWithSelf: function (a, b) {
                if (b) {
                    var c = a.data.key.children;
                    b[c] && b[c].length > 0 ? i.repairParentChkClass(a, b[c][0]) : i.repairParentChkClass(a, b)
                }
            }, repairSonChkDisabled: function (a, b, c, d) {
                if (b) {
                    var e = a.data.key.children;
                    if (b.chkDisabled != c && (b.chkDisabled = c), i.repairChkClass(a, b), b[e] && d)for (var f = 0, g = b[e].length; g > f; f++)i.repairSonChkDisabled(a, b[e][f], c, d)
                }
            }, repairParentChkDisabled: function (a, b, c, d) {
                b && (b.chkDisabled != c && d && (b.chkDisabled = c), i.repairChkClass(a, b), i.repairParentChkDisabled(a, b.getParentNode(), c, d))
            }, setChkClass: function (a, b, c) {
                b && (c.nocheck === !0 ? b.hide() : b.show(), b.removeClass(), b.addClass(i.makeChkClass(a, c)))
            }, setParentNodeCheckBox: function (a, b, c, d) {
                var e = a.data.key.children, f = a.data.key.checked, g = k(b, h.id.CHECK, a);
                if (d || (d = b), j.makeChkFlag(a, b), b.nocheck !== !0 && b.chkDisabled !== !0 && (b[f] = c, i.setChkClass(a, g, b), a.check.autoCheckTrigger && b != d && a.treeObj.trigger(h.event.CHECK, [null, a.treeId, b])), b.parentTId) {
                    if (g = !0, !c)for (var e = b.getParentNode()[e], l = 0, m = e.length; m > l; l++)if (e[l].nocheck !== !0 && e[l].chkDisabled !== !0 && e[l][f] || (e[l].nocheck === !0 || e[l].chkDisabled === !0) && e[l].check_Child_State > 0) {
                        g = !1;
                        break
                    }
                    g && i.setParentNodeCheckBox(a, b.getParentNode(), c, d)
                }
            }, setSonNodeCheckBox: function (a, b, c, d) {
                if (b) {
                    var e = a.data.key.children, f = a.data.key.checked, g = k(b, h.id.CHECK, a);
                    d || (d = b);
                    var l = !1;
                    if (b[e])for (var m = 0, n = b[e].length; n > m && b.chkDisabled !== !0; m++) {
                        var o = b[e][m];
                        i.setSonNodeCheckBox(a, o, c, d), o.chkDisabled === !0 && (l = !0)
                    }
                    b != j.getRoot(a) && b.chkDisabled !== !0 && (l && b.nocheck !== !0 && j.makeChkFlag(a, b), b.nocheck !== !0 && b.chkDisabled !== !0 ? (b[f] = c, l || (b.check_Child_State = b[e] && b[e].length > 0 ? c ? 2 : 0 : -1)) : b.check_Child_State = -1, i.setChkClass(a, g, b), a.check.autoCheckTrigger && b != d && b.nocheck !== !0 && b.chkDisabled !== !0 && a.treeObj.trigger(h.event.CHECK, [null, a.treeId, b]))
                }
            }
        },
        event: {},
        data: {
            getRadioCheckedList: function (a) {
                for (var b = j.getRoot(a).radioCheckedList, c = 0, d = b.length; d > c; c++)j.getNodeCache(a, b[c].tId) || (b.splice(c, 1), c--, d--);
                return b
            }, getCheckStatus: function (a, b) {
                if (!a.check.enable || b.nocheck || b.chkDisabled)return null;
                var c = a.data.key.checked;
                return {
                    checked: b[c],
                    half: b.halfCheck ? b.halfCheck : a.check.chkStyle == h.radio.STYLE ? 2 === b.check_Child_State : b[c] ? b.check_Child_State > -1 && b.check_Child_State < 2 : b.check_Child_State > 0
                }
            }, getTreeCheckedNodes: function (a, b, c, d) {
                if (!b)return [];
                for (var e = a.data.key.children, f = a.data.key.checked, g = c && a.check.chkStyle == h.radio.STYLE && a.check.radioType == h.radio.TYPE_ALL, d = d ? d : [], i = 0, k = b.length; k > i && (b[i].nocheck === !0 || b[i].chkDisabled === !0 || b[i][f] != c || (d.push(b[i]), !g)) && (j.getTreeCheckedNodes(a, b[i][e], c, d), !(g && d.length > 0)); i++);
                return d
            }, getTreeChangeCheckedNodes: function (a, b, c) {
                if (!b)return [];
                for (var d = a.data.key.children, e = a.data.key.checked, c = c ? c : [], f = 0, g = b.length; g > f; f++)b[f].nocheck !== !0 && b[f].chkDisabled !== !0 && b[f][e] != b[f].checkedOld && c.push(b[f]), j.getTreeChangeCheckedNodes(a, b[f][d], c);
                return c
            }, makeChkFlag: function (a, b) {
                if (b) {
                    var c = a.data.key.children, d = a.data.key.checked, e = -1;
                    if (b[c])for (var f = 0, g = b[c].length; g > f; f++) {
                        var i = b[c][f], j = -1;
                        if (a.check.chkStyle == h.radio.STYLE) {
                            if (j = i.nocheck === !0 || i.chkDisabled === !0 ? i.check_Child_State : i.halfCheck === !0 ? 2 : i[d] ? 2 : i.check_Child_State > 0 ? 2 : 0, 2 == j) {
                                e = 2;
                                break
                            }
                            0 == j && (e = 0)
                        } else if (a.check.chkStyle == h.checkbox.STYLE) {
                            if (j = i.nocheck === !0 || i.chkDisabled === !0 ? i.check_Child_State : i.halfCheck === !0 ? 1 : i[d] ? -1 === i.check_Child_State || 2 === i.check_Child_State ? 2 : 1 : i.check_Child_State > 0 ? 1 : 0, 1 === j) {
                                e = 1;
                                break
                            }
                            if (2 === j && e > -1 && f > 0 && j !== e) {
                                e = 1;
                                break
                            }
                            if (2 === e && j > -1 && 2 > j) {
                                e = 1;
                                break
                            }
                            j > -1 && (e = j)
                        }
                    }
                    b.check_Child_State = e
                }
            }
        }
    });
    var a = a.fn.zTree, g = a._z.tools, h = a.consts, i = a._z.view, j = a._z.data, k = g.$;
    j.exSetting(f), j.addInitBind(function (a) {
        a.treeObj.bind(h.event.CHECK, function (b, c, d, e) {
            g.apply(a.callback.onCheck, [c ? c : b, d, e])
        })
    }), j.addInitUnBind(function (a) {
        a.treeObj.unbind(h.event.CHECK)
    }), j.addInitCache(function () {
    }), j.addInitNode(function (a, b, c, d) {
        c && (b = a.data.key.checked, "string" == typeof c[b] && (c[b] = g.eqs(c[b], "true")), c[b] = !!c[b], c.checkedOld = c[b], "string" == typeof c.nocheck && (c.nocheck = g.eqs(c.nocheck, "true")), c.nocheck = !!c.nocheck || a.check.nocheckInherit && d && !!d.nocheck, "string" == typeof c.chkDisabled && (c.chkDisabled = g.eqs(c.chkDisabled, "true")), c.chkDisabled = !!c.chkDisabled || a.check.chkDisabledInherit && d && !!d.chkDisabled, "string" == typeof c.halfCheck && (c.halfCheck = g.eqs(c.halfCheck, "true")), c.halfCheck = !!c.halfCheck, c.check_Child_State = -1, c.check_Focus = !1, c.getCheckStatus = function () {
            return j.getCheckStatus(a, c)
        }, a.check.chkStyle == h.radio.STYLE && a.check.radioType == h.radio.TYPE_ALL && c[b] && j.getRoot(a).radioCheckedList.push(c))
    }), j.addInitProxy(function (a) {
        var e = a.target, f = j.getSetting(a.data.treeId), i = "", k = null, l = "", m = null;
        if (g.eqs(a.type, "mouseover") ? f.check.enable && g.eqs(e.tagName, "span") && null !== e.getAttribute("treeNode" + h.id.CHECK) && (i = g.getNodeMainDom(e).id, l = "mouseoverCheck") : g.eqs(a.type, "mouseout") ? f.check.enable && g.eqs(e.tagName, "span") && null !== e.getAttribute("treeNode" + h.id.CHECK) && (i = g.getNodeMainDom(e).id, l = "mouseoutCheck") : g.eqs(a.type, "click") && f.check.enable && g.eqs(e.tagName, "span") && null !== e.getAttribute("treeNode" + h.id.CHECK) && (i = g.getNodeMainDom(e).id, l = "checkNode"), i.length > 0)switch (k = j.getNodeCache(f, i), l) {
            case"checkNode":
                m = b;
                break;
            case"mouseoverCheck":
                m = c;
                break;
            case"mouseoutCheck":
                m = d
        }
        return {
            stop: "checkNode" === l,
            node: k,
            nodeEventType: l,
            nodeEventCallback: m,
            treeEventType: "",
            treeEventCallback: null
        }
    }, !0), j.addInitRoot(function (a) {
        j.getRoot(a).radioCheckedList = []
    }), j.addBeforeA(function (a, b, c) {
        a.check.enable && (j.makeChkFlag(a, b), c.push("<span ID='", b.tId, h.id.CHECK, "' class='", i.makeChkClass(a, b), "' treeNode", h.id.CHECK, b.nocheck === !0 ? " style='display:none;'" : "", "></span>"))
    }), j.addZTreeTools(function (a, b) {
        b.checkNode = function (b, c, d, e) {
            var f = a.data.key.checked;
            b.chkDisabled === !0 || (c !== !0 && c !== !1 && (c = !b[f]), e = !!e, b[f] === c && !d || e && 0 == g.apply(this.setting.callback.beforeCheck, [a.treeId, b], !0) || !g.uCanDo(this.setting) || !a.check.enable || b.nocheck === !0) || (b[f] = c, c = k(b, h.id.CHECK, a), (d || a.check.chkStyle === h.radio.STYLE) && i.checkNodeRelation(a, b), i.setChkClass(a, c, b), i.repairParentChkClassWithSelf(a, b), e && a.treeObj.trigger(h.event.CHECK, [null, a.treeId, b]))
        }, b.checkAllNodes = function (b) {
            i.repairAllChk(a, !!b)
        }, b.getCheckedNodes = function (b) {
            var c = a.data.key.children;
            return j.getTreeCheckedNodes(a, j.getRoot(a)[c], b !== !1)
        }, b.getChangeCheckedNodes = function () {
            var b = a.data.key.children;
            return j.getTreeChangeCheckedNodes(a, j.getRoot(a)[b])
        }, b.setChkDisabled = function (b, c, d, e) {
            c = !!c, d = !!d, i.repairSonChkDisabled(a, b, c, !!e), i.repairParentChkDisabled(a, b.getParentNode(), c, d)
        };
        var c = b.updateNode;
        b.updateNode = function (d, e) {
            if (c && c.apply(b, arguments), d && a.check.enable && k(d, a).get(0) && g.uCanDo(a)) {
                var f = k(d, h.id.CHECK, a);
                (1 == e || a.check.chkStyle === h.radio.STYLE) && i.checkNodeRelation(a, d), i.setChkClass(a, f, d), i.repairParentChkClassWithSelf(a, d)
            }
        }
    });
    var l = i.createNodes;
    i.createNodes = function (a, b, c, d) {
        l && l.apply(i, arguments), c && i.repairParentChkClassWithSelf(a, d)
    };
    var m = i.removeNode;
    i.removeNode = function (a, b) {
        var c = b.getParentNode();
        m && m.apply(i, arguments), b && c && (i.repairChkClass(a, c), i.repairParentChkClass(a, c))
    };
    var n = i.appendNodes;
    i.appendNodes = function (a, b, c, d) {
        var e = "";
        return n && (e = n.apply(i, arguments)), d && j.makeChkFlag(a, d), e
    }
}(jQuery), function (a) {
    var b = {
        event: {DRAG: "ztree_drag", DROP: "ztree_drop", REMOVE: "ztree_remove", RENAME: "ztree_rename"},
        id: {EDIT: "_edit", INPUT: "_input", REMOVE: "_remove"},
        move: {TYPE_INNER: "inner", TYPE_PREV: "prev", TYPE_NEXT: "next"},
        node: {
            CURSELECTED_EDIT: "curSelectedNode_Edit",
            TMPTARGET_TREE: "tmpTargetzTree",
            TMPTARGET_NODE: "tmpTargetNode"
        }
    }, c = {
        onHoverOverNode: function (a, b) {
            var d = h.getSetting(a.data.treeId), e = h.getRoot(d);
            e.curHoverNode != b && c.onHoverOutNode(a), e.curHoverNode = b, g.addHoverDom(d, b)
        }, onHoverOutNode: function (a) {
            var a = h.getSetting(a.data.treeId), b = h.getRoot(a);
            b.curHoverNode && !h.isSelectedNode(a, b.curHoverNode) && (g.removeTreeDom(a, b.curHoverNode), b.curHoverNode = null)
        }, onMousedownNode: function (c, d) {
            function j(c) {
                if (0 == p.dragFlag && Math.abs(I - c.clientX) < o.edit.drag.minMoveSize && Math.abs(J - c.clientY) < o.edit.drag.minMoveSize)return !0;
                var d, j, l, m, n;
                if (n = o.data.key.children, A.css("cursor", "pointer"), 0 == p.dragFlag) {
                    if (0 == e.apply(o.callback.beforeDrag, [o.treeId, t], !0))return k(c), !0;
                    for (d = 0, j = t.length; j > d; d++)0 == d && (p.dragNodeShowBefore = []), l = t[d], l.isParent && l.open ? (g.expandCollapseNode(o, l, !l.open), p.dragNodeShowBefore[l.tId] = !0) : p.dragNodeShowBefore[l.tId] = !1;
                    if (p.dragFlag = 1, q.showHoverDom = !1, e.showIfameMask(o, !0), l = !0, m = -1, t.length > 1) {
                        var r = t[0].parentTId ? t[0].getParentNode()[n] : h.getNodes(o);
                        for (n = [], d = 0, j = r.length; j > d; d++)if (void 0 !== p.dragNodeShowBefore[r[d].tId] && (l && m > -1 && m + 1 !== d && (l = !1), n.push(r[d]), m = d), t.length === n.length) {
                            t = n;
                            break
                        }
                    }
                    for (l && (x = t[0].getPreNode(), y = t[t.length - 1].getNextNode()), u = i("<ul class='zTreeDragUL'></ul>", o), d = 0, j = t.length; j > d; d++)if (l = t[d], l.editNameFlag = !1, g.selectNode(o, l, d > 0), g.removeTreeDom(o, l), m = i("<li id='" + l.tId + "_tmp'></li>", o), m.append(i(l, f.id.A, o).clone()), m.css("padding", "0"), m.children("#" + l.tId + f.id.A).removeClass(f.node.CURSELECTED), u.append(m), d == o.edit.drag.maxShowNodeNum - 1) {
                        m = i("<li id='" + l.tId + "_moretmp'><a>  ...  </a></li>", o), u.append(m);
                        break
                    }
                    u.attr("id", t[0].tId + f.id.UL + "_tmp"), u.addClass(o.treeObj.attr("class")), u.appendTo(A), v = i("<span class='tmpzTreeMove_arrow'></span>", o), v.attr("id", "zTreeMove_arrow_tmp"), v.appendTo(A), o.treeObj.trigger(f.event.DRAG, [c, o.treeId, t])
                }
                if (1 == p.dragFlag) {
                    w && v.attr("id") == c.target.id && G && c.clientX + z.scrollLeft() + 2 > a("#" + G + f.id.A, w).offset().left ? (l = a("#" + G + f.id.A, w), c.target = l.length > 0 ? l.get(0) : c.target) : w && (w.removeClass(f.node.TMPTARGET_TREE), G && a("#" + G + f.id.A, w).removeClass(f.node.TMPTARGET_NODE + "_" + f.move.TYPE_PREV).removeClass(f.node.TMPTARGET_NODE + "_" + b.move.TYPE_NEXT).removeClass(f.node.TMPTARGET_NODE + "_" + b.move.TYPE_INNER)), G = w = null, B = !1, C = o, l = h.getSettings();
                    for (var s in l)l[s].treeId && l[s].edit.enable && l[s].treeId != o.treeId && (c.target.id == l[s].treeId || a(c.target).parents("#" + l[s].treeId).length > 0) && (B = !0, C = l[s]);
                    s = z.scrollTop(), m = z.scrollLeft(), n = C.treeObj.offset(), d = C.treeObj.get(0).scrollHeight, l = C.treeObj.get(0).scrollWidth, j = c.clientY + s - n.top;
                    var D = C.treeObj.height() + n.top - c.clientY - s, L = c.clientX + m - n.left, M = C.treeObj.width() + n.left - c.clientX - m;
                    n = j < o.edit.drag.borderMax && j > o.edit.drag.borderMin;
                    var r = D < o.edit.drag.borderMax && D > o.edit.drag.borderMin, N = L < o.edit.drag.borderMax && L > o.edit.drag.borderMin, O = M < o.edit.drag.borderMax && M > o.edit.drag.borderMin, D = j > o.edit.drag.borderMin && D > o.edit.drag.borderMin && L > o.edit.drag.borderMin && M > o.edit.drag.borderMin, L = n && C.treeObj.scrollTop() <= 0, M = r && C.treeObj.scrollTop() + C.treeObj.height() + 10 >= d, P = N && C.treeObj.scrollLeft() <= 0, Q = O && C.treeObj.scrollLeft() + C.treeObj.width() + 10 >= l;
                    if (c.target.id && C.treeObj.find("#" + c.target.id).length > 0) {
                        for (var R = c.target; R && R.tagName && !e.eqs(R.tagName, "li") && R.id != C.treeId;)R = R.parentNode;
                        var S = !0;
                        for (d = 0, j = t.length; j > d; d++) {
                            if (l = t[d], R.id === l.tId) {
                                S = !1;
                                break
                            }
                            if (i(l, o).find("#" + R.id).length > 0) {
                                S = !1;
                                break
                            }
                        }
                        S && c.target.id && (c.target.id == R.id + f.id.A || a(c.target).parents("#" + R.id + f.id.A).length > 0) && (w = a(R), G = R.id)
                    }
                    if (l = t[0], D && (c.target.id == C.treeId || a(c.target).parents("#" + C.treeId).length > 0) && (!w && (c.target.id == C.treeId || L || M || P || Q) && (B || !B && l.parentTId) && (w = C.treeObj), n ? C.treeObj.scrollTop(C.treeObj.scrollTop() - 10) : r && C.treeObj.scrollTop(C.treeObj.scrollTop() + 10), N ? C.treeObj.scrollLeft(C.treeObj.scrollLeft() - 10) : O && C.treeObj.scrollLeft(C.treeObj.scrollLeft() + 10), w && w != C.treeObj && w.offset().left < C.treeObj.offset().left && C.treeObj.scrollLeft(C.treeObj.scrollLeft() + w.offset().left - C.treeObj.offset().left)), u.css({
                            top: c.clientY + s + 3 + "px",
                            left: c.clientX + m + 3 + "px"
                        }), n = d = 0, w && w.attr("id") != C.treeId) {
                        var T = null == G ? null : h.getNodeCache(C, G);
                        j = c.ctrlKey && o.edit.drag.isMove && o.edit.drag.isCopy || !o.edit.drag.isMove && o.edit.drag.isCopy, d = !(!x || G !== x.tId), n = !(!y || G !== y.tId), m = l.parentTId && l.parentTId == G, l = (j || !n) && e.apply(C.edit.drag.prev, [C.treeId, t, T], !!C.edit.drag.prev), d = (j || !d) && e.apply(C.edit.drag.next, [C.treeId, t, T], !!C.edit.drag.next), O = !(!j && m || C.data.keep.leaf && !T.isParent || !e.apply(C.edit.drag.inner, [C.treeId, t, T], !!C.edit.drag.inner)), l || d || O ? (j = a("#" + G + f.id.A, w), n = T.isLastNode ? null : a("#" + T.getNextNode().tId + f.id.A, w.next()), r = j.offset().top, m = j.offset().left, N = l ? O ? .25 : d ? .5 : 1 : -1, O = d ? O ? .75 : l ? .5 : 0 : -1, c = (c.clientY + s - r) / j.height(), (1 == N || N >= c && c >= -.2) && l ? (d = 1 - v.width(), n = r - v.height() / 2, H = f.move.TYPE_PREV) : (0 == O || c >= O && 1.2 >= c) && d ? (d = 1 - v.width(), n = null == n || T.isParent && T.open ? r + j.height() - v.height() / 2 : n.offset().top - v.height() / 2, H = f.move.TYPE_NEXT) : (d = 5 - v.width(), n = r, H = f.move.TYPE_INNER), v.css({
                            display: "block",
                            top: n + "px",
                            left: m + d + "px"
                        }), j.addClass(f.node.TMPTARGET_NODE + "_" + H), (E != G || F != H) && (K = (new Date).getTime()), T && T.isParent && H == f.move.TYPE_INNER && (c = !0, window.zTreeMoveTimer && window.zTreeMoveTargetNodeTId !== T.tId ? (clearTimeout(window.zTreeMoveTimer), window.zTreeMoveTargetNodeTId = null) : window.zTreeMoveTimer && window.zTreeMoveTargetNodeTId === T.tId && (c = !1), c) && (window.zTreeMoveTimer = setTimeout(function () {
                            H == f.move.TYPE_INNER && T && T.isParent && !T.open && (new Date).getTime() - K > C.edit.drag.autoOpenTime && e.apply(C.callback.beforeDragOpen, [C.treeId, T], !0) && (g.switchNode(C, T), C.edit.drag.autoExpandTrigger && C.treeObj.trigger(f.event.EXPAND, [C.treeId, T]))
                        }, C.edit.drag.autoOpenTime + 50), window.zTreeMoveTargetNodeTId = T.tId)) : (w = null, G = "", H = f.move.TYPE_INNER, v.css({display: "none"}), window.zTreeMoveTimer && (clearTimeout(window.zTreeMoveTimer), window.zTreeMoveTargetNodeTId = null))
                    } else H = f.move.TYPE_INNER, w && e.apply(C.edit.drag.inner, [C.treeId, t, null], !!C.edit.drag.inner) ? w.addClass(f.node.TMPTARGET_TREE) : w = null, v.css({display: "none"}), window.zTreeMoveTimer && (clearTimeout(window.zTreeMoveTimer), window.zTreeMoveTargetNodeTId = null);
                    E = G, F = H
                }
                return !1
            }

            function k(c) {
                if (window.zTreeMoveTimer && (clearTimeout(window.zTreeMoveTimer), window.zTreeMoveTargetNodeTId = null), F = E = null, z.unbind("mousemove", j), z.unbind("mouseup", k), z.unbind("selectstart", l), A.css("cursor", "auto"), w && (w.removeClass(f.node.TMPTARGET_TREE), G && a("#" + G + f.id.A, w).removeClass(f.node.TMPTARGET_NODE + "_" + f.move.TYPE_PREV).removeClass(f.node.TMPTARGET_NODE + "_" + b.move.TYPE_NEXT).removeClass(f.node.TMPTARGET_NODE + "_" + b.move.TYPE_INNER)), e.showIfameMask(o, !1), q.showHoverDom = !0, 0 != p.dragFlag) {
                    p.dragFlag = 0;
                    var d, m, n;
                    for (d = 0, m = t.length; m > d; d++)n = t[d], n.isParent && p.dragNodeShowBefore[n.tId] && !n.open && (g.expandCollapseNode(o, n, !n.open), delete p.dragNodeShowBefore[n.tId]);
                    u && u.remove(), v && v.remove();
                    var r = c.ctrlKey && o.edit.drag.isMove && o.edit.drag.isCopy || !o.edit.drag.isMove && o.edit.drag.isCopy;
                    if (!r && w && G && t[0].parentTId && G == t[0].parentTId && H == f.move.TYPE_INNER && (w = null), w) {
                        var s = null == G ? null : h.getNodeCache(C, G);
                        if (0 == e.apply(o.callback.beforeDrop, [C.treeId, t, s, H, r], !0))g.selectNodes(D, t); else {
                            var x = r ? e.clone(t) : t;
                            d = function () {
                                if (B) {
                                    if (!r)for (var a = 0, b = t.length; b > a; a++)g.removeNode(o, t[a]);
                                    if (H == f.move.TYPE_INNER)g.addNodes(C, s, x); else if (g.addNodes(C, s.getParentNode(), x), H == f.move.TYPE_PREV)for (a = 0, b = x.length; b > a; a++)g.moveNode(C, s, x[a], H, !1); else for (a = -1, b = x.length - 1; b > a; b--)g.moveNode(C, s, x[b], H, !1)
                                } else if (r && H == f.move.TYPE_INNER)g.addNodes(C, s, x); else if (r && g.addNodes(C, s.getParentNode(), x), H != f.move.TYPE_NEXT)for (a = 0, b = x.length; b > a; a++)g.moveNode(C, s, x[a], H, !1); else for (a = -1, b = x.length - 1; b > a; b--)g.moveNode(C, s, x[b], H, !1);
                                g.selectNodes(C, x), i(x[0], o).focus().blur(), o.treeObj.trigger(f.event.DROP, [c, C.treeId, x, s, H, r])
                            }, H == f.move.TYPE_INNER && e.canAsync(C, s) ? g.asyncNode(C, s, !1, d) : d()
                        }
                    } else g.selectNodes(D, t), o.treeObj.trigger(f.event.DROP, [c, o.treeId, t, null, null, null])
                }
            }

            function l() {
                return !1
            }

            var m, n, o = h.getSetting(c.data.treeId), p = h.getRoot(o), q = h.getRoots();
            if (2 == c.button || !o.edit.enable || !o.edit.drag.isCopy && !o.edit.drag.isMove)return !0;
            var r = c.target, s = h.getRoot(o).curSelectedList, t = [];
            if (h.isSelectedNode(o, d))for (m = 0, n = s.length; n > m; m++) {
                if (s[m].editNameFlag && e.eqs(r.tagName, "input") && null !== r.getAttribute("treeNode" + f.id.INPUT))return !0;
                if (t.push(s[m]), t[0].parentTId !== s[m].parentTId) {
                    t = [d];
                    break
                }
            } else t = [d];
            g.editNodeBlur = !0, g.cancelCurEditNode(o);
            var u, v, w, x, y, z = a(o.treeObj.get(0).ownerDocument), A = a(o.treeObj.get(0).ownerDocument.body), B = !1, C = o, D = o, E = null, F = null, G = null, H = f.move.TYPE_INNER, I = c.clientX, J = c.clientY, K = (new Date).getTime();
            return e.uCanDo(o) && z.bind("mousemove", j), z.bind("mouseup", k), z.bind("selectstart", l), c.preventDefault && c.preventDefault(), !0
        }
    };
    a.extend(!0, a.fn.zTree.consts, b), a.extend(!0, a.fn.zTree._z, {
        tools: {
            getAbs: function (a) {
                return a = a.getBoundingClientRect(), [a.left, a.top]
            }, inputFocus: function (a) {
                a.get(0) && (a.focus(), e.setCursorPosition(a.get(0), a.val().length))
            }, inputSelect: function (a) {
                a.get(0) && (a.focus(), a.select())
            }, setCursorPosition: function (a, b) {
                if (a.setSelectionRange)a.focus(), a.setSelectionRange(b, b); else if (a.createTextRange) {
                    var c = a.createTextRange();
                    c.collapse(!0), c.moveEnd("character", b), c.moveStart("character", b), c.select()
                }
            }, showIfameMask: function (a, b) {
                for (var c = h.getRoot(a); c.dragMaskList.length > 0;)c.dragMaskList[0].remove(), c.dragMaskList.shift();
                if (b)for (var d = i("iframe", a), f = 0, g = d.length; g > f; f++) {
                    var j = d.get(f), k = e.getAbs(j), j = i("<div id='zTreeMask_" + f + "' class='zTreeMask' style='top:" + k[1] + "px; left:" + k[0] + "px; width:" + j.offsetWidth + "px; height:" + j.offsetHeight + "px;'></div>", a);
                    j.appendTo(body), c.dragMaskList.push(j)
                }
            }
        }, view: {
            addEditBtn: function (a, b) {
                if (!(b.editNameFlag || i(b, f.id.EDIT, a).length > 0) && e.apply(a.edit.showRenameBtn, [a.treeId, b], a.edit.showRenameBtn)) {
                    var c = i(b, f.id.A, a), d = "<span class='" + f.className.BUTTON + " edit' id='" + b.tId + f.id.EDIT + "' title='" + e.apply(a.edit.renameTitle, [a.treeId, b], a.edit.renameTitle) + "' treeNode" + f.id.EDIT + " style='display:none;'></span>";
                    c.append(d), i(b, f.id.EDIT, a).bind("click", function () {
                        return e.uCanDo(a) && 0 != e.apply(a.callback.beforeEditName, [a.treeId, b], !0) ? (g.editNode(a, b), !1) : !1
                    }).show()
                }
            }, addRemoveBtn: function (a, b) {
                if (!(b.editNameFlag || i(b, f.id.REMOVE, a).length > 0) && e.apply(a.edit.showRemoveBtn, [a.treeId, b], a.edit.showRemoveBtn)) {
                    var c = i(b, f.id.A, a), d = "<span class='" + f.className.BUTTON + " remove' id='" + b.tId + f.id.REMOVE + "' title='" + e.apply(a.edit.removeTitle, [a.treeId, b], a.edit.removeTitle) + "' treeNode" + f.id.REMOVE + " style='display:none;'></span>";
                    c.append(d), i(b, f.id.REMOVE, a).bind("click", function () {
                        return e.uCanDo(a) && 0 != e.apply(a.callback.beforeRemove, [a.treeId, b], !0) ? (g.removeNode(a, b), a.treeObj.trigger(f.event.REMOVE, [a.treeId, b]), !1) : !1
                    }).bind("mousedown", function () {
                        return !0
                    }).show()
                }
            }, addHoverDom: function (a, b) {
                h.getRoots().showHoverDom && (b.isHover = !0, a.edit.enable && (g.addEditBtn(a, b), g.addRemoveBtn(a, b)), e.apply(a.view.addHoverDom, [a.treeId, b]))
            }, cancelCurEditNode: function (a, b) {
                var c = h.getRoot(a), d = a.data.key.name, j = c.curEditNode;
                if (j) {
                    var k = c.curEditInput, l = b ? b : k.val(), m = !!b;
                    if (e.apply(a.callback.beforeRename, [a.treeId, j, l, m], !0) === !1)return !1;
                    j[d] = l ? l : k.val(), a.treeObj.trigger(f.event.RENAME, [a.treeId, j, m]), i(j, f.id.A, a).removeClass(f.node.CURSELECTED_EDIT), k.unbind(), g.setNodeName(a, j), j.editNameFlag = !1, c.curEditNode = null, c.curEditInput = null, g.selectNode(a, j, !1)
                }
                return c.noSelection = !0
            }, editNode: function (a, b) {
                var c = h.getRoot(a);
                if (g.editNodeBlur = !1, h.isSelectedNode(a, b) && c.curEditNode == b && b.editNameFlag)setTimeout(function () {
                    e.inputFocus(c.curEditInput)
                }, 0); else {
                    var d = a.data.key.name;
                    b.editNameFlag = !0, g.removeTreeDom(a, b), g.cancelCurEditNode(a), g.selectNode(a, b, !1), i(b, f.id.SPAN, a).html("<input type=text class='rename' id='" + b.tId + f.id.INPUT + "' treeNode" + f.id.INPUT + " >");
                    var j = i(b, f.id.INPUT, a);
                    j.attr("value", b[d]), a.edit.editNameSelectAll ? e.inputSelect(j) : e.inputFocus(j), j.bind("blur", function () {
                        g.editNodeBlur || g.cancelCurEditNode(a)
                    }).bind("keydown", function (c) {
                        "13" == c.keyCode ? (g.editNodeBlur = !0, g.cancelCurEditNode(a)) : "27" == c.keyCode && g.cancelCurEditNode(a, b[d])
                    }).bind("click", function () {
                        return !1
                    }).bind("dblclick", function () {
                        return !1
                    }), i(b, f.id.A, a).addClass(f.node.CURSELECTED_EDIT), c.curEditInput = j, c.noSelection = !1, c.curEditNode = b
                }
            }, moveNode: function (a, b, c, d, e, j) {
                var k = h.getRoot(a), l = a.data.key.children;
                if (b != c && (!a.data.keep.leaf || !b || b.isParent || d != f.move.TYPE_INNER)) {
                    var m = c.parentTId ? c.getParentNode() : k, n = null === b || b == k;
                    n && null === b && (b = k), n && (d = f.move.TYPE_INNER), k = b.parentTId ? b.getParentNode() : k, d != f.move.TYPE_PREV && d != f.move.TYPE_NEXT && (d = f.move.TYPE_INNER), d == f.move.TYPE_INNER && (n ? c.parentTId = null : (b.isParent || (b.isParent = !0, b.open = !!b.open, g.setNodeLineIcos(a, b)), c.parentTId = b.tId));
                    var o;
                    n ? o = n = a.treeObj : (j || d != f.move.TYPE_INNER ? j || g.expandCollapseNode(a, b.getParentNode(), !0, !1) : g.expandCollapseNode(a, b, !0, !1), n = i(b, a), o = i(b, f.id.UL, a), n.get(0) && !o.get(0) && (o = [], g.makeUlHtml(a, b, o, ""), n.append(o.join(""))), o = i(b, f.id.UL, a));
                    var p = i(c, a);
                    p.get(0) ? n.get(0) || p.remove() : p = g.appendNodes(a, c.level, [c], null, !1, !0).join(""), o.get(0) && d == f.move.TYPE_INNER ? o.append(p) : n.get(0) && d == f.move.TYPE_PREV ? n.before(p) : n.get(0) && d == f.move.TYPE_NEXT && n.after(p);
                    var q = -1, r = 0, s = null, n = null, t = c.level;
                    if (c.isFirstNode)q = 0, m[l].length > 1 && (s = m[l][1], s.isFirstNode = !0); else if (c.isLastNode)q = m[l].length - 1, s = m[l][q - 1], s.isLastNode = !0; else for (o = 0, p = m[l].length; p > o; o++)if (m[l][o].tId == c.tId) {
                        q = o;
                        break
                    }
                    if (q >= 0 && m[l].splice(q, 1), d != f.move.TYPE_INNER)for (o = 0, p = k[l].length; p > o; o++)k[l][o].tId == b.tId && (r = o);
                    d == f.move.TYPE_INNER ? (b[l] || (b[l] = []), b[l].length > 0 && (n = b[l][b[l].length - 1], n.isLastNode = !1), b[l].splice(b[l].length, 0, c), c.isLastNode = !0, c.isFirstNode = 1 == b[l].length) : b.isFirstNode && d == f.move.TYPE_PREV ? (k[l].splice(r, 0, c), n = b, n.isFirstNode = !1, c.parentTId = b.parentTId, c.isFirstNode = !0, c.isLastNode = !1) : b.isLastNode && d == f.move.TYPE_NEXT ? (k[l].splice(r + 1, 0, c), n = b, n.isLastNode = !1, c.parentTId = b.parentTId, c.isFirstNode = !1, c.isLastNode = !0) : (d == f.move.TYPE_PREV ? k[l].splice(r, 0, c) : k[l].splice(r + 1, 0, c), c.parentTId = b.parentTId, c.isFirstNode = !1, c.isLastNode = !1), h.fixPIdKeyValue(a, c), h.setSonNodeLevel(a, c.getParentNode(), c), g.setNodeLineIcos(a, c), g.repairNodeLevelClass(a, c, t), !a.data.keep.parent && m[l].length < 1 ? (m.isParent = !1, m.open = !1, b = i(m, f.id.UL, a), d = i(m, f.id.SWITCH, a), l = i(m, f.id.ICON, a), g.replaceSwitchClass(m, d, f.folder.DOCU), g.replaceIcoClass(m, l, f.folder.DOCU), b.css("display", "none")) : s && g.setNodeLineIcos(a, s), n && g.setNodeLineIcos(a, n), a.check && a.check.enable && g.repairChkClass && (g.repairChkClass(a, m), g.repairParentChkClassWithSelf(a, m), m != c.parent && g.repairParentChkClassWithSelf(a, c)), j || g.expandCollapseParentNode(a, c.getParentNode(), !0, e)
                }
            }, removeEditBtn: function (a, b) {
                i(b, f.id.EDIT, a).unbind().remove()
            }, removeRemoveBtn: function (a, b) {
                i(b, f.id.REMOVE, a).unbind().remove()
            }, removeTreeDom: function (a, b) {
                b.isHover = !1, g.removeEditBtn(a, b), g.removeRemoveBtn(a, b), e.apply(a.view.removeHoverDom, [a.treeId, b])
            }, repairNodeLevelClass: function (a, b, c) {
                if (c !== b.level) {
                    var d = i(b, a), e = i(b, f.id.A, a), a = i(b, f.id.UL, a), c = f.className.LEVEL + c, b = f.className.LEVEL + b.level;
                    d.removeClass(c), d.addClass(b), e.removeClass(c), e.addClass(b), a.removeClass(c), a.addClass(b)
                }
            }, selectNodes: function (a, b) {
                for (var c = 0, d = b.length; d > c; c++)g.selectNode(a, b[c], c > 0)
            }
        }, event: {}, data: {
            setSonNodeLevel: function (a, b, c) {
                if (c) {
                    var d = a.data.key.children;
                    if (c.level = b ? b.level + 1 : 0, c[d])for (var b = 0, e = c[d].length; e > b; b++)c[d][b] && h.setSonNodeLevel(a, c, c[d][b])
                }
            }
        }
    });
    var d = a.fn.zTree, e = d._z.tools, f = d.consts, g = d._z.view, h = d._z.data, i = e.$;
    h.exSetting({
        edit: {
            enable: !1,
            editNameSelectAll: !1,
            showRemoveBtn: !0,
            showRenameBtn: !0,
            removeTitle: "remove",
            renameTitle: "rename",
            drag: {
                autoExpandTrigger: !1,
                isCopy: !0,
                isMove: !0,
                prev: !0,
                next: !0,
                inner: !0,
                minMoveSize: 5,
                borderMax: 10,
                borderMin: -5,
                maxShowNodeNum: 5,
                autoOpenTime: 500
            }
        },
        view: {addHoverDom: null, removeHoverDom: null},
        callback: {
            beforeDrag: null,
            beforeDragOpen: null,
            beforeDrop: null,
            beforeEditName: null,
            beforeRename: null,
            onDrag: null,
            onDrop: null,
            onRename: null
        }
    }), h.addInitBind(function (a) {
        var b = a.treeObj, c = f.event;
        b.bind(c.RENAME, function (b, c, d, f) {
            e.apply(a.callback.onRename, [b, c, d, f])
        }), b.bind(c.REMOVE, function (b, c, d) {
            e.apply(a.callback.onRemove, [b, c, d])
        }), b.bind(c.DRAG, function (b, c, d, f) {
            e.apply(a.callback.onDrag, [c, d, f])
        }), b.bind(c.DROP, function (b, c, d, f, g, h, i) {
            e.apply(a.callback.onDrop, [c, d, f, g, h, i])
        })
    }), h.addInitUnBind(function (a) {
        var a = a.treeObj, b = f.event;
        a.unbind(b.RENAME), a.unbind(b.REMOVE), a.unbind(b.DRAG), a.unbind(b.DROP)
    }), h.addInitCache(function () {
    }), h.addInitNode(function (a, b, c) {
        c && (c.isHover = !1, c.editNameFlag = !1)
    }), h.addInitProxy(function (a) {
        var b = a.target, d = h.getSetting(a.data.treeId), g = a.relatedTarget, i = "", j = null, k = "", l = null, m = null;
        if (e.eqs(a.type, "mouseover") ? (m = e.getMDom(d, b, [{
                tagName: "a",
                attrName: "treeNode" + f.id.A
            }])) && (i = e.getNodeMainDom(m).id, k = "hoverOverNode") : e.eqs(a.type, "mouseout") ? (m = e.getMDom(d, g, [{
                tagName: "a",
                attrName: "treeNode" + f.id.A
            }]), m || (i = "remove", k = "hoverOutNode")) : e.eqs(a.type, "mousedown") && (m = e.getMDom(d, b, [{
                tagName: "a",
                attrName: "treeNode" + f.id.A
            }])) && (i = e.getNodeMainDom(m).id, k = "mousedownNode"), i.length > 0)switch (j = h.getNodeCache(d, i), k) {
            case"mousedownNode":
                l = c.onMousedownNode;
                break;
            case"hoverOverNode":
                l = c.onHoverOverNode;
                break;
            case"hoverOutNode":
                l = c.onHoverOutNode
        }
        return {stop: !1, node: j, nodeEventType: k, nodeEventCallback: l, treeEventType: "", treeEventCallback: null}
    }), h.addInitRoot(function (a) {
        var a = h.getRoot(a), b = h.getRoots();
        a.curEditNode = null, a.curEditInput = null, a.curHoverNode = null, a.dragFlag = 0, a.dragNodeShowBefore = [], a.dragMaskList = [], b.showHoverDom = !0
    }), h.addZTreeTools(function (a, b) {
        b.cancelEditName = function (b) {
            var c = h.getRoot(a), d = a.data.key.name, e = c.curEditNode;
            c.curEditNode && g.cancelCurEditNode(a, b ? b : e[d])
        }, b.copyNode = function (b, c, d, h) {
            if (!c)return null;
            if (b && !b.isParent && a.data.keep.leaf && d === f.move.TYPE_INNER)return null;
            var i = e.clone(c);
            return b || (b = null, d = f.move.TYPE_INNER), d == f.move.TYPE_INNER ? (c = function () {
                g.addNodes(a, b, [i], h)
            }, e.canAsync(a, b) ? g.asyncNode(a, b, h, c) : c()) : (g.addNodes(a, b.parentNode, [i], h), g.moveNode(a, b, i, d, !1, h)), i
        }, b.editName = function (b) {
            b && b.tId && b === h.getNodeCache(a, b.tId) && (b.parentTId && g.expandCollapseParentNode(a, b.getParentNode(), !0), g.editNode(a, b))
        }, b.moveNode = function (b, c, d, h) {
            function j() {
                g.moveNode(a, b, c, d, !1, h)
            }

            return c ? b && !b.isParent && a.data.keep.leaf && d === f.move.TYPE_INNER ? null : b && (c.parentTId == b.tId && d == f.move.TYPE_INNER || i(c, a).find("#" + b.tId).length > 0) ? null : (b || (b = null), e.canAsync(a, b) && d === f.move.TYPE_INNER ? g.asyncNode(a, b, h, j) : j(), c) : c
        }, b.setEditable = function (b) {
            return a.edit.enable = b, this.refresh()
        }
    });
    var j = g.cancelPreSelectedNode;
    g.cancelPreSelectedNode = function (a, b) {
        for (var c = h.getRoot(a).curSelectedList, d = 0, e = c.length; e > d && (b && b !== c[d] || (g.removeTreeDom(a, c[d]), !b)); d++);
        j && j.apply(g, arguments)
    };
    var k = g.createNodes;
    g.createNodes = function (a, b, c, d) {
        k && k.apply(g, arguments), c && g.repairParentChkClassWithSelf && g.repairParentChkClassWithSelf(a, d)
    };
    var l = g.makeNodeUrl;
    g.makeNodeUrl = function (a) {
        return a.edit.enable ? null : l.apply(g, arguments)
    };
    var m = g.removeNode;
    g.removeNode = function (a, b) {
        var c = h.getRoot(a);
        c.curEditNode === b && (c.curEditNode = null), m && m.apply(g, arguments)
    };
    var n = g.selectNode;
    g.selectNode = function (a, b) {
        var c = h.getRoot(a);
        return h.isSelectedNode(a, b) && c.curEditNode == b && b.editNameFlag ? !1 : (n && n.apply(g, arguments), g.addHoverDom(a, b), !0)
    };
    var o = e.uCanDo;
    e.uCanDo = function (a, b) {
        var c = h.getRoot(a);
        return b && (e.eqs(b.type, "mouseover") || e.eqs(b.type, "mouseout") || e.eqs(b.type, "mousedown") || e.eqs(b.type, "mouseup")) ? !0 : !c.curEditNode && (o ? o.apply(g, arguments) : !0)
    }
}(jQuery),
    !function (a) {
    if ("object" == typeof exports && "undefined" != typeof module)module.exports = a(); else if ("function" == typeof define && define.amd)define([], a); else {
        var b;
        "undefined" != typeof window ? b = window : "undefined" != typeof global ? b = global : "undefined" != typeof self && (b = self), b.io = a()
    }
}(function () {
    var a;
    return function b(a, c, d) {
        function e(g, h) {
            if (!c[g]) {
                if (!a[g]) {
                    var i = "function" == typeof require && require;
                    if (!h && i)return i(g, !0);
                    if (f)return f(g, !0);
                    throw new Error("Cannot find module '" + g + "'")
                }
                var j = c[g] = {exports: {}};
                a[g][0].call(j.exports, function (b) {
                    var c = a[g][1][b];
                    return e(c ? c : b)
                }, j, j.exports, b, a, c, d)
            }
            return c[g].exports
        }

        for (var f = "function" == typeof require && require, g = 0; g < d.length; g++)e(d[g]);
        return e
    }({
        1: [function (a, b) {
            b.exports = a("./lib/")
        }, {"./lib/": 2}],
        2: [function (a, b, c) {
            function d(a, b) {
                "object" == typeof a && (b = a, a = void 0), b = b || {};
                var c, d = e(a), f = d.source, j = d.id;
                return b.forceNew || b["force new connection"] || !1 === b.multiplex ? (h("ignoring socket cache for %s", f), c = g(f, b)) : (i[j] || (h("new io instance for %s", f), i[j] = g(f, b)), c = i[j]), c.socket(d.path)
            }

            var e = a("./url"), f = a("socket.io-parser"), g = a("./manager"), h = a("debug")("socket.io-client");
            b.exports = c = d;
            var i = c.managers = {};
            c.protocol = f.protocol, c.connect = d, c.Manager = a("./manager"), c.Socket = a("./socket")
        }, {"./manager": 3, "./socket": 5, "./url": 6, debug: 9, "socket.io-parser": 43}],
        3: [function (a, b) {
            function c(a, b) {
                return this instanceof c ? (a && "object" == typeof a && (b = a, a = void 0), b = b || {}, b.path = b.path || "/socket.io", this.nsps = {}, this.subs = [], this.opts = b, this.reconnection(b.reconnection !== !1), this.reconnectionAttempts(b.reconnectionAttempts || 1 / 0), this.reconnectionDelay(b.reconnectionDelay || 1e3), this.reconnectionDelayMax(b.reconnectionDelayMax || 5e3), this.timeout(null == b.timeout ? 2e4 : b.timeout), this.readyState = "closed", this.uri = a, this.connected = [], this.attempts = 0, this.encoding = !1, this.packetBuffer = [], this.encoder = new g.Encoder, this.decoder = new g.Decoder, this.autoConnect = b.autoConnect !== !1, void(this.autoConnect && this.open())) : new c(a, b)
            }

            var d = (a("./url"), a("engine.io-client")), e = a("./socket"), f = a("component-emitter"), g = a("socket.io-parser"), h = a("./on"), i = a("component-bind"), j = (a("object-component"), a("debug")("socket.io-client:manager")), k = a("indexof");
            b.exports = c, c.prototype.emitAll = function () {
                this.emit.apply(this, arguments);
                for (var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a], arguments)
            }, f(c.prototype), c.prototype.reconnection = function (a) {
                return arguments.length ? (this._reconnection = !!a, this) : this._reconnection
            }, c.prototype.reconnectionAttempts = function (a) {
                return arguments.length ? (this._reconnectionAttempts = a, this) : this._reconnectionAttempts
            }, c.prototype.reconnectionDelay = function (a) {
                return arguments.length ? (this._reconnectionDelay = a, this) : this._reconnectionDelay
            }, c.prototype.reconnectionDelayMax = function (a) {
                return arguments.length ? (this._reconnectionDelayMax = a, this) : this._reconnectionDelayMax
            }, c.prototype.timeout = function (a) {
                return arguments.length ? (this._timeout = a, this) : this._timeout
            }, c.prototype.maybeReconnectOnOpen = function () {
                this.openReconnect || this.reconnecting || !this._reconnection || 0 !== this.attempts || (this.openReconnect = !0, this.reconnect())
            }, c.prototype.open = c.prototype.connect = function (a) {
                if (j("readyState %s", this.readyState), ~this.readyState.indexOf("open"))return this;
                j("opening %s", this.uri), this.engine = d(this.uri, this.opts);
                var b = this.engine, c = this;
                this.readyState = "opening", this.skipReconnect = !1;
                var e = h(b, "open", function () {
                    c.onopen(), a && a()
                }), f = h(b, "error", function (b) {
                    if (j("connect_error"), c.cleanup(), c.readyState = "closed", c.emitAll("connect_error", b), a) {
                        var d = new Error("Connection error");
                        d.data = b, a(d)
                    }
                    c.maybeReconnectOnOpen()
                });
                if (!1 !== this._timeout) {
                    var g = this._timeout;
                    j("connect attempt will timeout after %d", g);
                    var i = setTimeout(function () {
                        j("connect attempt timed out after %d", g), e.destroy(), b.close(), b.emit("error", "timeout"), c.emitAll("connect_timeout", g)
                    }, g);
                    this.subs.push({
                        destroy: function () {
                            clearTimeout(i)
                        }
                    })
                }
                return this.subs.push(e), this.subs.push(f), this
            }, c.prototype.onopen = function () {
                j("open"), this.cleanup(), this.readyState = "open", this.emit("open");
                var a = this.engine;
                this.subs.push(h(a, "data", i(this, "ondata"))), this.subs.push(h(this.decoder, "decoded", i(this, "ondecoded"))), this.subs.push(h(a, "error", i(this, "onerror"))), this.subs.push(h(a, "close", i(this, "onclose")))
            }, c.prototype.ondata = function (a) {
                this.decoder.add(a)
            }, c.prototype.ondecoded = function (a) {
                this.emit("packet", a)
            }, c.prototype.onerror = function (a) {
                j("error", a), this.emitAll("error", a)
            }, c.prototype.socket = function (a) {
                var b = this.nsps[a];
                if (!b) {
                    b = new e(this, a), this.nsps[a] = b;
                    var c = this;
                    b.on("connect", function () {
                        ~k(c.connected, b) || c.connected.push(b)
                    })
                }
                return b
            }, c.prototype.destroy = function (a) {
                var b = k(this.connected, a);
                ~b && this.connected.splice(b, 1), this.connected.length || this.close()
            }, c.prototype.packet = function (a) {
                j("writing packet %j", a);
                var b = this;
                b.encoding ? b.packetBuffer.push(a) : (b.encoding = !0, this.encoder.encode(a, function (a) {
                    for (var c = 0; c < a.length; c++)b.engine.write(a[c]);
                    b.encoding = !1, b.processPacketQueue()
                }))
            }, c.prototype.processPacketQueue = function () {
                if (this.packetBuffer.length > 0 && !this.encoding) {
                    var a = this.packetBuffer.shift();
                    this.packet(a)
                }
            }, c.prototype.cleanup = function () {
                for (var a; a = this.subs.shift();)a.destroy();
                this.packetBuffer = [], this.encoding = !1, this.decoder.destroy()
            }, c.prototype.close = c.prototype.disconnect = function () {
                this.skipReconnect = !0, this.readyState = "closed", this.engine && this.engine.close()
            }, c.prototype.onclose = function (a) {
                j("close"), this.cleanup(), this.readyState = "closed", this.emit("close", a), this._reconnection && !this.skipReconnect && this.reconnect()
            }, c.prototype.reconnect = function () {
                if (this.reconnecting || this.skipReconnect)return this;
                var a = this;
                if (this.attempts++, this.attempts > this._reconnectionAttempts)j("reconnect failed"), this.emitAll("reconnect_failed"), this.reconnecting = !1; else {
                    var b = this.attempts * this.reconnectionDelay();
                    b = Math.min(b, this.reconnectionDelayMax()), j("will wait %dms before reconnect attempt", b), this.reconnecting = !0;
                    var c = setTimeout(function () {
                        a.skipReconnect || (j("attempting reconnect"), a.emitAll("reconnect_attempt", a.attempts), a.emitAll("reconnecting", a.attempts), a.skipReconnect || a.open(function (b) {
                            b ? (j("reconnect attempt error"), a.reconnecting = !1, a.reconnect(), a.emitAll("reconnect_error", b.data)) : (j("reconnect success"), a.onreconnect())
                        }))
                    }, b);
                    this.subs.push({
                        destroy: function () {
                            clearTimeout(c)
                        }
                    })
                }
            }, c.prototype.onreconnect = function () {
                var a = this.attempts;
                this.attempts = 0, this.reconnecting = !1, this.emitAll("reconnect", a)
            }
        }, {
            "./on": 4,
            "./socket": 5,
            "./url": 6,
            "component-bind": 7,
            "component-emitter": 8,
            debug: 9,
            "engine.io-client": 10,
            indexof: 39,
            "object-component": 40,
            "socket.io-parser": 43
        }],
        4: [function (a, b) {
            function c(a, b, c) {
                return a.on(b, c), {
                    destroy: function () {
                        a.removeListener(b, c)
                    }
                }
            }

            b.exports = c
        }, {}],
        5: [function (a, b, c) {
            function d(a, b) {
                this.io = a, this.nsp = b, this.json = this, this.ids = 0, this.acks = {}, this.io.autoConnect && this.open(), this.receiveBuffer = [], this.sendBuffer = [], this.connected = !1, this.disconnected = !0
            }

            var e = a("socket.io-parser"), f = a("component-emitter"), g = a("to-array"), h = a("./on"), i = a("component-bind"), j = a("debug")("socket.io-client:socket"), k = a("has-binary");
            b.exports = c = d;
            var l = {
                connect: 1,
                connect_error: 1,
                connect_timeout: 1,
                disconnect: 1,
                error: 1,
                reconnect: 1,
                reconnect_attempt: 1,
                reconnect_failed: 1,
                reconnect_error: 1,
                reconnecting: 1
            }, m = f.prototype.emit;
            f(d.prototype), d.prototype.subEvents = function () {
                if (!this.subs) {
                    var a = this.io;
                    this.subs = [h(a, "open", i(this, "onopen")), h(a, "packet", i(this, "onpacket")), h(a, "close", i(this, "onclose"))]
                }
            }, d.prototype.open = d.prototype.connect = function () {
                return this.connected ? this : (this.subEvents(), this.io.open(), "open" == this.io.readyState && this.onopen(), this)
            }, d.prototype.send = function () {
                var a = g(arguments);
                return a.unshift("message"), this.emit.apply(this, a), this
            }, d.prototype.emit = function (a) {
                if (l.hasOwnProperty(a))return m.apply(this, arguments), this;
                var b = g(arguments), c = e.EVENT;
                k(b) && (c = e.BINARY_EVENT);
                var d = {type: c, data: b};
                return "function" == typeof b[b.length - 1] && (j("emitting packet with ack id %d", this.ids), this.acks[this.ids] = b.pop(), d.id = this.ids++), this.connected ? this.packet(d) : this.sendBuffer.push(d), this
            }, d.prototype.packet = function (a) {
                a.nsp = this.nsp, this.io.packet(a)
            }, d.prototype.onopen = function () {
                j("transport is open - connecting"), "/" != this.nsp && this.packet({type: e.CONNECT})
            }, d.prototype.onclose = function (a) {
                j("close (%s)", a), this.connected = !1, this.disconnected = !0, this.emit("disconnect", a)
            }, d.prototype.onpacket = function (a) {
                if (a.nsp == this.nsp)switch (a.type) {
                    case e.CONNECT:
                        this.onconnect();
                        break;
                    case e.EVENT:
                        this.onevent(a);
                        break;
                    case e.BINARY_EVENT:
                        this.onevent(a);
                        break;
                    case e.ACK:
                        this.onack(a);
                        break;
                    case e.BINARY_ACK:
                        this.onack(a);
                        break;
                    case e.DISCONNECT:
                        this.ondisconnect();
                        break;
                    case e.ERROR:
                        this.emit("error", a.data)
                }
            }, d.prototype.onevent = function (a) {
                var b = a.data || [];
                j("emitting event %j", b), null != a.id && (j("attaching ack callback to event"), b.push(this.ack(a.id))), this.connected ? m.apply(this, b) : this.receiveBuffer.push(b)
            }, d.prototype.ack = function (a) {
                var b = this, c = !1;
                return function () {
                    if (!c) {
                        c = !0;
                        var d = g(arguments);
                        j("sending ack %j", d);
                        var f = k(d) ? e.BINARY_ACK : e.ACK;
                        b.packet({type: f, id: a, data: d})
                    }
                }
            }, d.prototype.onack = function (a) {
                j("calling ack %s with %j", a.id, a.data);
                var b = this.acks[a.id];
                b.apply(this, a.data), delete this.acks[a.id]
            }, d.prototype.onconnect = function () {
                this.connected = !0, this.disconnected = !1, this.emit("connect"), this.emitBuffered()
            }, d.prototype.emitBuffered = function () {
                var a;
                for (a = 0; a < this.receiveBuffer.length; a++)m.apply(this, this.receiveBuffer[a]);
                for (this.receiveBuffer = [], a = 0; a < this.sendBuffer.length; a++)this.packet(this.sendBuffer[a]);
                this.sendBuffer = []
            }, d.prototype.ondisconnect = function () {
                j("server disconnect (%s)", this.nsp), this.destroy(), this.onclose("io server disconnect")
            }, d.prototype.destroy = function () {
                if (this.subs) {
                    for (var a = 0; a < this.subs.length; a++)this.subs[a].destroy();
                    this.subs = null
                }
                this.io.destroy(this)
            }, d.prototype.close = d.prototype.disconnect = function () {
                return this.connected && (j("performing disconnect (%s)", this.nsp), this.packet({type: e.DISCONNECT})), this.destroy(), this.connected && this.onclose("io client disconnect"), this
            }
        }, {
            "./on": 4,
            "component-bind": 7,
            "component-emitter": 8,
            debug: 9,
            "has-binary": 35,
            "socket.io-parser": 43,
            "to-array": 47
        }],
        6: [function (a, b) {
            (function (c) {
                function d(a, b) {
                    var d = a, b = b || c.location;
                    return null == a && (a = b.protocol + "//" + b.hostname), "string" == typeof a && ("/" == a.charAt(0) && (a = "/" == a.charAt(1) ? b.protocol + a : b.hostname + a), /^(https?|wss?):\/\//.test(a) || (f("protocol-less url %s", a), a = "undefined" != typeof b ? b.protocol + "//" + a : "https://" + a), f("parse %s", a), d = e(a)), d.port || (/^(http|ws)$/.test(d.protocol) ? d.port = "80" : /^(http|ws)s$/.test(d.protocol) && (d.port = "443")), d.path = d.path || "/", d.id = d.protocol + "://" + d.host + ":" + d.port, d.href = d.protocol + "://" + d.host + (b && b.port == d.port ? "" : ":" + d.port), d
                }

                var e = a("parseuri"), f = a("debug")("socket.io-client:url");
                b.exports = d
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {debug: 9, parseuri: 41}],
        7: [function (a, b) {
            var c = [].slice;
            b.exports = function (a, b) {
                if ("string" == typeof b && (b = a[b]), "function" != typeof b)throw new Error("bind() requires a function");
                var d = c.call(arguments, 2);
                return function () {
                    return b.apply(a, d.concat(c.call(arguments)))
                }
            }
        }, {}],
        8: [function (a, b) {
            function c(a) {
                return a ? d(a) : void 0
            }

            function d(a) {
                for (var b in c.prototype)a[b] = c.prototype[b];
                return a
            }

            b.exports = c, c.prototype.on = c.prototype.addEventListener = function (a, b) {
                return this._callbacks = this._callbacks || {}, (this._callbacks[a] = this._callbacks[a] || []).push(b), this
            }, c.prototype.once = function (a, b) {
                function c() {
                    d.off(a, c), b.apply(this, arguments)
                }

                var d = this;
                return this._callbacks = this._callbacks || {}, c.fn = b, this.on(a, c), this
            }, c.prototype.off = c.prototype.removeListener = c.prototype.removeAllListeners = c.prototype.removeEventListener = function (a, b) {
                if (this._callbacks = this._callbacks || {}, 0 == arguments.length)return this._callbacks = {}, this;
                var c = this._callbacks[a];
                if (!c)return this;
                if (1 == arguments.length)return delete this._callbacks[a], this;
                for (var d, e = 0; e < c.length; e++)if (d = c[e], d === b || d.fn === b) {
                    c.splice(e, 1);
                    break
                }
                return this
            }, c.prototype.emit = function (a) {
                this._callbacks = this._callbacks || {};
                var b = [].slice.call(arguments, 1), c = this._callbacks[a];
                if (c) {
                    c = c.slice(0);
                    for (var d = 0, e = c.length; e > d; ++d)c[d].apply(this, b)
                }
                return this
            }, c.prototype.listeners = function (a) {
                return this._callbacks = this._callbacks || {}, this._callbacks[a] || []
            }, c.prototype.hasListeners = function (a) {
                return !!this.listeners(a).length
            }
        }, {}],
        9: [function (a, b) {
            function c(a) {
                return c.enabled(a) ? function (b) {
                    b = d(b);
                    var e = new Date, f = e - (c[a] || e);
                    c[a] = e, b = a + " " + b + " +" + c.humanize(f), window.console && console.log && Function.prototype.apply.call(console.log, console, arguments)
                } : function () {
                }
            }

            function d(a) {
                return a instanceof Error ? a.stack || a.message : a
            }

            b.exports = c, c.names = [], c.skips = [], c.enable = function (a) {
                try {
                    localStorage.debug = a
                } catch (b) {
                }
                for (var d = (a || "").split(/[\s,]+/), e = d.length, f = 0; e > f; f++)a = d[f].replace("*", ".*?"), "-" === a[0] ? c.skips.push(new RegExp("^" + a.substr(1) + "$")) : c.names.push(new RegExp("^" + a + "$"))
            }, c.disable = function () {
                c.enable("")
            }, c.humanize = function (a) {
                var b = 1e3, c = 6e4, d = 60 * c;
                return a >= d ? (a / d).toFixed(1) + "h" : a >= c ? (a / c).toFixed(1) + "m" : a >= b ? (a / b | 0) + "s" : a + "ms"
            }, c.enabled = function (a) {
                for (var b = 0, d = c.skips.length; d > b; b++)if (c.skips[b].test(a))return !1;
                for (var b = 0, d = c.names.length; d > b; b++)if (c.names[b].test(a))return !0;
                return !1
            };
            try {
                window.localStorage && c.enable(localStorage.debug)
            } catch (e) {
            }
        }, {}],
        10: [function (a, b) {
            b.exports = a("./lib/")
        }, {"./lib/": 11}],
        11: [function (a, b) {
            b.exports = a("./socket"), b.exports.parser = a("engine.io-parser")
        }, {"./socket": 12, "engine.io-parser": 24}],
        12: [function (a, b) {
            (function (c) {
                function d(a, b) {
                    if (!(this instanceof d))return new d(a, b);
                    if (b = b || {}, a && "object" == typeof a && (b = a, a = null), a && (a = k(a), b.host = a.host, b.secure = "https" == a.protocol || "wss" == a.protocol, b.port = a.port, a.query && (b.query = a.query)), this.secure = null != b.secure ? b.secure : c.location && "https:" == location.protocol, b.host) {
                        var e = b.host.split(":");
                        b.hostname = e.shift(), e.length && (b.port = e.pop())
                    }
                    this.agent = b.agent || !1, this.hostname = b.hostname || (c.location ? location.hostname : "localhost"), this.port = b.port || (c.location && location.port ? location.port : this.secure ? 443 : 80), this.query = b.query || {}, "string" == typeof this.query && (this.query = m.decode(this.query)), this.upgrade = !1 !== b.upgrade, this.path = (b.path || "/engine.io").replace(/\/$/, "") + "/", this.forceJSONP = !!b.forceJSONP, this.jsonp = !1 !== b.jsonp, this.forceBase64 = !!b.forceBase64, this.enablesXDR = !!b.enablesXDR, this.timestampParam = b.timestampParam || "t", this.timestampRequests = b.timestampRequests, this.transports = b.transports || ["polling", "websocket"], this.readyState = "", this.writeBuffer = [], this.callbackBuffer = [], this.policyPort = b.policyPort || 843, this.rememberUpgrade = b.rememberUpgrade || !1, this.open(), this.binaryType = null, this.onlyBinaryUpgrades = b.onlyBinaryUpgrades
                }

                function e(a) {
                    var b = {};
                    for (var c in a)a.hasOwnProperty(c) && (b[c] = a[c]);
                    return b
                }

                var f = a("./transports"), g = a("component-emitter"), h = a("debug")("engine.io-client:socket"), i = a("indexof"), j = a("engine.io-parser"), k = a("parseuri"), l = a("parsejson"), m = a("parseqs");
                b.exports = d, d.priorWebsocketSuccess = !1, g(d.prototype), d.protocol = j.protocol, d.Socket = d, d.Transport = a("./transport"), d.transports = a("./transports"), d.parser = a("engine.io-parser"), d.prototype.createTransport = function (a) {
                    h('creating transport "%s"', a);
                    var b = e(this.query);
                    b.EIO = j.protocol, b.transport = a, this.id && (b.sid = this.id);
                    var c = new f[a]({
                        agent: this.agent,
                        hostname: this.hostname,
                        port: this.port,
                        secure: this.secure,
                        path: this.path,
                        query: b,
                        forceJSONP: this.forceJSONP,
                        jsonp: this.jsonp,
                        forceBase64: this.forceBase64,
                        enablesXDR: this.enablesXDR,
                        timestampRequests: this.timestampRequests,
                        timestampParam: this.timestampParam,
                        policyPort: this.policyPort,
                        socket: this
                    });
                    return c
                }, d.prototype.open = function () {
                    var a;
                    if (this.rememberUpgrade && d.priorWebsocketSuccess && -1 != this.transports.indexOf("websocket"))a = "websocket"; else {
                        if (0 == this.transports.length) {
                            var b = this;
                            return void setTimeout(function () {
                                b.emit("error", "No transports available")
                            }, 0)
                        }
                        a = this.transports[0]
                    }
                    this.readyState = "opening";
                    var a;
                    try {
                        a = this.createTransport(a)
                    } catch (c) {
                        return this.transports.shift(), void this.open()
                    }
                    a.open(), this.setTransport(a)
                }, d.prototype.setTransport = function (a) {
                    h("setting transport %s", a.name);
                    var b = this;
                    this.transport && (h("clearing existing transport %s", this.transport.name), this.transport.removeAllListeners()), this.transport = a, a.on("drain", function () {
                        b.onDrain()
                    }).on("packet", function (a) {
                        b.onPacket(a)
                    }).on("error", function (a) {
                        b.onError(a)
                    }).on("close", function () {
                        b.onClose("transport close")
                    })
                }, d.prototype.probe = function (a) {
                    function b() {
                        if (m.onlyBinaryUpgrades) {
                            var b = !this.supportsBinary && m.transport.supportsBinary;
                            l = l || b
                        }
                        l || (h('probe transport "%s" opened', a), k.send([{
                            type: "ping",
                            data: "probe"
                        }]), k.once("packet", function (b) {
                            if (!l)if ("pong" == b.type && "probe" == b.data) {
                                if (h('probe transport "%s" pong', a), m.upgrading = !0, m.emit("upgrading", k), !k)return;
                                d.priorWebsocketSuccess = "websocket" == k.name, h('pausing current transport "%s"', m.transport.name), m.transport.pause(function () {
                                    l || "closed" != m.readyState && (h("changing transport and sending upgrade packet"), j(), m.setTransport(k), k.send([{type: "upgrade"}]), m.emit("upgrade", k), k = null, m.upgrading = !1, m.flush())
                                })
                            } else {
                                h('probe transport "%s" failed', a);
                                var c = new Error("probe error");
                                c.transport = k.name, m.emit("upgradeError", c)
                            }
                        }))
                    }

                    function c() {
                        l || (l = !0, j(), k.close(), k = null)
                    }

                    function e(b) {
                        var d = new Error("probe error: " + b);
                        d.transport = k.name, c(), h('probe transport "%s" failed because of error: %s', a, b), m.emit("upgradeError", d)
                    }

                    function f() {
                        e("transport closed")
                    }

                    function g() {
                        e("socket closed")
                    }

                    function i(a) {
                        k && a.name != k.name && (h('"%s" works - aborting "%s"', a.name, k.name), c())
                    }

                    function j() {
                        k.removeListener("open", b), k.removeListener("error", e), k.removeListener("close", f), m.removeListener("close", g), m.removeListener("upgrading", i)
                    }

                    h('probing transport "%s"', a);
                    var k = this.createTransport(a, {probe: 1}), l = !1, m = this;
                    d.priorWebsocketSuccess = !1, k.once("open", b), k.once("error", e), k.once("close", f), this.once("close", g), this.once("upgrading", i), k.open()
                }, d.prototype.onOpen = function () {
                    if (h("socket open"), this.readyState = "open", d.priorWebsocketSuccess = "websocket" == this.transport.name, this.emit("open"), this.flush(), "open" == this.readyState && this.upgrade && this.transport.pause) {
                        h("starting upgrade probes");
                        for (var a = 0, b = this.upgrades.length; b > a; a++)this.probe(this.upgrades[a])
                    }
                }, d.prototype.onPacket = function (a) {
                    if ("opening" == this.readyState || "open" == this.readyState)switch (h('socket receive: type "%s", data "%s"', a.type, a.data), this.emit("packet", a), this.emit("heartbeat"), a.type) {
                        case"open":
                            this.onHandshake(l(a.data));
                            break;
                        case"pong":
                            this.setPing();
                            break;
                        case"error":
                            var b = new Error("server error");
                            b.code = a.data, this.emit("error", b);
                            break;
                        case"message":
                            this.emit("data", a.data), this.emit("message", a.data)
                    } else h('packet received with socket readyState "%s"', this.readyState)
                }, d.prototype.onHandshake = function (a) {
                    this.emit("handshake", a), this.id = a.sid, this.transport.query.sid = a.sid, this.upgrades = this.filterUpgrades(a.upgrades), this.pingInterval = a.pingInterval, this.pingTimeout = a.pingTimeout, this.onOpen(), "closed" != this.readyState && (this.setPing(), this.removeListener("heartbeat", this.onHeartbeat), this.on("heartbeat", this.onHeartbeat))
                }, d.prototype.onHeartbeat = function (a) {
                    clearTimeout(this.pingTimeoutTimer);
                    var b = this;
                    b.pingTimeoutTimer = setTimeout(function () {
                        "closed" != b.readyState && b.onClose("ping timeout")
                    }, a || b.pingInterval + b.pingTimeout)
                }, d.prototype.setPing = function () {
                    var a = this;
                    clearTimeout(a.pingIntervalTimer), a.pingIntervalTimer = setTimeout(function () {
                        h("writing ping packet - expecting pong within %sms", a.pingTimeout), a.ping(), a.onHeartbeat(a.pingTimeout)
                    }, a.pingInterval)
                }, d.prototype.ping = function () {
                    this.sendPacket("ping")
                }, d.prototype.onDrain = function () {
                    for (var a = 0; a < this.prevBufferLen; a++)this.callbackBuffer[a] && this.callbackBuffer[a]();
                    this.writeBuffer.splice(0, this.prevBufferLen), this.callbackBuffer.splice(0, this.prevBufferLen), this.prevBufferLen = 0, 0 == this.writeBuffer.length ? this.emit("drain") : this.flush()
                }, d.prototype.flush = function () {
                    "closed" != this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length && (h("flushing %d packets in socket", this.writeBuffer.length), this.transport.send(this.writeBuffer), this.prevBufferLen = this.writeBuffer.length, this.emit("flush"))
                }, d.prototype.write = d.prototype.send = function (a, b) {
                    return this.sendPacket("message", a, b), this
                }, d.prototype.sendPacket = function (a, b, c) {
                    if ("closing" != this.readyState && "closed" != this.readyState) {
                        var d = {type: a, data: b};
                        this.emit("packetCreate", d), this.writeBuffer.push(d), this.callbackBuffer.push(c), this.flush()
                    }
                }, d.prototype.close = function () {
                    function a() {
                        d.onClose("forced close"), h("socket closing - telling transport to close"), d.transport.close()
                    }

                    function b() {
                        d.removeListener("upgrade", b), d.removeListener("upgradeError", b), a()
                    }

                    function c() {
                        d.once("upgrade", b), d.once("upgradeError", b)
                    }

                    if ("opening" == this.readyState || "open" == this.readyState) {
                        this.readyState = "closing";
                        var d = this;
                        this.writeBuffer.length ? this.once("drain", function () {
                            this.upgrading ? c() : a()
                        }) : this.upgrading ? c() : a()
                    }
                    return this
                }, d.prototype.onError = function (a) {
                    h("socket error %j", a), d.priorWebsocketSuccess = !1, this.emit("error", a), this.onClose("transport error", a)
                }, d.prototype.onClose = function (a, b) {
                    if ("opening" == this.readyState || "open" == this.readyState || "closing" == this.readyState) {
                        h('socket close with reason: "%s"', a);
                        var c = this;
                        clearTimeout(this.pingIntervalTimer), clearTimeout(this.pingTimeoutTimer), setTimeout(function () {
                            c.writeBuffer = [], c.callbackBuffer = [], c.prevBufferLen = 0
                        }, 0), this.transport.removeAllListeners("close"), this.transport.close(), this.transport.removeAllListeners(), this.readyState = "closed", this.id = null, this.emit("close", a, b)
                    }
                }, d.prototype.filterUpgrades = function (a) {
                    for (var b = [], c = 0, d = a.length; d > c; c++)~i(this.transports, a[c]) && b.push(a[c]);
                    return b
                }
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {
            "./transport": 13,
            "./transports": 14,
            "component-emitter": 8,
            debug: 21,
            "engine.io-parser": 24,
            indexof: 39,
            parsejson: 31,
            parseqs: 32,
            parseuri: 33
        }],
        13: [function (a, b) {
            function c(a) {
                this.path = a.path, this.hostname = a.hostname, this.port = a.port, this.secure = a.secure, this.query = a.query, this.timestampParam = a.timestampParam, this.timestampRequests = a.timestampRequests, this.readyState = "", this.agent = a.agent || !1, this.socket = a.socket, this.enablesXDR = a.enablesXDR
            }

            var d = a("engine.io-parser"), e = a("component-emitter");
            b.exports = c, e(c.prototype), c.timestamps = 0, c.prototype.onError = function (a, b) {
                var c = new Error(a);
                return c.type = "TransportError", c.description = b, this.emit("error", c), this
            }, c.prototype.open = function () {
                return ("closed" == this.readyState || "" == this.readyState) && (this.readyState = "opening", this.doOpen()), this
            }, c.prototype.close = function () {
                return ("opening" == this.readyState || "open" == this.readyState) && (this.doClose(), this.onClose()), this
            }, c.prototype.send = function (a) {
                if ("open" != this.readyState)throw new Error("Transport not open");
                this.write(a)
            }, c.prototype.onOpen = function () {
                this.readyState = "open", this.writable = !0, this.emit("open")
            }, c.prototype.onData = function (a) {
                var b = d.decodePacket(a, this.socket.binaryType);
                this.onPacket(b)
            }, c.prototype.onPacket = function (a) {
                this.emit("packet", a)
            }, c.prototype.onClose = function () {
                this.readyState = "closed", this.emit("close")
            }
        }, {"component-emitter": 8, "engine.io-parser": 24}],
        14: [function (a, b, c) {
            (function (b) {
                function d(a) {
                    var c, d = !1, h = !1, i = !1 !== a.jsonp;
                    if (b.location) {
                        var j = "https:" == location.protocol, k = location.port;
                        k || (k = j ? 443 : 80), d = a.hostname != location.hostname || k != a.port, h = a.secure != j
                    }
                    if (a.xdomain = d, a.xscheme = h, c = new e(a), "open"in c && !a.forceJSONP)return new f(a);
                    if (!i)throw new Error("JSONP disabled");
                    return new g(a)
                }

                var e = a("xmlhttprequest"), f = a("./polling-xhr"), g = a("./polling-jsonp"), h = a("./websocket");
                c.polling = d, c.websocket = h
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {"./polling-jsonp": 15, "./polling-xhr": 16, "./websocket": 18, xmlhttprequest: 19}],
        15: [function (a, b) {
            (function (c) {
                function d() {
                }

                function e(a) {
                    f.call(this, a), this.query = this.query || {}, h || (c.___eio || (c.___eio = []), h = c.___eio), this.index = h.length;
                    var b = this;
                    h.push(function (a) {
                        b.onData(a)
                    }), this.query.j = this.index, c.document && c.addEventListener && c.addEventListener("beforeunload", function () {
                        b.script && (b.script.onerror = d)
                    }, !1)
                }

                var f = a("./polling"), g = a("component-inherit");
                b.exports = e;
                var h, i = /\n/g, j = /\\n/g;
                g(e, f), e.prototype.supportsBinary = !1, e.prototype.doClose = function () {
                    this.script && (this.script.parentNode.removeChild(this.script), this.script = null), this.form && (this.form.parentNode.removeChild(this.form), this.form = null, this.iframe = null), f.prototype.doClose.call(this)
                }, e.prototype.doPoll = function () {
                    var a = this, b = document.createElement("script");
                    this.script && (this.script.parentNode.removeChild(this.script), this.script = null), b.async = !0, b.src = this.uri(),
                        b.onerror = function (b) {
                            a.onError("jsonp poll error", b)
                        };
                    var c = document.getElementsByTagName("script")[0];
                    c.parentNode.insertBefore(b, c), this.script = b;
                    var d = "undefined" != typeof navigator && /gecko/i.test(navigator.userAgent);
                    d && setTimeout(function () {
                        var a = document.createElement("iframe");
                        document.body.appendChild(a), document.body.removeChild(a)
                    }, 100)
                }, e.prototype.doWrite = function (a, b) {
                    function c() {
                        d(), b()
                    }

                    function d() {
                        if (e.iframe)try {
                            e.form.removeChild(e.iframe)
                        } catch (a) {
                            e.onError("jsonp polling iframe removal error", a)
                        }
                        try {
                            var b = '<iframe src="javascript:0" name="' + e.iframeId + '">';
                            f = document.createElement(b)
                        } catch (a) {
                            f = document.createElement("iframe"), f.name = e.iframeId, f.src = "javascript:0"
                        }
                        f.id = e.iframeId, e.form.appendChild(f), e.iframe = f
                    }

                    var e = this;
                    if (!this.form) {
                        var f, g = document.createElement("form"), h = document.createElement("textarea"), k = this.iframeId = "eio_iframe_" + this.index;
                        g.className = "socketio", g.style.position = "absolute", g.style.top = "-1000px", g.style.left = "-1000px", g.target = k, g.method = "POST", g.setAttribute("accept-charset", "utf-8"), h.name = "d", g.appendChild(h), document.body.appendChild(g), this.form = g, this.area = h
                    }
                    this.form.action = this.uri(), d(), a = a.replace(j, "\\\n"), this.area.value = a.replace(i, "\\n");
                    try {
                        this.form.submit()
                    } catch (l) {
                    }
                    this.iframe.attachEvent ? this.iframe.onreadystatechange = function () {
                        "complete" == e.iframe.readyState && c()
                    } : this.iframe.onload = c
                }
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {"./polling": 17, "component-inherit": 20}],
        16: [function (a, b) {
            (function (c) {
                function d() {
                }

                function e(a) {
                    if (i.call(this, a), c.location) {
                        var b = "https:" == location.protocol, d = location.port;
                        d || (d = b ? 443 : 80), this.xd = a.hostname != c.location.hostname || d != a.port, this.xs = a.secure != b
                    }
                }

                function f(a) {
                    this.method = a.method || "GET", this.uri = a.uri, this.xd = !!a.xd, this.xs = !!a.xs, this.async = !1 !== a.async, this.data = void 0 != a.data ? a.data : null, this.agent = a.agent, this.isBinary = a.isBinary, this.supportsBinary = a.supportsBinary, this.enablesXDR = a.enablesXDR, this.create()
                }

                function g() {
                    for (var a in f.requests)f.requests.hasOwnProperty(a) && f.requests[a].abort()
                }

                var h = a("xmlhttprequest"), i = a("./polling"), j = a("component-emitter"), k = a("component-inherit"), l = a("debug")("engine.io-client:polling-xhr");
                b.exports = e, b.exports.Request = f, k(e, i), e.prototype.supportsBinary = !0, e.prototype.request = function (a) {
                    return a = a || {}, a.uri = this.uri(), a.xd = this.xd, a.xs = this.xs, a.agent = this.agent || !1, a.supportsBinary = this.supportsBinary, a.enablesXDR = this.enablesXDR, new f(a)
                }, e.prototype.doWrite = function (a, b) {
                    var c = "string" != typeof a && void 0 !== a, d = this.request({
                        method: "POST",
                        data: a,
                        isBinary: c
                    }), e = this;
                    d.on("success", b), d.on("error", function (a) {
                        e.onError("xhr post error", a)
                    }), this.sendXhr = d
                }, e.prototype.doPoll = function () {
                    l("xhr poll");
                    var a = this.request(), b = this;
                    a.on("data", function (a) {
                        b.onData(a)
                    }), a.on("error", function (a) {
                        b.onError("xhr poll error", a)
                    }), this.pollXhr = a
                }, j(f.prototype), f.prototype.create = function () {
                    var a = this.xhr = new h({
                        agent: this.agent,
                        xdomain: this.xd,
                        xscheme: this.xs,
                        enablesXDR: this.enablesXDR
                    }), b = this;
                    try {
                        if (l("xhr open %s: %s", this.method, this.uri), a.open(this.method, this.uri, this.async), this.supportsBinary && (a.responseType = "arraybuffer"), "POST" == this.method)try {
                            this.isBinary ? a.setRequestHeader("Content-type", "application/octet-stream") : a.setRequestHeader("Content-type", "text/plain;charset=UTF-8")
                        } catch (d) {
                        }
                        "withCredentials"in a && (a.withCredentials = !0), this.hasXDR() ? (a.onload = function () {
                            b.onLoad()
                        }, a.onerror = function () {
                            b.onError(a.responseText)
                        }) : a.onreadystatechange = function () {
                            4 == a.readyState && (200 == a.status || 1223 == a.status ? b.onLoad() : setTimeout(function () {
                                b.onError(a.status)
                            }, 0))
                        }, l("xhr data %s", this.data), a.send(this.data)
                    } catch (d) {
                        return void setTimeout(function () {
                            b.onError(d)
                        }, 0)
                    }
                    c.document && (this.index = f.requestsCount++, f.requests[this.index] = this)
                }, f.prototype.onSuccess = function () {
                    this.emit("success"), this.cleanup()
                }, f.prototype.onData = function (a) {
                    this.emit("data", a), this.onSuccess()
                }, f.prototype.onError = function (a) {
                    this.emit("error", a), this.cleanup()
                }, f.prototype.cleanup = function () {
                    if ("undefined" != typeof this.xhr && null !== this.xhr) {
                        this.hasXDR() ? this.xhr.onload = this.xhr.onerror = d : this.xhr.onreadystatechange = d;
                        try {
                            this.xhr.abort()
                        } catch (a) {
                        }
                        c.document && delete f.requests[this.index], this.xhr = null
                    }
                }, f.prototype.onLoad = function () {
                    var a;
                    try {
                        var b;
                        try {
                            b = this.xhr.getResponseHeader("Content-Type").split(";")[0]
                        } catch (c) {
                        }
                        a = "application/octet-stream" === b ? this.xhr.response : this.supportsBinary ? "ok" : this.xhr.responseText
                    } catch (c) {
                        this.onError(c)
                    }
                    null != a && this.onData(a)
                }, f.prototype.hasXDR = function () {
                    return "undefined" != typeof c.XDomainRequest && !this.xs && this.enablesXDR
                }, f.prototype.abort = function () {
                    this.cleanup()
                }, c.document && (f.requestsCount = 0, f.requests = {}, c.attachEvent ? c.attachEvent("onunload", g) : c.addEventListener && c.addEventListener("beforeunload", g, !1))
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {"./polling": 17, "component-emitter": 8, "component-inherit": 20, debug: 21, xmlhttprequest: 19}],
        17: [function (a, b) {
            function c(a) {
                var b = a && a.forceBase64;
                (!i || b) && (this.supportsBinary = !1), d.call(this, a)
            }

            var d = a("../transport"), e = a("parseqs"), f = a("engine.io-parser"), g = a("component-inherit"), h = a("debug")("engine.io-client:polling");
            b.exports = c;
            var i = function () {
                var b = a("xmlhttprequest"), c = new b({xdomain: !1});
                return null != c.responseType
            }();
            g(c, d), c.prototype.name = "polling", c.prototype.doOpen = function () {
                this.poll()
            }, c.prototype.pause = function (a) {
                function b() {
                    h("paused"), c.readyState = "paused", a()
                }

                var c = this;
                if (this.readyState = "pausing", this.polling || !this.writable) {
                    var d = 0;
                    this.polling && (h("we are currently polling - waiting to pause"), d++, this.once("pollComplete", function () {
                        h("pre-pause polling complete"), --d || b()
                    })), this.writable || (h("we are currently writing - waiting to pause"), d++, this.once("drain", function () {
                        h("pre-pause writing complete"), --d || b()
                    }))
                } else b()
            }, c.prototype.poll = function () {
                h("polling"), this.polling = !0, this.doPoll(), this.emit("poll")
            }, c.prototype.onData = function (a) {
                var b = this;
                h("polling got data %s", a);
                var c = function (a) {
                    return "opening" == b.readyState && b.onOpen(), "close" == a.type ? (b.onClose(), !1) : void b.onPacket(a)
                };
                f.decodePayload(a, this.socket.binaryType, c), "closed" != this.readyState && (this.polling = !1, this.emit("pollComplete"), "open" == this.readyState ? this.poll() : h('ignoring poll - transport state "%s"', this.readyState))
            }, c.prototype.doClose = function () {
                function a() {
                    h("writing close packet"), b.write([{type: "close"}])
                }

                var b = this;
                "open" == this.readyState ? (h("transport open - closing"), a()) : (h("transport not open - deferring close"), this.once("open", a))
            }, c.prototype.write = function (a) {
                var b = this;
                this.writable = !1;
                var c = function () {
                    b.writable = !0, b.emit("drain")
                }, b = this;
                f.encodePayload(a, this.supportsBinary, function (a) {
                    b.doWrite(a, c)
                })
            }, c.prototype.uri = function () {
                var a = this.query || {}, b = this.secure ? "https" : "http", c = "";
                return !1 !== this.timestampRequests && (a[this.timestampParam] = +new Date + "-" + d.timestamps++), this.supportsBinary || a.sid || (a.b64 = 1), a = e.encode(a), this.port && ("https" == b && 443 != this.port || "http" == b && 80 != this.port) && (c = ":" + this.port), a.length && (a = "?" + a), b + "://" + this.hostname + c + this.path + a
            }
        }, {
            "../transport": 13,
            "component-inherit": 20,
            debug: 21,
            "engine.io-parser": 24,
            parseqs: 32,
            xmlhttprequest: 19
        }],
        18: [function (a, b) {
            function c(a) {
                var b = a && a.forceBase64;
                b && (this.supportsBinary = !1), d.call(this, a)
            }

            var d = a("../transport"), e = a("engine.io-parser"), f = a("parseqs"), g = a("component-inherit"), h = a("debug")("engine.io-client:websocket"), i = a("ws");
            b.exports = c, g(c, d), c.prototype.name = "websocket", c.prototype.supportsBinary = !0, c.prototype.doOpen = function () {
                if (this.check()) {
                    var a = this.uri(), b = void 0, c = {agent: this.agent};
                    this.ws = new i(a, b, c), void 0 === this.ws.binaryType && (this.supportsBinary = !1), this.ws.binaryType = "arraybuffer", this.addEventListeners()
                }
            }, c.prototype.addEventListeners = function () {
                var a = this;
                this.ws.onopen = function () {
                    a.onOpen()
                }, this.ws.onclose = function () {
                    a.onClose()
                }, this.ws.onmessage = function (b) {
                    a.onData(b.data)
                }, this.ws.onerror = function (b) {
                    a.onError("websocket error", b)
                }
            }, "undefined" != typeof navigator && /iPad|iPhone|iPod/i.test(navigator.userAgent) && (c.prototype.onData = function (a) {
                var b = this;
                setTimeout(function () {
                    d.prototype.onData.call(b, a)
                }, 0)
            }), c.prototype.write = function (a) {
                function b() {
                    c.writable = !0, c.emit("drain")
                }

                var c = this;
                this.writable = !1;
                for (var d = 0, f = a.length; f > d; d++)e.encodePacket(a[d], this.supportsBinary, function (a) {
                    try {
                        c.ws.send(a)
                    } catch (b) {
                        h("websocket closed before onclose event")
                    }
                });
                setTimeout(b, 0)
            }, c.prototype.onClose = function () {
                d.prototype.onClose.call(this)
            }, c.prototype.doClose = function () {
                "undefined" != typeof this.ws && this.ws.close()
            }, c.prototype.uri = function () {
                var a = this.query || {}, b = this.secure ? "wss" : "ws", c = "";
                return this.port && ("wss" == b && 443 != this.port || "ws" == b && 80 != this.port) && (c = ":" + this.port), this.timestampRequests && (a[this.timestampParam] = +new Date), this.supportsBinary || (a.b64 = 1), a = f.encode(a), a.length && (a = "?" + a), b + "://" + this.hostname + c + this.path + a
            }, c.prototype.check = function () {
                return !(!i || "__initialize"in i && this.name === c.prototype.name)
            }
        }, {"../transport": 13, "component-inherit": 20, debug: 21, "engine.io-parser": 24, parseqs: 32, ws: 34}],
        19: [function (a, b) {
            var c = a("has-cors");
            b.exports = function (a) {
                var b = a.xdomain, d = a.xscheme, e = a.enablesXDR;
                try {
                    if ("undefined" != typeof XMLHttpRequest && (!b || c))return new XMLHttpRequest
                } catch (f) {
                }
                try {
                    if ("undefined" != typeof XDomainRequest && !d && e)return new XDomainRequest
                } catch (f) {
                }
                if (!b)try {
                    return new ActiveXObject("Microsoft.XMLHTTP")
                } catch (f) {
                }
            }
        }, {"has-cors": 37}],
        20: [function (a, b) {
            b.exports = function (a, b) {
                var c = function () {
                };
                c.prototype = b.prototype, a.prototype = new c, a.prototype.constructor = a
            }
        }, {}],
        21: [function (a, b, c) {
            function d() {
                return "WebkitAppearance"in document.documentElement.style || window.console && (console.firebug || console.exception && console.table) || navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31
            }

            function e() {
                var a = arguments, b = this.useColors;
                if (a[0] = (b ? "%c" : "") + this.namespace + (b ? " %c" : " ") + a[0] + (b ? "%c " : " ") + "+" + c.humanize(this.diff), !b)return a;
                var d = "color: " + this.color;
                a = [a[0], d, "color: inherit"].concat(Array.prototype.slice.call(a, 1));
                var e = 0, f = 0;
                return a[0].replace(/%[a-z%]/g, function (a) {
                    "%" !== a && (e++, "%c" === a && (f = e))
                }), a.splice(f, 0, d), a
            }

            function f() {
                return "object" == typeof console && "function" == typeof console.log && Function.prototype.apply.call(console.log, console, arguments)
            }

            function g(a) {
                try {
                    null == a ? localStorage.removeItem("debug") : localStorage.debug = a
                } catch (b) {
                }
            }

            function h() {
                var a;
                try {
                    a = localStorage.debug
                } catch (b) {
                }
                return a
            }

            c = b.exports = a("./debug"), c.log = f, c.formatArgs = e, c.save = g, c.load = h, c.useColors = d, c.colors = ["lightseagreen", "forestgreen", "goldenrod", "dodgerblue", "darkorchid", "crimson"], c.formatters.j = function (a) {
                return JSON.stringify(a)
            }, c.enable(h())
        }, {"./debug": 22}],
        22: [function (a, b, c) {
            function d() {
                return c.colors[k++ % c.colors.length]
            }

            function e(a) {
                function b() {
                }

                function e() {
                    var a = e, b = +new Date, f = b - (j || b);
                    a.diff = f, a.prev = j, a.curr = b, j = b, null == a.useColors && (a.useColors = c.useColors()), null == a.color && a.useColors && (a.color = d());
                    var g = Array.prototype.slice.call(arguments);
                    g[0] = c.coerce(g[0]), "string" != typeof g[0] && (g = ["%o"].concat(g));
                    var h = 0;
                    g[0] = g[0].replace(/%([a-z%])/g, function (b, d) {
                        if ("%" === b)return b;
                        h++;
                        var e = c.formatters[d];
                        if ("function" == typeof e) {
                            var f = g[h];
                            b = e.call(a, f), g.splice(h, 1), h--
                        }
                        return b
                    }), "function" == typeof c.formatArgs && (g = c.formatArgs.apply(a, g));
                    var i = e.log || c.log || console.log.bind(console);
                    i.apply(a, g)
                }

                b.enabled = !1, e.enabled = !0;
                var f = c.enabled(a) ? e : b;
                return f.namespace = a, f
            }

            function f(a) {
                c.save(a);
                for (var b = (a || "").split(/[\s,]+/), d = b.length, e = 0; d > e; e++)b[e] && (a = b[e].replace(/\*/g, ".*?"), "-" === a[0] ? c.skips.push(new RegExp("^" + a.substr(1) + "$")) : c.names.push(new RegExp("^" + a + "$")))
            }

            function g() {
                c.enable("")
            }

            function h(a) {
                var b, d;
                for (b = 0, d = c.skips.length; d > b; b++)if (c.skips[b].test(a))return !1;
                for (b = 0, d = c.names.length; d > b; b++)if (c.names[b].test(a))return !0;
                return !1
            }

            function i(a) {
                return a instanceof Error ? a.stack || a.message : a
            }

            c = b.exports = e, c.coerce = i, c.disable = g, c.enable = f, c.enabled = h, c.humanize = a("ms"), c.names = [], c.skips = [], c.formatters = {};
            var j, k = 0
        }, {ms: 23}],
        23: [function (a, b) {
            function c(a) {
                var b = /^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a);
                if (b) {
                    var c = parseFloat(b[1]), d = (b[2] || "ms").toLowerCase();
                    switch (d) {
                        case"years":
                        case"year":
                        case"y":
                            return c * k;
                        case"days":
                        case"day":
                        case"d":
                            return c * j;
                        case"hours":
                        case"hour":
                        case"h":
                            return c * i;
                        case"minutes":
                        case"minute":
                        case"m":
                            return c * h;
                        case"seconds":
                        case"second":
                        case"s":
                            return c * g;
                        case"ms":
                            return c
                    }
                }
            }

            function d(a) {
                return a >= j ? Math.round(a / j) + "d" : a >= i ? Math.round(a / i) + "h" : a >= h ? Math.round(a / h) + "m" : a >= g ? Math.round(a / g) + "s" : a + "ms"
            }

            function e(a) {
                return f(a, j, "day") || f(a, i, "hour") || f(a, h, "minute") || f(a, g, "second") || a + " ms"
            }

            function f(a, b, c) {
                return b > a ? void 0 : 1.5 * b > a ? Math.floor(a / b) + " " + c : Math.ceil(a / b) + " " + c + "s"
            }

            var g = 1e3, h = 60 * g, i = 60 * h, j = 24 * i, k = 365.25 * j;
            b.exports = function (a, b) {
                return b = b || {}, "string" == typeof a ? c(a) : b["long"] ? e(a) : d(a)
            }
        }, {}],
        24: [function (a, b, c) {
            (function (b) {
                function d(a, b, d) {
                    if (!b)return c.encodeBase64Packet(a, d);
                    var e = a.data, f = new Uint8Array(e), g = new Uint8Array(1 + e.byteLength);
                    g[0] = n[a.type];
                    for (var h = 0; h < f.length; h++)g[h + 1] = f[h];
                    return d(g.buffer)
                }

                function e(a, b, d) {
                    if (!b)return c.encodeBase64Packet(a, d);
                    var e = new FileReader;
                    return e.onload = function () {
                        a.data = e.result, c.encodePacket(a, b, !0, d)
                    }, e.readAsArrayBuffer(a.data)
                }

                function f(a, b, d) {
                    if (!b)return c.encodeBase64Packet(a, d);
                    if (m)return e(a, b, d);
                    var f = new Uint8Array(1);
                    f[0] = n[a.type];
                    var g = new q([f.buffer, a.data]);
                    return d(g)
                }

                function g(a, b, c) {
                    for (var d = new Array(a.length), e = k(a.length, c), f = function (a, c, e) {
                        b(c, function (b, c) {
                            d[a] = c, e(b, d)
                        })
                    }, g = 0; g < a.length; g++)f(g, a[g], e)
                }

                var h = a("./keys"), i = a("arraybuffer.slice"), j = a("base64-arraybuffer"), k = a("after"), l = a("utf8"), m = navigator.userAgent.match(/Android/i);
                c.protocol = 3;
                var n = c.packets = {
                    open: 0,
                    close: 1,
                    ping: 2,
                    pong: 3,
                    message: 4,
                    upgrade: 5,
                    noop: 6
                }, o = h(n), p = {type: "error", data: "parser error"}, q = a("blob");
                c.encodePacket = function (a, c, e, g) {
                    "function" == typeof c && (g = c, c = !1), "function" == typeof e && (g = e, e = null);
                    var h = void 0 === a.data ? void 0 : a.data.buffer || a.data;
                    if (b.ArrayBuffer && h instanceof ArrayBuffer)return d(a, c, g);
                    if (q && h instanceof b.Blob)return f(a, c, g);
                    var i = n[a.type];
                    return void 0 !== a.data && (i += e ? l.encode(String(a.data)) : String(a.data)), g("" + i)
                }, c.encodeBase64Packet = function (a, d) {
                    var e = "b" + c.packets[a.type];
                    if (q && a.data instanceof q) {
                        var f = new FileReader;
                        return f.onload = function () {
                            var a = f.result.split(",")[1];
                            d(e + a)
                        }, f.readAsDataURL(a.data)
                    }
                    var g;
                    try {
                        g = String.fromCharCode.apply(null, new Uint8Array(a.data))
                    } catch (h) {
                        for (var i = new Uint8Array(a.data), j = new Array(i.length), k = 0; k < i.length; k++)j[k] = i[k];
                        g = String.fromCharCode.apply(null, j)
                    }
                    return e += b.btoa(g), d(e)
                }, c.decodePacket = function (a, b, d) {
                    if ("string" == typeof a || void 0 === a) {
                        if ("b" == a.charAt(0))return c.decodeBase64Packet(a.substr(1), b);
                        if (d)try {
                            a = l.decode(a)
                        } catch (e) {
                            return p
                        }
                        var f = a.charAt(0);
                        return Number(f) == f && o[f] ? a.length > 1 ? {
                            type: o[f],
                            data: a.substring(1)
                        } : {type: o[f]} : p
                    }
                    var g = new Uint8Array(a), f = g[0], h = i(a, 1);
                    return q && "blob" === b && (h = new q([h])), {type: o[f], data: h}
                }, c.decodeBase64Packet = function (a, c) {
                    var d = o[a.charAt(0)];
                    if (!b.ArrayBuffer)return {type: d, data: {base64: !0, data: a.substr(1)}};
                    var e = j.decode(a.substr(1));
                    return "blob" === c && q && (e = new q([e])), {type: d, data: e}
                }, c.encodePayload = function (a, b, d) {
                    function e(a) {
                        return a.length + ":" + a
                    }

                    function f(a, d) {
                        c.encodePacket(a, b, !0, function (a) {
                            d(null, e(a))
                        })
                    }

                    return "function" == typeof b && (d = b, b = null), b ? q && !m ? c.encodePayloadAsBlob(a, d) : c.encodePayloadAsArrayBuffer(a, d) : a.length ? void g(a, f, function (a, b) {
                        return d(b.join(""))
                    }) : d("0:")
                }, c.decodePayload = function (a, b, d) {
                    if ("string" != typeof a)return c.decodePayloadAsBinary(a, b, d);
                    "function" == typeof b && (d = b, b = null);
                    var e;
                    if ("" == a)return d(p, 0, 1);
                    for (var f, g, h = "", i = 0, j = a.length; j > i; i++) {
                        var k = a.charAt(i);
                        if (":" != k)h += k; else {
                            if ("" == h || h != (f = Number(h)))return d(p, 0, 1);
                            if (g = a.substr(i + 1, f), h != g.length)return d(p, 0, 1);
                            if (g.length) {
                                if (e = c.decodePacket(g, b, !0), p.type == e.type && p.data == e.data)return d(p, 0, 1);
                                var l = d(e, i + f, j);
                                if (!1 === l)return
                            }
                            i += f, h = ""
                        }
                    }
                    return "" != h ? d(p, 0, 1) : void 0
                }, c.encodePayloadAsArrayBuffer = function (a, b) {
                    function d(a, b) {
                        c.encodePacket(a, !0, !0, function (a) {
                            return b(null, a)
                        })
                    }

                    return a.length ? void g(a, d, function (a, c) {
                        var d = c.reduce(function (a, b) {
                            var c;
                            return c = "string" == typeof b ? b.length : b.byteLength, a + c.toString().length + c + 2
                        }, 0), e = new Uint8Array(d), f = 0;
                        return c.forEach(function (a) {
                            var b = "string" == typeof a, c = a;
                            if (b) {
                                for (var d = new Uint8Array(a.length), g = 0; g < a.length; g++)d[g] = a.charCodeAt(g);
                                c = d.buffer
                            }
                            e[f++] = b ? 0 : 1;
                            for (var h = c.byteLength.toString(), g = 0; g < h.length; g++)e[f++] = parseInt(h[g]);
                            e[f++] = 255;
                            for (var d = new Uint8Array(c), g = 0; g < d.length; g++)e[f++] = d[g]
                        }), b(e.buffer)
                    }) : b(new ArrayBuffer(0))
                }, c.encodePayloadAsBlob = function (a, b) {
                    function d(a, b) {
                        c.encodePacket(a, !0, !0, function (a) {
                            var c = new Uint8Array(1);
                            if (c[0] = 1, "string" == typeof a) {
                                for (var d = new Uint8Array(a.length), e = 0; e < a.length; e++)d[e] = a.charCodeAt(e);
                                a = d.buffer, c[0] = 0
                            }
                            for (var f = a instanceof ArrayBuffer ? a.byteLength : a.size, g = f.toString(), h = new Uint8Array(g.length + 1), e = 0; e < g.length; e++)h[e] = parseInt(g[e]);
                            if (h[g.length] = 255, q) {
                                var i = new q([c.buffer, h.buffer, a]);
                                b(null, i)
                            }
                        })
                    }

                    g(a, d, function (a, c) {
                        return b(new q(c))
                    })
                }, c.decodePayloadAsBinary = function (a, b, d) {
                    "function" == typeof b && (d = b, b = null);
                    for (var e = a, f = [], g = !1; e.byteLength > 0;) {
                        for (var h = new Uint8Array(e), j = 0 === h[0], k = "", l = 1; 255 != h[l]; l++) {
                            if (k.length > 310) {
                                g = !0;
                                break
                            }
                            k += h[l]
                        }
                        if (g)return d(p, 0, 1);
                        e = i(e, 2 + k.length), k = parseInt(k);
                        var m = i(e, 0, k);
                        if (j)try {
                            m = String.fromCharCode.apply(null, new Uint8Array(m))
                        } catch (n) {
                            var o = new Uint8Array(m);
                            m = "";
                            for (var l = 0; l < o.length; l++)m += String.fromCharCode(o[l])
                        }
                        f.push(m), e = i(e, k)
                    }
                    var q = f.length;
                    f.forEach(function (a, e) {
                        d(c.decodePacket(a, b, !0), e, q)
                    })
                }
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {"./keys": 25, after: 26, "arraybuffer.slice": 27, "base64-arraybuffer": 28, blob: 29, utf8: 30}],
        25: [function (a, b) {
            b.exports = Object.keys || function (a) {
                    var b = [], c = Object.prototype.hasOwnProperty;
                    for (var d in a)c.call(a, d) && b.push(d);
                    return b
                }
        }, {}],
        26: [function (a, b) {
            function c(a, b, c) {
                function e(a, d) {
                    if (e.count <= 0)throw new Error("after called too many times");
                    --e.count, a ? (f = !0, b(a), b = c) : 0 !== e.count || f || b(null, d)
                }

                var f = !1;
                return c = c || d, e.count = a, 0 === a ? b() : e
            }

            function d() {
            }

            b.exports = c
        }, {}],
        27: [function (a, b) {
            b.exports = function (a, b, c) {
                var d = a.byteLength;
                if (b = b || 0, c = c || d, a.slice)return a.slice(b, c);
                if (0 > b && (b += d), 0 > c && (c += d), c > d && (c = d), b >= d || b >= c || 0 === d)return new ArrayBuffer(0);
                for (var e = new Uint8Array(a), f = new Uint8Array(c - b), g = b, h = 0; c > g; g++, h++)f[h] = e[g];
                return f.buffer
            }
        }, {}],
        28: [function (a, b, c) {
            !function (a) {
                "use strict";
                c.encode = function (b) {
                    var c, d = new Uint8Array(b), e = d.length, f = "";
                    for (c = 0; e > c; c += 3)f += a[d[c] >> 2], f += a[(3 & d[c]) << 4 | d[c + 1] >> 4], f += a[(15 & d[c + 1]) << 2 | d[c + 2] >> 6], f += a[63 & d[c + 2]];
                    return e % 3 === 2 ? f = f.substring(0, f.length - 1) + "=" : e % 3 === 1 && (f = f.substring(0, f.length - 2) + "=="), f
                }, c.decode = function (b) {
                    var c, d, e, f, g, h = .75 * b.length, i = b.length, j = 0;
                    "=" === b[b.length - 1] && (h--, "=" === b[b.length - 2] && h--);
                    var k = new ArrayBuffer(h), l = new Uint8Array(k);
                    for (c = 0; i > c; c += 4)d = a.indexOf(b[c]), e = a.indexOf(b[c + 1]), f = a.indexOf(b[c + 2]), g = a.indexOf(b[c + 3]), l[j++] = d << 2 | e >> 4, l[j++] = (15 & e) << 4 | f >> 2, l[j++] = (3 & f) << 6 | 63 & g;
                    return k
                }
            }("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")
        }, {}],
        29: [function (a, b) {
            (function (a) {
                function c(a, b) {
                    b = b || {};
                    for (var c = new d, e = 0; e < a.length; e++)c.append(a[e]);
                    return b.type ? c.getBlob(b.type) : c.getBlob()
                }

                var d = a.BlobBuilder || a.WebKitBlobBuilder || a.MSBlobBuilder || a.MozBlobBuilder, e = function () {
                    try {
                        var a = new Blob(["hi"]);
                        return 2 == a.size
                    } catch (b) {
                        return !1
                    }
                }(), f = d && d.prototype.append && d.prototype.getBlob;
                b.exports = function () {
                    return e ? a.Blob : f ? c : void 0
                }()
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {}],
        30: [function (b, c, d) {
            (function (b) {
                !function (e) {
                    function f(a) {
                        for (var b, c, d = [], e = 0, f = a.length; f > e;)b = a.charCodeAt(e++), b >= 55296 && 56319 >= b && f > e ? (c = a.charCodeAt(e++), 56320 == (64512 & c) ? d.push(((1023 & b) << 10) + (1023 & c) + 65536) : (d.push(b), e--)) : d.push(b);
                        return d
                    }

                    function g(a) {
                        for (var b, c = a.length, d = -1, e = ""; ++d < c;)b = a[d], b > 65535 && (b -= 65536, e += t(b >>> 10 & 1023 | 55296), b = 56320 | 1023 & b), e += t(b);
                        return e
                    }

                    function h(a, b) {
                        return t(a >> b & 63 | 128)
                    }

                    function i(a) {
                        if (0 == (4294967168 & a))return t(a);
                        var b = "";
                        return 0 == (4294965248 & a) ? b = t(a >> 6 & 31 | 192) : 0 == (4294901760 & a) ? (b = t(a >> 12 & 15 | 224), b += h(a, 6)) : 0 == (4292870144 & a) && (b = t(a >> 18 & 7 | 240), b += h(a, 12), b += h(a, 6)), b += t(63 & a | 128)
                    }

                    function j(a) {
                        for (var b, c = f(a), d = c.length, e = -1, g = ""; ++e < d;)b = c[e], g += i(b);
                        return g
                    }

                    function k() {
                        if (s >= r)throw Error("Invalid byte index");
                        var a = 255 & q[s];
                        if (s++, 128 == (192 & a))return 63 & a;
                        throw Error("Invalid continuation byte")
                    }

                    function l() {
                        var a, b, c, d, e;
                        if (s > r)throw Error("Invalid byte index");
                        if (s == r)return !1;
                        if (a = 255 & q[s], s++, 0 == (128 & a))return a;
                        if (192 == (224 & a)) {
                            var b = k();
                            if (e = (31 & a) << 6 | b, e >= 128)return e;
                            throw Error("Invalid continuation byte")
                        }
                        if (224 == (240 & a)) {
                            if (b = k(), c = k(), e = (15 & a) << 12 | b << 6 | c, e >= 2048)return e;
                            throw Error("Invalid continuation byte")
                        }
                        if (240 == (248 & a) && (b = k(), c = k(), d = k(), e = (15 & a) << 18 | b << 12 | c << 6 | d, e >= 65536 && 1114111 >= e))return e;
                        throw Error("Invalid UTF-8 detected")
                    }

                    function m(a) {
                        q = f(a), r = q.length, s = 0;
                        for (var b, c = []; (b = l()) !== !1;)c.push(b);
                        return g(c)
                    }

                    var n = "object" == typeof d && d, o = "object" == typeof c && c && c.exports == n && c, p = "object" == typeof b && b;
                    (p.global === p || p.window === p) && (e = p);
                    var q, r, s, t = String.fromCharCode, u = {version: "2.0.0", encode: j, decode: m};
                    if ("function" == typeof a && "object" == typeof a.amd && a.amd)a(function () {
                        return u
                    }); else if (n && !n.nodeType)if (o)o.exports = u; else {
                        var v = {}, w = v.hasOwnProperty;
                        for (var x in u)w.call(u, x) && (n[x] = u[x])
                    } else e.utf8 = u
                }(this)
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {}],
        31: [function (a, b) {
            (function (a) {
                var c = /^[\],:{}\s]*$/, d = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, e = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, f = /(?:^|:|,)(?:\s*\[)+/g, g = /^\s+/, h = /\s+$/;
                b.exports = function (b) {
                    return "string" == typeof b && b ? (b = b.replace(g, "").replace(h, ""), a.JSON && JSON.parse ? JSON.parse(b) : c.test(b.replace(d, "@").replace(e, "]").replace(f, "")) ? new Function("return " + b)() : void 0) : null
                }
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {}],
        32: [function (a, b, c) {
            c.encode = function (a) {
                var b = "";
                for (var c in a)a.hasOwnProperty(c) && (b.length && (b += "&"), b += encodeURIComponent(c) + "=" + encodeURIComponent(a[c]));
                return b
            }, c.decode = function (a) {
                for (var b = {}, c = a.split("&"), d = 0, e = c.length; e > d; d++) {
                    var f = c[d].split("=");
                    b[decodeURIComponent(f[0])] = decodeURIComponent(f[1])
                }
                return b
            }
        }, {}],
        33: [function (a, b) {
            var c = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, d = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];
            b.exports = function (a) {
                var b = a, e = a.indexOf("["), f = a.indexOf("]");
                -1 != e && -1 != f && (a = a.substring(0, e) + a.substring(e, f).replace(/:/g, ";") + a.substring(f, a.length));
                for (var g = c.exec(a || ""), h = {}, i = 14; i--;)h[d[i]] = g[i] || "";
                return -1 != e && -1 != f && (h.source = b, h.host = h.host.substring(1, h.host.length - 1).replace(/;/g, ":"), h.authority = h.authority.replace("[", "").replace("]", "").replace(/;/g, ":"), h.ipv6uri = !0), h
            }
        }, {}],
        34: [function (a, b) {
            function c(a, b) {
                var c;
                return c = b ? new e(a, b) : new e(a)
            }

            var d = function () {
                return this
            }(), e = d.WebSocket || d.MozWebSocket;
            b.exports = e ? c : null, e && (c.prototype = e.prototype)
        }, {}],
        35: [function (a, b) {
            (function (c) {
                function d(a) {
                    function b(a) {
                        if (!a)return !1;
                        if (c.Buffer && c.Buffer.isBuffer(a) || c.ArrayBuffer && a instanceof ArrayBuffer || c.Blob && a instanceof Blob || c.File && a instanceof File)return !0;
                        if (e(a)) {
                            for (var d = 0; d < a.length; d++)if (b(a[d]))return !0
                        } else if (a && "object" == typeof a) {
                            a.toJSON && (a = a.toJSON());
                            for (var f in a)if (a.hasOwnProperty(f) && b(a[f]))return !0
                        }
                        return !1
                    }

                    return b(a)
                }

                var e = a("isarray");
                b.exports = d
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {isarray: 36}],
        36: [function (a, b) {
            b.exports = Array.isArray || function (a) {
                    return "[object Array]" == Object.prototype.toString.call(a)
                }
        }, {}],
        37: [function (a, b) {
            var c = a("global");
            try {
                b.exports = "XMLHttpRequest"in c && "withCredentials"in new c.XMLHttpRequest
            } catch (d) {
                b.exports = !1
            }
        }, {global: 38}],
        38: [function (a, b) {
            b.exports = function () {
                return this
            }()
        }, {}],
        39: [function (a, b) {
            var c = [].indexOf;
            b.exports = function (a, b) {
                if (c)return a.indexOf(b);
                for (var d = 0; d < a.length; ++d)if (a[d] === b)return d;
                return -1
            }
        }, {}],
        40: [function (a, b, c) {
            var d = Object.prototype.hasOwnProperty;
            c.keys = Object.keys || function (a) {
                    var b = [];
                    for (var c in a)d.call(a, c) && b.push(c);
                    return b
                }, c.values = function (a) {
                var b = [];
                for (var c in a)d.call(a, c) && b.push(a[c]);
                return b
            }, c.merge = function (a, b) {
                for (var c in b)d.call(b, c) && (a[c] = b[c]);
                return a
            }, c.length = function (a) {
                return c.keys(a).length
            }, c.isEmpty = function (a) {
                return 0 == c.length(a)
            }
        }, {}],
        41: [function (a, b) {
            var c = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, d = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];
            b.exports = function (a) {
                for (var b = c.exec(a || ""), e = {}, f = 14; f--;)e[d[f]] = b[f] || "";
                return e
            }
        }, {}],
        42: [function (a, b, c) {
            (function (b) {
                var d = a("isarray"), e = a("./is-buffer");
                c.deconstructPacket = function (a) {
                    function b(a) {
                        if (!a)return a;
                        if (e(a)) {
                            var f = {_placeholder: !0, num: c.length};
                            return c.push(a), f
                        }
                        if (d(a)) {
                            for (var g = new Array(a.length), h = 0; h < a.length; h++)g[h] = b(a[h]);
                            return g
                        }
                        if ("object" == typeof a && !(a instanceof Date)) {
                            var g = {};
                            for (var i in a)g[i] = b(a[i]);
                            return g
                        }
                        return a
                    }

                    var c = [], f = a.data, g = a;
                    return g.data = b(f), g.attachments = c.length, {packet: g, buffers: c}
                }, c.reconstructPacket = function (a, b) {
                    function c(a) {
                        if (a && a._placeholder) {
                            var e = b[a.num];
                            return e
                        }
                        if (d(a)) {
                            for (var f = 0; f < a.length; f++)a[f] = c(a[f]);
                            return a
                        }
                        if (a && "object" == typeof a) {
                            for (var g in a)a[g] = c(a[g]);
                            return a
                        }
                        return a
                    }

                    return a.data = c(a.data), a.attachments = void 0, a
                }, c.removeBlobs = function (a, c) {
                    function f(a, i, j) {
                        if (!a)return a;
                        if (b.Blob && a instanceof Blob || b.File && a instanceof File) {
                            g++;
                            var k = new FileReader;
                            k.onload = function () {
                                j ? j[i] = this.result : h = this.result, --g || c(h)
                            }, k.readAsArrayBuffer(a)
                        } else if (d(a))for (var l = 0; l < a.length; l++)f(a[l], l, a); else if (a && "object" == typeof a && !e(a))for (var m in a)f(a[m], m, a)
                    }

                    var g = 0, h = a;
                    f(h), g || c(h)
                }
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {"./is-buffer": 44, isarray: 45}],
        43: [function (a, b, c) {
            function d() {
            }

            function e(a) {
                var b = "", d = !1;
                return b += a.type, (c.BINARY_EVENT == a.type || c.BINARY_ACK == a.type) && (b += a.attachments, b += "-"), a.nsp && "/" != a.nsp && (d = !0, b += a.nsp), null != a.id && (d && (b += ",", d = !1), b += a.id), null != a.data && (d && (b += ","), b += l.stringify(a.data)), k("encoded %j as %s", a, b), b
            }

            function f(a, b) {
                function c(a) {
                    var c = n.deconstructPacket(a), d = e(c.packet), f = c.buffers;
                    f.unshift(d), b(f)
                }

                n.removeBlobs(a, c)
            }

            function g() {
                this.reconstructor = null
            }

            function h(a) {
                var b = {}, d = 0;
                if (b.type = Number(a.charAt(0)), null == c.types[b.type])return j();
                if (c.BINARY_EVENT == b.type || c.BINARY_ACK == b.type) {
                    for (b.attachments = ""; "-" != a.charAt(++d);)b.attachments += a.charAt(d);
                    b.attachments = Number(b.attachments)
                }
                if ("/" == a.charAt(d + 1))for (b.nsp = ""; ++d;) {
                    var e = a.charAt(d);
                    if ("," == e)break;
                    if (b.nsp += e, d + 1 == a.length)break
                } else b.nsp = "/";
                var f = a.charAt(d + 1);
                if ("" != f && Number(f) == f) {
                    for (b.id = ""; ++d;) {
                        var e = a.charAt(d);
                        if (null == e || Number(e) != e) {
                            --d;
                            break
                        }
                        if (b.id += a.charAt(d), d + 1 == a.length)break
                    }
                    b.id = Number(b.id)
                }
                if (a.charAt(++d))try {
                    b.data = l.parse(a.substr(d))
                } catch (g) {
                    return j()
                }
                return k("decoded %s as %j", a, b), b
            }

            function i(a) {
                this.reconPack = a, this.buffers = []
            }

            function j() {
                return {type: c.ERROR, data: "parser error"}
            }

            var k = a("debug")("socket.io-parser"), l = a("json3"), m = (a("isarray"), a("component-emitter")), n = a("./binary"), o = a("./is-buffer");
            c.protocol = 4, c.types = ["CONNECT", "DISCONNECT", "EVENT", "BINARY_EVENT", "ACK", "BINARY_ACK", "ERROR"], c.CONNECT = 0, c.DISCONNECT = 1, c.EVENT = 2, c.ACK = 3, c.ERROR = 4, c.BINARY_EVENT = 5, c.BINARY_ACK = 6, c.Encoder = d, c.Decoder = g, d.prototype.encode = function (a, b) {
                if (k("encoding packet %j", a), c.BINARY_EVENT == a.type || c.BINARY_ACK == a.type)f(a, b); else {
                    var d = e(a);
                    b([d])
                }
            }, m(g.prototype), g.prototype.add = function (a) {
                var b;
                if ("string" == typeof a)b = h(a), c.BINARY_EVENT == b.type || c.BINARY_ACK == b.type ? (this.reconstructor = new i(b), 0 == this.reconstructor.reconPack.attachments && this.emit("decoded", b)) : this.emit("decoded", b); else {
                    if (!o(a) && !a.base64)throw new Error("Unknown type: " + a);
                    if (!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");
                    b = this.reconstructor.takeBinaryData(a), b && (this.reconstructor = null, this.emit("decoded", b))
                }
            }, g.prototype.destroy = function () {
                this.reconstructor && this.reconstructor.finishedReconstruction()
            }, i.prototype.takeBinaryData = function (a) {
                if (this.buffers.push(a), this.buffers.length == this.reconPack.attachments) {
                    var b = n.reconstructPacket(this.reconPack, this.buffers);
                    return this.finishedReconstruction(), b
                }
                return null
            }, i.prototype.finishedReconstruction = function () {
                this.reconPack = null, this.buffers = []
            }
        }, {"./binary": 42, "./is-buffer": 44, "component-emitter": 8, debug: 9, isarray: 45, json3: 46}],
        44: [function (a, b) {
            (function (a) {
                function c(b) {
                    return a.Buffer && a.Buffer.isBuffer(b) || a.ArrayBuffer && b instanceof ArrayBuffer
                }

                b.exports = c
            }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }, {}],
        45: [function (a, b) {
            b.exports = a(36)
        }, {}],
        46: [function (b, c, d) {
            !function (b) {
                function c(a) {
                    if (c[a] !== g)return c[a];
                    var b;
                    if ("bug-string-char-index" == a)b = "a" != "a"[0]; else if ("json" == a)b = c("json-stringify") && c("json-parse"); else {
                        var d, e = '{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';
                        if ("json-stringify" == a) {
                            var f = k.stringify, i = "function" == typeof f && l;
                            if (i) {
                                (d = function () {
                                    return 1
                                }).toJSON = d;
                                try {
                                    i = "0" === f(0) && "0" === f(new Number) && '""' == f(new String) && f(h) === g && f(g) === g && f() === g && "1" === f(d) && "[1]" == f([d]) && "[null]" == f([g]) && "null" == f(null) && "[null,null,null]" == f([g, h, null]) && f({a: [d, !0, !1, null, "\x00\b\n\f\r	"]}) == e && "1" === f(null, d) && "[\n 1,\n 2\n]" == f([1, 2], null, 1) && '"-271821-04-20T00:00:00.000Z"' == f(new Date(-864e13)) && '"+275760-09-13T00:00:00.000Z"' == f(new Date(864e13)) && '"-000001-01-01T00:00:00.000Z"' == f(new Date(-621987552e5)) && '"1969-12-31T23:59:59.999Z"' == f(new Date(-1))
                                } catch (j) {
                                    i = !1
                                }
                            }
                            b = i
                        }
                        if ("json-parse" == a) {
                            var m = k.parse;
                            if ("function" == typeof m)try {
                                if (0 === m("0") && !m(!1)) {
                                    d = m(e);
                                    var n = 5 == d.a.length && 1 === d.a[0];
                                    if (n) {
                                        try {
                                            n = !m('"	"')
                                        } catch (j) {
                                        }
                                        if (n)try {
                                            n = 1 !== m("01")
                                        } catch (j) {
                                        }
                                        if (n)try {
                                            n = 1 !== m("1.")
                                        } catch (j) {
                                        }
                                    }
                                }
                            } catch (j) {
                                n = !1
                            }
                            b = n
                        }
                    }
                    return c[a] = !!b
                }

                var e, f, g, h = {}.toString, i = "function" == typeof a && a.amd, j = "object" == typeof JSON && JSON, k = "object" == typeof d && d && !d.nodeType && d;
                k && j ? (k.stringify = j.stringify, k.parse = j.parse) : k = b.JSON = j || {};
                var l = new Date(-0xc782b5b800cec);
                try {
                    l = -109252 == l.getUTCFullYear() && 0 === l.getUTCMonth() && 1 === l.getUTCDate() && 10 == l.getUTCHours() && 37 == l.getUTCMinutes() && 6 == l.getUTCSeconds() && 708 == l.getUTCMilliseconds()
                } catch (m) {
                }
                if (!c("json")) {
                    var n = "[object Function]", o = "[object Date]", p = "[object Number]", q = "[object String]", r = "[object Array]", s = "[object Boolean]", t = c("bug-string-char-index");
                    if (!l)var u = Math.floor, v = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334], w = function (a, b) {
                        return v[b] + 365 * (a - 1970) + u((a - 1969 + (b = +(b > 1))) / 4) - u((a - 1901 + b) / 100) + u((a - 1601 + b) / 400)
                    };
                    (e = {}.hasOwnProperty) || (e = function (a) {
                        var b, c = {};
                        return (c.__proto__ = null, c.__proto__ = {toString: 1}, c).toString != h ? e = function (a) {
                            var b = this.__proto__, c = a in(this.__proto__ = null, this);
                            return this.__proto__ = b, c
                        } : (b = c.constructor, e = function (a) {
                            var c = (this.constructor || b).prototype;
                            return a in this && !(a in c && this[a] === c[a])
                        }), c = null, e.call(this, a)
                    });
                    var x = {"boolean": 1, number: 1, string: 1, undefined: 1}, y = function (a, b) {
                        var c = typeof a[b];
                        return "object" == c ? !!a[b] : !x[c]
                    };
                    if (f = function (a, b) {
                            var c, d, g, i = 0;
                            (c = function () {
                                this.valueOf = 0
                            }).prototype.valueOf = 0, d = new c;
                            for (g in d)e.call(d, g) && i++;
                            return c = d = null, i ? f = 2 == i ? function (a, b) {
                                var c, d = {}, f = h.call(a) == n;
                                for (c in a)f && "prototype" == c || e.call(d, c) || !(d[c] = 1) || !e.call(a, c) || b(c)
                            } : function (a, b) {
                                var c, d, f = h.call(a) == n;
                                for (c in a)f && "prototype" == c || !e.call(a, c) || (d = "constructor" === c) || b(c);
                                (d || e.call(a, c = "constructor")) && b(c)
                            } : (d = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"], f = function (a, b) {
                                var c, f, g = h.call(a) == n, i = !g && "function" != typeof a.constructor && y(a, "hasOwnProperty") ? a.hasOwnProperty : e;
                                for (c in a)g && "prototype" == c || !i.call(a, c) || b(c);
                                for (f = d.length; c = d[--f]; i.call(a, c) && b(c));
                            }), f(a, b)
                        }, !c("json-stringify")) {
                        var z = {
                            92: "\\\\",
                            34: '\\"',
                            8: "\\b",
                            12: "\\f",
                            10: "\\n",
                            13: "\\r",
                            9: "\\t"
                        }, A = "000000", B = function (a, b) {
                            return (A + (b || 0)).slice(-a)
                        }, C = "\\u00", D = function (a) {
                            var b, c = '"', d = 0, e = a.length, f = e > 10 && t;
                            for (f && (b = a.split("")); e > d; d++) {
                                var g = a.charCodeAt(d);
                                switch (g) {
                                    case 8:
                                    case 9:
                                    case 10:
                                    case 12:
                                    case 13:
                                    case 34:
                                    case 92:
                                        c += z[g];
                                        break;
                                    default:
                                        if (32 > g) {
                                            c += C + B(2, g.toString(16));
                                            break
                                        }
                                        c += f ? b[d] : t ? a.charAt(d) : a[d]
                                }
                            }
                            return c + '"'
                        }, E = function (a, b, c, d, i, j, k) {
                            var l, m, n, t, v, x, y, z, A, C, F, G, H, I, J, K;
                            try {
                                l = b[a]
                            } catch (L) {
                            }
                            if ("object" == typeof l && l)if (m = h.call(l), m != o || e.call(l, "toJSON"))"function" == typeof l.toJSON && (m != p && m != q && m != r || e.call(l, "toJSON")) && (l = l.toJSON(a)); else if (l > -1 / 0 && 1 / 0 > l) {
                                if (w) {
                                    for (v = u(l / 864e5), n = u(v / 365.2425) + 1970 - 1; w(n + 1, 0) <= v; n++);
                                    for (t = u((v - w(n, 0)) / 30.42); w(n, t + 1) <= v; t++);
                                    v = 1 + v - w(n, t), x = (l % 864e5 + 864e5) % 864e5, y = u(x / 36e5) % 24, z = u(x / 6e4) % 60, A = u(x / 1e3) % 60, C = x % 1e3
                                } else n = l.getUTCFullYear(), t = l.getUTCMonth(), v = l.getUTCDate(), y = l.getUTCHours(), z = l.getUTCMinutes(), A = l.getUTCSeconds(), C = l.getUTCMilliseconds();
                                l = (0 >= n || n >= 1e4 ? (0 > n ? "-" : "+") + B(6, 0 > n ? -n : n) : B(4, n)) + "-" + B(2, t + 1) + "-" + B(2, v) + "T" + B(2, y) + ":" + B(2, z) + ":" + B(2, A) + "." + B(3, C) + "Z"
                            } else l = null;
                            if (c && (l = c.call(b, a, l)), null === l)return "null";
                            if (m = h.call(l), m == s)return "" + l;
                            if (m == p)return l > -1 / 0 && 1 / 0 > l ? "" + l : "null";
                            if (m == q)return D("" + l);
                            if ("object" == typeof l) {
                                for (I = k.length; I--;)if (k[I] === l)throw TypeError();
                                if (k.push(l), F = [], J = j, j += i, m == r) {
                                    for (H = 0, I = l.length; I > H; H++)G = E(H, l, c, d, i, j, k), F.push(G === g ? "null" : G);
                                    K = F.length ? i ? "[\n" + j + F.join(",\n" + j) + "\n" + J + "]" : "[" + F.join(",") + "]" : "[]"
                                } else f(d || l, function (a) {
                                    var b = E(a, l, c, d, i, j, k);
                                    b !== g && F.push(D(a) + ":" + (i ? " " : "") + b)
                                }), K = F.length ? i ? "{\n" + j + F.join(",\n" + j) + "\n" + J + "}" : "{" + F.join(",") + "}" : "{}";
                                return k.pop(), K
                            }
                        };
                        k.stringify = function (a, b, c) {
                            var d, e, f, g;
                            if ("function" == typeof b || "object" == typeof b && b)if ((g = h.call(b)) == n)e = b; else if (g == r) {
                                f = {};
                                for (var i, j = 0, k = b.length; k > j; i = b[j++], g = h.call(i), (g == q || g == p) && (f[i] = 1));
                            }
                            if (c)if ((g = h.call(c)) == p) {
                                if ((c -= c % 1) > 0)for (d = "", c > 10 && (c = 10); d.length < c; d += " ");
                            } else g == q && (d = c.length <= 10 ? c : c.slice(0, 10));
                            return E("", (i = {}, i[""] = a, i), e, f, d, "", [])
                        }
                    }
                    if (!c("json-parse")) {
                        var F, G, H = String.fromCharCode, I = {
                            92: "\\",
                            34: '"',
                            47: "/",
                            98: "\b",
                            116: "	",
                            110: "\n",
                            102: "\f",
                            114: "\r"
                        }, J = function () {
                            throw F = G = null, SyntaxError()
                        }, K = function () {
                            for (var a, b, c, d, e, f = G, g = f.length; g > F;)switch (e = f.charCodeAt(F)) {
                                case 9:
                                case 10:
                                case 13:
                                case 32:
                                    F++;
                                    break;
                                case 123:
                                case 125:
                                case 91:
                                case 93:
                                case 58:
                                case 44:
                                    return a = t ? f.charAt(F) : f[F], F++, a;
                                case 34:
                                    for (a = "@", F++; g > F;)if (e = f.charCodeAt(F), 32 > e)J(); else if (92 == e)switch (e = f.charCodeAt(++F)) {
                                        case 92:
                                        case 34:
                                        case 47:
                                        case 98:
                                        case 116:
                                        case 110:
                                        case 102:
                                        case 114:
                                            a += I[e], F++;
                                            break;
                                        case 117:
                                            for (b = ++F, c = F + 4; c > F; F++)e = f.charCodeAt(F), e >= 48 && 57 >= e || e >= 97 && 102 >= e || e >= 65 && 70 >= e || J();
                                            a += H("0x" + f.slice(b, F));
                                            break;
                                        default:
                                            J()
                                    } else {
                                        if (34 == e)break;
                                        for (e = f.charCodeAt(F), b = F; e >= 32 && 92 != e && 34 != e;)e = f.charCodeAt(++F);
                                        a += f.slice(b, F)
                                    }
                                    if (34 == f.charCodeAt(F))return F++, a;
                                    J();
                                default:
                                    if (b = F, 45 == e && (d = !0, e = f.charCodeAt(++F)), e >= 48 && 57 >= e) {
                                        for (48 == e && (e = f.charCodeAt(F + 1), e >= 48 && 57 >= e) && J(), d = !1; g > F && (e = f.charCodeAt(F), e >= 48 && 57 >= e); F++);
                                        if (46 == f.charCodeAt(F)) {
                                            for (c = ++F; g > c && (e = f.charCodeAt(c), e >= 48 && 57 >= e); c++);
                                            c == F && J(), F = c
                                        }
                                        if (e = f.charCodeAt(F), 101 == e || 69 == e) {
                                            for (e = f.charCodeAt(++F), (43 == e || 45 == e) && F++, c = F; g > c && (e = f.charCodeAt(c), e >= 48 && 57 >= e); c++);
                                            c == F && J(), F = c
                                        }
                                        return +f.slice(b, F)
                                    }
                                    if (d && J(), "true" == f.slice(F, F + 4))return F += 4, !0;
                                    if ("false" == f.slice(F, F + 5))return F += 5, !1;
                                    if ("null" == f.slice(F, F + 4))return F += 4, null;
                                    J()
                            }
                            return "$"
                        }, L = function (a) {
                            var b, c;
                            if ("$" == a && J(), "string" == typeof a) {
                                if ("@" == (t ? a.charAt(0) : a[0]))return a.slice(1);
                                if ("[" == a) {
                                    for (b = []; a = K(), "]" != a; c || (c = !0))c && ("," == a ? (a = K(), "]" == a && J()) : J()), "," == a && J(), b.push(L(a));
                                    return b
                                }
                                if ("{" == a) {
                                    for (b = {}; a = K(), "}" != a; c || (c = !0))c && ("," == a ? (a = K(), "}" == a && J()) : J()), ("," == a || "string" != typeof a || "@" != (t ? a.charAt(0) : a[0]) || ":" != K()) && J(), b[a.slice(1)] = L(K());
                                    return b
                                }
                                J()
                            }
                            return a
                        }, M = function (a, b, c) {
                            var d = N(a, b, c);
                            d === g ? delete a[b] : a[b] = d
                        }, N = function (a, b, c) {
                            var d, e = a[b];
                            if ("object" == typeof e && e)if (h.call(e) == r)for (d = e.length; d--;)M(e, d, c); else f(e, function (a) {
                                M(e, a, c)
                            });
                            return c.call(a, b, e)
                        };
                        k.parse = function (a, b) {
                            var c, d;
                            return F = 0, G = "" + a, c = L(K()), "$" != K() && J(), F = G = null, b && h.call(b) == n ? N((d = {}, d[""] = c, d), "", b) : c
                        }
                    }
                }
                i && a(function () {
                    return k
                })
            }(this)
        }, {}],
        47: [function (a, b) {
            function c(a, b) {
                var c = [];
                b = b || 0;
                for (var d = b || 0; d < a.length; d++)c[d - b] = a[d];
                return c
            }

            b.exports = c
        }, {}]
    }, {}, [1])(1)
}), window.console = window.console || {}, console.log || (console.log = function () {
}), $(document).ajaxComplete(function (a, b) {
    try {
        var c = $.parseJSON(b.responseText);
        c.Code && (110 == c.Code ? (alert("您的账号已在其它地方登录，即将退出!"), setTimeout(function () {
            window.location.href = "/"
        }, 3e3)) : 111 == c.Code && (alert("您的登录信息丢失，即将退出！"), setTimeout(function () {
            window.location.href = "/"
        }, 3e3)))
    } catch (d) {
    }
}), new function (a) {
    function b(a, b) {
        this.element = a, this.options = b
    }

    var c, d = "jquery-drag", e = window, f = e.document, g = a(f), h = a(f.body), i = {
        handle: null,
        drag: null,
        axis: "xy",
        cursor: "move",
        min: null,
        max: null,
        zIndex: 9999,
        ondragbefore: a.noop,
        ondragstart: a.noop,
        ondrag: a.noop,
        ondragend: a.noop
    };
    a.fn.drag = function (e) {
        var f, g, h = "string" === a.type(e), j = [].slice.call(arguments, 1), k = a.extend({}, i);
        if (h && "_" !== h[0]) {
            if (!this.length)return;
            return f = a(this[0]), g = f.data(d), g || f.data(d, g = new b(f[0], k)._init()), b.prototype[e] ? b.prototype[e].apply(g, j) : c
        }
        return h || (k = a.extend(k, e)), this.each(function () {
            var c = this, e = a(c).data(d);
            e || a(c).data(d, e = new b(c, k)._init())
        })
    }, a.fn.drag.defaults = i, b.prototype = {
        _init: function () {
            var b = this, c = b.options, d = a(b.element);
            return b.$element = d, c.handle ? d.on("mousedown taphold", c.handle, a.proxy(b._start, b)) : d.on("mousedown taphold", a.proxy(b._start, b)), g.mousemove(a.proxy(b._move, b)).mouseup(a.proxy(b._end, b)).bind("touchmove", a.proxy(b._move, b)).bind("touchend", a.proxy(b._end, b)).bind("touchcancel", a.proxy(b._end, b)), b
        }, _start: function (b) {
            if (!this.is) {
                var c, d, e = b.originalEvent, f = this, g = f.options, i = f.$element, j = g.handle ? a(b.target).closest(g.handle) : a(b.target), k = g.drag ? j.closest(g.drag) : i, l = e.touches ? e.touches[0] : b;
                i.has(k).length || (k = i), f.$drag = k, g.ondragbefore.call(k[0], b, f), f.zIndex = k.css("z-index"), f.cursor = h.css("cursor"), f.$drag = k.css("z-index", g.zIndex), c = k.css("position"), d = k.offset(), "static" === c ? k.css("position", "relative") : ("fixed" === c || "absolute" === c) && k.css(k.position()), f.pos = {
                    x: l.pageX,
                    y: l.pageY,
                    l: d.left,
                    t: d.top
                }, f.is = !0, f.options.cursor && h.css("cursor", g.cursor), g.ondragstart.call(k[0], b, f), b.preventDefault()
            }
        }, _move: function (a) {
            if (this.is) {
                var b, d, e, f, g = a.originalEvent, h = this, i = h.options, j = i.min, k = i.max, l = h.pos, m = h.$drag, n = m.parent(!0).offset(), o = {}, p = g.touches ? g.touches[0] : a;
                ~i.axis.indexOf("x") && (o.left = p.pageX - l.x + l.l), ~i.axis.indexOf("y") && (o.top = p.pageY - l.y + l.t), j && j.left !== c && o.left < (b = j.left + n.left) && (o.left = b), j && j.top !== c && o.top < (d = j.top + n.top) && (o.top = d), k && k.left !== c && o.left > (e = k.left + n.left) && (o.left = e), k && k.top !== c && o.top > k.top && o.top > (f = k.top + n.top) && (o.top = f), m.offset(o), i.ondrag.call(m[0], a, h), a.preventDefault()
            }
        }, _end: function (a) {
            if (this.is) {
                var b = this, c = b.$drag;
                b.is = !1, b.options.cursor && h.css("cursor", b.cursor), c.css("z-index", b.zIndex), b.options.ondragend.call(c[0], a, b), a.preventDefault()
            }
        }, options: function (b, d) {
            if ("string" === a.type(b) && d === c)return this.options[b];
            var e = {};
            "object" === a.type(b) ? e = b : e[b] = d, this.options = a.extend(this.options, e)
        }
    }
}(jQuery), Number.prototype.add = function (a) {
    var b, c, d;
    try {
        b = this.toString().split(".")[1].length
    } catch (e) {
        b = 0
    }
    try {
        c = a.toString().split(".")[1].length
    } catch (e) {
        c = 0
    }
    return d = Math.pow(10, Math.max(b, c)), (this * d + a * d) / d
}, Number.prototype.sub = function (a) {
    return this.add(-a)
}, Number.prototype.mul = function (a) {
    var b = 0, c = this.toString(), d = a.toString();
    try {
        b += c.split(".")[1].length
    } catch (e) {
    }
    try {
        b += d.split(".")[1].length
    } catch (e) {
    }
    return Number(c.replace(".", "")) * Number(d.replace(".", "")) / Math.pow(10, b)
}, Number.prototype.div = function (arg) {
    var r1, r2, t1 = 0, t2 = 0;
    try {
        t1 = this.toString().split(".")[1].length
    } catch (e) {
    }
    try {
        t2 = arg.toString().split(".")[1].length
    } catch (e) {
    }
    with (Math)return r1 = Number(this.toString().replace(".", "")), r2 = Number(arg.toString().replace(".", "")), r1 / r2 * pow(10, t2 - t1)
}, plupload.addI18n({
    "Stop Upload": "停止上传",
    "Upload URL might be wrong or doesn't exist.": "上传的URL可能是错误的或不存在。",
    tb: "tb",
    Size: "大小",
    Close: "关闭",
    "Init error.": "初始化错误。",
    "Add files to the upload queue and click the start button.": "将文件添加到上传队列，然后点击”开始上传“按钮。",
    Filename: "文件名",
    "Image format either wrong or not supported.": "图片格式错误或者不支持。",
    Status: "状态",
    "HTTP Error.": "HTTP 错误。可能网络缘故，请刷新页面重试！",
    "Start Upload": "开始上传",
    mb: "mb",
    kb: "kb",
    "Duplicate file error.": "重复文件错误。",
    "File size error.": "文件大小错误。",
    "N/A": "N/A",
    gb: "gb",
    "Error: Invalid file extension:": "错误：无效的文件扩展名:",
    "Select files": "选择文件",
    "%s already present in the queue.": "%s 已经在当前队列里。",
    "File: %s": "文件: %s",
    b: "b",
    "Uploaded %d/%d files": "已上传 %d/%d 个文件",
    "Upload element accepts only %d file(s) at a time. Extra files were stripped.": "每次只接受同时上传 %d 个文件，多余的文件将会被删除。",
    "%d files queued": "%d 个文件加入到队列",
    "File: %s, size: %d, max file size: %d": "文件: %s, 大小: %d, 最大文件大小: %d",
    "Drag files here.": "把文件拖到这里。",
    "Runtime ran out of available memory.": "运行时已消耗所有可用内存。",
    "File count error.": "文件数量错误。",
    "File extension error.": "抱歉，您上传的文件格式系统无法支持，请转换格式后上传！",
    "Error: File too large:": "错误: 文件太大:",
    "Add Files": "增加文件"
}), $.ajaxSetup({cache: !1}), !function (a) {
    function b(c) {
        if (d[c])return d[c].exports;
        var e = d[c] = {exports: {}, id: c, loaded: !1};
        return a[c].call(e.exports, e, e.exports, b), e.loaded = !0, e.exports
    }

    var c = window.webpackJsonp_NIM_Web_SDK_v2_1_0;
    window.webpackJsonp_NIM_Web_SDK_v2_1_0 = function (f, g) {
        for (var h, i, j = 0, k = []; j < f.length; j++)i = f[j], e[i] && k.push.apply(k, e[i]), e[i] = 0;
        for (h in g)a[h] = g[h];
        for (c && c(f, g); k.length;)k.shift().call(null, b);
        return g[0] ? (d[0] = 0, b(0)) : void 0
    };
    var d = {}, e = {2: 0};
    b.e = function (a, c) {
        if (0 === e[a])return c.call(null, b);
        if (void 0 !== e[a])e[a].push(c); else {
            e[a] = [c];
            var d = document.getElementsByTagName("head")[0], f = document.createElement("script");
            f.type = "text/javascript", f.charset = "utf-8", f.async = !0, f.src = b.p + "" + a + "." + ({
                    0: "Chatroom",
                    1: "NIM"
                }[a] || a) + ".js", d.appendChild(f)
        }
    }, b.m = a, b.c = d, b.p = ""
}([, function (a, b, c) {
    var d, e;
    !function (f, g) {
        "use strict";
        d = g, e = "function" == typeof d ? d.call(b, c, b, a) : d, !(void 0 !== e && (a.exports = e))
    }(this, function () {
        var a, b = Array, c = b.prototype, d = Object, e = d.prototype, f = Function.prototype, g = String, h = g.prototype, i = Number, j = i.prototype, k = c.slice, l = c.splice, m = c.push, n = c.unshift, o = c.concat, p = f.call, q = f.apply, r = Math.max, s = Math.min, t = e.toString, u = "function" == typeof Symbol && "symbol" == typeof Symbol.toStringTag, v = Function.prototype.toString, w = function (a) {
            try {
                return v.call(a), !0
            } catch (b) {
                return !1
            }
        }, x = "[object Function]", y = "[object GeneratorFunction]";
        a = function (a) {
            if ("function" != typeof a)return !1;
            if (u)return w(a);
            var b = t.call(a);
            return b === x || b === y
        };
        var z, A = RegExp.prototype.exec, B = function (a) {
            try {
                return A.call(a), !0
            } catch (b) {
                return !1
            }
        }, C = "[object RegExp]";
        z = function (a) {
            return "object" != typeof a ? !1 : u ? B(a) : t.call(a) === C
        };
        var D, E = String.prototype.valueOf, F = function (a) {
            try {
                return E.call(a), !0
            } catch (b) {
                return !1
            }
        }, G = "[object String]";
        D = function (a) {
            return "string" == typeof a ? !0 : "object" != typeof a ? !1 : u ? F(a) : t.call(a) === G
        };
        var H = d.defineProperty && function () {
                try {
                    var a = {};
                    d.defineProperty(a, "x", {enumerable: !1, value: a});
                    for (var b in a)return !1;
                    return a.x === a
                } catch (c) {
                    return !1
                }
            }(), I = function (a) {
            var b;
            return b = H ? function (a, b, c, e) {
                !e && b in a || d.defineProperty(a, b, {configurable: !0, enumerable: !1, writable: !0, value: c})
            } : function (a, b, c, d) {
                !d && b in a || (a[b] = c)
            }, function (c, d, e) {
                for (var f in d)a.call(d, f) && b(c, f, d[f], e)
            }
        }(e.hasOwnProperty), J = function (a) {
            var b = typeof a;
            return null === a || "object" !== b && "function" !== b
        }, K = i.isNaN || function (a) {
                return a !== a
            }, L = {
            ToInteger: function (a) {
                var b = +a;
                return K(b) ? b = 0 : 0 !== b && b !== 1 / 0 && b !== -(1 / 0) && (b = (b > 0 || -1) * Math.floor(Math.abs(b))), b
            }, ToPrimitive: function (b) {
                var c, d, e;
                if (J(b))return b;
                if (d = b.valueOf, a(d) && (c = d.call(b), J(c)))return c;
                if (e = b.toString, a(e) && (c = e.call(b), J(c)))return c;
                throw new TypeError
            }, ToObject: function (a) {
                if (null == a)throw new TypeError("can't convert " + a + " to object");
                return d(a)
            }, ToUint32: function (a) {
                return a >>> 0
            }
        }, M = function () {
        };
        I(f, {
            bind: function (b) {
                var c = this;
                if (!a(c))throw new TypeError("Function.prototype.bind called on incompatible " + c);
                for (var e, f = k.call(arguments, 1), g = function () {
                    if (this instanceof e) {
                        var a = c.apply(this, o.call(f, k.call(arguments)));
                        return d(a) === a ? a : this
                    }
                    return c.apply(b, o.call(f, k.call(arguments)))
                }, h = r(0, c.length - f.length), i = [], j = 0; h > j; j++)m.call(i, "$" + j);
                return e = Function("binder", "return function (" + i.join(",") + "){ return binder.apply(this, arguments); }")(g), c.prototype && (M.prototype = c.prototype, e.prototype = new M, M.prototype = null), e
            }
        });
        var N = p.bind(e.hasOwnProperty), O = p.bind(e.toString), P = p.bind(k), Q = q.bind(k), R = p.bind(h.slice), S = p.bind(h.split), T = p.bind(h.indexOf), U = p.bind(m), V = p.bind(e.propertyIsEnumerable), W = p.bind(c.sort), X = b.isArray || function (a) {
                return "[object Array]" === O(a)
            }, Y = 1 !== [].unshift(0);
        I(c, {
            unshift: function () {
                return n.apply(this, arguments), this.length
            }
        }, Y), I(b, {isArray: X});
        var Z = d("a"), $ = "a" !== Z[0] || !(0 in Z), _ = function (a) {
            var b = !0, c = !0;
            return a && (a.call("foo", function (a, c, d) {
                "object" != typeof d && (b = !1)
            }), a.call([1], function () {
                "use strict";
                c = "string" == typeof this
            }, "x")), !!a && b && c
        };
        I(c, {
            forEach: function (b) {
                var c, d = L.ToObject(this), e = $ && D(this) ? S(this, "") : d, f = -1, g = L.ToUint32(e.length);
                if (arguments.length > 1 && (c = arguments[1]), !a(b))throw new TypeError("Array.prototype.forEach callback must be a function");
                for (; ++f < g;)f in e && ("undefined" == typeof c ? b(e[f], f, d) : b.call(c, e[f], f, d))
            }
        }, !_(c.forEach)), I(c, {
            map: function (c) {
                var d, e = L.ToObject(this), f = $ && D(this) ? S(this, "") : e, g = L.ToUint32(f.length), h = b(g);
                if (arguments.length > 1 && (d = arguments[1]), !a(c))throw new TypeError("Array.prototype.map callback must be a function");
                for (var i = 0; g > i; i++)i in f && (h[i] = "undefined" == typeof d ? c(f[i], i, e) : c.call(d, f[i], i, e));
                return h
            }
        }, !_(c.map)), I(c, {
            filter: function (b) {
                var c, d, e = L.ToObject(this), f = $ && D(this) ? S(this, "") : e, g = L.ToUint32(f.length), h = [];
                if (arguments.length > 1 && (d = arguments[1]), !a(b))throw new TypeError("Array.prototype.filter callback must be a function");
                for (var i = 0; g > i; i++)i in f && (c = f[i], ("undefined" == typeof d ? b(c, i, e) : b.call(d, c, i, e)) && U(h, c));
                return h
            }
        }, !_(c.filter)), I(c, {
            every: function (b) {
                var c, d = L.ToObject(this), e = $ && D(this) ? S(this, "") : d, f = L.ToUint32(e.length);
                if (arguments.length > 1 && (c = arguments[1]), !a(b))throw new TypeError("Array.prototype.every callback must be a function");
                for (var g = 0; f > g; g++)if (g in e && !("undefined" == typeof c ? b(e[g], g, d) : b.call(c, e[g], g, d)))return !1;
                return !0
            }
        }, !_(c.every)), I(c, {
            some: function (b) {
                var c, d = L.ToObject(this), e = $ && D(this) ? S(this, "") : d, f = L.ToUint32(e.length);
                if (arguments.length > 1 && (c = arguments[1]), !a(b))throw new TypeError("Array.prototype.some callback must be a function");
                for (var g = 0; f > g; g++)if (g in e && ("undefined" == typeof c ? b(e[g], g, d) : b.call(c, e[g], g, d)))return !0;
                return !1
            }
        }, !_(c.some));
        var aa = !1;
        c.reduce && (aa = "object" == typeof c.reduce.call("es5", function (a, b, c, d) {
                return d
            })), I(c, {
            reduce: function (b) {
                var c = L.ToObject(this), d = $ && D(this) ? S(this, "") : c, e = L.ToUint32(d.length);
                if (!a(b))throw new TypeError("Array.prototype.reduce callback must be a function");
                if (0 === e && 1 === arguments.length)throw new TypeError("reduce of empty array with no initial value");
                var f, g = 0;
                if (arguments.length >= 2)f = arguments[1]; else for (; ;) {
                    if (g in d) {
                        f = d[g++];
                        break
                    }
                    if (++g >= e)throw new TypeError("reduce of empty array with no initial value")
                }
                for (; e > g; g++)g in d && (f = b(f, d[g], g, c));
                return f
            }
        }, !aa);
        var ba = !1;
        c.reduceRight && (ba = "object" == typeof c.reduceRight.call("es5", function (a, b, c, d) {
                return d
            })), I(c, {
            reduceRight: function (b) {
                var c = L.ToObject(this), d = $ && D(this) ? S(this, "") : c, e = L.ToUint32(d.length);
                if (!a(b))throw new TypeError("Array.prototype.reduceRight callback must be a function");
                if (0 === e && 1 === arguments.length)throw new TypeError("reduceRight of empty array with no initial value");
                var f, g = e - 1;
                if (arguments.length >= 2)f = arguments[1]; else for (; ;) {
                    if (g in d) {
                        f = d[g--];
                        break
                    }
                    if (--g < 0)throw new TypeError("reduceRight of empty array with no initial value")
                }
                if (0 > g)return f;
                do g in d && (f = b(f, d[g], g, c)); while (g--);
                return f
            }
        }, !ba);
        var ca = c.indexOf && -1 !== [0, 1].indexOf(1, 2);
        I(c, {
            indexOf: function (a) {
                var b = $ && D(this) ? S(this, "") : L.ToObject(this), c = L.ToUint32(b.length);
                if (0 === c)return -1;
                var d = 0;
                for (arguments.length > 1 && (d = L.ToInteger(arguments[1])), d = d >= 0 ? d : r(0, c + d); c > d; d++)if (d in b && b[d] === a)return d;
                return -1
            }
        }, ca);
        var da = c.lastIndexOf && -1 !== [0, 1].lastIndexOf(0, -3);
        I(c, {
            lastIndexOf: function (a) {
                var b = $ && D(this) ? S(this, "") : L.ToObject(this), c = L.ToUint32(b.length);
                if (0 === c)return -1;
                var d = c - 1;
                for (arguments.length > 1 && (d = s(d, L.ToInteger(arguments[1]))), d = d >= 0 ? d : c - Math.abs(d); d >= 0; d--)if (d in b && a === b[d])return d;
                return -1
            }
        }, da);
        var ea = function () {
            var a = [1, 2], b = a.splice();
            return 2 === a.length && X(b) && 0 === b.length
        }();
        I(c, {
            splice: function () {
                return 0 === arguments.length ? [] : l.apply(this, arguments)
            }
        }, !ea);
        var fa = function () {
            var a = {};
            return c.splice.call(a, 0, 0, 1), 1 === a.length
        }();
        I(c, {
            splice: function (a, b) {
                if (0 === arguments.length)return [];
                var c = arguments;
                return this.length = r(L.ToInteger(this.length), 0), arguments.length > 0 && "number" != typeof b && (c = P(arguments), c.length < 2 ? U(c, this.length - a) : c[1] = L.ToInteger(b)), l.apply(this, c)
            }
        }, !fa);
        var ga = function () {
            var a = new b(1e5);
            return a[8] = "x", a.splice(1, 1), 7 === a.indexOf("x")
        }(), ha = function () {
            var a = 256, b = [];
            return b[a] = "a", b.splice(a + 1, 0, "b"), "a" === b[a]
        }();
        I(c, {
            splice: function (a, b) {
                for (var c, d = L.ToObject(this), e = [], f = L.ToUint32(d.length), h = L.ToInteger(a), i = 0 > h ? r(f + h, 0) : s(h, f), j = s(r(L.ToInteger(b), 0), f - i), k = 0; j > k;)c = g(i + k), N(d, c) && (e[k] = d[c]), k += 1;
                var l, m = P(arguments, 2), n = m.length;
                if (j > n) {
                    for (k = i; f - j > k;)c = g(k + j), l = g(k + n), N(d, c) ? d[l] = d[c] : delete d[l], k += 1;
                    for (k = f; k > f - j + n;)delete d[k - 1], k -= 1
                } else if (n > j)for (k = f - j; k > i;)c = g(k + j - 1), l = g(k + n - 1), N(d, c) ? d[l] = d[c] : delete d[l], k -= 1;
                k = i;
                for (var o = 0; o < m.length; ++o)d[k] = m[o], k += 1;
                return d.length = f - j + n, e
            }
        }, !ga || !ha);
        var ia, ja = c.join;
        try {
            ia = "1,2,3" !== Array.prototype.join.call("123", ",")
        } catch (ka) {
            ia = !0
        }
        ia && I(c, {
            join: function (a) {
                var b = "undefined" == typeof a ? "," : a;
                return ja.call(D(this) ? S(this, "") : this, b)
            }
        }, ia);
        var la = "1,2" !== [1, 2].join(void 0);
        la && I(c, {
            join: function (a) {
                var b = "undefined" == typeof a ? "," : a;
                return ja.call(this, b)
            }
        }, la);
        var ma = function () {
            for (var a = L.ToObject(this), b = L.ToUint32(a.length), c = 0; c < arguments.length;)a[b + c] = arguments[c], c += 1;
            return a.length = b + c, b + c
        }, na = function () {
            var a = {}, b = Array.prototype.push.call(a, void 0);
            return 1 !== b || 1 !== a.length || "undefined" != typeof a[0] || !N(a, 0)
        }();
        I(c, {
            push: function () {
                return X(this) ? m.apply(this, arguments) : ma.apply(this, arguments)
            }
        }, na);
        var oa = function () {
            var a = [], b = a.push(void 0);
            return 1 !== b || 1 !== a.length || "undefined" != typeof a[0] || !N(a, 0)
        }();
        I(c, {push: ma}, oa), I(c, {
            slice: function () {
                var a = D(this) ? S(this, "") : this;
                return Q(a, arguments)
            }
        }, $);
        var pa = function () {
            try {
                return [1, 2].sort(null), [1, 2].sort({}), !0
            } catch (a) {
            }
            return !1
        }(), qa = function () {
            try {
                return [1, 2].sort(/a/), !1
            } catch (a) {
            }
            return !0
        }(), ra = function () {
            try {
                return [1, 2].sort(void 0), !0
            } catch (a) {
            }
            return !1
        }();
        I(c, {
            sort: function (b) {
                if ("undefined" == typeof b)return W(this);
                if (!a(b))throw new TypeError("Array.prototype.sort callback must be a function");
                return W(this, b)
            }
        }, pa || !ra || !qa);
        var sa = !{toString: null}.propertyIsEnumerable("toString"), ta = function () {
        }.propertyIsEnumerable("prototype"), ua = !N("x", "0"), va = function (a) {
            var b = a.constructor;
            return b && b.prototype === a
        }, wa = {
            $window: !0,
            $console: !0,
            $parent: !0,
            $self: !0,
            $frame: !0,
            $frames: !0,
            $frameElement: !0,
            $webkitIndexedDB: !0,
            $webkitStorageInfo: !0,
            $external: !0
        }, xa = function () {
            if ("undefined" == typeof window)return !1;
            for (var a in window)try {
                !wa["$" + a] && N(window, a) && null !== window[a] && "object" == typeof window[a] && va(window[a])
            } catch (b) {
                return !0
            }
            return !1
        }(), ya = function (a) {
            if ("undefined" == typeof window || !xa)return va(a);
            try {
                return va(a)
            } catch (b) {
                return !1
            }
        }, za = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"], Aa = za.length, Ba = function (a) {
            return "[object Arguments]" === O(a)
        }, Ca = function (b) {
            return null !== b && "object" == typeof b && "number" == typeof b.length && b.length >= 0 && !X(b) && a(b.callee)
        }, Da = Ba(arguments) ? Ba : Ca;
        I(d, {
            keys: function (b) {
                var c = a(b), d = Da(b), e = null !== b && "object" == typeof b, f = e && D(b);
                if (!e && !c && !d)throw new TypeError("Object.keys called on a non-object");
                var h = [], i = ta && c;
                if (f && ua || d)for (var j = 0; j < b.length; ++j)U(h, g(j));
                if (!d)for (var k in b)i && "prototype" === k || !N(b, k) || U(h, g(k));
                if (sa)for (var l = ya(b), m = 0; Aa > m; m++) {
                    var n = za[m];
                    l && "constructor" === n || !N(b, n) || U(h, n)
                }
                return h
            }
        });
        var Ea = d.keys && function () {
                return 2 === d.keys(arguments).length
            }(1, 2), Fa = d.keys && function () {
                var a = d.keys(arguments);
                return 1 !== arguments.length || 1 !== a.length || 1 !== a[0]
            }(1), Ga = d.keys;
        I(d, {
            keys: function (a) {
                return Ga(Da(a) ? P(a) : a)
            }
        }, !Ea || Fa);
        var Ha = -621987552e5, Ia = "-000001", Ja = Date.prototype.toISOString && -1 === new Date(Ha).toISOString().indexOf(Ia), Ka = Date.prototype.toISOString && "1969-12-31T23:59:59.999Z" !== new Date(-1).toISOString();
        I(Date.prototype, {
            toISOString: function () {
                var a, b, c, d, e;
                if (!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");
                for (d = this.getUTCFullYear(), e = this.getUTCMonth(), d += Math.floor(e / 12), e = (e % 12 + 12) % 12, a = [e + 1, this.getUTCDate(), this.getUTCHours(), this.getUTCMinutes(), this.getUTCSeconds()], d = (0 > d ? "-" : d > 9999 ? "+" : "") + R("00000" + Math.abs(d), d >= 0 && 9999 >= d ? -4 : -6), b = a.length; b--;)c = a[b], 10 > c && (a[b] = "0" + c);
                return d + "-" + P(a, 0, 2).join("-") + "T" + P(a, 2).join(":") + "." + R("000" + this.getUTCMilliseconds(), -3) + "Z"
            }
        }, Ja || Ka);
        var La = function () {
            try {
                return Date.prototype.toJSON && null === new Date(0 / 0).toJSON() && -1 !== new Date(Ha).toJSON().indexOf(Ia) && Date.prototype.toJSON.call({
                        toISOString: function () {
                            return !0
                        }
                    })
            } catch (a) {
                return !1
            }
        }();
        La || (Date.prototype.toJSON = function () {
            var b = d(this), c = L.ToPrimitive(b);
            if ("number" == typeof c && !isFinite(c))return null;
            var e = b.toISOString;
            if (!a(e))throw new TypeError("toISOString property is not callable");
            return e.call(b)
        });
        var Ma = 1e15 === Date.parse("+033658-09-27T01:46:40.000Z"), Na = !isNaN(Date.parse("2012-04-04T24:00:00.500Z")) || !isNaN(Date.parse("2012-11-31T23:59:59.000Z")) || !isNaN(Date.parse("2012-12-31T23:59:60.000Z")), Oa = isNaN(Date.parse("2000-01-01T00:00:00.000Z"));
        if (Oa || Na || !Ma) {
            var Pa = Math.pow(2, 31) - 1, Qa = K(new Date(1970, 0, 1, 0, 0, 0, Pa + 1).getTime());
            Date = function (a) {
                var b = function (c, d, e, f, h, i, j) {
                    var k, l = arguments.length;
                    if (this instanceof a) {
                        var m = i, n = j;
                        if (Qa && l >= 7 && j > Pa) {
                            var o = Math.floor(j / Pa) * Pa, p = Math.floor(o / 1e3);
                            m += p, n -= 1e3 * p
                        }
                        k = 1 === l && g(c) === c ? new a(b.parse(c)) : l >= 7 ? new a(c, d, e, f, h, m, n) : l >= 6 ? new a(c, d, e, f, h, m) : l >= 5 ? new a(c, d, e, f, h) : l >= 4 ? new a(c, d, e, f) : l >= 3 ? new a(c, d, e) : l >= 2 ? new a(c, d) : l >= 1 ? new a(c) : new a
                    } else k = a.apply(this, arguments);
                    return J(k) || I(k, {constructor: b}, !0), k
                }, c = new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"), d = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365], e = function (a, b) {
                    var c = b > 1 ? 1 : 0;
                    return d[b] + Math.floor((a - 1969 + c) / 4) - Math.floor((a - 1901 + c) / 100) + Math.floor((a - 1601 + c) / 400) + 365 * (a - 1970)
                }, f = function (b) {
                    var c = 0, d = b;
                    if (Qa && d > Pa) {
                        var e = Math.floor(d / Pa) * Pa, f = Math.floor(e / 1e3);
                        c += f, d -= 1e3 * f
                    }
                    return i(new a(1970, 0, 1, 0, 0, c, d))
                };
                for (var h in a)N(a, h) && (b[h] = a[h]);
                I(b, {now: a.now, UTC: a.UTC}, !0), b.prototype = a.prototype, I(b.prototype, {constructor: b}, !0);
                var j = function (b) {
                    var d = c.exec(b);
                    if (d) {
                        var g, h = i(d[1]), j = i(d[2] || 1) - 1, k = i(d[3] || 1) - 1, l = i(d[4] || 0), m = i(d[5] || 0), n = i(d[6] || 0), o = Math.floor(1e3 * i(d[7] || 0)), p = Boolean(d[4] && !d[8]), q = "-" === d[9] ? 1 : -1, r = i(d[10] || 0), s = i(d[11] || 0), t = m > 0 || n > 0 || o > 0;
                        return (t ? 24 : 25) > l && 60 > m && 60 > n && 1e3 > o && j > -1 && 12 > j && 24 > r && 60 > s && k > -1 && k < e(h, j + 1) - e(h, j) && (g = 60 * (24 * (e(h, j) + k) + l + r * q), g = 1e3 * (60 * (g + m + s * q) + n) + o, p && (g = f(g)), g >= -864e13 && 864e13 >= g) ? g : 0 / 0
                    }
                    return a.parse.apply(this, arguments)
                };
                return I(b, {parse: j}), b
            }(Date)
        }
        Date.now || (Date.now = function () {
            return (new Date).getTime()
        });
        var Ra = j.toFixed && ("0.000" !== 8e-5.toFixed(3) || "1" !== .9.toFixed(0) || "1.25" !== 1.255.toFixed(2) || "1000000000000000128" !== 0xde0b6b3a7640080.toFixed(0)), Sa = {
            base: 1e7,
            size: 6,
            data: [0, 0, 0, 0, 0, 0],
            multiply: function (a, b) {
                for (var c = -1, d = b; ++c < Sa.size;)d += a * Sa.data[c], Sa.data[c] = d % Sa.base, d = Math.floor(d / Sa.base)
            },
            divide: function (a) {
                for (var b = Sa.size, c = 0; --b >= 0;)c += Sa.data[b], Sa.data[b] = Math.floor(c / a), c = c % a * Sa.base
            },
            numToString: function () {
                for (var a = Sa.size, b = ""; --a >= 0;)if ("" !== b || 0 === a || 0 !== Sa.data[a]) {
                    var c = g(Sa.data[a]);
                    "" === b ? b = c : b += R("0000000", 0, 7 - c.length) + c
                }
                return b
            },
            pow: function jb(a, b, c) {
                return 0 === b ? c : b % 2 === 1 ? jb(a, b - 1, c * a) : jb(a * a, b / 2, c)
            },
            log: function (a) {
                for (var b = 0, c = a; c >= 4096;)b += 12, c /= 4096;
                for (; c >= 2;)b += 1, c /= 2;
                return b
            }
        }, Ta = function (a) {
            var b, c, d, e, f, h, j, k;
            if (b = i(a), b = K(b) ? 0 : Math.floor(b), 0 > b || b > 20)throw new RangeError("Number.toFixed called with invalid number of decimals");
            if (c = i(this), K(c))return "NaN";
            if (-1e21 >= c || c >= 1e21)return g(c);
            if (d = "", 0 > c && (d = "-", c = -c), e = "0", c > 1e-21)if (f = Sa.log(c * Sa.pow(2, 69, 1)) - 69, h = 0 > f ? c * Sa.pow(2, -f, 1) : c / Sa.pow(2, f, 1), h *= 4503599627370496, f = 52 - f, f > 0) {
                for (Sa.multiply(0, h), j = b; j >= 7;)Sa.multiply(1e7, 0), j -= 7;
                for (Sa.multiply(Sa.pow(10, j, 1), 0), j = f - 1; j >= 23;)Sa.divide(1 << 23), j -= 23;
                Sa.divide(1 << j), Sa.multiply(1, 1), Sa.divide(2), e = Sa.numToString()
            } else Sa.multiply(0, h), Sa.multiply(1 << -f, 0), e = Sa.numToString() + R("0.00000000000000000000", 2, 2 + b);
            return b > 0 ? (k = e.length, e = b >= k ? d + R("0.0000000000000000000", 0, b - k + 2) + e : d + R(e, 0, k - b) + "." + R(e, k - b)) : e = d + e, e
        };
        I(j, {toFixed: Ta}, Ra);
        var Ua = function () {
            try {
                return "1" === 1..toPrecision(void 0)
            } catch (a) {
                return !0
            }
        }(), Va = j.toPrecision;
        I(j, {
            toPrecision: function (a) {
                return "undefined" == typeof a ? Va.call(this) : Va.call(this, a)
            }
        }, Ua), 2 !== "ab".split(/(?:ab)*/).length || 4 !== ".".split(/(.?)(.?)/).length || "t" === "tesst".split(/(s)*/)[1] || 4 !== "test".split(/(?:)/, -1).length || "".split(/.?/).length || ".".split(/()()/).length > 1 ? !function () {
            var a = "undefined" == typeof/()??/.exec("")[1], b = Math.pow(2, 32) - 1;
            h.split = function (c, d) {
                var e = String(this);
                if ("undefined" == typeof c && 0 === d)return [];
                if (!z(c))return S(this, c, d);
                var f, g, h, i, j = [], k = (c.ignoreCase ? "i" : "") + (c.multiline ? "m" : "") + (c.unicode ? "u" : "") + (c.sticky ? "y" : ""), l = 0, n = new RegExp(c.source, k + "g");
                a || (f = new RegExp("^" + n.source + "$(?!\\s)", k));
                var o = "undefined" == typeof d ? b : L.ToUint32(d);
                for (g = n.exec(e); g && (h = g.index + g[0].length, !(h > l && (U(j, R(e, l, g.index)), !a && g.length > 1 && g[0].replace(f, function () {
                    for (var a = 1; a < arguments.length - 2; a++)"undefined" == typeof arguments[a] && (g[a] = void 0)
                }), g.length > 1 && g.index < e.length && m.apply(j, P(g, 1)), i = g[0].length, l = h, j.length >= o)));)n.lastIndex === g.index && n.lastIndex++, g = n.exec(e);
                return l === e.length ? !i && n.test("") || U(j, "") : U(j, R(e, l)), j.length > o ? R(j, 0, o) : j
            }
        }() : "0".split(void 0, 0).length && (h.split = function (a, b) {
            return "undefined" == typeof a && 0 === b ? [] : S(this, a, b)
        });
        var Wa = h.replace, Xa = function () {
            var a = [];
            return "x".replace(/x(.)?/g, function (b, c) {
                U(a, c)
            }), 1 === a.length && "undefined" == typeof a[0]
        }();
        Xa || (h.replace = function (b, c) {
            var d = a(c), e = z(b) && /\)[*?]/.test(b.source);
            if (d && e) {
                var f = function (a) {
                    var d = arguments.length, e = b.lastIndex;
                    b.lastIndex = 0;
                    var f = b.exec(a) || [];
                    return b.lastIndex = e, U(f, arguments[d - 2], arguments[d - 1]), c.apply(this, f)
                };
                return Wa.call(this, b, f)
            }
            return Wa.call(this, b, c)
        });
        var Ya = h.substr, Za = "".substr && "b" !== "0b".substr(-1);
        I(h, {
            substr: function (a, b) {
                var c = a;
                return 0 > a && (c = r(this.length + a, 0)), Ya.call(this, c, b)
            }
        }, Za);
        var $a = "	\n\f\r   ᠎             　\u2028\u2029\ufeff", _a = "​", ab = "[" + $a + "]", bb = new RegExp("^" + ab + ab + "*"), cb = new RegExp(ab + ab + "*$"), db = h.trim && ($a.trim() || !_a.trim());
        I(h, {
            trim: function () {
                if ("undefined" == typeof this || null === this)throw new TypeError("can't convert " + this + " to object");
                return g(this).replace(bb, "").replace(cb, "")
            }
        }, db);
        var eb = h.lastIndexOf && -1 !== "abcあい".lastIndexOf("あい", 2);
        I(h, {
            lastIndexOf: function (a) {
                if ("undefined" == typeof this || null === this)throw new TypeError("can't convert " + this + " to object");
                for (var b = g(this), c = g(a), d = arguments.length > 1 ? i(arguments[1]) : 0 / 0, e = K(d) ? 1 / 0 : L.ToInteger(d), f = s(r(e, 0), b.length), h = c.length, j = f + h; j > 0;) {
                    j = r(0, j - h);
                    var k = T(R(b, j, f + h), c);
                    if (-1 !== k)return j + k
                }
                return -1
            }
        }, eb);
        var fb = h.lastIndexOf;
        if (I(h, {
                lastIndexOf: function () {
                    return fb.apply(this, arguments)
                }
            }, 1 !== h.lastIndexOf.length), 8 === parseInt($a + "08") && 22 === parseInt($a + "0x16") || (parseInt = function (a) {
                var b = /^[\-+]?0[xX]/;
                return function (c, d) {
                    var e = g(c).trim(), f = i(d) || (b.test(e) ? 16 : 10);
                    return a(e, f)
                }
            }(parseInt)), "RangeError: test" !== String(new RangeError("test"))) {
            var gb = function () {
                if ("undefined" == typeof this || null === this)throw new TypeError("can't convert " + this + " to object");
                var a = this.name;
                "undefined" == typeof a ? a = "Error" : "string" != typeof a && (a = g(a));
                var b = this.message;
                return "undefined" == typeof b ? b = "" : "string" != typeof b && (b = g(b)), a ? b ? a + ": " + b : a : b
            };
            Error.prototype.toString = gb
        }
        if (H) {
            var hb = function (a, b) {
                if (V(a, b)) {
                    var c = Object.getOwnPropertyDescriptor(a, b);
                    c.enumerable = !1, Object.defineProperty(a, b, c)
                }
            };
            hb(Error.prototype, "message"), "" !== Error.prototype.message && (Error.prototype.message = ""), hb(Error.prototype, "name")
        }
        if ("/a/gim" !== String(/a/gim)) {
            var ib = function () {
                var a = "/" + this.source + "/";
                return this.global && (a += "g"), this.ignoreCase && (a += "i"), this.multiline && (a += "m"), a
            };
            RegExp.prototype.toString = ib
        }
    })
}, function (a, b, c) {
    var d, e;
    !function (f, g) {
        "use strict";
        d = g, e = "function" == typeof d ? d.call(b, c, b, a) : d, !(void 0 !== e && (a.exports = e))
    }(this, function () {
        var a, b, c, d, e = Function.call, f = Object.prototype, g = e.bind(f.hasOwnProperty), h = e.bind(f.propertyIsEnumerable), i = e.bind(f.toString), j = g(f, "__defineGetter__");
        j && (a = e.bind(f.__defineGetter__), b = e.bind(f.__defineSetter__), c = e.bind(f.__lookupGetter__), d = e.bind(f.__lookupSetter__)), Object.getPrototypeOf || (Object.getPrototypeOf = function (a) {
            var b = a.__proto__;
            return b || null === b ? b : "[object Function]" === i(a.constructor) ? a.constructor.prototype : a instanceof Object ? f : null
        });
        var k = function (a) {
            try {
                return a.sentinel = 0, 0 === Object.getOwnPropertyDescriptor(a, "sentinel").value
            } catch (b) {
                return !1
            }
        };
        if (Object.defineProperty) {
            var l = k({}), m = "undefined" == typeof document || k(document.createElement("div"));
            if (!m || !l)var n = Object.getOwnPropertyDescriptor
        }
        if (!Object.getOwnPropertyDescriptor || n) {
            var o = "Object.getOwnPropertyDescriptor called on a non-object: ";
            Object.getOwnPropertyDescriptor = function (a, b) {
                if ("object" != typeof a && "function" != typeof a || null === a)throw new TypeError(o + a);
                if (n)try {
                    return n.call(Object, a, b)
                } catch (e) {
                }
                var i;
                if (!g(a, b))return i;
                if (i = {enumerable: h(a, b), configurable: !0}, j) {
                    var k = a.__proto__, l = a !== f;
                    l && (a.__proto__ = f);
                    var m = c(a, b), p = d(a, b);
                    if (l && (a.__proto__ = k), m || p)return m && (i.get = m), p && (i.set = p), i
                }
                return i.value = a[b], i.writable = !0, i
            }
        }
        if (Object.getOwnPropertyNames || (Object.getOwnPropertyNames = function (a) {
                return Object.keys(a)
            }), !Object.create) {
            var p, q = !({__proto__: null}instanceof Object), r = function () {
                if (!document.domain)return !1;
                try {
                    return !!new ActiveXObject("htmlfile")
                } catch (a) {
                    return !1
                }
            }, s = function () {
                var a, b;
                return b = new ActiveXObject("htmlfile"), b.write("<script></script>"), b.close(), a = b.parentWindow.Object.prototype, b = null, a
            }, t = function () {
                var a, b = document.createElement("iframe"), c = document.body || document.documentElement;
                return b.style.display = "none", c.appendChild(b), b.src = "javascript:", a = b.contentWindow.Object.prototype, c.removeChild(b), b = null, a
            };
            p = q || "undefined" == typeof document ? function () {
                return {__proto__: null}
            } : function () {
                var a = r() ? s() : t();
                delete a.constructor, delete a.hasOwnProperty, delete a.propertyIsEnumerable, delete a.isPrototypeOf, delete a.toLocaleString, delete a.toString, delete a.valueOf;
                var b = function () {
                };
                return b.prototype = a, p = function () {
                    return new b
                }, new b
            }, Object.create = function (a, b) {
                var c, d = function () {
                };
                if (null === a)c = p(); else {
                    if ("object" != typeof a && "function" != typeof a)throw new TypeError("Object prototype may only be an Object or null");

                    d.prototype = a, c = new d, c.__proto__ = a
                }
                return void 0 !== b && Object.defineProperties(c, b), c
            }
        }
        var u = function (a) {
            try {
                return Object.defineProperty(a, "sentinel", {}), "sentinel"in a
            } catch (b) {
                return !1
            }
        };
        if (Object.defineProperty) {
            var v = u({}), w = "undefined" == typeof document || u(document.createElement("div"));
            if (!v || !w)var x = Object.defineProperty, y = Object.defineProperties
        }
        if (!Object.defineProperty || x) {
            var z = "Property description must be an object: ", A = "Object.defineProperty called on non-object: ", B = "getters & setters can not be defined on this javascript engine";
            Object.defineProperty = function (e, g, h) {
                if ("object" != typeof e && "function" != typeof e || null === e)throw new TypeError(A + e);
                if ("object" != typeof h && "function" != typeof h || null === h)throw new TypeError(z + h);
                if (x)try {
                    return x.call(Object, e, g, h)
                } catch (i) {
                }
                if ("value"in h)if (j && (c(e, g) || d(e, g))) {
                    var k = e.__proto__;
                    e.__proto__ = f, delete e[g], e[g] = h.value, e.__proto__ = k
                } else e[g] = h.value; else {
                    if (!j && ("get"in h || "set"in h))throw new TypeError(B);
                    "get"in h && a(e, g, h.get), "set"in h && b(e, g, h.set)
                }
                return e
            }
        }
        Object.defineProperties && !y || (Object.defineProperties = function (a, b) {
            if (y)try {
                return y.call(Object, a, b)
            } catch (c) {
            }
            return Object.keys(b).forEach(function (c) {
                "__proto__" !== c && Object.defineProperty(a, c, b[c])
            }), a
        }), Object.seal || (Object.seal = function (a) {
            if (Object(a) !== a)throw new TypeError("Object.seal can only be called on Objects.");
            return a
        }), Object.freeze || (Object.freeze = function (a) {
            if (Object(a) !== a)throw new TypeError("Object.freeze can only be called on Objects.");
            return a
        });
        try {
            Object.freeze(function () {
            })
        } catch (C) {
            Object.freeze = function (a) {
                return function (b) {
                    return "function" == typeof b ? b : a(b)
                }
            }(Object.freeze)
        }
        Object.preventExtensions || (Object.preventExtensions = function (a) {
            if (Object(a) !== a)throw new TypeError("Object.preventExtensions can only be called on Objects.");
            return a
        }), Object.isSealed || (Object.isSealed = function (a) {
            if (Object(a) !== a)throw new TypeError("Object.isSealed can only be called on Objects.");
            return !1
        }), Object.isFrozen || (Object.isFrozen = function (a) {
            if (Object(a) !== a)throw new TypeError("Object.isFrozen can only be called on Objects.");
            return !1
        }), Object.isExtensible || (Object.isExtensible = function (a) {
            if (Object(a) !== a)throw new TypeError("Object.isExtensible can only be called on Objects.");
            for (var b = ""; g(a, b);)b += "?";
            a[b] = !0;
            var c = g(a, b);
            return delete a[b], c
        })
    })
}, function (a, b, c) {
    var d;
    (function (a, e, f) {
        (function () {
            "use strict";
            function g(a) {
                return "function" == typeof a || "object" == typeof a && null !== a
            }

            function h(a) {
                return "function" == typeof a
            }

            function i(a) {
                return "object" == typeof a && null !== a
            }

            function j(a) {
                V = a
            }

            function k(a) {
                Z = a
            }

            function l() {
                return function () {
                    a.nextTick(q)
                }
            }

            function m() {
                return function () {
                    U(q)
                }
            }

            function n() {
                var a = 0, b = new aa(q), c = document.createTextNode("");
                return b.observe(c, {characterData: !0}), function () {
                    c.data = a = ++a % 2
                }
            }

            function o() {
                var a = new MessageChannel;
                return a.port1.onmessage = q, function () {
                    a.port2.postMessage(0)
                }
            }

            function p() {
                return function () {
                    setTimeout(q, 1)
                }
            }

            function q() {
                for (var a = 0; Y > a; a += 2) {
                    var b = da[a], c = da[a + 1];
                    b(c), da[a] = void 0, da[a + 1] = void 0
                }
                Y = 0
            }

            function r() {
                try {
                    var a = c(6);
                    return U = a.runOnLoop || a.runOnContext, m()
                } catch (b) {
                    return p()
                }
            }

            function s() {
            }

            function t() {
                return new TypeError("You cannot resolve a promise with itself")
            }

            function u() {
                return new TypeError("A promises callback cannot return that same promise.")
            }

            function v(a) {
                try {
                    return a.then
                } catch (b) {
                    return ha.error = b, ha
                }
            }

            function w(a, b, c, d) {
                try {
                    a.call(b, c, d)
                } catch (e) {
                    return e
                }
            }

            function x(a, b, c) {
                Z(function (a) {
                    var d = !1, e = w(c, b, function (c) {
                        d || (d = !0, b !== c ? A(a, c) : C(a, c))
                    }, function (b) {
                        d || (d = !0, D(a, b))
                    }, "Settle: " + (a._label || " unknown promise"));
                    !d && e && (d = !0, D(a, e))
                }, a)
            }

            function y(a, b) {
                b._state === fa ? C(a, b._result) : b._state === ga ? D(a, b._result) : E(b, void 0, function (b) {
                    A(a, b)
                }, function (b) {
                    D(a, b)
                })
            }

            function z(a, b) {
                if (b.constructor === a.constructor)y(a, b); else {
                    var c = v(b);
                    c === ha ? D(a, ha.error) : void 0 === c ? C(a, b) : h(c) ? x(a, b, c) : C(a, b)
                }
            }

            function A(a, b) {
                a === b ? D(a, t()) : g(b) ? z(a, b) : C(a, b)
            }

            function B(a) {
                a._onerror && a._onerror(a._result), F(a)
            }

            function C(a, b) {
                a._state === ea && (a._result = b, a._state = fa, 0 !== a._subscribers.length && Z(F, a))
            }

            function D(a, b) {
                a._state === ea && (a._state = ga, a._result = b, Z(B, a))
            }

            function E(a, b, c, d) {
                var e = a._subscribers, f = e.length;
                a._onerror = null, e[f] = b, e[f + fa] = c, e[f + ga] = d, 0 === f && a._state && Z(F, a)
            }

            function F(a) {
                var b = a._subscribers, c = a._state;
                if (0 !== b.length) {
                    for (var d, e, f = a._result, g = 0; g < b.length; g += 3)d = b[g], e = b[g + c], d ? I(c, d, e, f) : e(f);
                    a._subscribers.length = 0
                }
            }

            function G() {
                this.error = null
            }

            function H(a, b) {
                try {
                    return a(b)
                } catch (c) {
                    return ia.error = c, ia
                }
            }

            function I(a, b, c, d) {
                var e, f, g, i, j = h(c);
                if (j) {
                    if (e = H(c, d), e === ia ? (i = !0, f = e.error, e = null) : g = !0, b === e)return void D(b, u())
                } else e = d, g = !0;
                b._state !== ea || (j && g ? A(b, e) : i ? D(b, f) : a === fa ? C(b, e) : a === ga && D(b, e))
            }

            function J(a, b) {
                try {
                    b(function (b) {
                        A(a, b)
                    }, function (b) {
                        D(a, b)
                    })
                } catch (c) {
                    D(a, c)
                }
            }

            function K(a, b) {
                var c = this;
                c._instanceConstructor = a, c.promise = new a(s), c._validateInput(b) ? (c._input = b, c.length = b.length, c._remaining = b.length, c._init(), 0 === c.length ? C(c.promise, c._result) : (c.length = c.length || 0, c._enumerate(), 0 === c._remaining && C(c.promise, c._result))) : D(c.promise, c._validationError())
            }

            function L(a) {
                return new ja(this, a).promise
            }

            function M(a) {
                function b(a) {
                    A(e, a)
                }

                function c(a) {
                    D(e, a)
                }

                var d = this, e = new d(s);
                if (!X(a))return D(e, new TypeError("You must pass an array to race.")), e;
                for (var f = a.length, g = 0; e._state === ea && f > g; g++)E(d.resolve(a[g]), void 0, b, c);
                return e
            }

            function N(a) {
                var b = this;
                if (a && "object" == typeof a && a.constructor === b)return a;
                var c = new b(s);
                return A(c, a), c
            }

            function O(a) {
                var b = this, c = new b(s);
                return D(c, a), c
            }

            function P() {
                throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
            }

            function Q() {
                throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
            }

            function R(a) {
                this._id = oa++, this._state = void 0, this._result = void 0, this._subscribers = [], s !== a && (h(a) || P(), this instanceof R || Q(), J(this, a))
            }

            function S() {
                var a;
                if ("undefined" != typeof e)a = e; else if ("undefined" != typeof self)a = self; else try {
                    a = Function("return this")()
                } catch (b) {
                    throw new Error("polyfill failed because global object is unavailable in this environment")
                }
                var c = a.Promise;
                c && "[object Promise]" === Object.prototype.toString.call(c.resolve()) && !c.cast || (a.Promise = pa)
            }

            var T;
            T = Array.isArray ? Array.isArray : function (a) {
                return "[object Array]" === Object.prototype.toString.call(a)
            };
            var U, V, W, X = T, Y = 0, Z = ({}.toString, function (a, b) {
                da[Y] = a, da[Y + 1] = b, Y += 2, 2 === Y && (V ? V(q) : W())
            }), $ = "undefined" != typeof window ? window : void 0, _ = $ || {}, aa = _.MutationObserver || _.WebKitMutationObserver, ba = "undefined" != typeof a && "[object process]" === {}.toString.call(a), ca = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel, da = new Array(1e3);
            W = ba ? l() : aa ? n() : ca ? o() : void 0 === $ ? r() : p();
            var ea = void 0, fa = 1, ga = 2, ha = new G, ia = new G;
            K.prototype._validateInput = function (a) {
                return X(a)
            }, K.prototype._validationError = function () {
                return new Error("Array Methods must be provided an Array")
            }, K.prototype._init = function () {
                this._result = new Array(this.length)
            };
            var ja = K;
            K.prototype._enumerate = function () {
                for (var a = this, b = a.length, c = a.promise, d = a._input, e = 0; c._state === ea && b > e; e++)a._eachEntry(d[e], e)
            }, K.prototype._eachEntry = function (a, b) {
                var c = this, d = c._instanceConstructor;
                i(a) ? a.constructor === d && a._state !== ea ? (a._onerror = null, c._settledAt(a._state, b, a._result)) : c._willSettleAt(d.resolve(a), b) : (c._remaining--, c._result[b] = a)
            }, K.prototype._settledAt = function (a, b, c) {
                var d = this, e = d.promise;
                e._state === ea && (d._remaining--, a === ga ? D(e, c) : d._result[b] = c), 0 === d._remaining && C(e, d._result)
            }, K.prototype._willSettleAt = function (a, b) {
                var c = this;
                E(a, void 0, function (a) {
                    c._settledAt(fa, b, a)
                }, function (a) {
                    c._settledAt(ga, b, a)
                })
            };
            var ka = L, la = M, ma = N, na = O, oa = 0, pa = R;
            R.all = ka, R.race = la, R.resolve = ma, R.reject = na, R._setScheduler = j, R._setAsap = k, R._asap = Z, R.prototype = {
                constructor: R,
                then: function (a, b) {
                    var c = this, d = c._state;
                    if (d === fa && !a || d === ga && !b)return this;
                    var e = new this.constructor(s), f = c._result;
                    if (d) {
                        var g = arguments[d - 1];
                        Z(function () {
                            I(d, e, g, f)
                        })
                    } else E(c, e, a, b);
                    return e
                },
                "catch": function (a) {
                    return this.then(null, a)
                }
            };
            var qa = S, ra = {Promise: pa, polyfill: qa};
            c(7).amd ? (d = function () {
                return ra
            }.call(b, c, b, f), !(void 0 !== d && (f.exports = d))) : "undefined" != typeof f && f.exports ? f.exports = ra : "undefined" != typeof this && (this.ES6Promise = ra), qa()
        }).call(this)
    }).call(b, c(4), function () {
        return this
    }(), c(5)(a))
}, function (a) {
    function b() {
        i = !1, f.length ? h = f.concat(h) : j = -1, h.length && c()
    }

    function c() {
        if (!i) {
            var a = setTimeout(b);
            i = !0;
            for (var c = h.length; c;) {
                for (f = h, h = []; ++j < c;)f && f[j].run();
                j = -1, c = h.length
            }
            f = null, i = !1, clearTimeout(a)
        }
    }

    function d(a, b) {
        this.fun = a, this.array = b
    }

    function e() {
    }

    var f, g = a.exports = {}, h = [], i = !1, j = -1;
    g.nextTick = function (a) {
        var b = new Array(arguments.length - 1);
        if (arguments.length > 1)for (var e = 1; e < arguments.length; e++)b[e - 1] = arguments[e];
        h.push(new d(a, b)), 1 !== h.length || i || setTimeout(c, 0)
    }, d.prototype.run = function () {
        this.fun.apply(null, this.array)
    }, g.title = "browser", g.browser = !0, g.env = {}, g.argv = [], g.version = "", g.versions = {}, g.on = e, g.addListener = e, g.once = e, g.off = e, g.removeListener = e, g.removeAllListeners = e, g.emit = e, g.binding = function () {
        throw new Error("process.binding is not supported")
    }, g.cwd = function () {
        return "/"
    }, g.chdir = function () {
        throw new Error("process.chdir is not supported")
    }, g.umask = function () {
        return 0
    }
}, function (a) {
    a.exports = function (a) {
        return a.webpackPolyfill || (a.deprecate = function () {
        }, a.paths = [], a.children = [], a.webpackPolyfill = 1), a
    }
}, function () {
}, function (a) {
    a.exports = function () {
        throw new Error("define cannot be used indirect")
    }
}, , function (a, b, c) {
    function d() {
    }

    var e = c(10), f = e.notundef, g = c(24);
    d.setDebug = function (a) {
        g.setDebug(a)
    };
    var h = {};
    d.getInstance = function (a) {
        var b = this;
        e.verifyOptions(a, "account");
        var c = b.genInstanceName(a), d = h[c];
        return d || (d = h[c] = new b(a)), d
    };
    var i = d.fn = d.prototype;
    i.init = function (a) {
        var b = this;
        e.verifyOptions(a, "account");
        var c = b.account = a.account;
        g.setDebug(a.debug);
        var d = a.constructor, f = d.genInstanceName(a), i = h[f];
        if (a._disableSingleton && (i = null), i)return i;
        b.name = f, h[f] = b, a.api = b;
        var j = b.protocol = new a.Protocol(a);
        return j.account = c, j.api = b, j.message = b.message = new a.Message({account: c}), b
    }, i.setOptions = function (a) {
        this.protocol.setOptions(a)
    }, i.processCallback = function () {
        function a(a, b, c, d) {
            var g = a.callback.options;
            if (d = d || g, b && (d = g), e.isFunction(a.cbaop)) {
                var h = a.cbaop(c, d);
                f(h) && (d = h)
            }
            var i = a.done;
            e.isObject(d) && (delete d.done, delete d.cb, delete d.callback), setTimeout(function () {
                i(c, d)
            }, 0)
        }

        return function (b, c) {
            e.verifyOptions(b, "done"), e.verifyCallback(b, "done"), b.callback = a.bind(this, b, c), b.callback.options = e.copy(b)
        }
    }(), i.processPs = function (a) {
        e.notexist(a.ps) && (a.ps = "")
    }, i.processCustom = function (a) {
        e.notexist(a.custom) && (a.custom = "")
    }, i.sendCmd = function () {
        this.protocol.sendCmd.apply(this.protocol, arguments)
    }, a.exports = d, c(26), c(27), c(40)
}, function (a, b, c) {
    var d = c(11), e = c(12);
    c(13);
    var f = c(14), g = c(15), h = /\s+/;
    g.capFirstLetter = function (a) {
        return a ? (a = "" + a, a.slice(0, 1).toUpperCase() + a.slice(1)) : ""
    }, g.guid = function () {
        var a = function () {
            return (65536 * (1 + Math.random()) | 0).toString(16).substring(1)
        };
        return function () {
            return a() + a() + a() + a() + a() + a() + a() + a()
        }
    }(), g.extend = function (a, b, c) {
        for (var d in b)"undefined" != typeof a[d] && c !== !0 || (a[d] = b[d])
    }, g.filterObj = function (a, b) {
        var c = {};
        return g.isString(b) && (b = b.split(h)), b.forEach(function (b) {
            a.hasOwnProperty(b) && (c[b] = a[b])
        }), c
    }, g.copy = function (a, b) {
        return b = b || {}, a ? (Object.keys(a).forEach(function (c) {
            g.exist(a[c]) && (b[c] = a[c])
        }), b) : b
    }, g.merge = function (a) {
        a = a || {};
        for (var b = 1, c = arguments.length; c > b; b++)g.copy(arguments[b], a);
        return a
    }, g.findObjIndexInArray = function (a, b) {
        a = a || [];
        var c = b.keyPath || "id", d = -1;
        return a.some(function (a, f) {
            return e(a, c) === b.value ? (d = f, !0) : void 0
        }), d
    }, g.findObjInArray = function (a, b) {
        var c = g.findObjIndexInArray(a, b);
        return -1 === c ? null : a[c]
    }, g.mergeObjArray = function () {
        var a = [], b = [].slice.call(arguments, 0, -1), c = arguments[arguments.length - 1];
        g.isArray(c) && (b.push(c), c = {});
        var d = c.keyPath = c.keyPath || "id";
        for (c.sortPath = c.sortPath || d; !a.length && b.length;)a = b.shift() || [], a = a.slice(0);
        var f;
        return b.forEach(function (b) {
            b && b.forEach(function (b) {
                f = g.findObjIndexInArray(a, {keyPath: d, value: e(b, d)}), -1 !== f ? g.merge(a[f], b) : a.push(b)
            })
        }), c.notSort || (a = g.sortObjArray(a, c)), a
    }, g.cutObjArray = function (a) {
        var b = a.slice(0), c = arguments.length, d = [].slice.call(arguments, 1, c - 1), f = arguments[c - 1];
        g.isObject(f) || (d.push(f), f = {});
        var h, i = f.keyPath = f.keyPath || "id";
        return d.forEach(function (a) {
            g.isArray(a) || (a = [a]), a.forEach(function (a) {
                a && (f.value = e(a, i), h = g.findObjIndexInArray(b, f), -1 !== h && b.splice(h, 1))
            })
        }), b
    }, g.sortObjArray = function (a, b) {
        b = b || {};
        var c = b.sortPath || "id";
        d.insensitive = !!b.insensitive;
        var f, h, i, j = !!b.desc;
        return i = g.isFunction(b.compare) ? b.compare : function (a, b) {
            return f = e(a, c), h = e(b, c), j ? d(h, f) : d(f, h)
        }, a.sort(i)
    }, g.emptyFunc = function () {
    }, g.isEmptyFunc = function (a) {
        return a === g.emptyFunc
    }, g.notEmptyFunc = function (a) {
        return a !== g.emptyFunc
    }, g.splice = function (a, b, c) {
        return [].splice.call(a, b, c)
    }, g.onError = function (a) {
        throw new f(a)
    }, g.verifyParamPresent = function (a, b, c) {
        c = c || "";
        var d = !1;
        switch (g.typeOf(b)) {
            case"undefined":
            case"null":
                d = !0;
                break;
            case"string":
                "" === b && (d = !0);
                break;
            case"array":
                b.length || (d = !0)
        }
        d && g.onParamAbsent(c + a)
    }, g.onParamAbsent = function (a) {
        g.onParamError('缺少参数"' + a + '", 请确保参数不是空字符串、空数组、null或undefined')
    }, g.verifyParamAbsent = function (a, b, c) {
        c = c || "", void 0 !== b && g.onParamPresent(c + a)
    }, g.onParamPresent = function (a) {
        g.onParamError('多余的参数"' + a + '"')
    }, g.verifyParamType = function (a, b, c) {
        var d = g.typeOf(b).toLowerCase();
        g.isArray(c) || (c = [c]), c = c.map(function (a) {
            return a.toLowerCase()
        });
        var e = !0;
        switch (-1 === c.indexOf(d) && (e = !1), d) {
            case"number":
                isNaN(b) && (e = !1)
        }
        e || g.onParamInvalidType(a, c)
    }, g.onParamInvalidType = function (a, b, c) {
        c = c || "", g.isArray(b) ? (b = b.map(function (a) {
            return '"' + a + '"'
        }), b = b.join(", ")) : b = '"' + b + '"', g.onParamError('参数"' + c + a + '"类型错误, 合法的类型包括: [' + b + "]")
    }, g.verifyParamValid = function (a, b, c) {
        g.isArray(c) || (c = [c]), -1 === c.indexOf(b) && g.onParamInvalidValue(a, c)
    }, g.onParamInvalidValue = function (a, b) {
        g.isArray(b) || (b = [b]), b = b.map(function (a) {
            return '"' + a + '"'
        }), g.isArray(b) && (b = b.join(", ")), g.onParamError('参数"' + a + '"值错误, 合法的值包括: [' + b + "]")
    }, g.verifyParamMin = function (a, b, c) {
        c > b && g.onParamError("参数" + a + "的值不能小于" + c)
    }, g.verifyParamMax = function (a, b, c) {
        b > c && g.onParamError("参数" + a + "的值不能大于" + c)
    }, g.verifyEmail = function () {
        var a = /^\S+@\S+$/;
        return function (b, c) {
            a.test(c) || g.onParamError("参数" + b + "邮箱格式错误, 合法格式必须包含@符号, @符号前后至少要各有一个字符")
        }
    }(), g.verifyTel = function () {
        var a = /^[+\-\(\)\d]+$/;
        return function (b, c) {
            a.test(c) || g.onParamError("参数" + b + "电话号码格式错误, 合法字符包括+、-、英文括号和数字")
        }
    }(), g.verifyBirth = function () {
        var a = /^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;
        return function (b, c) {
            a.test(c) || g.onParamError("参数" + b + '生日格式错误, 合法为"yyyy-MM-dd"')
        }
    }(), g.onParamError = function (a) {
        g.onError(a)
    }, g.verifyOptions = function (a, b, c, d) {
        if (g.verifyParamPresent("options", a), b && (g.isString(b) && (b = b.split(h)), g.isArray(b))) {
            c = void 0 === c ? !0 : !!c;
            var e = c ? g.verifyParamPresent : g.verifyParamAbsent;
            b.forEach(function (b) {
                e.call(g, b, a[b], d)
            })
        }
    }, g.verifyParamAtLeastPresentOne = function (a, b) {
        if (b && (g.isString(b) && (b = b.split(h)), g.isArray(b))) {
            var c = b.some(function (b) {
                return g.exist(a[b])
            });
            c || g.onParamError("以下参数[" + b.join(", ") + "]至少需要传入一个")
        }
    }, g.verifyParamPresentJustOne = function (a, b) {
        if (b && (g.isString(b) && (b = b.split(h)), g.isArray(b))) {
            var c = b.reduce(function (b, c) {
                return g.exist(a[c]) && b++, b
            }, 0);
            1 !== c && g.onParamError("以下参数[" + b.join(", ") + "]必须且只能传入一个")
        }
    }, g.verifyBooleanWithDefault = function (a, b, c, d) {
        g.undef(c) && (c = !0), h.test(b) && (b = b.split(h)), g.isArray(b) ? b.forEach(function (b) {
            g.verifyBooleanWithDefault(a, b, c, d)
        }) : "undefined" == typeof a[b] ? a[b] = c : g.isBoolean(a[b]) || g.onParamInvalidType(b, "boolean", d)
    }, g.verifyFileInput = function (a) {
        return g.verifyParamPresent("fileInput", a), g.isString(a) && (a = window.document.getElementById(a), a || g.onParamError("找不到要上传的文件对应的input, 请检查fileInput id")), "input" === a.tagName.toLowerCase() && "file" === a.type.toLowerCase() || g.onParamError("请提供正确的fileInput"), a
    }, g.verifyFileType = function (a) {
        g.verifyParamValid("type", a, g.validFileTypes)
    }, g.verifyCallback = function (a, b) {
        h.test(b) && (b = b.split(h)), g.isArray(b) ? b.forEach(function (b) {
            g.verifyCallback(a, b)
        }) : a[b] ? g.isFunction(a[b]) || g.onParamInvalidType(b, "function") : a[b] = g.emptyFunc
    }, g.verifyFileUploadCallback = function (a) {
        g.verifyCallback(a, "uploadprogress uploaddone uploaderror uploadcancel")
    }, g.validFileTypes = ["image", "audio", "video", "file"], g.validFileExts = {
        image: ["bmp", "gif", "jpg", "jpeg", "jng", "png", "webp"],
        audio: ["mp3", "wav", "aac", "wma", "wmv", "amr", "mp2", "flac", "vorbis", "ac3"],
        video: ["mp4", "rm", "rmvb", "wmv", "avi", "mpg", "mpeg"]
    }, g.filterFiles = function (a, b) {
        b = b.toLowerCase();
        var c, d, e, f, h = "file" === b, i = [];
        return [].forEach.call(a, function (a) {
            if (h)i.push(a); else if (c = a.name.slice(a.name.lastIndexOf(".") + 1), d = a.type.split("/"), d[0] && d[1]) {
                e = d[0].toLowerCase(), f = d[1].toLowerCase();
                var j = !1;
                j = e === b ? !0 : -1 !== g.validFileExts[b].indexOf(c), j && i.push(a)
            }
        }), i
    }, g.getFileName = function () {
        var a = g.notundef(window.FormData);
        return function (b) {
            return b = g.verifyFileInput(b), a ? b.files[0].name : b.value.slice(b.value.lastIndexOf("\\") + 1)
        }
    }(), g.sizeText = function () {
        var a = ["B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "BB"];
        return function (b) {
            var c, d = 0;
            do {
                b = Math.floor(100 * b) / 100;
                var e = a[d];
                c = b + e, b /= 1024, d++
            } while (b > 1);
            return c
        }
    }(), g.promises2cmds = function (a) {
        return a.map(function (a) {
            return a.cmd
        })
    }, g.objs2accounts = function (a) {
        return a.map(function (a) {
            return a.account
        })
    }, g.teams2ids = function (a) {
        return a.map(function (a) {
            return a.teamId
        })
    }, g.objs2ids = function (a) {
        return a.map(function (a) {
            return a.id
        })
    }, g.getMaxUpdateTime = function (a) {
        var b = a.map(function (a) {
            return +a.updateTime
        });
        return Math.max.apply(Math, b)
    }, g.genCheckUniqueFunc = function (a, b) {
        var c = [], d = {};
        return a = a || "id", b = b || 1e3, function (f) {
            var g;
            return c.length >= b && (g = c.shift(), delete d[g]), g = e(f, a), d[g] ? !1 : (d[g] = !0, c.push(g), !0)
        }
    }, a.exports = g
}, function (a) {
    a.exports = function b(a, c) {
        "use strict";
        var d, e, f = /(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi, g = /(^[ ]*|[ ]*$)/g, h = /(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/, i = /^0x[0-9a-f]+$/i, j = /^0/, k = function (a) {
            return b.insensitive && ("" + a).toLowerCase() || "" + a
        }, l = k(a).replace(g, "") || "", m = k(c).replace(g, "") || "", n = l.replace(f, "\x00$1\x00").replace(/\0$/, "").replace(/^\0/, "").split("\x00"), o = m.replace(f, "\x00$1\x00").replace(/\0$/, "").replace(/^\0/, "").split("\x00"), p = parseInt(l.match(i), 16) || 1 !== n.length && l.match(h) && Date.parse(l), q = parseInt(m.match(i), 16) || p && m.match(h) && Date.parse(m) || null;
        if (q) {
            if (q > p)return -1;
            if (p > q)return 1
        }
        for (var r = 0, s = Math.max(n.length, o.length); s > r; r++) {
            if (d = !(n[r] || "").match(j) && parseFloat(n[r]) || n[r] || 0, e = !(o[r] || "").match(j) && parseFloat(o[r]) || o[r] || 0, isNaN(d) !== isNaN(e))return isNaN(d) ? 1 : -1;
            if (typeof d != typeof e && (d += "", e += ""), e > d)return -1;
            if (d > e)return 1
        }
        return 0
    }
}, function (a) {
    function b(a, b) {
        for (var c = b.split("."); c.length;) {
            var d = c.shift(), e = !1;
            if ("?" == d[d.length - 1] && (d = d.slice(0, -1), e = !0), a = a[d], !a && e)return a
        }
        return a
    }

    a.exports = b
}, function () {
    if ("undefined" != typeof window) {
        var a = window.console;
        a || (a = {
            log: function () {
            }, info: function () {
            }, warn: function () {
            }, error: function () {
            }
        })
    }
}, function (a) {
    function b(a, b) {
        var c = this;
        c.message = a, c.code = b, c.time = new Date, c.timetag = +c.time
    }

    b.prototype = Object.create(Error.prototype), b.prototype.name = "NIMError", b.prototype.appendMessage = function (a) {
        var b = this;
        b.message ? a && (b.message += "(" + a + ")") : b.message = a
    };
    var c = {
        201: "客户端版本不对, 需升级sdk",
        302: "用户名或密码错误, 请检查appKey和token是否有效, account和token是否匹配",
        403: "非法操作或没有权限",
        404: "对象(用户/群/聊天室)不存在",
        405: "参数长度过长",
        408: "客户端请求超时",
        414: "参数错误",
        415: "服务不可用/没有聊天室服务器可分配",
        416: "频率控制",
        417: "重复操作",
        422: "帐号被禁用",
        500: "服务器内部错误",
        501: "数据库操作失败",
        503: "服务器繁忙",
        509: "已失效",
        801: "群人数达到上限",
        802: "没有权限",
        803: "群不存在或未发生变化",
        804: "用户不在群里面",
        805: "群类型不匹配",
        806: "创建群数量达到限制",
        807: "群成员状态不对",
        809: "已经在群里",
        997: "协议已失效",
        998: "解包错误",
        999: "打包错误",
        13002: "聊天室状态异常",
        13003: "在黑名单中",
        13004: "在禁言名单中",
        Connect_Failed: "无法建立连接, 请确保flash版本号大于10, 或者请确保项目部署在HTTPS环境下（IE8/9）",
        Error_Internet_Disconnected: "网断了",
        Error_Connection_is_not_Established: "连接未建立",
        Error_Timeout: "超时",
        Param_Error: "参数错误",
        No_File_Selected: "请选择文件",
        Wrong_File_Type: "文件类型错误",
        File_Too_Large: "文件过大",
        Cross_Origin_Iframe: "不能获取跨域Iframe的内容",
        Not_Support: "不支持",
        NO_DB: "无数据库",
        DB: "数据库错误",
        Still_In_Team: "还在群里",
        Session_Exist: "会话已存在",
        Error_Unknown: "未知错误",
        Operation_Canceled: "操作取消"
    };
    [200, 406, 808, 810].forEach(function (a) {
        c[a] = null
    }), b.genError = function (a) {
        var d = c[a];
        return void 0 === d && (d = "操作失败"), null === d ? null : new b(d, a)
    }, b.multiInstance = function () {
        return new b("不允许初始化多个实例", "Not_Allow_Multi_Instance")
    }, b.newNetworkError = function () {
        var a = "Error_Internet_Disconnected";
        return new b(c[a], a)
    }, b.newConnectError = function (a) {
        var d = "Connect_Failed";
        return new b(c[d] || a, d)
    }, b.newConnectionError = function () {
        var a = "Error_Connection_is_not_Established";
        return new b(c[a], a)
    }, b.newTimeoutError = function () {
        var a = "Error_Timeout";
        return new b(c[a], a)
    }, b.newParamError = function (a) {
        var d = "Param_Error";
        return new b(a || c[d], d)
    }, b.newNoFileError = function (a) {
        var d = "No_File_Selected";
        return new b(a || c[d], d)
    }, b.newWrongFileTypeError = function (a) {
        var d = "Wrong_File_Type";
        return new b(a || c[d], d)
    }, b.newFileTooLargeError = function (a) {
        var d = "File_Too_Large";
        return new b(a || c[d], d)
    }, b.newCORSIframeError = function () {
        var a = "Cross_Origin_Iframe";
        return new b(c[a], a)
    }, b.newSupportError = function (a, c) {
        return new b("不支持" + a, "Not_Support_" + c)
    }, b.newSupportDBError = function () {
        return b.newSupportError("数据库", "DB")
    }, b.noDBError = function () {
        var a = "NO_DB";
        return new b(c[a], a)
    }, b.newDBError = function () {
        var a = "DB";
        return new b(c[a], a)
    }, b.newUnknownError = function () {
        var a = "Error_Unknown";
        return new b(c[a], a)
    }, b.stillInTeamError = function () {
        var a = "Still_In_Team";
        return new b(c[a], a)
    }, b.sessionExist = function () {
        var a = "Session_Exist";
        return new b(c[a], a)
    }, b.cancel = function () {
        var a = "Operation_Canceled";
        return new b(c[a], a)
    }, a.exports = b
}, function (a, b, c) {
    var d = {};
    d.mixin = c(16), d.o = d.emptyObj = {}, d.f = d.emptyFunc = function () {
    }, d.regBlank = d.regWhiteSpace = /\s+/gi, a.exports = d;
    var e = ["object", "type", "url", "id", "blob"];
    e.forEach(function (a) {
        c(17)("./" + a)
    })
}, function (a) {
    a.exports = function (a, b) {
        Object.keys(b).forEach(function (c) {
            a[c] = b[c]
        })
    }
}, function (a, b, c) {
    function d(a) {
        return c(e(a))
    }

    function e(a) {
        return f[a] || function () {
                throw new Error("Cannot find module '" + a + "'.")
            }()
    }

    var f = {
        "./blob": 18,
        "./blob.js": 18,
        "./entry": 19,
        "./entry.js": 19,
        "./id": 20,
        "./id.js": 20,
        "./index": 15,
        "./index.js": 15,
        "./mixin": 16,
        "./mixin.js": 16,
        "./object": 21,
        "./object.js": 21,
        "./type": 22,
        "./type.js": 22,
        "./url": 23,
        "./url.js": 23
    };
    d.keys = function () {
        return Object.keys(f)
    }, d.resolve = e, a.exports = d, d.id = 17
}, function (a, b, c) {
    var d = c(15);
    d.blobFromDataURL = function (a) {
        var b;
        b = a.split(",")[0].indexOf("base64") >= 0 ? window.atob(a.split(",")[1]) : window.decodeURIComponent(a.split(",")[1]);
        for (var c = a.split(",")[0].split(":")[1].split(";")[0], d = new window.Uint8Array(b.length), e = 0; e < b.length; e++)d[e] = b.charCodeAt(e);
        return new window.Blob([d], {type: c})
    }
}, function (a, b, c) {
    a.exports = c(15)
}, function (a, b, c) {
    var d = c(15);
    d.uniqueID = function () {
        var a = 0;
        return function () {
            return "" + a++
        }
    }()
}, function (a, b, c) {
    var d = c(15), e = c(16);
    d.merge = function (a) {
        a = a || {};
        var b = [].slice.call(arguments, 1);
        return b.forEach(function (b) {
            e(a, b)
        }), a
    }, d.fetch = function (a, b) {
        return Object.keys(a).forEach(function (c) {
            d.exist(b[c]) && (a[c] = b[c])
        }), a
    }, d.string2object = function (a, b) {
        var c = {};
        return a = a || "", a.split(b).forEach(function (a) {
            var b = a.split("="), d = b.shift();
            d && (c[decodeURIComponent(d)] = decodeURIComponent(b.join("=")))
        }), c
    }, d.object2string = function (a, b, c) {
        if (!a)return "";
        var e = [];
        return Object.keys(a).forEach(function (b) {
            var f = a[b];
            d.isFunction(f) || (d.isDate(f) ? f = f.getTime() : d.isArray(f) ? f = f.join(",") : d.isObject(f) && (f = JSON.stringify(f)), c && (f = encodeURIComponent(f)), e.push(encodeURIComponent(b) + "=" + f))
        }), e.join(b || ",")
    }, d.checkWithDefault = function (a, b, c) {
        var d = a[b] || a[b.toLowerCase()];
        return d || (d = c, a[b] = d), d
    }
}, function (a, b, c) {
    var d = c(15);
    d.typeOf = function (a) {
        return Object.prototype.toString.call(a).slice(8, -1).toLowerCase()
    }, d.isString = function (a) {
        return "string" === d.typeOf(a)
    }, d.isNumber = function (a) {
        return "number" === d.typeOf(a)
    }, d.isBoolean = function (a) {
        return "boolean" === d.typeOf(a)
    }, d.isArray = function (a) {
        return "array" === d.typeOf(a)
    }, d.isFunction = function (a) {
        return "function" === d.typeOf(a)
    }, d.isObject = function (a) {
        return d.exist(a) && "object" === d.typeOf(a)
    }, d.isDate = function (a) {
        return "date" === d.typeOf(a)
    }, d.isRegExp = function (a) {
        return "regexp" === d.typeOf(a)
    }, d.isError = function (a) {
        return "error" === d.typeOf(a)
    }, d.isnull = function (a) {
        return null === a
    }, d.notnull = function (a) {
        return null !== a
    }, d.undef = function (a) {
        return "undefined" == typeof a
    }, d.notundef = function (a) {
        return "undefined" != typeof a
    }, d.exist = function (a) {
        return d.notundef(a) && d.notnull(a)
    }, d.notexist = function (a) {
        return d.undef(a) || d.isnull(a)
    }
}, function (a, b, c) {
    var d = c(15);
    d.genUrlSep = function (a) {
        return a.indexOf("?") < 0 ? "?" : "&"
    }, d.object2query = function (a) {
        return d.object2string(a, "&", !0)
    }, d.url2origin = function () {
        var a = /^([\w]+?:\/\/.*?(?=\/|$))/i;
        return function (b) {
            return a.test(b || "") ? RegExp.$1.toLowerCase() : ""
        }
    }()
}, function (a, b, c) {
    var d = c(25), e = c(10), f = {
        debug: !1,
        api: "log",
        style: "color:blue;",
        log: e.emptyFunc,
        info: e.emptyFunc,
        warn: e.emptyFunc
    }, g = ["Chrome", "Safari", "Firefox"];
    f.setDebug = function (a) {
        if (a = a ? a : !1, f.debug = a, a.style && (f.style = a.style), f.debug && window.console) {
            var b = window.console;
            f.log = function () {
                var a = f.formatArgs(arguments);
                b.log && (b.log.apply ? (-1 !== g.indexOf(d.name) && e.isString(a[0]) && (a[0] = "%c" + a[0], a.splice(1, 0, f.style)), f.chrome("log", a)) : f.ie("log", a))
            }, f.info = function () {
                var a = f.formatArgs(arguments);
                b.info && (b.info.apply ? f.chrome("info", a) : f.ie("info", a))
            }, f.warn = function () {
                var a = f.formatArgs(arguments);
                b.warn && (b.warn.apply ? f.chrome("warn", a) : f.ie("warn", a))
            }, f.error = function () {
                var a = f.formatArgs(arguments);
                b.error && (b.error.apply ? f.chrome("error", a) : f.ie("error", a))
            }, f.chrome = function (a, c) {
                -1 !== g.indexOf(d.name) ? b[a].apply(b, c) : f.ie(a, c)
            }, f.ie = function (a, c) {
                c.forEach(function (c) {
                    b[a](JSON.stringify(c, null, 4))
                })
            }
        }
    }, f.formatArgs = function (a) {
        a = [].slice.call(a, 0);
        var b = new Date, c = b.getFullYear() + "-" + h(b.getMonth() + 1) + "-" + h(b.getDate()) + " " + h(b.getHours()) + ":" + h(b.getMinutes()) + ":" + h(b.getSeconds()) + ":" + h(b.getMilliseconds(), 3), d = "[NIM SDK LOG " + c + " " + +b + "]	";
        return e.isString(a[0]) ? a[0] = d + a[0] : a.splice(0, 0, d), a
    };
    var h = function (a, b) {
        b = b || 2;
        for (var c = "" + a; c.length < b;)c = "0" + c;
        return c
    };
    a.exports = f
}, function (a, b, c) {
    var d;
    (function (a, e) {
        (function () {
            "use strict";
            function f(a) {
                return a = String(a), a.charAt(0).toUpperCase() + a.slice(1)
            }

            function g(a, b, c) {
                var d = {
                    6.4: "10",
                    6.3: "8.1",
                    6.2: "8",
                    6.1: "Server 2008 R2 / 7",
                    "6.0": "Server 2008 / Vista",
                    5.2: "Server 2003 / XP 64-bit",
                    5.1: "XP",
                    5.01: "2000 SP1",
                    "5.0": "2000",
                    "4.0": "NT",
                    "4.90": "ME"
                };
                return b && c && /^Win/i.test(a) && (d = d[/[\d.]+$/.exec(a)]) && (a = "Windows " + d), a = String(a), b && c && (a = a.replace(RegExp(b, "i"), c)), a = i(a.replace(/ ce$/i, " CE").replace(/\bhpw/i, "web").replace(/\bMacintosh\b/, "Mac OS").replace(/_PowerPC\b/i, " OS").replace(/\b(OS X) [^ \d]+/i, "$1").replace(/\bMac (OS X)\b/, "$1").replace(/\/(\d)/, " $1").replace(/_/g, ".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i, "").replace(/\bx86\.64\b/gi, "x86_64").replace(/\b(Windows Phone) OS\b/, "$1").split(" on ")[0])
            }

            function h(a, b) {
                var c = -1, d = a ? a.length : 0;
                if ("number" == typeof d && d > -1 && w >= d)for (; ++c < d;)b(a[c], c, a); else j(a, b)
            }

            function i(a) {
                return a = o(a), /^(?:webOS|i(?:OS|P))/.test(a) ? a : f(a)
            }

            function j(a, b) {
                for (var c in a)A.call(a, c) && b(a[c], c, a)
            }

            function k(a) {
                return null == a ? f(a) : B.call(a).slice(8, -1)
            }

            function l(a, b) {
                var c = null != a ? typeof a[b] : "number";
                return !/^(?:boolean|number|string|undefined)$/.test(c) && ("object" == c ? !!a[b] : !0)
            }

            function m(a) {
                return String(a).replace(/([ -])(?!$)/g, "$1?")
            }

            function n(a, b) {
                var c = null;
                return h(a, function (d, e) {
                    c = b(c, d, e, a)
                }), c
            }

            function o(a) {
                return String(a).replace(/^ +| +$/g, "")
            }

            function p(a) {
                function b(b) {
                    return n(b, function (b, c) {
                        return b || RegExp("\\b" + (c.pattern || m(c)) + "\\b", "i").exec(a) && (c.label || c)
                    })
                }

                function c(b) {
                    return n(b, function (b, c, d) {
                        return b || (c[X] || c[/^[a-z]+(?: +[a-z]+\b)*/i.exec(X)] || RegExp("\\b" + m(d) + "(?:\\b|\\w*\\d)", "i").exec(a)) && d
                    })
                }

                function d(b) {
                    return n(b, function (b, c) {
                        return b || RegExp("\\b" + (c.pattern || m(c)) + "\\b", "i").exec(a) && (c.label || c)
                    })
                }

                function e(b) {
                    return n(b, function (b, c) {
                        var d = c.pattern || m(c);
                        return !b && (b = RegExp("\\b" + d + "(?:/[\\d.]+|[ \\w.]*)", "i").exec(a)) && (b = g(b, d, c.label || c)), b
                    })
                }

                function f(b) {
                    return n(b, function (b, c) {
                        var d = c.pattern || m(c);
                        return !b && (b = RegExp("\\b" + d + " *\\d+[.\\w_]*", "i").exec(a) || RegExp("\\b" + d + "(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)", "i").exec(a)) && ((b = String(c.label && !RegExp(d, "i").test(c.label) ? c.label : b).split("/"))[1] && !/[\d.]+/.test(b[0]) && (b[0] += " " + b[1]), c = c.label || c, b = i(b[0].replace(RegExp(d, "i"), c).replace(RegExp("; *(?:" + c + "[_-])?", "i"), " ").replace(RegExp("(" + c + ")[-_.]?(\\w)", "i"), "$1 $2"))), b
                    })
                }

                function h(b) {
                    return n(b, function (b, c) {
                        return b || (RegExp(c + "(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)", "i").exec(a) || 0)[1] || null
                    })
                }

                function q() {
                    return this.description || ""
                }

                var t = r, u = a && "object" == typeof a && "String" != k(a);
                u && (t = a, a = null);
                var v = t.navigator || {}, w = v.userAgent || "";
                a || (a = w);
                var z, A, C = u || y == s, D = u ? !!v.likeChrome : /\bChrome\b/.test(a) && !/internal|\n/i.test(B.toString()), E = "Object", F = u ? E : "ScriptBridgingProxyObject", G = u ? E : "Environment", H = u && t.java ? "JavaPackage" : k(t.java), I = u ? E : "RuntimeObject", J = /\bJava/.test(H) && t.java, K = J && k(t.environment) == G, L = J ? "a" : "α", M = J ? "b" : "β", N = t.document || {}, O = t.operamini || t.opera, P = x.test(P = u && O ? O["[[Class]]"] : k(O)) ? P : O = null, Q = a, R = [], S = null, T = a == w, U = T && O && "function" == typeof O.version && O.version(), V = b(["Trident", {
                    label: "WebKit",
                    pattern: "AppleWebKit"
                }, "iCab", "Presto", "NetFront", "Tasman", "KHTML", "Gecko"]), W = d(["Adobe AIR", "Arora", "Avant Browser", "Breach", "Camino", "Epiphany", "Fennec", "Flock", "Galeon", "GreenBrowser", "iCab", "Iceweasel", {
                    label: "SRWare Iron",
                    pattern: "Iron"
                }, "K-Meleon", "Konqueror", "Lunascape", "Maxthon", "Midori", "Nook Browser", "PhantomJS", "Raven", "Rekonq", "RockMelt", "SeaMonkey", {
                    label: "Silk",
                    pattern: "(?:Cloud9|Silk-Accelerated)"
                }, "Sleipnir", "SlimBrowser", "Sunrise", "Swiftfox", "WebPositive", "Opera Mini", {
                    label: "Opera Mini",
                    pattern: "OPiOS"
                }, "Opera", {label: "Opera", pattern: "OPR"}, "Chrome", {
                    label: "Chrome Mobile",
                    pattern: "(?:CriOS|CrMo)"
                }, {label: "Firefox", pattern: "(?:Firefox|Minefield)"}, {
                    label: "IE",
                    pattern: "IEMobile"
                }, {label: "IE", pattern: "MSIE"}, "Safari"]), X = f([{
                    label: "BlackBerry",
                    pattern: "BB10"
                }, "BlackBerry", {label: "Galaxy S", pattern: "GT-I9000"}, {
                    label: "Galaxy S2",
                    pattern: "GT-I9100"
                }, {label: "Galaxy S3", pattern: "GT-I9300"}, {
                    label: "Galaxy S4",
                    pattern: "GT-I9500"
                }, "Google TV", "Lumia", "iPad", "iPod", "iPhone", "Kindle", {
                    label: "Kindle Fire",
                    pattern: "(?:Cloud9|Silk-Accelerated)"
                }, "Nook", "PlayBook", "PlayStation 4", "PlayStation 3", "PlayStation Vita", "TouchPad", "Transformer", {
                    label: "Wii U",
                    pattern: "WiiU"
                }, "Wii", "Xbox One", {label: "Xbox 360", pattern: "Xbox"}, "Xoom"]), Y = c({
                    Apple: {
                        iPad: 1,
                        iPhone: 1,
                        iPod: 1
                    },
                    Amazon: {Kindle: 1, "Kindle Fire": 1},
                    Asus: {Transformer: 1},
                    "Barnes & Noble": {Nook: 1},
                    BlackBerry: {PlayBook: 1},
                    Google: {"Google TV": 1},
                    HP: {TouchPad: 1},
                    HTC: {},
                    LG: {},
                    Microsoft: {Xbox: 1, "Xbox One": 1},
                    Motorola: {Xoom: 1},
                    Nintendo: {"Wii U": 1, Wii: 1},
                    Nokia: {Lumia: 1},
                    Samsung: {"Galaxy S": 1, "Galaxy S2": 1, "Galaxy S3": 1, "Galaxy S4": 1},
                    Sony: {"PlayStation 4": 1, "PlayStation 3": 1, "PlayStation Vita": 1}
                }), Z = e(["Windows Phone ", "Android", "CentOS", "Debian", "Fedora", "FreeBSD", "Gentoo", "Haiku", "Kubuntu", "Linux Mint", "Red Hat", "SuSE", "Ubuntu", "Xubuntu", "Cygwin", "Symbian OS", "hpwOS", "webOS ", "webOS", "Tablet OS", "Linux", "Mac OS X", "Macintosh", "Mac", "Windows 98;", "Windows "]);
                if (V && (V = [V]), Y && !X && (X = f([Y])), (z = /\bGoogle TV\b/.exec(X)) && (X = z[0]), /\bSimulator\b/i.test(a) && (X = (X ? X + " " : "") + "Simulator"), "Opera Mini" == W && /\bOPiOS\b/.test(a) && R.push("running in Turbo/Uncompressed mode"), /^iP/.test(X) ? (W || (W = "Safari"), Z = "iOS" + ((z = / OS ([\d_]+)/i.exec(a)) ? " " + z[1].replace(/_/g, ".") : "")) : "Konqueror" != W || /buntu/i.test(Z) ? Y && "Google" != Y && (/Chrome/.test(W) && !/\bMobile Safari\b/i.test(a) || /\bVita\b/.test(X)) ? (W = "Android Browser", Z = /\bAndroid\b/.test(Z) ? Z : "Android") : W && !(z = !/\bMinefield\b|\(Android;/i.test(a) && /\b(?:Firefox|Safari)\b/.exec(W)) || (W && !X && /[\/,]|^[^(]+?\)/.test(a.slice(a.indexOf(z + "/") + 8)) && (W = null),
                    (z = X || Y || Z) && (X || Y || /\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Z)) && (W = /[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Z) ? Z : z) + " Browser")) : Z = "Kubuntu", (z = /\((Mobile|Tablet).*?Firefox\b/i.exec(a)) && z[1] && (Z = "Firefox OS", X || (X = z[1])), U || (U = h(["(?:Cloud9|CriOS|CrMo|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))", "Version", m(W), "(?:Firefox|Minefield|NetFront)"])), "iCab" == V && parseFloat(U) > 3 ? V = ["WebKit"] : "Trident" != V && (z = /\bOpera\b/.test(W) && (/\bOPR\b/.test(a) ? "Blink" : "Presto") || /\b(?:Midori|Nook|Safari)\b/i.test(a) && "WebKit" || !V && /\bMSIE\b/i.test(a) && ("Mac OS" == Z ? "Tasman" : "Trident")) ? V = [z] : /\bPlayStation\b(?! Vita\b)/i.test(W) && "WebKit" == V && (V = ["NetFront"]), "IE" == W && (z = (/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(a) || 0)[1]) ? (W += " Mobile", Z = "Windows Phone " + (/\+$/.test(z) ? z : z + ".x"), R.unshift("desktop mode")) : /\bWPDesktop\b/i.test(a) ? (W = "IE Mobile", Z = "Windows Phone 8+", R.unshift("desktop mode"), U || (U = (/\brv:([\d.]+)/.exec(a) || 0)[1])) : "IE" != W && "Trident" == V && (z = /\brv:([\d.]+)/.exec(a)) ? (/\bWPDesktop\b/i.test(a) || (W && R.push("identifying as " + W + (U ? " " + U : "")), W = "IE"), U = z[1]) : "Chrome" != W && "IE" == W || !(z = /\bEdge\/([\d.]+)/.exec(a)) || (W = "Microsoft Edge", U = z[1], V = ["Trident"]), T) {
                    if (l(t, "global"))if (J && (z = J.lang.System, Q = z.getProperty("os.arch"), Z = Z || z.getProperty("os.name") + " " + z.getProperty("os.version")), C && l(t, "system") && (z = [t.system])[0]) {
                        Z || (Z = z[0].os || null);
                        try {
                            z[1] = t.require("ringo/engine").version, U = z[1].join("."), W = "RingoJS"
                        } catch ($) {
                            z[0].global.system == t.system && (W = "Narwhal")
                        }
                    } else"object" == typeof t.process && (z = t.process) ? (W = "Node.js", Q = z.arch, Z = z.platform, U = /[\d.]+/.exec(z.version)[0]) : K && (W = "Rhino"); else k(z = t.runtime) == F ? (W = "Adobe AIR", Z = z.flash.system.Capabilities.os) : k(z = t.phantom) == I ? (W = "PhantomJS", U = (z = z.version || null) && z.major + "." + z.minor + "." + z.patch) : "number" == typeof N.documentMode && (z = /\bTrident\/(\d+)/i.exec(a)) && (U = [U, N.documentMode], (z = +z[1] + 4) != U[1] && (R.push("IE " + U[1] + " mode"), V && (V[1] = ""), U[1] = z), U = "IE" == W ? String(U[1].toFixed(1)) : U[0]);
                    Z = Z && i(Z)
                }
                U && (z = /(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(U) || /(?:alpha|beta)(?: ?\d)?/i.exec(a + ";" + (T && v.appMinorVersion)) || /\bMinefield\b/i.test(a) && "a") && (S = /b/i.test(z) ? "beta" : "alpha", U = U.replace(RegExp(z + "\\+?$"), "") + ("beta" == S ? M : L) + (/\d+\+?/.exec(z) || "")), "Fennec" == W || "Firefox" == W && /\b(?:Android|Firefox OS)\b/.test(Z) ? W = "Firefox Mobile" : "Maxthon" == W && U ? U = U.replace(/\.[\d.]+/, ".x") : "Silk" == W ? (/\bMobi/i.test(a) || (Z = "Android", R.unshift("desktop mode")), /Accelerated *= *true/i.test(a) && R.unshift("accelerated")) : /\bXbox\b/i.test(X) ? (Z = null, "Xbox 360" == X && /\bIEMobile\b/.test(a) && R.unshift("mobile mode")) : !/^(?:Chrome|IE|Opera)$/.test(W) && (!W || X || /Browser|Mobi/.test(W)) || "Windows CE" != Z && !/Mobi/i.test(a) ? "IE" == W && T && null === t.external ? R.unshift("platform preview") : (/\bBlackBerry\b/.test(X) || /\bBB10\b/.test(a)) && (z = (RegExp(X.replace(/ +/g, " *") + "/([.\\d]+)", "i").exec(a) || 0)[1] || U) ? (z = [z, /BB10/.test(a)], Z = (z[1] ? (X = null, Y = "BlackBerry") : "Device Software") + " " + z[0], U = null) : this != j && "Wii" != X && (T && O || /Opera/.test(W) && /\b(?:MSIE|Firefox)\b/i.test(a) || "Firefox" == W && /\bOS X (?:\d+\.){2,}/.test(Z) || "IE" == W && (Z && !/^Win/.test(Z) && U > 5.5 || /\bWindows XP\b/.test(Z) && U > 8 || 8 == U && !/\bTrident\b/.test(a))) && !x.test(z = p.call(j, a.replace(x, "") + ";")) && z.name && (z = "ing as " + z.name + ((z = z.version) ? " " + z : ""), x.test(W) ? (/\bIE\b/.test(z) && "Mac OS" == Z && (Z = null), z = "identify" + z) : (z = "mask" + z, W = P ? i(P.replace(/([a-z])([A-Z])/g, "$1 $2")) : "Opera", /\bIE\b/.test(z) && (Z = null), T || (U = null)), V = ["Presto"], R.push(z)) : W += " Mobile", (z = (/\bAppleWebKit\/([\d.]+\+?)/i.exec(a) || 0)[1]) && (z = [parseFloat(z.replace(/\.(\d)$/, ".0$1")), z], "Safari" == W && "+" == z[1].slice(-1) ? (W = "WebKit Nightly", S = "alpha", U = z[1].slice(0, -1)) : U != z[1] && U != (z[2] = (/\bSafari\/([\d.]+\+?)/i.exec(a) || 0)[1]) || (U = null), z[1] = (/\bChrome\/([\d.]+)/i.exec(a) || 0)[1], 537.36 == z[0] && 537.36 == z[2] && parseFloat(z[1]) >= 28 && "IE" != W && "Microsoft Edge" != W && (V = ["Blink"]), T && (D || z[1]) ? (V && (V[1] = "like Chrome"), z = z[1] || (z = z[0], 530 > z ? 1 : 532 > z ? 2 : 532.05 > z ? 3 : 533 > z ? 4 : 534.03 > z ? 5 : 534.07 > z ? 6 : 534.1 > z ? 7 : 534.13 > z ? 8 : 534.16 > z ? 9 : 534.24 > z ? 10 : 534.3 > z ? 11 : 535.01 > z ? 12 : 535.02 > z ? "13+" : 535.07 > z ? 15 : 535.11 > z ? 16 : 535.19 > z ? 17 : 536.05 > z ? 18 : 536.1 > z ? 19 : 537.01 > z ? 20 : 537.11 > z ? "21+" : 537.13 > z ? 23 : 537.18 > z ? 24 : 537.24 > z ? 25 : 537.36 > z ? 26 : "Blink" != V ? "27" : "28")) : (V && (V[1] = "like Safari"), z = z[0], z = 400 > z ? 1 : 500 > z ? 2 : 526 > z ? 3 : 533 > z ? 4 : 534 > z ? "4+" : 535 > z ? 5 : 537 > z ? 6 : 538 > z ? 7 : 601 > z ? 8 : "8"), V && (V[1] += " " + (z += "number" == typeof z ? ".x" : /[.+]/.test(z) ? "" : "+")), "Safari" == W && (!U || parseInt(U) > 45) && (U = z)), "Opera" == W && (z = /\bzbov|zvav$/.exec(Z)) ? (W += " ", R.unshift("desktop mode"), "zvav" == z ? (W += "Mini", U = null) : W += "Mobile", Z = Z.replace(RegExp(" *" + z + "$"), "")) : "Safari" == W && /\bChrome\b/.exec(V && V[1]) && (R.unshift("desktop mode"), W = "Chrome Mobile", U = null, /\bOS X\b/.test(Z) ? (Y = "Apple", Z = "iOS 4.3+") : Z = null), U && 0 == U.indexOf(z = /[\d.]+$/.exec(Z)) && a.indexOf("/" + z + "-") > -1 && (Z = o(Z.replace(z, ""))), V && !/\b(?:Avant|Nook)\b/.test(W) && (/Browser|Lunascape|Maxthon/.test(W) || /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(W) && V[1]) && (z = V[V.length - 1]) && R.push(z), R.length && (R = ["(" + R.join("; ") + ")"]), Y && X && X.indexOf(Y) < 0 && R.push("on " + Y), X && R.push((/^on /.test(R[R.length - 1]) ? "" : "on ") + X), Z && (z = / ([\d.+]+)$/.exec(Z), A = z && "/" == Z.charAt(Z.length - z[0].length - 1), Z = {
                    architecture: 32,
                    family: z && !A ? Z.replace(z[0], "") : Z,
                    version: z ? z[1] : null,
                    toString: function () {
                        var a = this.version;
                        return this.family + (a && !A ? " " + a : "") + (64 == this.architecture ? " 64-bit" : "")
                    }
                }), (z = /\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Q)) && !/\bi686\b/i.test(Q) && (Z && (Z.architecture = 64, Z.family = Z.family.replace(RegExp(" *" + z), "")), W && (/\bWOW64\b/i.test(a) || T && /\w(?:86|32)$/.test(v.cpuClass || v.platform) && !/\bWin64; x64\b/i.test(a)) && R.unshift("32-bit")), a || (a = null);
                var _ = {};
                return _.description = a, _.layout = V && V[0], _.manufacturer = Y, _.name = W, _.prerelease = S, _.product = X, _.ua = a, _.version = W && U, _.os = Z || {
                        architecture: null,
                        family: null,
                        version: null,
                        toString: function () {
                            return "null"
                        }
                    }, _.parse = p, _.toString = q, _.version && R.unshift(U), _.name && R.unshift(W), Z && W && (Z != String(Z).split(" ")[0] || Z != W.split(" ")[0] && !X) && R.push(X ? "(" + Z + ")" : "on " + Z), R.length && (_.description = R.join(" ")), _
            }

            var q = {
                "function": !0,
                object: !0
            }, r = q[typeof window] && window || this, s = r, t = q[typeof b] && b, u = q[typeof a] && a && !a.nodeType && a, v = t && u && "object" == typeof e && e;
            !v || v.global !== v && v.window !== v && v.self !== v || (r = v);
            var w = Math.pow(2, 53) - 1, x = /\bOpera/, y = this, z = Object.prototype, A = z.hasOwnProperty, B = z.toString;
            d = function () {
                return p()
            }.call(b, c, b, a), !(void 0 !== d && (a.exports = d))
        }).call(this)
    }).call(b, c(5)(a), function () {
            return this
        }())
}, function (a, b, c) {
    var d = c(9).fn;
    d.isConnected = function () {
        return this.protocol.isConnected()
    }, d.connect = function () {
        this.protocol.connect()
    }, d.disconnect = function () {
        this.protocol.disconnect()
    }
}, function (a, b, c) {
    var d = c(9).fn, e = c(10), f = c(14), g = c(28), h = c(29), i = c(30), j = c(39);
    d.assignIdClient = function (a) {
        a.idClient = a.idClient || e.guid()
    }, d.sendText = function (a) {
        var b = this;
        return b.processCallback(a), a.msg = new b.message.TextMessage(a), b.sendMsg(a)
    }, d.previewFile = function (a) {
        if (e.verifyOptions(a, "done"), a.type || (a.type = "file"), e.verifyParamPresentJustOne(a, "dataURL blob fileInput"), a.dataURL)a.blob = j.fromDataURL(a.dataURL); else if (a.blob); else if (a.fileInput && (a.fileInput = e.verifyFileInput(a.fileInput), a.fileInput.files && !a.fileInput.files.length))return void a.done(f.newNoFileError("请选择" + a.type + "文件后再预览"), a);
        this.processCallback(a);
        var b = h.genResponseBody(a.type) || {};
        this.getNosToken({
            responseBody: JSON.stringify(b).replace(/\"/gi, '\\"'), callback: function (b, c) {
                return b ? (this.assignIdClient(a.callback.options), void a.done(b, a.callback.options)) : (a.nosToken = c, void this._doPreviewFile(a))
            }.bind(this)
        })
    }, d._doPreviewFile = function (a) {
        var b = a.uploaddone;
        a.uploaddone = function (c, d) {
            if (c)return c.appendMessage("上传文件失败"), this.assignIdClient(a.callback.options), void a.done(c, a.callback.options);
            if (d = h.parseResponse(d), d.url = g.genDownloadUrl(a.nosToken.bucket, a.params.Object), a.fileInput)d.name = e.getFileName(a.fileInput); else if (a.blob) {
                d.name = "blob-" + d.md5;
                var f = a.blob.type;
                d.ext = f.slice(f.lastIndexOf("/") + 1)
            }
            if (!d.ext) {
                var i = d.name.lastIndexOf(".");
                d.ext = -1 === i ? "" : d.name.slice(i + 1)
            }
            return a.uploaddone = b, void a.done(null, e.copy(d))
        }.bind(this), a.url = g.genUploadUrl(a.nosToken.bucket), a.params = this.assembleUploadParams(a.nosToken), a.fileName = "file", new i(a)
    }, d.sendFile = function (a) {
        var b = this;
        if (a.type || (a.type = "file"), e.verifyParamPresentJustOne(a, "dataURL blob fileInput file"), b.processCallback(a), a.dataURL)b._previewAndSendFile(a); else if (a.blob)b._previewAndSendFile(a); else if (a.fileInput) {
            if (a.fileInput = e.verifyFileInput(a.fileInput), a.fileInput.files && !a.fileInput.files.length)return void a.done(f.newNoFileError("请选择" + a.type + "文件后再发送"), a.callback.options);
            b._previewAndSendFile(a)
        } else if (a.file)return a.msg = new b.message.FileMessage(a), b.sendMsg(a)
    }, d._previewAndSendFile = function (a) {
        var b = this;
        e.verifyCallback(a, "uploaddone beforesend");
        var c = a.done;
        a.done = function (d, f) {
            d ? (b.assignIdClient(a.callback.options), c(d, a.callback.options)) : (a.done = c, a.uploaddone(null, e.copy(f)), a.file = f, a.msg = new b.message.FileMessage(a), a.beforesend(b.sendMsg(a)))
        }.bind(b), b.previewFile(a)
    }, d.assembleUploadParams = function (a) {
        return a ? {
            Object: decodeURIComponent(a.objectName),
            "x-nos-token": a.token,
            "x-nos-entity-type": "json"
        } : null
    }, d.sendGeo = function (a) {
        var b = this;
        return b.processCallback(a), a.msg = new b.message.GeoMessage(a), b.sendMsg(a)
    }, d.sendTipMsg = function (a) {
        var b = this;
        return b.processCallback(a), a.msg = new b.message.TipMessage(a), b.sendMsg(a)
    }, d.sendCustomMsg = function (a) {
        var b = this;
        return b.processCallback(a), a.msg = new b.message.CustomMessage(a), b.sendMsg(a)
    }, d.sendMsg = function (a) {
        var b = this, c = b.protocol, d = a.msg, f = {};
        if (a.resend && ("out" !== a.flow || "fail" !== a.status))return e.onError("只能重发发送失败的消息");
        a.callback.options.idClient = d.idClient, b.beforeSendMsg(a, f);
        var g = a.rtnMsg = b.formatReturnMsg(d);
        return c.storeSendMsg && (f.promise = c.storeSendMsg(g)), a.cbaop = function (a) {
            return a && "Error_Connection_is_not_Established" === a.code ? (g.status = "fail", c.updateSendMsgError && c.updateSendMsgError(g), g) : void 0
        }, f.msg = d, b.sendCmd(a.cmd, f, a.callback), e.copy(g)
    }, d.formatReturnMsg = function (a) {
        var b = this;
        return a = e.copy(a), b.protocol.completeMsg(a), a.status = "sending", a = b.message.reverse(a)
    }
}, function (a) {
    var b = "f2ec53d4941b4003acf3318edf526c4abd145ad6", c = "f2ec53d", d = "2.1.0", e = 21, f = 1, g = "https://lbs.netease.im/lbs/webconf.jsp", h = 42e3, i = {
        info: {
            hash: b,
            shortHash: c,
            version: d,
            sdkVersion: e,
            protocolVersion: f
        },
        lbsUrl: g,
        connectTimeout: h,
        xhrTimeout: 6e3,
        socketTimeout: 6e3,
        reconnectionDelay: 656.25,
        reconnectionDelayMax: h,
        reconnectionJitter: .1,
        heartbeatInterval: 18e4,
        cmdTimeout: h
    };
    i.formatSocketUrl = function (a) {
        return -1 === a.indexOf("https") ? "https://" + a : a
    };
    var j = "https://nos.netease.com/";
    i.fileServerUrl = j, i.genUploadUrl = function (a) {
        return i.fileServerUrl + a
    }, i.genDownloadUrl = function (a, b) {
        return i.fileServerUrl === j ? "http://" + a + ".nos.netease.com/" + b : void 0
    }, a.exports = i
}, function (a, b, c) {
    var d = c(10), e = {
        file: {md5: "$(Etag)", size: "$(ObjectSize)"},
        image: {md5: "$(Etag)", size: "$(ObjectSize)", w: "$(ImageInfo.Width)", h: "$(ImageInfo.Height)"},
        audio: {md5: "$(Etag)", size: "$(ObjectSize)", dur: "$(AVinfo.Audio.Duration)"},
        video: {
            md5: "$(Etag)",
            size: "$(ObjectSize)",
            dur: "$(AVinfo.Video.Duration)",
            w: "$(AVinfo.Video.Width)",
            h: "$(AVinfo.Video.Height)"
        }
    }, f = {};
    f.genResponseBody = function (a) {
        return a = a || "file", e[a]
    }, f.parseResponse = function (a) {
        return d.notundef(a.size) && (a.size = +a.size), d.notundef(a.w) && (a.w = +a.w), d.notundef(a.h) && (a.h = +a.h), d.notundef(a.dur) && (a.dur = +a.dur), a
    }, a.exports = f
}, function (a, b, c) {
    function d(a) {
        var b = this;
        b.options = f.copy(a), f.verifyOptions(a, "url fileName"), f.verifyParamPresentJustOne(a, "blob fileInput"), f.verifyCallback(a, "beginupload uploadprogress uploaddone"), a.fileInput && (a.fileInput = f.verifyFileInput(a.fileInput)), a.type && f.verifyFileType(a.type), a.timeout ? f.verifyParamType("timeout", a.timeout, "number") : a.timeout = 6e5, f.verifyFileUploadCallback(a), a.data = {};
        var c = a.fileName, d = a.fileInput;
        if (i)if (d) {
            var k = a.type ? f.filterFiles(d.files, a.type) : [].slice.call(d.files, 0);
            if (!k || !k.length)return void a.uploaddone(g.newWrongFileTypeError("未读取到" + a.type + "类型的文件, 请确保文件选择节点的文件不为空, 并且请确保选择了" + a.type + "类型的文件"));
            var l = d.files[0].size;
            if (l > j)return void a.uploaddone(g.newFileTooLargeError("文件大小超过100M"));
            a.data[c] = k[0]
        } else a.blob && (a.data[c] = a.blob); else e.dataset(d, "name", c), a.data.input = d;
        a.params && f.merge(a.data, a.params);
        var m = {
            data: a.data, onaftersend: function () {
                a.beginupload(b)
            }, onuploading: function (b) {
                var c = Math.floor(1e4 * b.loaded / b.total) / 100;
                a.uploadprogress({total: b.total, loaded: b.loaded, percentage: c, percentageText: c + "%"})
            }, onload: function (c) {
                c.Error ? b.onError(c) : a.uploaddone(null, c)
            }, onerror: function (c) {
                try {
                    var d = JSON.parse(c.result);
                    b.onError(d)
                } catch (e) {
                    a.uploaddone(new g(c.message, c.code), b.options)
                }
            }
        };
        i || (m.mode = "iframe"), b.sn = h(a.url, m)
    }

    var e = c(31), f = c(10), g = c(14), h = c(32), i = f.notundef(window.FormData), j = 104857600;
    d.prototype.onError = function (a) {
        var b, c, d, e = this, f = e.options;
        a = a || {}, b = a.Error || {}, c = b.Code || "unknown", d = b.Message || "未知错误", f.uploaddone(new g(c + "(" + d + ")", c))
    }, d.prototype.abort = function () {
        h.abort(this.sn)
    }, a.exports = d
}, function (a, b, c) {
    var d = c(15), e = {};
    e.remove = function (a) {
        a.parentNode && a.parentNode.removeChild(a)
    }, e.dataset = function (a, b, c) {
        return d.exist(c) ? void a.setAttribute("data-" + b, c) : a.getAttribute("data-" + b)
    }, e.on = e.addEventListener = function (a, b, c) {
        a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent && a.attachEvent("on" + b, c)
    }, e.off = e.removeEventListener = function (a, b, c) {
        a.removeEventListener ? a.removeEventListener(b, c, !1) : a.detachEvent && a.detachEvent("on" + b, c)
    }, e.target = function (a) {
        return a.target || a.srcElement
    }, e.html2node = function (a) {
        var b = window.document.createElement("div");
        b.innerHTML = a;
        var c, d, e = [];
        if (b.children)for (c = 0, d = b.children.length; d > c; c++)e.push(b.children[c]); else for (c = 0, d = b.childNodes.length; d > c; c++) {
            var f = b.childNodes[c];
            1 === f.nodeType && e.push(f)
        }
        return e.length > 1 ? b : e[0]
    }, e.createIframe = function (a) {
        a = a || {};
        var b = document.createElement("iframe");
        if (b.frameBorder = 0, a.name && (b.name = a.name), a.visible || (b.style.display = "none"), d.isFunction(a.onload)) {
            var c = function (d) {
                b.src && (a.multi || e.off(b, "load", c), a.onload(d))
            };
            e.on(b, "load", c)
        }
        var f = a.parent;
        (f || document.body).appendChild(b);
        var g = a.src || "about:blank";
        return setTimeout(function () {
            b.src = g
        }, 0), b
    }, a.exports = e
}, function (a, b, c) {
    var d = c(15), e = c(33), f = function (a, b) {
        return b.method = "POST", b.headers = b.headers || {}, b.headers["Content-Type"] = "multipart/form-data", b.timeout = 0, b.type = b.type || "json", e(a, b)
    };
    d.mixin(f, e), e.upload = f, a.exports = f
}, function (a, b, c) {
    function d(a) {
        var b = a.mode, c = n;
        return window.FormData || (b = "iframe"), "iframe" === b && (c = a.upload ? o : p), new c(a)
    }

    function e(a) {
        var b = a.upload = "multipart/form-data" === (a.headers || m.o)["Content-Type"], c = (location.protocol + "//" + location.host).toLowerCase(), e = m.url2origin(a.url), f = c !== e;
        return b || f || a.mode ? d(a) : new n(a)
    }

    function f(a) {
        var b = q[a];
        b && (b.req.destroy(), delete q[a])
    }

    function g(a, b) {
        b = {data: b};
        var c = a.result.headers;
        return c && (b.headers = a.req.header(c)), b
    }

    function h(a, b, c) {
        var d = q[a];
        if (d) {
            "onload" === b && d.result && (c = g(d, c)), f(a);
            var e = {type: b, result: c};
            r(e), e.stopped || d[b](e.result)
        }
    }

    function i(a, b) {
        h(a, "onload", b)
    }

    function j(a, b) {
        h(a, "onerror", b)
    }

    function k(a, b) {
        var c = m.genUrlSep(a);
        return b = b || "", m.isObject(b) && (b = m.object2query(b)), b && (a += c + b), a
    }

    function l(a, b) {
        b = b || {};
        var c = m.uniqueID(), d = {result: b.result, onload: b.onload || m.f, onerror: b.onerror || m.f};
        q[c] = d, b.onload = i.bind(null, c), b.onerror = j.bind(null, c), b.query && (a = k(a, b.query));
        var f = b.method || "";
        return f && !/get/i.test(f) || !b.data || (a = k(a, b.data), b.data = null), b.url = a, d.req = e(b), c
    }

    var m = c(15), n = c(34), o = c(37), p = c(38), q = {}, r = m.f;
    l.filter = function (a) {
        m.isFunction(a) && (r = a)
    }, l.abort = function (a) {
        var b = q[a];
        b && b.req.abort()
    }, a.exports = l
}, function (a, b, c) {
    function d(a) {
        var b = this;
        a.onuploading && b.on("uploading", a.onuploading), g.call(b, a)
    }

    var e = c(15), f = c(31), g = c(35), h = g.prototype, i = d.prototype = Object.create(h);
    i.doSend = function () {
        var a = this, b = a.options, c = b.headers, d = a.xhr = new XMLHttpRequest;
        if ("multipart/form-data" === c["Content-Type"]) {
            delete c["Content-Type"], d.upload.onprogress = a.onProgress.bind(a), d.upload.onload = a.onProgress.bind(a);
            var g = b.data;
            b.data = new FormData, g && Object.keys(g).forEach(function (a) {
                var c = g[a];
                c.tagName && "INPUT" === c.tagName.toUpperCase() ? "file" === c.type && [].forEach.call(c.files, function (a) {
                    b.data.append(f.dataset(c, "name") || c.name || a.name || "file-" + e.uniqueID(), a)
                }) : b.data.append(a, c)
            })
        }
        d.onreadystatechange = a.onStateChange.bind(a), 0 !== b.timeout && (a.timer = setTimeout(a.onTimeout.bind(a), b.timeout)), d.open(b.method, b.url, !b.sync), Object.keys(c).forEach(function (a) {
            d.setRequestHeader(a, c[a])
        }), b.cookie && "withCredentials"in d && (d.withCredentials = !0), d.send(b.data), a.afterSend()
    }, i.onProgress = function (a) {
        a.lengthComputable && a.loaded <= a.total && this.emit("uploading", a)
    }, i.onStateChange = function () {
        var a = this, b = a.xhr;
        4 === b.readyState && a.onLoad({status: b.status, result: b.responseText || ""})
    }, i.getResponseHeader = function (a) {
        var b = this.xhr;
        return b ? b.getResponseHeader(a) : ""
    }, i.destroy = function () {
        var a = this;
        clearTimeout(a.timer);
        try {
            a.xhr.onreadystatechange = e.f, a.xhr.abort()
        } catch (b) {
        }
        h.destroy.call(a)
    }, a.exports = d
}, function (a, b, c) {
    function d(a) {
        var b = this;
        a.onload && b.once("load", a.onload), a.onerror && b.once("error", a.onerror), a.onbeforesend && b.once("beforesend", a.onbeforesend), a.onaftersend && b.once("aftersend", a.onaftersend), a = b.options = e.fetch({
            method: "GET",
            url: "",
            sync: !1,
            data: null,
            headers: {},
            cookie: !1,
            timeout: 6e3,
            type: "text",
            form: null,
            input: null,
            proxyUrl: ""
        }, a);
        var c = a.headers, d = "Content-Type";
        e.notexist(c[d]) && (c[d] = "application/x-www-form-urlencoded"), b.send()
    }

    var e = c(15), f = e.f, g = c(36), h = d.prototype = Object.create(g.prototype);
    h.send = function () {
        var a = this, b = a.options;
        try {
            try {
                a.emit("beforesend", b)
            } catch (c) {
            }
            a.doSend()
        } catch (c) {
            a.onError("serverError", "请求失败:" + c.message)
        }
    }, h.doSend = f, h.afterSend = function () {
        var a = this;
        setTimeout(function () {
            a.emit("aftersend", a.options)
        }, 0)
    }, h.onLoad = function (a) {
        var b = this, c = b.options, d = a.status, e = a.result;
        if (0 !== ("" + d).indexOf("2"))return void b.onError("serverError", "服务器返回异常状态", {status: d, result: e});
        if ("json" === c.type)try {
            e = JSON.parse(e)
        } catch (f) {
            return void b.onError("parseError", e)
        }
        b.emit("load", e)
    }, h.onError = function (a, b, c) {
        var d = e.isObject(c) ? c : {};
        d.code = a || "error", d.message = b || "发生错误", this.emit("error", d)
    }, h.onTimeout = function () {
        this.onError("timeout", "请求超时")
    }, h.abort = function () {
        this.onError("abort", "客户端中止")
    }, h.header = function (a) {
        var b = this;
        if (!e.isArray(a))return b.getResponseHeader(a || "");
        var c = {};
        return a.forEach(function (a) {
            c[a] = b.header(a)
        }), c
    }, h.getResponseHeader = f, h.destroy = f, a.exports = d
}, function (a, b, c) {
    var d;
    (function () {
        "use strict";
        function b() {
        }

        function e(a, b) {
            for (var c = a.length; c--;)if (a[c].listener === b)return c;
            return -1
        }

        function f(a) {
            return function () {
                return this[a].apply(this, arguments)
            }
        }

        var g = b.prototype, h = this, i = h.EventEmitter;
        g.getListeners = function (a) {
            var b, c, d = this._getEvents();
            if (a instanceof RegExp) {
                b = {};
                for (c in d)d.hasOwnProperty(c) && a.test(c) && (b[c] = d[c])
            } else b = d[a] || (d[a] = []);
            return b
        }, g.flattenListeners = function (a) {
            var b, c = [];
            for (b = 0; b < a.length; b += 1)c.push(a[b].listener);
            return c
        }, g.getListenersAsObject = function (a) {
            var b, c = this.getListeners(a);
            return c instanceof Array && (b = {}, b[a] = c), b || c
        }, g.addListener = function (a, b) {
            var c, d = this.getListenersAsObject(a), f = "object" == typeof b;
            for (c in d)d.hasOwnProperty(c) && -1 === e(d[c], b) && d[c].push(f ? b : {listener: b, once: !1});
            return this
        }, g.on = f("addListener"), g.addOnceListener = function (a, b) {
            return this.addListener(a, {listener: b, once: !0})
        }, g.once = f("addOnceListener"), g.defineEvent = function (a) {
            return this.getListeners(a), this
        }, g.defineEvents = function (a) {
            for (var b = 0; b < a.length; b += 1)this.defineEvent(a[b]);
            return this
        }, g.removeListener = function (a, b) {
            var c, d, f = this.getListenersAsObject(a);
            for (d in f)f.hasOwnProperty(d) && (c = e(f[d], b), -1 !== c && f[d].splice(c, 1));
            return this
        }, g.off = f("removeListener"), g.addListeners = function (a, b) {
            return this.manipulateListeners(!1, a, b)
        }, g.removeListeners = function (a, b) {
            return this.manipulateListeners(!0, a, b)
        }, g.manipulateListeners = function (a, b, c) {
            var d, e, f = a ? this.removeListener : this.addListener, g = a ? this.removeListeners : this.addListeners;
            if ("object" != typeof b || b instanceof RegExp)for (d = c.length; d--;)f.call(this, b, c[d]); else for (d in b)b.hasOwnProperty(d) && (e = b[d]) && ("function" == typeof e ? f.call(this, d, e) : g.call(this, d, e));
            return this
        }, g.removeEvent = function (a) {
            var b, c = typeof a, d = this._getEvents();
            if ("string" === c)delete d[a]; else if (a instanceof RegExp)for (b in d)d.hasOwnProperty(b) && a.test(b) && delete d[b]; else delete this._events;
            return this
        }, g.removeAllListeners = f("removeEvent"), g.emitEvent = function (a, b) {
            var c, d, e, f, g, h = this.getListenersAsObject(a);
            for (f in h)if (h.hasOwnProperty(f))for (c = h[f].slice(0), e = c.length; e--;)d = c[e], d.once === !0 && this.removeListener(a, d.listener), g = d.listener.apply(this, b || []), g === this._getOnceReturnValue() && this.removeListener(a, d.listener);
            return this
        }, g.trigger = f("emitEvent"), g.emit = function (a) {
            var b = Array.prototype.slice.call(arguments, 1);
            return this.emitEvent(a, b)
        }, g.setOnceReturnValue = function (a) {
            return this._onceReturnValue = a, this
        }, g._getOnceReturnValue = function () {
            return this.hasOwnProperty("_onceReturnValue") ? this._onceReturnValue : !0
        }, g._getEvents = function () {
            return this._events || (this._events = {})
        }, b.noConflict = function () {
            return h.EventEmitter = i, b
        }, d = function () {
            return b
        }.call(h, c, h, a), !(void 0 !== d && (a.exports = d))
    }).call(this)
}, function (a, b, c) {
    function d(a) {
        var b = this;
        b.init(), g.call(b, a)
    }

    var e = c(15), f = c(31), g = c(35), h = "NEJ-UPLOAD-RESULT:", i = {}, j = g.prototype, k = d.prototype = Object.create(j);
    k.init = function () {
        function a(a) {
            var b = a.data;
            if (0 === b.indexOf(h)) {
                b = JSON.parse(b.replace(h, ""));
                var c = b.key, d = i[c];
                d && (delete i[c], b.result = decodeURIComponent(b.result || ""), d.onLoad(b.result))
            }
        }

        function b() {
            c || (c = !0, f.on(window, "message", a))
        }

        var c = !1;
        return function () {
            b()
        }
    }(), k.doSend = function () {
        function a() {
            l.forEach(function (a, b) {
                var c = m[b];
                a.name = c.name, a.setAttribute("form", c.getAttribute("form")), c.parentNode.replaceChild(a, c)
            })
        }

        var b = this, c = b.options, d = b.key = e.uniqueID();
        i[d] = b;
        var g = b.form = f.html2node('<form style="display:none;"></form>');
        document.body.appendChild(g), g.target = d, g.method = "POST", g.enctype = "multipart/form-data", g.encoding = "multipart/form-data";
        var h = c.url, j = e.genUrlSep(h);
        g.action = h + j + "_proxy_=form";
        var k = c.data, l = [], m = [];
        k && Object.keys(k).forEach(function (a) {
            var b = k[a];
            if (b.tagName && "INPUT" === b.tagName.toUpperCase()) {
                if ("file" === b.type) {
                    var c = b, d = c.cloneNode(!0);
                    c.parentNode.insertBefore(d, c);
                    var e = f.dataset(c, "name");
                    e && (c.name = e), g.appendChild(c), c.setAttribute("form", ""), c.removeAttribute("form"), l.push(b), m.push(d)
                }
            } else {
                var h = f.html2node('<input type="hidden"/>');
                h.name = a, h.value = b, g.appendChild(h)
            }
        });
        var n = b.iframe = f.createIframe({
            name: d, onload: function () {
                return b.aborted ? void a() : (f.on(n, "load", b.checkResult.bind(b)), g.submit(), a(), void b.afterSend())
            }
        })
    }, k.checkResult = function () {
        var a, b, c = this;
        try {
            if (a = c.iframe.contentWindow.document.body, b = (a.innerText || a.textContent || "").trim(), b.indexOf(h) >= 0 || a.innerHTML.indexOf(h) >= 0)return
        } catch (d) {
            return
        }
        c.onLoad(b)
    }, k.onLoad = function (a) {
        var b = this;
        j.onLoad.call(b, {status: 200, result: a}), f.remove(b.form), f.remove(b.iframe), j.destroy.call(b)
    }, k.abort = function () {
        var a = this;
        a.aborted = !0, delete i[a.key], j.abort.call(a)
    }, a.exports = d
}, function (a, b, c) {
    function d(a) {
        var b = this;
        b.init(), g.call(b, a)
    }

    var e = c(15), f = c(31), g = c(35), h = {}, i = g.prototype, j = d.prototype = Object.create(i);
    j.init = function () {
        function a(a) {
            var b = a.data;
            if (0 === b.indexOf(c)) {
                b = JSON.parse(b.replace(c, ""));
                var d = b.key, e = h[d];
                e && (delete h[d], b.result = decodeURIComponent(b.result || ""), e.onLoad(b))
            }
        }

        function b() {
            d || (d = !0, f.on(window, "message", a))
        }

        var c = "NEJ-AJAX-DATA:", d = !1;
        return function () {
            b()
        }
    }(), j.doSend = function () {
        var a = this, b = a.options, c = e.url2origin(b.url), d = b.proxyUrl || c + "/res/nej_proxy_frame.html", g = h[d];
        if (e.isArray(g))return void g.push(a.doSend.bind(a, b));
        if (!g)return h[d] = [a.doSend.bind(a, b)], void f.createIframe({
            src: d, onload: function (a) {
                var b = h[d];
                h[d] = f.target(a).contentWindow, b.forEach(function (a) {
                    try {
                        a()
                    } catch (b) {
                    }
                })
            }
        });
        if (!a.aborted) {
            var i = a.key = e.uniqueID();
            h[i] = a;
            var j = e.fetch({method: "GET", url: "", data: null, headers: {}, timeout: 0}, b);
            j.key = i, g.postMessage(JSON.stringify(j), "*"), a.afterSend()
        }
    }, j.abort = function () {
        var a = this;
        a.aborted = !0, delete h[a.key], i.abort.call(a)
    }, a.exports = d
}, function (a, b, c) {
    var d = c(10), e = {};
    e.fromDataURL = d.blobFromDataURL, a.exports = e
}, function (a, b, c) {
    var d = c(10), e = c(9).fn;
    e.getNosToken = function (a) {
        this.sendCmd("getNosToken", {responseBody: a.responseBody}, a.callback)
    }, e.packFileDownloadName = function (a) {
        d.verifyOptions(a, "url name");
        var b = a.url;
        return b + d.genUrlSep(b) + "download=" + encodeURIComponent(a.name)
    }, e.audioToMp3 = function (a) {
        d.verifyOptions(a, "url");
        var b = a.url;
        return b + d.genUrlSep(b) + "audioTrans&type=mp3"
    }
}, , function (a, b, c) {
    function d(a) {
        var b = this;
        b.options = e.copy(a), b.init(), b.connect()
    }

    var e = c(10), f = c(28), g = c(24), h = c(14), i = d.fn = d.prototype;
    i.init = function () {
        var a = this;
        a.timerMap = {}, a.cmdCallbackMap = {}, a.cmdContentMap = {}, a.reset(), a.resetConnect()
    }, i.setOptions = function (a) {
        var b = this, c = b.options, d = Object.keys(c), f = d.indexOf("account");
        -1 !== f && d.splice(f, 1), a = e.filterObj(a, d), b.options = e.merge(c, a), b.init()
    }, i.sendCmd = function (a, b, c) {
        var d = this;
        g.log("Protocol Command    " + a + "	", b ? b : ""), a = d.parser.createCmd(a, b);
        var e, f = a.SER;
        return b = b || {}, d.cmdContentMap[f] = b, b.single && (delete b.single, e = Object.keys(b), 1 === e.length && (d.cmdContentMap[f] = b[e[0]])), b.NOTSTORE && (e = b.NOTSTORE.split(" "), e.forEach(function (a) {
            delete b[a]
        }), delete b.NOTSTORE), c = c || b.callback, c && (d.cmdCallbackMap[f] = c), d.isConnected() ? d.doSendCmd(a) : d.markCallbackInvalid(f, h.newConnectionError()), f
    }, i.doSendCmd = function (a) {
        var b = this, c = a.SER;
        b.timerMap[c] = setTimeout(function () {
            b.markCallbackInvalid(c, h.newTimeoutError())
        }, f.cmdTimeout), b.socket.send(JSON.stringify(a))
    }, i.getObjWithSer = function (a) {
        var b = this, c = b.cmdContentMap[a];
        return delete b.cmdContentMap[a], c && e.copy(c)
    }, i.getCallbackWithSer = function (a) {
        var b = this, c = b.cmdCallbackMap[a];
        return delete b.cmdCallbackMap[a], c
    }, i.getTimerWithSer = function (a) {
        var b = this, c = b.timerMap[a];
        return delete b.timerMap[a], c
    }, i.clearTimerWithSer = function (a) {
        var b = this, c = b.getTimerWithSer(a);
        c && clearTimeout(c)
    }, i.markCallbackInvalid = function (a, b) {
        var c = this;
        c.getObjWithSer(a), c.clearTimerWithSer(a);
        var d = c.getCallbackWithSer(a);
        if (d) {
            var e = d.options;
            window.setTimeout(function () {
                d(b || h.newUnknownError(), e)
            }, 0)
        }
    }, i.markAllCallbackInvalid = function (a) {
        var b = this;
        Object.keys(this.cmdCallbackMap).forEach(function (c) {
            b.markCallbackInvalid(c, a)
        })
    }, i.getPacketObj = function (a) {
        if (a && a.raw) {
            var b = a.raw.ser;
            if (b)return this.getObjWithSer(b)
        }
        return null
    }, i.callPacketAckCallback = function (a) {
        var b = this;
        if (a && a.raw) {
            var c = a.raw.ser;
            if (c) {
                b.clearTimerWithSer(c);
                var d = b.getCallbackWithSer(c);
                d && (a.promise ? a.promise.then(function () {
                    d(a.error, a.obj)
                }, function (b) {
                    var c = h.newDBError();
                    c.event = b, g.error("promise error", c, b), d(c, a.obj)
                }) : d(a.error, a.obj))
            }
        }
    }, i.onMessage = function (a) {
        var b = this, c = b.parser.parseResponse(a);
        c.obj = b.getPacketObj(c), g.log("Protocol Response   " + c.cmd + "	", c, c.error || (c.content ? c.content : ""));
        var d = "process" + e.capFirstLetter(c.service);
        b[d] && b[d].call(b, c), b.callPacketAckCallback(c)
    }, i.onMiscError = function (a, b, c) {
        a && (a.appendMessage(c), this.notifyError(a, b))
    }, i.notifyError = function (a, b) {
        var c = this;
        if (c.isConnected()) {
            var d = ["onError " + c.name, a];
            a.event && d.push(a.event), b && d.push(b), g.error.apply(g.error, d), c.options.onerror(a, b)
        }
    }, a.exports = d, c(43), c(46), c(49), c(50)
}, function (a, b, c) {
    var d = c(42).fn, e = c(14), f = c(44), g = c(45), h = c(24), i = c(28), j = c(10);
    d.resetConnect = function () {
        var a = this, b = a.options;
        a.socket = null, a.retryCount = 0, a.connecting = !1, a.shouldReconnect = !0, a.hasNotifyDisconnected = !1, j.notundef(b.needReconnect) ? (j.verifyParamType("needReconnect", b.needReconnect, "boolean"), a.needReconnect = b.needReconnect) : a.needReconnect = !0, j.notundef(b.reconnectionAttempts) && j.verifyParamType("reconnectionAttempts", b.reconnectionAttempts, "number"), a.reconnectionAttempts = b.reconnectionAttempts || 1 / 0, a.backoff = new f({
            min: i.reconnectionDelay,
            max: i.reconnectionDelayMax,
            jitter: i.reconnectionJitter
        })
    }, d.connect = function () {
        var a = this;
        if (!a.isConnected() && !a.connecting)if (a.connecting = !0, a.hasNotifyDisconnected = !1, a.socket)h.info("connecting"), a.socket.socket.connect(); else {
            var b = a.getNextSocketUrl();
            b ? a.connectToUrl(b) : a.refreshSocketUrl()
        }
    }, d.getNextSocketUrl = function () {
        return this.socketUrls.shift()
    }, d.isConnected = function () {
        var a = this;
        return !!a.socket && !!a.socket.socket && a.socket.socket.connected
    }, d.connectToUrl = function (a) {
        h.log("try connect to ", a);
        var b = this;
        b.socket = g.connect(a, {
            transports: ["websocket", "xhr-polling"],
            reconnect: !1,
            "force new connection": !0,
            "connect timeout": i.connectTimeout
        }), b.socket.on("connect", b.onConnect.bind(b)), b.socket.on("handshake_failed", b.onHandshakeFailed.bind(b)), b.socket.on("connect_failed", b.onConnectFailed.bind(b)), b.socket.on("error", b.onError.bind(b)), b.socket.on("message", b.onMessage.bind(b)), b.socket.on("disconnect", b.onDisconnect.bind(b))
    }, d.disconnect = function () {
        var a = this;
        a.isConnected() && (h.info("disconnecting"), a.logout())
    }, d.onConnect = function () {
        var a = this;
        a.backoff && a.backoff.reset(), a.retryCount = 0, a.connecting = !1, a.shouldReconnect = !0, a.hasNotifyDisconnected = !1, a.login()
    }, d.onHandshakeFailed = function () {
        this.onDisconnect()
    }, d.onConnectFailed = function () {
        this.notifyConnectError()
    }, d.onError = function () {
        var a = arguments[0];
        a && this.notifyError(new e(a))
    }, d.onDisconnect = function () {
        var a = this;
        a.connecting = !1, a.markAllCallbackInvalid(e.newNetworkError()), a.stopHeartbeat(), a.reconnect()
    }, d.willReconnect = function () {
        var a = this;
        return a.shouldReconnect && a.needReconnect && a.retryCount < a.reconnectionAttempts
    }, d.reconnect = function () {
        var a = this;
        if (a.willReconnect()) {
            a.socket = null, a.retryCount++;
            var b = a.backoff.duration();
            h.log("will retry after", b + "ms", ", retryCount", a.retryCount), a.options.onwillreconnect({
                retryCount: a.retryCount,
                duration: b
            }), setTimeout(function () {
                a.connect()
            }, b)
        } else a.notifyDisconnect()
    }, d.notifyConnectError = function (a) {
        var b = e.newConnectError(a);
        h.error(b), this.options.onerror(b)
    }, d.notifyDisconnect = function (a) {
        var b = this;
        b.hasNotifyDisconnected || (b.hasNotifyDisconnected = !0, b.disconnectSocket(), a = a || new e, a.retryCount = b.retryCount, a.willReconnect = b.willReconnect(), b.backoff && b.backoff.reset(), b.retryCount = 0, b.connecting = !1, h.info("onDisconnect", a), b.options.ondisconnect(a))
    }, d.disconnectSocket = function () {
        var a = this;
        if (a.isConnected())try {
            a.socket.disconnect()
        } catch (b) {
        }
    }
}, function (a) {
    function b(a) {
        a = a || {}, this.ms = a.min || 100, this.max = a.max || 1e4, this.factor = a.factor || 2, this.jitter = a.jitter > 0 && a.jitter <= 1 ? a.jitter : 0, this.attempts = 0
    }

    a.exports = b, b.prototype.duration = function () {
        var a = this.ms * Math.pow(this.factor, this.attempts++);
        if (this.jitter) {
            var b = Math.random(), c = Math.floor(b * this.jitter * a);
            a = 0 == (1 & Math.floor(10 * b)) ? a - c : a + c
        }
        return 0 | Math.min(a, this.max)
    }, b.prototype.reset = function () {
        this.attempts = 0
    }, b.prototype.setMin = function (a) {
        this.ms = a
    }, b.prototype.setMax = function (a) {
        this.max = a
    }, b.prototype.setJitter = function (a) {
        this.jitter = a
    }
}, function (module, exports, __webpack_require__) {
    var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
    (function (module) {
        var io = module.exports;
        !function () {
            if (function (a, b) {
                    var c = a;
                    c.version = "0.9.11", c.protocol = 1, c.transports = [], c.j = [], c.sockets = {}, c.connect = function (a, d) {
                        var e, f, g = c.util.parseUri(a);
                        b && b.location && (g.protocol = g.protocol || b.location.protocol.slice(0, -1), g.host = g.host || (b.document ? b.document.domain : b.location.hostname), g.port = g.port || b.location.port), e = c.util.uniqueUri(g);
                        var h = {
                            host: g.host,
                            secure: "https" == g.protocol,
                            port: g.port || ("https" == g.protocol ? 443 : 80),
                            query: g.query || ""
                        };
                        return c.util.merge(h, d), !h["force new connection"] && c.sockets[e] || (f = new c.Socket(h)), !h["force new connection"] && f && (c.sockets[e] = f), f = f || c.sockets[e], f.of(g.path.length > 1 ? g.path : "")
                    }
                }(module.exports, this), function (a, b) {
                    var c = a.util = {}, d = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, e = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];

                    c.parseUri = function (a) {
                        for (var b = d.exec(a || ""), c = {}, f = 14; f--;)c[e[f]] = b[f] || "";
                        return c
                    }, c.uniqueUri = function (a) {
                        var c = a.protocol, d = a.host, e = a.port;
                        return "document"in b ? (d = d || document.domain, e = e || ("https" == c && "https:" !== document.location.protocol ? 443 : document.location.port)) : (d = d || "localhost", e || "https" != c || (e = 443)), (c || "http") + "://" + d + ":" + (e || 80)
                    }, c.query = function (a, b) {
                        var d = c.chunkQuery(a || ""), e = [];
                        c.merge(d, c.chunkQuery(b || ""));
                        for (var f in d)d.hasOwnProperty(f) && e.push(f + "=" + d[f]);
                        return e.length ? "?" + e.join("&") : ""
                    }, c.chunkQuery = function (a) {
                        for (var b, c = {}, d = a.split("&"), e = 0, f = d.length; f > e; ++e)b = d[e].split("="), b[0] && (c[b[0]] = b[1]);
                        return c
                    };
                    var f = !1;
                    c.load = function (a) {
                        return "document"in b && "complete" === document.readyState || f ? a() : void c.on(b, "load", a, !1)
                    }, c.on = function (a, b, c, d) {
                        a.attachEvent ? a.attachEvent("on" + b, c) : a.addEventListener && a.addEventListener(b, c, d)
                    }, c.request = function (a) {
                        if (a && "undefined" != typeof XDomainRequest && !c.ua.hasCORS)return new XDomainRequest;
                        if ("undefined" != typeof XMLHttpRequest && (!a || c.ua.hasCORS))return new XMLHttpRequest;
                        if (!a)try {
                            return new (window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")
                        } catch (b) {
                        }
                        return null
                    }, "undefined" != typeof window && c.load(function () {
                        f = !0
                    }), c.defer = function (a) {
                        return c.ua.webkit && "undefined" == typeof importScripts ? void c.load(function () {
                            setTimeout(a, 100)
                        }) : a()
                    }, c.merge = function (a, b, d, e) {
                        var f, g = e || [], h = "undefined" == typeof d ? 2 : d;
                        for (f in b)b.hasOwnProperty(f) && c.indexOf(g, f) < 0 && ("object" == typeof a[f] && h ? c.merge(a[f], b[f], h - 1, g) : (a[f] = b[f], g.push(b[f])));
                        return a
                    }, c.mixin = function (a, b) {
                        c.merge(a.prototype, b.prototype)
                    }, c.inherit = function (a, b) {
                        function c() {
                        }

                        c.prototype = b.prototype, a.prototype = new c
                    }, c.isArray = Array.isArray || function (a) {
                            return "[object Array]" === Object.prototype.toString.call(a)
                        }, c.intersect = function (a, b) {
                        for (var d = [], e = a.length > b.length ? a : b, f = a.length > b.length ? b : a, g = 0, h = f.length; h > g; g++)~c.indexOf(e, f[g]) && d.push(f[g]);
                        return d
                    }, c.indexOf = function (a, b, c) {
                        for (var d = a.length, c = 0 > c ? 0 > c + d ? 0 : c + d : c || 0; d > c && a[c] !== b; c++);
                        return c >= d ? -1 : c
                    }, c.toArray = function (a) {
                        for (var b = [], c = 0, d = a.length; d > c; c++)b.push(a[c]);
                        return b
                    }, c.ua = {}, c.ua.hasCORS = "undefined" != typeof XMLHttpRequest && function () {
                            try {
                                var a = new XMLHttpRequest
                            } catch (b) {
                                return !1
                            }
                            return void 0 != a.withCredentials
                        }(), c.ua.webkit = "undefined" != typeof navigator && /webkit/i.test(navigator.userAgent), c.ua.iDevice = "undefined" != typeof navigator && /iPad|iPhone|iPod/i.test(navigator.userAgent)
                }("undefined" != typeof io ? io : module.exports, this), function (a, b) {
                    function c() {
                    }

                    a.EventEmitter = c, c.prototype.on = function (a, c) {
                        return this.$events || (this.$events = {}), this.$events[a] ? b.util.isArray(this.$events[a]) ? this.$events[a].push(c) : this.$events[a] = [this.$events[a], c] : this.$events[a] = c, this
                    }, c.prototype.addListener = c.prototype.on, c.prototype.once = function (a, b) {
                        function c() {
                            d.removeListener(a, c), b.apply(this, arguments)
                        }

                        var d = this;
                        return c.listener = b, this.on(a, c), this
                    }, c.prototype.removeListener = function (a, c) {
                        if (this.$events && this.$events[a]) {
                            var d = this.$events[a];
                            if (b.util.isArray(d)) {
                                for (var e = -1, f = 0, g = d.length; g > f; f++)if (d[f] === c || d[f].listener && d[f].listener === c) {
                                    e = f;
                                    break
                                }
                                if (0 > e)return this;
                                d.splice(e, 1), d.length || delete this.$events[a]
                            } else(d === c || d.listener && d.listener === c) && delete this.$events[a]
                        }
                        return this
                    }, c.prototype.removeAllListeners = function (a) {
                        return void 0 === a ? (this.$events = {}, this) : (this.$events && this.$events[a] && (this.$events[a] = null), this)
                    }, c.prototype.listeners = function (a) {
                        return this.$events || (this.$events = {}), this.$events[a] || (this.$events[a] = []), b.util.isArray(this.$events[a]) || (this.$events[a] = [this.$events[a]]), this.$events[a]
                    }, c.prototype.emit = function (a) {
                        if (!this.$events)return !1;
                        var c = this.$events[a];
                        if (!c)return !1;
                        var d = Array.prototype.slice.call(arguments, 1);
                        if ("function" == typeof c)c.apply(this, d); else {
                            if (!b.util.isArray(c))return !1;
                            for (var e = c.slice(), f = 0, g = e.length; g > f; f++)e[f].apply(this, d)
                        }
                        return !0
                    }
                }("undefined" != typeof io ? io : module.exports, "undefined" != typeof io ? io : module.parent.exports), function (exports, nativeJSON) {
                    "use strict";
                    function f(a) {
                        return 10 > a ? "0" + a : a
                    }

                    function date(a) {
                        return isFinite(a.valueOf()) ? a.getUTCFullYear() + "-" + f(a.getUTCMonth() + 1) + "-" + f(a.getUTCDate()) + "T" + f(a.getUTCHours()) + ":" + f(a.getUTCMinutes()) + ":" + f(a.getUTCSeconds()) + "Z" : null
                    }

                    function quote(a) {
                        return escapable.lastIndex = 0, escapable.test(a) ? '"' + a.replace(escapable, function (a) {
                            var b = meta[a];
                            return "string" == typeof b ? b : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
                        }) + '"' : '"' + a + '"'
                    }

                    function str(a, b) {
                        var c, d, e, f, g, h = gap, i = b[a];
                        switch (i instanceof Date && (i = date(a)), "function" == typeof rep && (i = rep.call(b, a, i)), typeof i) {
                            case"string":
                                return quote(i);
                            case"number":
                                return isFinite(i) ? String(i) : "null";
                            case"boolean":
                            case"null":
                                return String(i);
                            case"object":
                                if (!i)return "null";
                                if (gap += indent, g = [], "[object Array]" === Object.prototype.toString.apply(i)) {
                                    for (f = i.length, c = 0; f > c; c += 1)g[c] = str(c, i) || "null";
                                    return e = 0 === g.length ? "[]" : gap ? "[\n" + gap + g.join(",\n" + gap) + "\n" + h + "]" : "[" + g.join(",") + "]", gap = h, e
                                }
                                if (rep && "object" == typeof rep)for (f = rep.length, c = 0; f > c; c += 1)"string" == typeof rep[c] && (d = rep[c], e = str(d, i), e && g.push(quote(d) + (gap ? ": " : ":") + e)); else for (d in i)Object.prototype.hasOwnProperty.call(i, d) && (e = str(d, i), e && g.push(quote(d) + (gap ? ": " : ":") + e));
                                return e = 0 === g.length ? "{}" : gap ? "{\n" + gap + g.join(",\n" + gap) + "\n" + h + "}" : "{" + g.join(",") + "}", gap = h, e
                        }
                    }

                    if (nativeJSON && nativeJSON.parse)return exports.JSON = {
                        parse: nativeJSON.parse,
                        stringify: nativeJSON.stringify
                    };
                    var JSON = exports.JSON = {}, cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, gap, indent, meta = {
                        "\b": "\\b",
                        "	": "\\t",
                        "\n": "\\n",
                        "\f": "\\f",
                        "\r": "\\r",
                        '"': '\\"',
                        "\\": "\\\\"
                    }, rep;
                    JSON.stringify = function (a, b, c) {
                        var d;
                        if (gap = "", indent = "", "number" == typeof c)for (d = 0; c > d; d += 1)indent += " "; else"string" == typeof c && (indent = c);
                        if (rep = b, b && "function" != typeof b && ("object" != typeof b || "number" != typeof b.length))throw new Error("JSON.stringify");
                        return str("", {"": a})
                    }, JSON.parse = function (text, reviver) {
                        function walk(a, b) {
                            var c, d, e = a[b];
                            if (e && "object" == typeof e)for (c in e)Object.prototype.hasOwnProperty.call(e, c) && (d = walk(e, c), void 0 !== d ? e[c] = d : delete e[c]);
                            return reviver.call(a, b, e)
                        }

                        var j;
                        if (text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function (a) {
                                return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
                            })), /^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, "")))return j = eval("(" + text + ")"), "function" == typeof reviver ? walk({"": j}, "") : j;
                        throw new SyntaxError("JSON.parse")
                    }
                }("undefined" != typeof io ? io : module.exports, "undefined" != typeof JSON ? JSON : void 0), function (a, b) {
                    var c = a.parser = {}, d = c.packets = ["disconnect", "connect", "heartbeat", "message", "json", "event", "ack", "error", "noop"], e = c.reasons = ["transport not supported", "client not handshaken", "unauthorized"], f = c.advice = ["reconnect"], g = b.JSON, h = b.util.indexOf;
                    c.encodePacket = function (a) {
                        var b = h(d, a.type), c = a.id || "", i = a.endpoint || "", j = a.ack, k = null;
                        switch (a.type) {
                            case"error":
                                var l = a.reason ? h(e, a.reason) : "", m = a.advice ? h(f, a.advice) : "";
                                "" === l && "" === m || (k = l + ("" !== m ? "+" + m : ""));
                                break;
                            case"message":
                                "" !== a.data && (k = a.data);
                                break;
                            case"event":
                                var n = {name: a.name};
                                a.args && a.args.length && (n.args = a.args), k = g.stringify(n);
                                break;
                            case"json":
                                k = g.stringify(a.data);
                                break;
                            case"connect":
                                a.qs && (k = a.qs);
                                break;
                            case"ack":
                                k = a.ackId + (a.args && a.args.length ? "+" + g.stringify(a.args) : "")
                        }
                        var o = [b, c + ("data" == j ? "+" : ""), i];
                        return null !== k && void 0 !== k && o.push(k), o.join(":")
                    }, c.encodePayload = function (a) {
                        var b = "";
                        if (1 == a.length)return a[0];
                        for (var c = 0, d = a.length; d > c; c++) {
                            var e = a[c];
                            b += "�" + e.length + "�" + a[c]
                        }
                        return b
                    };
                    var i = /([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
                    c.decodePacket = function (a) {
                        var b = a.match(i);
                        if (!b)return {};
                        var c = b[2] || "", a = b[5] || "", h = {type: d[b[1]], endpoint: b[4] || ""};
                        switch (c && (h.id = c, h.ack = b[3] ? "data" : !0), h.type) {
                            case"error":
                                var b = a.split("+");
                                h.reason = e[b[0]] || "", h.advice = f[b[1]] || "";
                                break;
                            case"message":
                                h.data = a || "";
                                break;
                            case"event":
                                try {
                                    var j = g.parse(a);
                                    h.name = j.name, h.args = j.args
                                } catch (k) {
                                }
                                h.args = h.args || [];
                                break;
                            case"json":
                                try {
                                    h.data = g.parse(a)
                                } catch (k) {
                                }
                                break;
                            case"connect":
                                h.qs = a || "";
                                break;
                            case"ack":
                                var b = a.match(/^([0-9]+)(\+)?(.*)/);
                                if (b && (h.ackId = b[1], h.args = [], b[3]))try {
                                    h.args = b[3] ? g.parse(b[3]) : []
                                } catch (k) {
                                }
                                break;
                            case"disconnect":
                            case"heartbeat":
                        }
                        return h
                    }, c.decodePayload = function (a) {
                        var b = function (a, b) {
                            for (var c = 0, d = a; d < b.length; d++) {
                                if ("�" == b.charAt(d))return c;
                                c++
                            }
                            return c
                        };
                        if ("�" == a.charAt(0)) {
                            for (var d = [], e = 1, f = ""; e < a.length; e++)if ("�" == a.charAt(e)) {
                                var g = a.substr(e + 1).substr(0, f);
                                if ("�" != a.charAt(e + 1 + Number(f)) && e + 1 + Number(f) != a.length) {
                                    var h = Number(f);
                                    l = b(e + h + 1, a), g = a.substr(e + 1).substr(0, h + l), e += l
                                }
                                d.push(c.decodePacket(g)), e += Number(f) + 1, f = ""
                            } else f += a.charAt(e);
                            return d
                        }
                        return [c.decodePacket(a)]
                    }
                }("undefined" != typeof io ? io : module.exports, "undefined" != typeof io ? io : module.parent.exports), function (a, b) {
                    function c(a, b) {
                        this.socket = a, this.sessid = b
                    }

                    a.Transport = c, b.util.mixin(c, b.EventEmitter), c.prototype.heartbeats = function () {
                        return !0
                    }, c.prototype.onData = function (a) {
                        if (this !== this.socket.transport)return this;
                        if (this.clearCloseTimeout(), (this.socket.connected || this.socket.connecting || this.socket.reconnecting) && this.setCloseTimeout(), "" !== a) {
                            var c = b.parser.decodePayload(a);
                            if (c && c.length)for (var d = 0, e = c.length; e > d; d++)this.onPacket(c[d])
                        }
                        return this
                    }, c.prototype.onPacket = function (a) {
                        return this.socket.setHeartbeatTimeout(), "heartbeat" == a.type ? this.onHeartbeat() : ("connect" == a.type && "" == a.endpoint && this.onConnect(), "error" == a.type && "reconnect" == a.advice && (this.isOpen = !1), this.socket.onPacket(a), this)
                    }, c.prototype.setCloseTimeout = function () {
                        if (!this.closeTimeout) {
                            var a = this;
                            this.closeTimeout = setTimeout(function () {
                                a.onDisconnect()
                            }, this.socket.closeTimeout)
                        }
                    }, c.prototype.onDisconnect = function () {
                        return this.isOpen && this.close(), this.clearTimeouts(), this.socket.onDisconnect(), this
                    }, c.prototype.onConnect = function () {
                        return this.socket.onConnect(), this
                    }, c.prototype.clearCloseTimeout = function () {
                        this.closeTimeout && (clearTimeout(this.closeTimeout), this.closeTimeout = null)
                    }, c.prototype.clearTimeouts = function () {
                        this.clearCloseTimeout(), this.reopenTimeout && clearTimeout(this.reopenTimeout)
                    }, c.prototype.packet = function (a) {
                        this.send(b.parser.encodePacket(a))
                    }, c.prototype.onHeartbeat = function () {
                        this.packet({type: "heartbeat"})
                    }, c.prototype.onOpen = function () {
                        this.isOpen = !0, this.clearCloseTimeout(), this.socket.onOpen()
                    }, c.prototype.onClose = function () {
                        this.isOpen = !1, this.socket.onClose(), this.onDisconnect()
                    }, c.prototype.prepareUrl = function () {
                        var a = this.socket.options;
                        return this.scheme() + "://" + a.host + ":" + a.port + "/" + a.resource + "/" + b.protocol + "/" + this.name + "/" + this.sessid
                    }, c.prototype.ready = function (a, b) {
                        b.call(this)
                    }
                }("undefined" != typeof io ? io : module.exports, "undefined" != typeof io ? io : module.parent.exports), function (a, b, c) {
                    function d(a) {
                        if (this.options = {
                                port: 80,
                                secure: !1,
                                document: "document"in c ? document : !1,
                                resource: "socket.io",
                                transports: b.transports,
                                "connect timeout": 1e4,
                                "try multiple transports": !0,
                                reconnect: !0,
                                "reconnection delay": 500,
                                "reconnection limit": 1 / 0,
                                "reopen delay": 3e3,
                                "max reconnection attempts": 10,
                                "sync disconnect on unload": !1,
                                "auto connect": !0,
                                "flash policy port": 10843,
                                manualFlush: !1
                            }, b.util.merge(this.options, a), this.connected = !1, this.open = !1, this.connecting = !1, this.reconnecting = !1, this.namespaces = {}, this.buffer = [], this.doBuffer = !1, this.options["sync disconnect on unload"] && (!this.isXDomain() || b.util.ua.hasCORS)) {
                            var d = this;
                            b.util.on(c, "beforeunload", function () {
                                d.disconnectSync()
                            }, !1)
                        }
                        this.options["auto connect"] && this.connect()
                    }

                    function e() {
                    }

                    a.Socket = d, b.util.mixin(d, b.EventEmitter), d.prototype.of = function (a) {
                        return this.namespaces[a] || (this.namespaces[a] = new b.SocketNamespace(this, a), "" !== a && this.namespaces[a].packet({type: "connect"})), this.namespaces[a]
                    }, d.prototype.publish = function () {
                        this.emit.apply(this, arguments);
                        var a;
                        for (var b in this.namespaces)this.namespaces.hasOwnProperty(b) && (a = this.of(b), a.$emit.apply(a, arguments))
                    }, d.prototype.handshake = function (a) {
                        function c(b) {
                            b instanceof Error ? (d.connecting = !1, d.onError(b.message)) : a.apply(null, b.split(":"))
                        }

                        var d = this, f = this.options, g = ["http" + (f.secure ? "s" : "") + ":/", f.host + ":" + f.port, f.resource, b.protocol, b.util.query(this.options.query, "t=" + +new Date)].join("/");
                        if (this.isXDomain() && !b.util.ua.hasCORS) {
                            var h = document.getElementsByTagName("script")[0], i = document.createElement("script");
                            i.src = g + "&jsonp=" + b.j.length, i.onreadystatechange = function () {
                                "loaded" == this.readyState && i.parentNode && (d.connecting = !1, !d.reconnecting && d.onError("Server down or port not open"), i.parentNode.removeChild(i))
                            }, h.parentNode.insertBefore(i, h), b.j.push(function (a) {
                                c(a), i.parentNode.removeChild(i)
                            })
                        } else {
                            var j = b.util.request();
                            j.open("GET", g, !0), this.isXDomain() && (j.withCredentials = !0), j.onreadystatechange = function () {
                                4 == j.readyState && (j.onreadystatechange = e, 200 == j.status ? c(j.responseText) : 403 == j.status ? (d.onError(j.responseText), d.publish("handshake_failed")) : (d.connecting = !1, !d.reconnecting && d.onError(j.responseText), d.publish("handshake_failed")))
                            }, j.send(null)
                        }
                    }, d.prototype.getTransport = function (a) {
                        for (var c, d = a || this.transports, e = 0; c = d[e]; e++)if (b.Transport[c] && b.Transport[c].check(this) && (!this.isXDomain() || b.Transport[c].xdomainCheck(this))) {
                            var f = new b.Transport[c](this, this.sessionid);
                            return f
                        }
                        return null
                    }, d.prototype.connect = function (a) {
                        if (this.connecting)return this;
                        var c = this;
                        return c.connecting = !0, this.handshake(function (d, e, f, g) {
                            c.sessionid = d, c.closeTimeout = 1e3 * f, c.heartbeatTimeout = 1e3 * e, c.transports || (c.transports = c.origTransports = g ? b.util.intersect(g.split(","), c.options.transports) : c.options.transports), c.setHeartbeatTimeout(), c.once("connect", function () {
                                clearTimeout(c.connectTimeoutTimer), c.connectTimeoutTimer = null, a && "function" == typeof a && a()
                            }), c.doConnect()
                        }), this
                    }, d.prototype.doConnect = function () {
                        var a = this;
                        return a.transport && a.transport.clearTimeouts(), a.transport = a.getTransport(a.transports), a.transport ? void a.transport.ready(a, function () {
                            a.connecting = !0, a.publish("connecting", a.transport.name), a.transport.open(), a.options["connect timeout"] && (a.connectTimeoutTimer && clearTimeout(a.connectTimeoutTimer), a.connectTimeoutTimer = setTimeout(a.tryNextTransport.bind(a), a.options["connect timeout"]))
                        }) : a.publish("connect_failed")
                    }, d.prototype.tryNextTransport = function () {
                        var a = this;
                        if (!a.connected && (a.connecting = !1, a.options["try multiple transports"])) {
                            for (var b = a.transports; b.length > 0 && b.splice(0, 1)[0] != a.transport.name;);
                            b.length ? a.doConnect() : a.publish("connect_failed")
                        }
                    }, d.prototype.setHeartbeatTimeout = function () {
                        if (clearTimeout(this.heartbeatTimeoutTimer), !this.transport || this.transport.heartbeats()) {
                            var a = this;
                            this.heartbeatTimeoutTimer = setTimeout(function () {
                                a.transport && a.transport.onClose()
                            }, this.heartbeatTimeout)
                        }
                    }, d.prototype.packet = function (a) {
                        return this.connected && !this.doBuffer ? this.transport.packet(a) : this.buffer.push(a), this
                    }, d.prototype.setBuffer = function (a) {
                        this.doBuffer = a, !a && this.connected && this.buffer.length && (this.options.manualFlush || this.flushBuffer())
                    }, d.prototype.flushBuffer = function () {
                        this.transport.payload(this.buffer), this.buffer = []
                    }, d.prototype.disconnect = function () {
                        return (this.connected || this.connecting) && (this.open && this.of("").packet({type: "disconnect"}), this.onDisconnect("booted")), this
                    }, d.prototype.disconnectSync = function () {
                        var a = b.util.request(), c = ["http" + (this.options.secure ? "s" : "") + ":/", this.options.host + ":" + this.options.port, this.options.resource, b.protocol, "", this.sessionid].join("/") + "/?disconnect=1";
                        a.open("GET", c, !1), a.send(null), this.onDisconnect("booted")
                    }, d.prototype.isXDomain = function () {
                        var a = c.location.port || ("https:" == c.location.protocol ? 443 : 80);
                        return this.options.host !== c.location.hostname || this.options.port != a
                    }, d.prototype.onConnect = function () {
                        this.connected || (this.connected = !0, this.connecting = !1, this.doBuffer || this.setBuffer(!1), this.emit("connect"))
                    }, d.prototype.onOpen = function () {
                        this.open = !0
                    }, d.prototype.onClose = function () {
                        this.open = !1, clearTimeout(this.heartbeatTimeoutTimer)
                    }, d.prototype.onPacket = function (a) {
                        this.of(a.endpoint).onPacket(a)
                    }, d.prototype.onError = function (a) {
                        a && a.advice && "reconnect" === a.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect()), this.publish("error", a && a.reason ? a.reason : a)
                    }, d.prototype.onDisconnect = function (a) {
                        var b = this.connected, c = this.connecting;
                        this.connected = !1, this.connecting = !1, this.open = !1, (b || c) && (this.transport.close(), this.transport.clearTimeouts(), b && (this.publish("disconnect", a), "booted" != a && this.options.reconnect && !this.reconnecting && this.reconnect()), c && this.tryNextTransport())
                    }, d.prototype.reconnect = function () {
                        function a() {
                            if (c.connected) {
                                for (var a in c.namespaces)c.namespaces.hasOwnProperty(a) && "" !== a && c.namespaces[a].packet({type: "connect"});
                                c.publish("reconnect", c.transport.name, c.reconnectionAttempts)
                            }
                            clearTimeout(c.reconnectionTimer), c.removeListener("connect_failed", b), c.removeListener("connect", b), c.reconnecting = !1, delete c.reconnectionAttempts, delete c.reconnectionDelay, delete c.reconnectionTimer, delete c.redoTransports, c.options["try multiple transports"] = e
                        }

                        function b() {
                            return c.reconnecting ? c.connected ? a() : c.connecting && c.reconnecting ? c.reconnectionTimer = setTimeout(b, 1e3) : void(c.reconnectionAttempts++ >= d ? c.redoTransports ? (c.publish("reconnect_failed"), a()) : (c.on("connect_failed", b), c.options["try multiple transports"] = !0, c.transports = c.origTransports, c.transport = c.getTransport(), c.redoTransports = !0, c.connect()) : (c.reconnectionDelay < f && (c.reconnectionDelay *= 2), c.connect(), c.publish("reconnecting", c.reconnectionDelay, c.reconnectionAttempts), c.reconnectionTimer = setTimeout(b, c.reconnectionDelay))) : void 0
                        }

                        this.reconnecting = !0, this.reconnectionAttempts = 0, this.reconnectionDelay = this.options["reconnection delay"];
                        var c = this, d = this.options["max reconnection attempts"], e = this.options["try multiple transports"], f = this.options["reconnection limit"];
                        this.options["try multiple transports"] = !1, this.reconnectionTimer = setTimeout(b, this.reconnectionDelay), this.on("connect", b)
                    }
                }("undefined" != typeof io ? io : module.exports, "undefined" != typeof io ? io : module.parent.exports, this), function (a, b) {
                    function c(a, b) {
                        this.socket = a, this.name = b || "", this.flags = {}, this.json = new d(this, "json"), this.ackPackets = 0, this.acks = {}
                    }

                    function d(a, b) {
                        this.namespace = a, this.name = b
                    }

                    a.SocketNamespace = c, b.util.mixin(c, b.EventEmitter), c.prototype.$emit = b.EventEmitter.prototype.emit, c.prototype.of = function () {
                        return this.socket.of.apply(this.socket, arguments)
                    }, c.prototype.packet = function (a) {
                        return a.endpoint = this.name, this.socket.packet(a), this.flags = {}, this
                    }, c.prototype.send = function (a, b) {
                        var c = {type: this.flags.json ? "json" : "message", data: a};
                        return "function" == typeof b && (c.id = ++this.ackPackets, c.ack = !0, this.acks[c.id] = b), this.packet(c)
                    }, c.prototype.emit = function (a) {
                        var b = Array.prototype.slice.call(arguments, 1), c = b[b.length - 1], d = {
                            type: "event",
                            name: a
                        };
                        return "function" == typeof c && (d.id = ++this.ackPackets, d.ack = "data", this.acks[d.id] = c, b = b.slice(0, b.length - 1)), d.args = b, this.packet(d)
                    }, c.prototype.disconnect = function () {
                        return "" === this.name ? this.socket.disconnect() : (this.packet({type: "disconnect"}), this.$emit("disconnect")), this
                    }, c.prototype.onPacket = function (a) {
                        function c() {
                            d.packet({type: "ack", args: b.util.toArray(arguments), ackId: a.id})
                        }

                        var d = this;
                        switch (a.type) {
                            case"connect":
                                this.$emit("connect");
                                break;
                            case"disconnect":
                                "" === this.name ? this.socket.onDisconnect(a.reason || "booted") : this.$emit("disconnect", a.reason);
                                break;
                            case"message":
                            case"json":
                                var e = ["message", a.data];
                                "data" == a.ack ? e.push(c) : a.ack && this.packet({
                                    type: "ack",
                                    ackId: a.id
                                }), this.$emit.apply(this, e);
                                break;
                            case"event":
                                var e = [a.name].concat(a.args);
                                "data" == a.ack && e.push(c), this.$emit.apply(this, e);
                                break;
                            case"ack":
                                this.acks[a.ackId] && (this.acks[a.ackId].apply(this, a.args), delete this.acks[a.ackId]);
                                break;
                            case"error":
                                a.advice ? this.socket.onError(a) : "unauthorized" == a.reason ? this.$emit("connect_failed", a.reason) : this.$emit("error", a.reason)
                        }
                    }, d.prototype.send = function () {
                        this.namespace.flags[this.name] = !0, this.namespace.send.apply(this.namespace, arguments)
                    }, d.prototype.emit = function () {
                        this.namespace.flags[this.name] = !0, this.namespace.emit.apply(this.namespace, arguments)
                    }
                }("undefined" != typeof io ? io : module.exports, "undefined" != typeof io ? io : module.parent.exports), function (a, b, c) {
                    function d() {
                        b.Transport.apply(this, arguments)
                    }

                    a.websocket = d, b.util.inherit(d, b.Transport), d.prototype.name = "websocket", d.prototype.open = function () {
                        var a, d = b.util.query(this.socket.options.query), e = this;
                        return a || (a = c.MozWebSocket || c.WebSocket), this.websocket = new a(this.prepareUrl() + d), this.websocket.onopen = function () {
                            e.onOpen(), e.socket.setBuffer(!1)
                        }, this.websocket.onmessage = function (a) {
                            e.onData(a.data)
                        }, this.websocket.onclose = function () {
                            e.onClose(), e.socket.setBuffer(!0)
                        }, this.websocket.onerror = function (a) {
                            e.onError(a)
                        }, this
                    }, d.prototype.send = b.util.ua.iDevice ? function (a) {
                        var b = this;
                        return setTimeout(function () {
                            b.websocket.send(a)
                        }, 0), this
                    } : function (a) {
                        return this.websocket.send(a), this
                    }, d.prototype.payload = function (a) {
                        for (var b = 0, c = a.length; c > b; b++)this.packet(a[b]);
                        return this
                    }, d.prototype.close = function () {
                        return this.websocket.close(), this
                    }, d.prototype.onError = function (a) {
                        this.socket.onError(a)
                    }, d.prototype.scheme = function () {
                        return this.socket.options.secure ? "wss" : "ws"
                    }, d.check = function () {
                        return "WebSocket"in c && !("__addTask"in WebSocket) || "MozWebSocket"in c
                    }, d.xdomainCheck = function () {
                        return !0
                    }, b.transports.push("websocket")
                }("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports, this), function (a, b) {
                    function c() {
                        b.Transport.websocket.apply(this, arguments)
                    }

                    a.flashsocket = c, b.util.inherit(c, b.Transport.websocket), c.prototype.name = "flashsocket", c.prototype.open = function () {
                        var a = this, c = arguments;
                        return WebSocket.__addTask(function () {
                            b.Transport.websocket.prototype.open.apply(a, c)
                        }), this
                    }, c.prototype.send = function () {
                        var a = this, c = arguments;
                        return WebSocket.__addTask(function () {
                            b.Transport.websocket.prototype.send.apply(a, c)
                        }), this
                    }, c.prototype.close = function () {
                        return WebSocket.__tasks.length = 0, b.Transport.websocket.prototype.close.call(this), this
                    }, c.prototype.ready = function (a, d) {
                        function e() {
                            var b = a.options, e = b["flash policy port"], g = ["http" + (b.secure ? "s" : "") + ":/", b.host + ":" + b.port, b.resource, "static/flashsocket", "WebSocketMain" + (a.isXDomain() ? "Insecure" : "") + ".swf"];
                            c.loaded || ("undefined" == typeof WEB_SOCKET_SWF_LOCATION && (WEB_SOCKET_SWF_LOCATION = g.join("/")), 843 !== e && WebSocket.loadFlashPolicyFile("xmlsocket://" + b.host + ":" + e), WebSocket.__initialize(), c.loaded = !0), d.call(f)
                        }

                        var f = this;
                        return document.body ? e() : void b.util.load(e)
                    }, c.check = function () {
                        return "undefined" != typeof WebSocket && "__initialize"in WebSocket && swfobject ? swfobject.getFlashPlayerVersion().major >= 10 : !1
                    }, c.xdomainCheck = function () {
                        return !0
                    }, "undefined" != typeof window && (WEB_SOCKET_DISABLE_AUTO_INITIALIZATION = !0), b.transports.push("flashsocket")
                }("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports), "undefined" != typeof window)var swfobject = function () {
                function a() {
                    if (!R) {
                        try {
                            var a = K.getElementsByTagName("body")[0].appendChild(q("span"));
                            a.parentNode.removeChild(a)
                        } catch (b) {
                            return
                        }
                        R = !0;
                        for (var c = N.length, d = 0; c > d; d++)N[d]()
                    }
                }

                function b(a) {
                    R ? a() : N[N.length] = a
                }

                function c(a) {
                    if (typeof J.addEventListener != C)J.addEventListener("load", a, !1); else if (typeof K.addEventListener != C)K.addEventListener("load", a, !1); else if (typeof J.attachEvent != C)r(J, "onload", a); else if ("function" == typeof J.onload) {
                        var b = J.onload;
                        J.onload = function () {
                            b(), a()
                        }
                    } else J.onload = a
                }

                function d() {
                    M ? e() : f()
                }

                function e() {
                    var a = K.getElementsByTagName("body")[0], b = q(D);
                    b.setAttribute("type", G);
                    var c = a.appendChild(b);
                    if (c) {
                        var d = 0;
                        !function () {
                            if (typeof c.GetVariable != C) {
                                var e = c.GetVariable("$version");
                                e && (e = e.split(" ")[1].split(","), U.pv = [parseInt(e[0], 10), parseInt(e[1], 10), parseInt(e[2], 10)])
                            } else if (10 > d)return d++, void setTimeout(arguments.callee, 10);
                            a.removeChild(b), c = null, f()
                        }()
                    } else f()
                }

                function f() {
                    var a = O.length;
                    if (a > 0)for (var b = 0; a > b; b++) {
                        var c = O[b].id, d = O[b].callbackFn, e = {success: !1, id: c};
                        if (U.pv[0] > 0) {
                            var f = p(c);
                            if (f)if (!s(O[b].swfVersion) || U.wk && U.wk < 312)if (O[b].expressInstall && h()) {
                                var k = {};
                                k.data = O[b].expressInstall, k.width = f.getAttribute("width") || "0", k.height = f.getAttribute("height") || "0", f.getAttribute("class") && (k.styleclass = f.getAttribute("class")), f.getAttribute("align") && (k.align = f.getAttribute("align"));
                                for (var l = {}, m = f.getElementsByTagName("param"), n = m.length, o = 0; n > o; o++)"movie" != m[o].getAttribute("name").toLowerCase() && (l[m[o].getAttribute("name")] = m[o].getAttribute("value"));
                                i(k, l, c, d)
                            } else j(f), d && d(e); else u(c, !0), d && (e.success = !0, e.ref = g(c), d(e))
                        } else if (u(c, !0), d) {
                            var q = g(c);
                            q && typeof q.SetVariable != C && (e.success = !0, e.ref = q), d(e)
                        }
                    }
                }

                function g(a) {
                    var b = null, c = p(a);
                    if (c && "OBJECT" == c.nodeName)if (typeof c.SetVariable != C)b = c; else {
                        var d = c.getElementsByTagName(D)[0];
                        d && (b = d)
                    }
                    return b
                }

                function h() {
                    return !S && s("6.0.65") && (U.win || U.mac) && !(U.wk && U.wk < 312)
                }

                function i(a, b, c, d) {
                    S = !0, y = d || null, z = {success: !1, id: c};
                    var e = p(c);
                    if (e) {
                        "OBJECT" == e.nodeName ? (w = k(e), x = null) : (w = e, x = c), a.id = H, (typeof a.width == C || !/%$/.test(a.width) && parseInt(a.width, 10) < 310) && (a.width = "310"), (typeof a.height == C || !/%$/.test(a.height) && parseInt(a.height, 10) < 137) && (a.height = "137"), K.title = K.title.slice(0, 47) + " - Flash Player Installation";
                        var f = U.ie && U.win ? ["Active"].concat("").join("X") : "PlugIn", g = "MMredirectURL=" + J.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + f + "&MMdoctitle=" + K.title;
                        if (typeof b.flashvars != C ? b.flashvars += "&" + g : b.flashvars = g, U.ie && U.win && 4 != e.readyState) {
                            var h = q("div");
                            c += "SWFObjectNew", h.setAttribute("id", c), e.parentNode.insertBefore(h, e), e.style.display = "none", function () {
                                4 == e.readyState ? e.parentNode.removeChild(e) : setTimeout(arguments.callee, 10)
                            }()
                        }
                        l(a, b, c)
                    }
                }

                function j(a) {
                    if (U.ie && U.win && 4 != a.readyState) {
                        var b = q("div");
                        a.parentNode.insertBefore(b, a), b.parentNode.replaceChild(k(a), b), a.style.display = "none", function () {
                            4 == a.readyState ? a.parentNode.removeChild(a) : setTimeout(arguments.callee, 10)
                        }()
                    } else a.parentNode.replaceChild(k(a), a)
                }

                function k(a) {
                    var b = q("div");
                    if (U.win && U.ie)b.innerHTML = a.innerHTML; else {
                        var c = a.getElementsByTagName(D)[0];
                        if (c) {
                            var d = c.childNodes;
                            if (d)for (var e = d.length, f = 0; e > f; f++)1 == d[f].nodeType && "PARAM" == d[f].nodeName || 8 == d[f].nodeType || b.appendChild(d[f].cloneNode(!0))
                        }
                    }
                    return b
                }

                function l(a, b, c) {
                    var d, e = p(c);
                    if (U.wk && U.wk < 312)return d;
                    if (e)if (typeof a.id == C && (a.id = c), U.ie && U.win) {
                        var f = "";
                        for (var g in a)a[g] != Object.prototype[g] && ("data" == g.toLowerCase() ? b.movie = a[g] : "styleclass" == g.toLowerCase() ? f += ' class="' + a[g] + '"' : "classid" != g.toLowerCase() && (f += " " + g + '="' + a[g] + '"'));
                        var h = "";
                        for (var i in b)b[i] != Object.prototype[i] && (h += '<param name="' + i + '" value="' + b[i] + '" />');
                        e.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + f + ">" + h + "</object>", P[P.length] = a.id, d = p(a.id)
                    } else {
                        var j = q(D);
                        j.setAttribute("type", G);
                        for (var k in a)a[k] != Object.prototype[k] && ("styleclass" == k.toLowerCase() ? j.setAttribute("class", a[k]) : "classid" != k.toLowerCase() && j.setAttribute(k, a[k]));
                        for (var l in b)b[l] != Object.prototype[l] && "movie" != l.toLowerCase() && m(j, l, b[l]);
                        e.parentNode.replaceChild(j, e), d = j
                    }
                    return d
                }

                function m(a, b, c) {
                    var d = q("param");
                    d.setAttribute("name", b), d.setAttribute("value", c), a.appendChild(d)
                }

                function n(a) {
                    var b = p(a);
                    b && "OBJECT" == b.nodeName && (U.ie && U.win ? (b.style.display = "none", function () {
                        4 == b.readyState ? o(a) : setTimeout(arguments.callee, 10)
                    }()) : b.parentNode.removeChild(b))
                }

                function o(a) {
                    var b = p(a);
                    if (b) {
                        for (var c in b)"function" == typeof b[c] && (b[c] = null);
                        b.parentNode.removeChild(b)
                    }
                }

                function p(a) {
                    var b = null;
                    try {
                        b = K.getElementById(a)
                    } catch (c) {
                    }
                    return b
                }

                function q(a) {
                    return K.createElement(a)
                }

                function r(a, b, c) {
                    a.attachEvent(b, c), Q[Q.length] = [a, b, c]
                }

                function s(a) {
                    var b = U.pv, c = a.split(".");
                    return c[0] = parseInt(c[0], 10), c[1] = parseInt(c[1], 10) || 0, c[2] = parseInt(c[2], 10) || 0, b[0] > c[0] || b[0] == c[0] && b[1] > c[1] || b[0] == c[0] && b[1] == c[1] && b[2] >= c[2]
                }

                function t(a, b, c, d) {
                    if (!U.ie || !U.mac) {
                        var e = K.getElementsByTagName("head")[0];
                        if (e) {
                            var f = c && "string" == typeof c ? c : "screen";
                            if (d && (A = null, B = null), !A || B != f) {
                                var g = q("style");
                                g.setAttribute("type", "text/css"), g.setAttribute("media", f), A = e.appendChild(g), U.ie && U.win && typeof K.styleSheets != C && K.styleSheets.length > 0 && (A = K.styleSheets[K.styleSheets.length - 1]), B = f
                            }
                            U.ie && U.win ? A && typeof A.addRule == D && A.addRule(a, b) : A && typeof K.createTextNode != C && A.appendChild(K.createTextNode(a + " {" + b + "}"))
                        }
                    }
                }

                function u(a, b) {
                    if (T) {
                        var c = b ? "visible" : "hidden";
                        R && p(a) ? p(a).style.visibility = c : t("#" + a, "visibility:" + c)
                    }
                }

                function v(a) {
                    var b = /[\\\"<>\.;]/, c = null != b.exec(a);
                    return c && typeof encodeURIComponent != C ? encodeURIComponent(a) : a
                }

                var w, x, y, z, A, B, C = "undefined", D = "object", E = "Shockwave Flash", F = "ShockwaveFlash.ShockwaveFlash", G = "application/x-shockwave-flash", H = "SWFObjectExprInst", I = "onreadystatechange", J = window, K = document, L = navigator, M = !1, N = [d], O = [], P = [], Q = [], R = !1, S = !1, T = !0, U = function () {
                    var a = typeof K.getElementById != C && typeof K.getElementsByTagName != C && typeof K.createElement != C, b = L.userAgent.toLowerCase(), c = L.platform.toLowerCase(), d = /win/.test(c ? c : b), e = /mac/.test(c ? c : b), f = /webkit/.test(b) ? parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")) : !1, g = !1, h = [0, 0, 0], i = null;
                    if (typeof L.plugins != C && typeof L.plugins[E] == D)i = L.plugins[E].description, !i || typeof L.mimeTypes != C && L.mimeTypes[G] && !L.mimeTypes[G].enabledPlugin || (M = !0, g = !1, i = i.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), h[0] = parseInt(i.replace(/^(.*)\..*$/, "$1"), 10), h[1] = parseInt(i.replace(/^.*\.(.*)\s.*$/, "$1"), 10), h[2] = /[a-zA-Z]/.test(i) ? parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0); else if (typeof J[["Active"].concat("Object").join("X")] != C)try {
                        var j = new (window[["Active"].concat("Object").join("X")])(F);
                        j && (i = j.GetVariable("$version"), i && (g = !0, i = i.split(" ")[1].split(","), h = [parseInt(i[0], 10), parseInt(i[1], 10), parseInt(i[2], 10)]))
                    } catch (k) {
                    }
                    return {w3: a, pv: h, wk: f, ie: g, win: d, mac: e}
                }();
                return function () {
                    U.w3 && ((typeof K.readyState != C && "complete" == K.readyState || typeof K.readyState == C && (K.getElementsByTagName("body")[0] || K.body)) && a(), R || (typeof K.addEventListener != C && K.addEventListener("DOMContentLoaded", a, !1), U.ie && U.win && (K.attachEvent(I, function () {
                        "complete" == K.readyState && (K.detachEvent(I, arguments.callee), a())
                    }), J == top && !function () {
                        if (!R) {
                            try {
                                K.documentElement.doScroll("left")
                            } catch (b) {
                                return void setTimeout(arguments.callee, 0)
                            }
                            a()
                        }
                    }()), U.wk && !function () {
                        return R ? void 0 : /loaded|complete/.test(K.readyState) ? void a() : void setTimeout(arguments.callee, 0)
                    }(), c(a)))
                }(), function () {
                    U.ie && U.win && window.attachEvent("onunload", function () {
                        for (var a = Q.length, b = 0; a > b; b++)Q[b][0].detachEvent(Q[b][1], Q[b][2]);
                        for (var c = P.length, d = 0; c > d; d++)n(P[d]);
                        for (var e in U)U[e] = null;
                        U = null;
                        for (var f in swfobject)swfobject[f] = null;
                        swfobject = null
                    })
                }(), {
                    registerObject: function (a, b, c, d) {
                        if (U.w3 && a && b) {
                            var e = {};
                            e.id = a, e.swfVersion = b, e.expressInstall = c, e.callbackFn = d, O[O.length] = e, u(a, !1)
                        } else d && d({success: !1, id: a})
                    }, getObjectById: function (a) {
                        return U.w3 ? g(a) : void 0
                    }, embedSWF: function (a, c, d, e, f, g, j, k, m, n) {
                        var o = {success: !1, id: c};
                        U.w3 && !(U.wk && U.wk < 312) && a && c && d && e && f ? (u(c, !1), b(function () {
                            d += "", e += "";
                            var b = {};
                            if (m && typeof m === D)for (var p in m)b[p] = m[p];
                            b.data = a, b.width = d, b.height = e;
                            var q = {};
                            if (k && typeof k === D)for (var r in k)q[r] = k[r];
                            if (j && typeof j === D)for (var t in j)typeof q.flashvars != C ? q.flashvars += "&" + t + "=" + j[t] : q.flashvars = t + "=" + j[t];
                            if (s(f)) {
                                var v = l(b, q, c);
                                b.id == c && u(c, !0), o.success = !0, o.ref = v
                            } else {
                                if (g && h())return b.data = g, void i(b, q, c, n);
                                u(c, !0)
                            }
                            n && n(o)
                        })) : n && n(o)
                    }, switchOffAutoHideShow: function () {
                        T = !1
                    }, ua: U, getFlashPlayerVersion: function () {
                        return {major: U.pv[0], minor: U.pv[1], release: U.pv[2]}
                    }, hasFlashPlayerVersion: s, createSWF: function (a, b, c) {
                        return U.w3 ? l(a, b, c) : void 0
                    }, showExpressInstall: function (a, b, c, d) {
                        U.w3 && h() && i(a, b, c, d)
                    }, removeSWF: function (a) {
                        U.w3 && n(a)
                    }, createCSS: function (a, b, c, d) {
                        U.w3 && t(a, b, c, d)
                    }, addDomLoadEvent: b, addLoadEvent: c, getQueryParamValue: function (a) {
                        var b = K.location.search || K.location.hash;
                        if (b) {
                            if (/\?/.test(b) && (b = b.split("?")[1]), null == a)return v(b);
                            for (var c = b.split("&"), d = 0; d < c.length; d++)if (c[d].substring(0, c[d].indexOf("=")) == a)return v(c[d].substring(c[d].indexOf("=") + 1))
                        }
                        return ""
                    }, expressInstallCallback: function () {
                        if (S) {
                            var a = p(H);
                            a && w && (a.parentNode.replaceChild(w, a), x && (u(x, !0), U.ie && U.win && (w.style.display = "block")), y && y(z)), S = !1
                        }
                    }
                }
            }();
            !function () {
                if ("undefined" != typeof window && !window.WebSocket) {
                    var a = window.console;
                    if (a && a.log && a.error || (a = {
                            log: function () {
                            }, error: function () {
                            }
                        }), !swfobject.hasFlashPlayerVersion("10.0.0"))return void a.error("Flash Player >= 10.0.0 is required.");
                    "file:" == location.protocol && a.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."), WebSocket = function (b, c, d, e, f) {
                        var g = this;
                        g.__id = WebSocket.__nextId++, WebSocket.__instances[g.__id] = g, g.readyState = WebSocket.CONNECTING, g.bufferedAmount = 0, g.__events = {}, c ? "string" == typeof c && (c = [c]) : c = [], setTimeout(function () {
                            WebSocket.__addTask(function () {
                                a.info("before create", new Date), WebSocket.__flash.create(g.__id, b, c, d || null, e || 0, f || null)
                            })
                        }, 0)
                    }, WebSocket.prototype.send = function (a) {
                        if (this.readyState == WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";
                        var b = WebSocket.__flash.send(this.__id, encodeURIComponent(a));
                        return 0 > b ? !0 : (this.bufferedAmount += b, !1)
                    }, WebSocket.prototype.close = function () {
                        this.readyState != WebSocket.CLOSED && this.readyState != WebSocket.CLOSING && (this.readyState = WebSocket.CLOSING, WebSocket.__flash.close(this.__id))
                    }, WebSocket.prototype.addEventListener = function (a, b) {
                        a in this.__events || (this.__events[a] = []), this.__events[a].push(b)
                    }, WebSocket.prototype.removeEventListener = function (a, b) {
                        if (a in this.__events)for (var c = this.__events[a], d = c.length - 1; d >= 0; --d)if (c[d] === b) {
                            c.splice(d, 1);
                            break
                        }
                    }, WebSocket.prototype.dispatchEvent = function (a) {
                        for (var b = this.__events[a.type] || [], c = 0; c < b.length; ++c)b[c](a);
                        var d = this["on" + a.type];
                        d && d(a)
                    }, WebSocket.prototype.__handleEvent = function (b) {
                        a.info("__handleEvent", new Date, b), "readyState"in b && (this.readyState = b.readyState), "protocol"in b && (this.protocol = b.protocol);
                        var c;
                        if ("open" == b.type || "error" == b.type)c = this.__createSimpleEvent(b.type); else if ("close" == b.type)c = this.__createSimpleEvent("close"); else {
                            if ("message" != b.type)throw"unknown event type: " + b.type;
                            var d = decodeURIComponent(b.message);
                            c = this.__createMessageEvent("message", d)
                        }
                        this.dispatchEvent(c)
                    }, WebSocket.prototype.__createSimpleEvent = function (a) {
                        if (document.createEvent && window.Event) {
                            var b = document.createEvent("Event");
                            return b.initEvent(a, !1, !1), b
                        }
                        return {type: a, bubbles: !1, cancelable: !1}
                    }, WebSocket.prototype.__createMessageEvent = function (a, b) {
                        if (document.createEvent && window.MessageEvent && !window.opera) {
                            var c = document.createEvent("MessageEvent");
                            return c.initMessageEvent("message", !1, !1, b, null, null, window, null), c
                        }
                        return {type: a, data: b, bubbles: !1, cancelable: !1}
                    }, WebSocket.CONNECTING = 0, WebSocket.OPEN = 1, WebSocket.CLOSING = 2, WebSocket.CLOSED = 3, WebSocket.__flash = null, WebSocket.__instances = {}, WebSocket.__tasks = [], WebSocket.__nextId = 0, WebSocket.loadFlashPolicyFile = function (a) {
                        WebSocket.__addTask(function () {
                            WebSocket.__flash.loadManualPolicyFile(a)
                        })
                    }, WebSocket.__initialize = function () {
                        if (!WebSocket.__flash) {
                            if (WebSocket.__swfLocation && (window.WEB_SOCKET_SWF_LOCATION = WebSocket.__swfLocation), !window.WEB_SOCKET_SWF_LOCATION)return void a.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");
                            var b = document.createElement("div");
                            b.id = "webSocketContainer", b.style.position = "absolute", WebSocket.__isFlashLite() ? (b.style.left = "0px", b.style.top = "0px") : (b.style.left = "-100px", b.style.top = "-100px");
                            var c = document.createElement("div");
                            c.id = "webSocketFlash", b.appendChild(c), document.body.appendChild(b), swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION, "webSocketFlash", "1", "1", "10.0.0", null, null, {
                                hasPriority: !0,
                                swliveconnect: !0,
                                allowScriptAccess: "always"
                            }, null, function (b) {
                                b.success || a.error("[WebSocket] swfobject.embedSWF failed")
                            })
                        }
                    }, WebSocket.__onFlashInitialized = function () {
                        setTimeout(function () {
                            WebSocket.__flash = document.getElementById("webSocketFlash"), WebSocket.__flash.setCallerUrl(location.href), WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);
                            for (var a = 0; a < WebSocket.__tasks.length; ++a)WebSocket.__tasks[a]();
                            WebSocket.__tasks = []
                        }, 0)
                    }, WebSocket.__onFlashEvent = function () {
                        return setTimeout(function () {
                            try {
                                for (var b = WebSocket.__flash.receiveEvents(), c = 0; c < b.length; ++c)WebSocket.__instances[b[c].webSocketId].__handleEvent(b[c])
                            } catch (d) {
                                a.error(d)
                            }
                        }, 0), !0
                    }, WebSocket.__log = function (b) {
                        a.log(decodeURIComponent(b))
                    }, WebSocket.__error = function (b) {
                        var c = function (a, b) {
                            b = b || 2;
                            for (var c = "" + a; c.length < b;)c = "0" + c;
                            return c
                        }, d = new Date, e = d.getFullYear() + "-" + c(d.getMonth() + 1) + "-" + c(d.getDate()) + " " + c(d.getHours()) + ":" + c(d.getMinutes()) + ":" + c(d.getSeconds()) + ":" + c(d.getMilliseconds(), 3);
                        a.error(e, decodeURIComponent(b))
                    }, WebSocket.__addTask = function (a) {
                        WebSocket.__flash ? a() : WebSocket.__tasks.push(a)
                    }, WebSocket.__isFlashLite = function () {
                        if (!window.navigator || !window.navigator.mimeTypes)return !1;
                        var a = window.navigator.mimeTypes["application/x-shockwave-flash"];
                        return a && a.enabledPlugin && a.enabledPlugin.filename ? !!a.enabledPlugin.filename.match(/flashlite/i) : !1
                    }, window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION || (window.addEventListener ? window.addEventListener("load", function () {
                        WebSocket.__initialize()
                    }, !1) : window.attachEvent("onload", function () {
                        WebSocket.__initialize()
                    }))
                }
            }(), function (a, b, c) {
                function d(a) {
                    a && (b.Transport.apply(this, arguments), this.sendBuffer = [])
                }

                function e() {
                }

                a.XHR = d, b.util.inherit(d, b.Transport), d.prototype.open = function () {
                    return this.socket.setBuffer(!1), this.onOpen(), this.get(), this.setCloseTimeout(), this
                }, d.prototype.payload = function (a) {
                    for (var c = [], d = 0, e = a.length; e > d; d++)c.push(b.parser.encodePacket(a[d]));
                    this.send(b.parser.encodePayload(c))
                }, d.prototype.send = function (a) {
                    return this.post(a), this
                }, d.prototype.post = function (a) {
                    function b() {
                        4 == this.readyState && (this.onreadystatechange = e, f.posting = !1, 200 == this.status ? f.socket.setBuffer(!1) : f.onClose())
                    }

                    function d() {
                        this.onload = e, f.socket.setBuffer(!1)
                    }

                    var f = this;
                    this.socket.setBuffer(!0), this.sendXHR = this.request("POST"), c.XDomainRequest && this.sendXHR instanceof XDomainRequest ? this.sendXHR.onload = this.sendXHR.onerror = d : this.sendXHR.onreadystatechange = b, this.sendXHR.send(a)
                }, d.prototype.close = function () {
                    return this.onClose(), this
                }, d.prototype.request = function (a) {
                    var c = b.util.request(this.socket.isXDomain()), d = b.util.query(this.socket.options.query, "t=" + +new Date);
                    if (c.open(a || "GET", this.prepareUrl() + d, !0), "POST" == a)try {
                        c.setRequestHeader ? c.setRequestHeader("Content-type", "text/plain;charset=UTF-8") : c.contentType = "text/plain"
                    } catch (e) {
                    }
                    return c
                }, d.prototype.scheme = function () {
                    return this.socket.options.secure ? "https" : "http"
                }, d.check = function (a, d) {
                    try {
                        var e = b.util.request(d), f = c.XDomainRequest && e instanceof XDomainRequest, g = a && a.options && a.options.secure ? "https:" : "http:", h = c.location && g != c.location.protocol;
                        if (e && (!f || !h))return !0
                    } catch (i) {
                    }
                    return !1
                }, d.xdomainCheck = function (a) {
                    return d.check(a, !0)
                }
            }("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports, this), function (a, b) {
                function c() {
                    b.Transport.XHR.apply(this, arguments)
                }

                a.htmlfile = c, b.util.inherit(c, b.Transport.XHR), c.prototype.name = "htmlfile", c.prototype.get = function () {
                    this.doc = new (window[["Active"].concat("Object").join("X")])("htmlfile"), this.doc.open(), this.doc.write("<html></html>"), this.doc.close(), this.doc.parentWindow.s = this;
                    var a = this.doc.createElement("div");
                    a.className = "socketio", this.doc.body.appendChild(a), this.iframe = this.doc.createElement("iframe"), a.appendChild(this.iframe);
                    var c = this, d = b.util.query(this.socket.options.query, "t=" + +new Date);
                    this.iframe.src = this.prepareUrl() + d, b.util.on(window, "unload", function () {
                        c.destroy()
                    })
                }, c.prototype._ = function (a, b) {
                    this.onData(a);
                    try {
                        var c = b.getElementsByTagName("script")[0];
                        c.parentNode.removeChild(c)
                    } catch (d) {
                    }
                }, c.prototype.destroy = function () {
                    if (this.iframe) {
                        try {
                            this.iframe.src = "about:blank"
                        } catch (a) {
                        }
                        this.doc = null, this.iframe.parentNode.removeChild(this.iframe), this.iframe = null, CollectGarbage()
                    }
                }, c.prototype.close = function () {
                    return this.destroy(), b.Transport.XHR.prototype.close.call(this)
                }, c.check = function (a) {
                    if ("undefined" != typeof window && ["Active"].concat("Object").join("X")in window)try {
                        var c = new (window[["Active"].concat("Object").join("X")])("htmlfile");
                        return c && b.Transport.XHR.check(a)
                    } catch (d) {
                    }
                    return !1
                }, c.xdomainCheck = function () {
                    return !1
                }, b.transports.push("htmlfile")
            }("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports), function (a, b, c) {
                function d() {
                    b.Transport.XHR.apply(this, arguments)
                }

                function e() {
                }

                a["xhr-polling"] = d, b.util.inherit(d, b.Transport.XHR), b.util.merge(d, b.Transport.XHR), d.prototype.name = "xhr-polling", d.prototype.heartbeats = function () {
                    return !1
                }, d.prototype.open = function () {
                    var a = this;
                    return b.Transport.XHR.prototype.open.call(a), !1
                }, d.prototype.get = function () {
                    function a() {
                        4 == this.readyState && (this.onreadystatechange = e, 200 == this.status ? (f.onData(this.responseText), f.get()) : f.onClose())
                    }

                    function b() {
                        this.onload = e, this.onerror = e, f.retryCounter = 1, f.onData(this.responseText), f.get()
                    }

                    function d() {
                        f.retryCounter++, !f.retryCounter || f.retryCounter > 3 ? f.onClose() : f.get()
                    }

                    if (this.isOpen) {
                        var f = this;
                        this.xhr = this.request(), c.XDomainRequest && this.xhr instanceof XDomainRequest ? (this.xhr.onload = b, this.xhr.onerror = d) : this.xhr.onreadystatechange = a, this.xhr.send(null)
                    }
                }, d.prototype.onClose = function () {
                    if (b.Transport.XHR.prototype.onClose.call(this), this.xhr) {
                        this.xhr.onreadystatechange = this.xhr.onload = this.xhr.onerror = e;
                        try {
                            this.xhr.abort()
                        } catch (a) {
                        }
                        this.xhr = null
                    }
                }, d.prototype.ready = function (a, c) {
                    var d = this;
                    b.util.defer(function () {
                        c.call(d)
                    })
                }, b.transports.push("xhr-polling")
            }("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports, this), function (a, b, c) {
                function d() {
                    b.Transport["xhr-polling"].apply(this, arguments), this.index = b.j.length;
                    var a = this;
                    b.j.push(function (b) {
                        a._(b)
                    })
                }

                var e = c.document && "MozAppearance"in c.document.documentElement.style;
                a["jsonp-polling"] = d, b.util.inherit(d, b.Transport["xhr-polling"]), d.prototype.name = "jsonp-polling", d.prototype.post = function (a) {
                    function c() {
                        d(), e.socket.setBuffer(!1)
                    }

                    function d() {
                        e.iframe && e.form.removeChild(e.iframe);
                        try {
                            g = document.createElement('<iframe name="' + e.iframeId + '">')
                        } catch (a) {
                            g = document.createElement("iframe"), g.name = e.iframeId
                        }
                        g.id = e.iframeId, e.form.appendChild(g), e.iframe = g
                    }

                    var e = this, f = b.util.query(this.socket.options.query, "t=" + +new Date + "&i=" + this.index);
                    if (!this.form) {
                        var g, h = document.createElement("form"), i = document.createElement("textarea"), j = this.iframeId = "socketio_iframe_" + this.index;
                        h.className = "socketio", h.style.position = "absolute", h.style.top = "0px", h.style.left = "0px", h.style.display = "none", h.target = j, h.method = "POST", h.setAttribute("accept-charset", "utf-8"), i.name = "d", h.appendChild(i), document.body.appendChild(h), this.form = h, this.area = i
                    }
                    this.form.action = this.prepareUrl() + f, d(), this.area.value = b.JSON.stringify(a);
                    try {
                        this.form.submit()
                    } catch (k) {
                    }
                    this.iframe.attachEvent ? g.onreadystatechange = function () {
                        "complete" == e.iframe.readyState && c()
                    } : this.iframe.onload = c, this.socket.setBuffer(!0)
                }, d.prototype.get = function () {
                    var a = this, c = document.createElement("script"), d = b.util.query(this.socket.options.query, "t=" + +new Date + "&i=" + this.index);
                    this.script && (this.script.parentNode.removeChild(this.script), this.script = null), c.async = !0, c.src = this.prepareUrl() + d, c.onerror = function () {
                        a.onClose()
                    };
                    var f = document.getElementsByTagName("script")[0];
                    f.parentNode.insertBefore(c, f), this.script = c, e && setTimeout(function () {
                        var a = document.createElement("iframe");
                        document.body.appendChild(a), document.body.removeChild(a)
                    }, 100)
                }, d.prototype._ = function (a) {
                    return this.onData(a), this.isOpen && this.get(), this
                }, d.prototype.ready = function (a, c) {
                    var d = this;
                    return e ? void b.util.load(function () {
                        c.call(d)
                    }) : c.call(this)
                }, d.check = function () {
                    return "document"in c
                }, d.xdomainCheck = function () {
                    return !0
                }, b.transports.push("jsonp-polling")
            }("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports, this), __WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {
                return window.io = io, io
            }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), !(void 0 !== __WEBPACK_AMD_DEFINE_RESULT__ && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))
        }()
    }).call(exports, __webpack_require__(5)(module))
}, function (a, b, c) {
    var d = c(42).fn, e = c(14), f = c(25), g = c(47), h = c(48), i = c(28), j = c(24), k = c(10), l = k.notundef;
    d.login = function () {
        var a = this;
        a.sendCmd("login", a.assembleLogin(), a.onLogin.bind(a))
    }, d.assembleIMLogin = function () {
        var a = {};
        return function () {
            var b = this, c = b.options, d = c.account, e = b.name, g = a[e] = a[e] || k.guid();
            return {
                appKey: c.appKey,
                account: d,
                token: c.token,
                sdkVersion: i.info.sdkVersion,
                protocolVersion: i.info.protocolVersion,
                os: f.os.toString(),
                browser: f.name + " " + f.version,
                session: g,
                deviceId: h.deviceId
            }
        }
    }(), d.onLogin = function (a, b) {
        var c = this;
        c.loginResult = b, a ? c.onAuthError(a) : (c.startHeartbeat(), c.afterLogin(b))
    }, d.afterLogin = k.emptyFunc, d.notifyLogin = function () {
        var a = this, b = a.loginResult;
        j.info("onConnect", b), a.options.onconnect(b)
    }, d.logout = function () {
        var a = this;
        if (a.isConnected()) {
            var b = new e("主动退出", "logout");
            a.onAuthError(b)
        }
    }, d.onKicked = function (a) {
        var b = this, c = a.content, d = c.from, f = c.reason, h = c.custom, i = {
            reason: b.kickedReasons[f] || "unknown",
            message: b.kickedMessages[f] || "未知原因"
        };
        if (l(d) && (i.from = g.reverseType(d)), l(h) && (i.custom = h), b.shouldNotifyKicked(i)) {
            var j = new e("被踢了", "kicked");
            k.merge(j, i), b.onAuthError(j)
        } else b.shouldReconnect = !1, b.hasNotifyDisconnected = !0, b.disconnectSocket()
    }, d.shouldNotifyKicked = function () {
        return !0
    }, d.onAuthError = function (a) {
        var b = this;
        b.shouldReconnect = !1, b.markAllCallbackInvalid(a || e.newConnectionError()), b.notifyDisconnect(a)
    }
}, function (a) {
    function b() {
    }

    var c = {1: "Android", 2: "iOS", 4: "PC", 8: "WindowsPhone", 16: "Web", 32: "Server"};
    b.reverse = function (a) {
        var b = a;
        return b.type = c[b.type], b
    }, b.reverseType = function (a) {
        return c[a] || a
    }, a.exports = b
}, function (a, b, c) {
    var d = c(10), e = {};
    e.init = function () {
        var a = "nim_web_sdk_deviceId", b = localStorage[a];
        b || (b = d.guid(), localStorage[a] = b), e.deviceId = b
    }, e.init(), a.exports = e
}, function (a, b, c) {
    var d = c(42).fn, e = c(28);
    d.processLink = function (a) {
        switch (a.cmd) {
            case"heartbeat":
        }
    }, d.startHeartbeat = function () {
        var a = this;
        a.stopHeartbeat(), a.heartbeatTimer = window.setTimeout(function () {
            a.sendCmd("heartbeat", null, a.onHeartbeat.bind(a))
        }, e.heartbeatInterval)
    }, d.stopHeartbeat = function () {
        var a = this;
        a.heartbeatTimer && (window.clearTimeout(a.heartbeatTimer), a.heartbeatTimer = null)
    }, d.onHeartbeat = function (a, b) {
        var c = this;
        a || c.startHeartbeat(), c.onMiscError(a, b, "heartbeat")
    }
}, function (a, b, c) {
    var d = c(42).fn, e = c(51);
    d.processMisc = function (a) {
        switch (a.cmd) {
            case"getNosToken":
                a.error || (a.obj = a.content.nosToken);
                break;
            case"audioToText":
                a.error || (a.obj.text = a.content.text);
                break;
            case"processImage":
                a.obj.imageOps = e.reverseImageOps(a.obj.imageOps), a.error || (a.obj = {url: a.content.url})
        }
    }
}, function (a, b, c) {
    function d(a) {
        e.verifyOptions(a, "type"), e.verifyParamValid("type", a.type, d.validTypes), e.merge(this, a), this.type = f[a.type]
    }

    var e = c(10), f = {blur: 2, quality: 3, crop: 4, rotate: 5, thumbnail: 7, interlace: 9}, g = {
        0: "stripMeta",
        1: "type",
        2: "blur",
        3: "quality",
        4: "crop",
        5: "rotate",
        6: "pixel",
        7: "thumbnail",
        8: "watermark",
        9: "interlace",
        10: "tmp"
    };
    d.validTypes = Object.keys(f), d.reverse = function (a) {
        var b = e.copy(a);
        return b.type = g[b.type], b
    }, d.reverseImageOps = function (a) {
        return a.map(function (a) {
            return d.reverse(a)
        })
    }, a.exports = d
}, function (a, b, c) {
    function d(a) {
        this.configMap = a.configMap, this.serializeMap = a.serializeMap, this.unserializeMap = a.unserializeMap
    }

    var e = c(10), f = e.undef, g = c(14), h = c(24), i = {};
    d.getInstance = function (a) {
        var b = a.type || a;
        return i[b] || (i[b] = new d(a)), i[b]
    }, d.prototype.createCmd = function () {
        var a = 1;
        return function (b, c) {
            var d = this, e = this.configMap.cmdConfig[b];
            return b = {SID: e.sid, CID: e.cid, SER: a++}, e.params && (b.Q = [], e.params.forEach(function (a) {
                var e = a.type, g = a.name, h = a.entity, i = c[g];
                if (!f(i)) {
                    switch (e) {
                        case"PropertyArray":
                            e = "ArrayMable", i = i.map(function (a) {
                                return {t: "Property", v: d.serialize(a, h)}
                            });
                            break;
                        case"Property":
                            i = d.serialize(i, g);
                            break;
                        case"bool":
                            i = i ? "true" : "false"
                    }
                    b.Q.push({t: e, v: i})
                }
            })), b
        }
    }(), d.prototype.parseResponse = function (a) {
        var b = this, c = JSON.parse(a), d = {
            raw: c,
            error: g.genError(c.code)
        }, f = b.configMap.packetConfig[c.sid + "_" + c.cid];
        if (!f)return h.log("no config for sid: " + c.sid + " cid: " + c.cid), d;
        var i = c.r, j = "notify" === f.service && !f.cmd;
        if (d.isNotify = j, j) {
            var k = c.r[1].headerPacket;
            if (f = b.configMap.packetConfig[k.sid + "_" + k.cid], i = c.r[1].body, !f)return h.log("no config for sid: " + k.sid + " cid: " + k.cid), d
        }
        return d.service = f.service, d.cmd = f.cmd, !d.error && f.response && (d.content = {}, f.response.forEach(function (a, f) {
            var g = i[f];
            if (!e.undef(g)) {
                var h = a.type, k = a.name, l = a.entity || k;
                switch (h) {
                    case"Property":
                        d.content[k] = b.unserialize(g, l);
                        break;
                    case"PropertyArray":
                        d.content[k] = [], g.forEach(function (a) {
                            d.content[k].push(b.unserialize(a, l))
                        });
                        break;
                    case"String":
                        d.content[k] = g;
                        break;
                    case"StrArray":
                        d.content[k] = g;
                        break;
                    case"Number":
                        d.content[k] = +g;
                        break;
                    case"Boolean":
                        d.content[k] = g
                }
                if (j && "msg" === k || "sysMsg" === k) {
                    var m = d.content[k];
                    e.isObject(m) && (m.idServer = c.r[0])
                }
            }
        })), d
    }, d.prototype.serialize = function (a, b) {
        var c = this.serializeMap[b], d = {};
        for (var e in c)a.hasOwnProperty(e) && (d[c[e]] = a[e]);
        return d
    }, d.prototype.unserialize = function (a, b) {
        var c = this.unserializeMap[b], d = {};
        if (a)for (var e in c)a.hasOwnProperty(e) && (d[c[e]] = a[e]);
        return d
    }, a.exports = d
}, , function (a) {
    var b = {
        link: {id: 1, heartbeat: 2},
        misc: {id: 6, getNosToken: 2, audioToText: 5, processImage: 6}
    }, c = {
        heartbeat: {sid: b.link.id, cid: b.link.heartbeat},
        getNosToken: {sid: b.misc.id, cid: b.misc.getNosToken, params: [{type: "String", name: "responseBody"}]},
        audioToText: {sid: b.misc.id, cid: b.misc.audioToText, params: [{type: "Property", name: "audioToText"}]},
        processImage: {
            sid: b.misc.id,
            cid: b.misc.processImage,
            params: [{type: "String", name: "url"}, {type: "PropertyArray", name: "imageOps", entity: "imageOp"}]
        }
    }, d = {
        "1_2": {service: "link", cmd: "heartbeat"},
        "6_2": {service: "misc", cmd: "getNosToken", response: [{type: "Property", name: "nosToken"}]},
        "6_5": {service: "misc", cmd: "audioToText", response: [{type: "String", name: "text"}]},
        "6_6": {service: "misc", cmd: "processImage", response: [{type: "String", name: "url"}]}
    };
    a.exports = {idMap: b, cmdConfig: c, packetConfig: d}
}, , , , , , , , , , , function (a, b, c) {
    function d() {
    }

    var e = c(48);
    d.typeMap = {text: 0, image: 1, audio: 2, video: 3, geo: 4, notification: 5, file: 6, tip: 10, custom: 100};
    var f = d.typeReverseMap = {
        0: "text",
        1: "image",
        2: "audio",
        3: "video",
        4: "geo",
        5: "notification",
        6: "file",
        10: "tip",
        100: "custom"
    };
    d.validTypes = Object.keys(d.typeMap), d.setFlow = function (a, b) {
        var c = b === a.from;
        c && b === a.to && (c = e.deviceId === a.fromDeviceId), a.flow = c ? "out" : "in"
    }, d.getType = function (a) {
        var b = a.type;
        return f[b] || b
    }, a.exports = d
}, , , , , , , , , , , , function (a, b, c) {
    "use strict";
    function d(a, b) {
        for (var c = 0; c < a.length; c++)b(a[c])
    }

    function e(a) {
        for (var b in a)if (a.hasOwnProperty(b))return !1;
        return !0
    }

    function f(a, b, c) {
        var d = a;
        return l(b) ? (c = b, "string" == typeof a && (d = {uri: a})) : d = n(b, {uri: a}), d.callback = c, d
    }

    function g(a, b, c) {
        return b = f(a, b, c), h(b)
    }

    function h(a) {
        function b() {
            4 === j.readyState && f()
        }

        function c() {
            var a = void 0;
            if (j.response ? a = j.response : "text" !== j.responseType && j.responseType || (a = j.responseText || j.responseXML), u)try {
                a = JSON.parse(a)
            } catch (b) {
            }
            return a
        }

        function d(a) {
            clearTimeout(o), a instanceof Error || (a = new Error("" + (a || "Unknown XMLHttpRequest Error"))), a.statusCode = 0, h(a, i)
        }

        function f() {
            if (!n) {
                var b;
                clearTimeout(o), b = a.useXDR && void 0 === j.status ? 200 : 1223 === j.status ? 204 : j.status;
                var d = i, e = null;
                0 !== b ? (d = {
                    body: c(),
                    statusCode: b,
                    method: q,
                    headers: {},
                    url: p,
                    rawRequest: j
                }, j.getAllResponseHeaders && (d.headers = m(j.getAllResponseHeaders()))) : e = new Error("Internal XMLHttpRequest Error"), h(e, d, d.body)
            }
        }

        var h = a.callback;
        if ("undefined" == typeof h)throw new Error("callback argument missing");
        h = k(h);
        var i = {body: void 0, headers: {}, statusCode: 0, method: q, url: p, rawRequest: j}, j = a.xhr || null;
        j || (j = a.cors || a.useXDR ? new g.XDomainRequest : new g.XMLHttpRequest);
        var l, n, o, p = j.url = a.uri || a.url, q = j.method = a.method || "GET", r = a.body || a.data || null, s = j.headers = a.headers || {}, t = !!a.sync, u = !1;
        if ("json"in a && (u = !0, s.accept || s.Accept || (s.Accept = "application/json"), "GET" !== q && "HEAD" !== q && (s["content-type"] || s["Content-Type"] || (s["Content-Type"] = "application/json"), r = JSON.stringify(a.json))), j.onreadystatechange = b, j.onload = f, j.onerror = d, j.onprogress = function () {
            }, j.ontimeout = d, j.open(q, p, !t, a.username, a.password), t || (j.withCredentials = !!a.withCredentials), !t && a.timeout > 0 && (o = setTimeout(function () {
                n = !0, j.abort("timeout");
                var a = new Error("XMLHttpRequest timeout");
                a.code = "ETIMEDOUT", d(a)
            }, a.timeout)), j.setRequestHeader)for (l in s)s.hasOwnProperty(l) && j.setRequestHeader(l, s[l]); else if (a.headers && !e(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");
        return "responseType"in a && (j.responseType = a.responseType), "beforeSend"in a && "function" == typeof a.beforeSend && a.beforeSend(j), j.send(r), j
    }

    function i() {
    }

    var j = c(78), k = c(79), l = c(80), m = c(81), n = c(84);
    a.exports = g, g.XMLHttpRequest = j.XMLHttpRequest || i, g.XDomainRequest = "withCredentials"in new g.XMLHttpRequest ? g.XMLHttpRequest : j.XDomainRequest, d(["get", "put", "post", "patch", "head", "delete"], function (a) {
        g["delete" === a ? "del" : a] = function (b, c, d) {
            return c = f(b, c, d), c.method = a.toUpperCase(), h(c)
        }
    })
}, function (a, b) {
    (function (b) {
        a.exports = "undefined" != typeof window ? window : "undefined" != typeof b ? b : "undefined" != typeof self ? self : {}
    }).call(b, function () {
        return this
    }())
}, function (a) {
    function b(a) {
        var b = !1;
        return function () {
            return b ? void 0 : (b = !0, a.apply(this, arguments))
        }
    }

    a.exports = b, b.proto = b(function () {
        Object.defineProperty(Function.prototype, "once", {
            value: function () {
                return b(this)
            }, configurable: !0
        })
    })
}, function (a) {
    function b(a) {
        var b = c.call(a);
        return "[object Function]" === b || "function" == typeof a && "[object RegExp]" !== b || "undefined" != typeof window && (a === window.setTimeout || a === window.alert || a === window.confirm || a === window.prompt)
    }

    a.exports = b;
    var c = Object.prototype.toString
}, function (a, b, c) {
    var d = c(82), e = c(83), f = function (a) {
        return "[object Array]" === Object.prototype.toString.call(a)
    };
    a.exports = function (a) {
        if (!a)return {};
        var b = {};
        return e(d(a).split("\n"), function (a) {
            var c = a.indexOf(":"), e = d(a.slice(0, c)).toLowerCase(), g = d(a.slice(c + 1));
            "undefined" == typeof b[e] ? b[e] = g : f(b[e]) ? b[e].push(g) : b[e] = [b[e], g]
        }), b
    }
}, function (a, b) {
    function c(a) {
        return a.replace(/^\s*|\s*$/g, "")
    }

    b = a.exports = c, b.left = function (a) {
        return a.replace(/^\s*/, "")
    }, b.right = function (a) {
        return a.replace(/\s*$/, "")
    }
}, function (a, b, c) {
    function d(a, b, c) {
        if (!h(b))throw new TypeError("iterator must be a function");
        arguments.length < 3 && (c = this), "[object Array]" === i.call(a) ? e(a, b, c) : "string" == typeof a ? f(a, b, c) : g(a, b, c)
    }

    function e(a, b, c) {
        for (var d = 0, e = a.length; e > d; d++)j.call(a, d) && b.call(c, a[d], d, a)
    }

    function f(a, b, c) {
        for (var d = 0, e = a.length; e > d; d++)b.call(c, a.charAt(d), d, a)
    }

    function g(a, b, c) {
        for (var d in a)j.call(a, d) && b.call(c, a[d], d, a)
    }

    var h = c(80);
    a.exports = d;
    var i = Object.prototype.toString, j = Object.prototype.hasOwnProperty
}, function (a) {
    function b() {
        for (var a = {}, b = 0; b < arguments.length; b++) {
            var c = arguments[b];
            for (var d in c)c.hasOwnProperty(d) && (a[d] = c[d])
        }
        return a
    }

    a.exports = b
}, function (a, b, c) {
    var d;
    !function (e, f) {
        "use strict";
        var g, h = e.IDBKeyRange || e.webkitIDBKeyRange, i = {
            readonly: "readonly",
            readwrite: "readwrite"
        }, j = Object.prototype.hasOwnProperty, k = function () {
            if (!g && (g = e.indexedDB || e.webkitIndexedDB || e.mozIndexedDB || e.oIndexedDB || e.msIndexedDB || (null === e.indexedDB && e.shimIndexedDB ? e.shimIndexedDB : f), !g))throw"IndexedDB required";
            return g
        }, l = function (a) {
            return a
        }, m = function (a) {
            return Object.prototype.toString.call(a).slice(8, -1).toLowerCase()
        }, n = function (a) {
            return "function" == typeof a
        }, o = function (a) {
            return "number" === m(a)
        }, p = function (a) {
            return "array" === m(a)
        }, q = function (a) {
            return a === f
        }, r = function (a, b) {
            var c = this, d = !1;
            this.name = b, this.getIndexedDB = function () {
                return a
            }, this.add = function (b) {
                if (d)throw"Database has been closed";
                for (var e = [], f = 0, g = 0; g < arguments.length - 1; g++)if (Array.isArray(arguments[g + 1]))for (var h = 0; h < arguments[g + 1].length; h++)e[f] = arguments[g + 1][h], f++; else e[f] = arguments[g + 1], f++;
                var j = a.transaction(b, i.readwrite), k = j.objectStore(b);
                return new Promise(function (a, b) {
                    e.forEach(function (a) {
                        var b;
                        if (a.item && a.key) {
                            var c = a.key;
                            a = a.item, b = k.add(a, c)
                        } else b = k.add(a);
                        b.onsuccess = function (b) {
                            var c = b.target, d = c.source.keyPath;
                            null === d && (d = "__id__"), Object.defineProperty(a, d, {value: c.result, enumerable: !0})
                        }
                    }), j.oncomplete = function () {
                        a(e, c)
                    }, j.onerror = function (a) {
                        a.preventDefault(), b(a)
                    }, j.onabort = function (a) {
                        b(a)
                    }
                })
            }, this.updateAndDelete = function (b, c, e) {
                if (d)throw"Database has been closed";
                var f = a.transaction(b, i.readwrite), g = f.objectStore(b), h = g.keyPath;
                return new Promise(function (a, b) {
                    c.forEach(function (a) {
                        if (a.item && a.key) {
                            var b = a.key;
                            a = a.item, g.put(a, b)
                        } else g.put(a)
                    }), e.forEach(function (a) {
                        g["delete"](a[h])
                    }), f.oncomplete = function () {
                        a([c, e])
                    }, f.onerror = function (a) {
                        b(a)
                    }
                })
            }, this.update = function (b) {
                if (d)throw"Database has been closed";
                for (var e, f = [], g = 1; g < arguments.length; g++)e = arguments[g], Array.isArray(e) ? f = f.concat(e) : f.push(e);
                var h = a.transaction(b, i.readwrite), j = h.objectStore(b);
                return j.keyPath, new Promise(function (a, b) {
                    f.forEach(function (a) {
                        var b;
                        if (a.item && a.key) {
                            var c = a.key;
                            a = a.item, b = j.put(a, c)
                        } else b = j.put(a);
                        b.onsuccess = function () {
                        }, b.onerror = function () {
                        }
                    }), h.oncomplete = function () {
                        a(f, c)
                    }, h.onerror = function (a) {
                        b(a)
                    }, h.onabort = function (a) {
                        b(a)
                    }
                })
            }, this.remove = function (b, c) {
                if (d)throw"Database has been closed";
                var e = a.transaction(b, i.readwrite), f = e.objectStore(b);
                return new Promise(function (a, b) {
                    Array.isArray(c) || (c = [c]), c.forEach(function (a) {
                        f["delete"](a)
                    }), e.oncomplete = function () {
                        a(c)
                    }, e.onerror = function (a) {
                        b(a)
                    }, e.onabort = function (a) {
                        b(a)
                    }
                })
            }, this.clear = function (b) {
                if (d)throw"Database has been closed";
                var c = a.transaction(b, i.readwrite), e = c.objectStore(b);
                return e.clear(), new Promise(function (a, b) {
                    c.oncomplete = function () {
                        a()
                    }, c.onerror = function (a) {
                        b(a)
                    }
                })
            }, this.close = function () {
                d || (a.close(), d = !0, delete v[b])
            }, this.get = function (b, c) {
                if (d)throw"Database has been closed";
                var e = a.transaction(b), f = e.objectStore(b), g = f.get(c);
                return new Promise(function (a, b) {
                    g.onsuccess = function (b) {
                        a(b.target.result)
                    }, e.onerror = function (a) {
                        b(a)
                    }
                })
            }, this.query = function (b, c) {
                if (d)throw"Database has been closed";
                return new s(b, a, c)
            }, this.count = function (b) {
                if (d)throw"Database has been closed";
                var c = a.transaction(b);
                c.objectStore(b)
            };
            for (var e = 0, f = a.objectStoreNames.length; f > e; e++)!function (a) {
                c[a] = {};
                for (var b in c)j.call(c, b) && "close" !== b && (c[a][b] = function (b) {
                    return function () {
                        var d = [a].concat([].slice.call(arguments, 0));
                        return c[b].apply(c, d)
                    }
                }(b))
            }(a.objectStoreNames[e])
        }, s = function (a, b, c) {
            var d = this, e = !1, g = !1, j = function (d, j, k, l, m, o, p) {
                return new Promise(function (q, r) {
                    var s = e || g ? i.readwrite : i.readonly, t = b.transaction(a, s), u = t.objectStore(a), v = c ? u.index(c) : u, w = d ? h[d].apply(null, j) : null, x = [], y = [w], z = 0;
                    m = m ? m : null, o = o ? o : [], "count" !== k && y.push(l || "next");
                    var A = e ? Object.keys(e) : !1, B = function (a) {
                        for (var b = 0; b < A.length; b++) {
                            var c = A[b], d = e[c];
                            d instanceof Function && (d = d(a)), a[c] = d
                        }
                        return a
                    };
                    v[k].apply(v, y).onsuccess = function (a) {
                        var b = a.target.result;
                        if ("number" == typeof b)x = b; else if (b)if (null !== m && m[0] > z)z = m[0], b.advance(m[0]); else if (null !== m && z >= m[0] + m[1]); else {
                            var c = !0, d = "value"in b ? b.value : b.key;
                            o.forEach(function (a) {
                                a && a.length && (2 === a.length ? c = c && d[a[0]] === a[1] : n(a[0]) && (c = c && a[0].apply(f, [d])))
                            }), c && (z++, x.push(p(d)), g ? b["delete"]() : e && (d = B(d), b.update(d))), b["continue"]()
                        }
                    }, t.oncomplete = function () {
                        q(x)
                    }, t.onerror = function (a) {
                        r(a)
                    }, t.onabort = function (a) {
                        r(a)
                    }
                })
            }, k = function (a, b) {
                var c = "next", d = "openCursor", f = [], h = null, i = l, k = !1, m = function () {
                    return j(a, b, d, k ? c + "unique" : c, h, f, i)
                }, r = function () {
                    return c = null, d = "count", {execute: m}
                }, s = function () {
                    return h = p(arguments[0]) ? arguments[0] : Array.prototype.slice.call(arguments, 0, 2), 1 == h.length && h.unshift(0), o(h[1]) || (h = null), {
                        execute: m,
                        count: r,
                        keys: t,
                        filter: u,
                        asc: v,
                        desc: w,
                        distinct: x,
                        modify: y,
                        limit: s,
                        map: z,
                        remove: A
                    }
                }, t = function (a) {
                    return a = q(a) ? !0 : !!a, a && (d = "openKeyCursor"), {
                        execute: m,
                        keys: t,
                        filter: u,
                        asc: v,
                        desc: w,
                        distinct: x,
                        modify: y,
                        limit: s,
                        map: z,
                        remove: A
                    }
                }, u = function () {
                    return f.push(Array.prototype.slice.call(arguments, 0, 2)), {
                        execute: m,
                        count: r,
                        keys: t,
                        filter: u,
                        asc: v,
                        desc: w,
                        distinct: x,
                        modify: y,
                        limit: s,
                        map: z,
                        remove: A
                    }
                }, v = function (a) {
                    return a = q(a) ? !0 : !!a, c = a ? "next" : "prev", {
                        execute: m,
                        count: r,
                        keys: t,
                        filter: u,
                        asc: v,
                        desc: w,
                        distinct: x,
                        modify: y,
                        limit: s,
                        map: z,
                        remove: A
                    }
                }, w = function (a) {
                    return a = q(a) ? !0 : !!a, c = a ? "prev" : "next", {
                        execute: m,
                        count: r,
                        keys: t,
                        filter: u,
                        asc: v,
                        desc: w,
                        distinct: x,
                        modify: y,
                        limit: s,
                        map: z,
                        remove: A
                    }
                }, x = function (a) {
                    return a = q(a) ? !0 : !!a, k = a, {
                        execute: m,
                        count: r,
                        keys: t,
                        filter: u,
                        asc: v,
                        desc: w,
                        distinct: x,
                        modify: y,
                        limit: s,
                        map: z,
                        remove: A
                    }
                }, y = function (a) {
                    return e = a, {
                        execute: m,
                        count: r,
                        keys: t,
                        filter: u,
                        asc: v,
                        desc: w,
                        distinct: x,
                        modify: y,
                        limit: s,
                        map: z,
                        remove: A
                    }
                }, z = function (a) {
                    return n(a) && (i = a), {
                        execute: m,
                        count: r,
                        keys: t,
                        filter: u,
                        asc: v,
                        desc: w,
                        distinct: x,
                        modify: y,
                        limit: s,
                        map: z,
                        remove: A
                    }
                }, A = function (a) {
                    return a = q(a) ? !0 : !!a, g = a, {
                        execute: m,
                        count: r,
                        keys: t,
                        filter: u,
                        asc: v,
                        desc: w,
                        distinct: x,
                        modify: y,
                        limit: s,
                        map: z,
                        remove: A
                    }
                };
                return {
                    execute: m,
                    count: r,
                    keys: t,
                    filter: u,
                    asc: v,
                    desc: w,
                    distinct: x,
                    modify: y,
                    limit: s,
                    map: z,
                    remove: A
                }
            };
            "only bound upperBound lowerBound".split(" ").forEach(function (a) {
                d[a] = function () {
                    return new k(a, arguments)
                }
            }), this.filter = function () {
                var a = new k(null, null);
                return a.filter.apply(a, arguments)
            }, this.all = function () {
                return this.filter()
            }
        }, t = function (a, b, c) {
            "function" == typeof b && (b = b());
            for (var d in b) {
                var e, f = b[d];
                e = !j.call(b, d) || c.objectStoreNames.contains(d) ? a.currentTarget.transaction.objectStore(d) : c.createObjectStore(d, f.key);
                for (var g in f.indexes) {
                    var h = f.indexes[g];
                    try {
                        e.index(g)
                    } catch (a) {
                        e.createIndex(g, h.key || g, Object.keys(h).length ? h : {unique: !1})
                    }
                }
            }
        }, u = function (a, b) {
            var c = a.target.result, d = new r(c, b);
            return v[b] = c, Promise.resolve(d)
        }, v = {}, w = {
            version: "0.10.2", open: function (a) {
                var b;
                return new Promise(function (c, d) {
                    if (v[a.server])u({target: {result: v[a.server]}}, a.server, a.version, a.schema).then(c, d); else {
                        try {
                            b = k().open(a.server, a.version)
                        } catch (e) {
                            d(e)
                        }
                        b.onsuccess = function (b) {
                            u(b, a.server, a.version, a.schema).then(c, d)
                        }, b.onupgradeneeded = function (b) {
                            t(b, a.schema, b.target.result)
                        }, b.onerror = function (a) {
                            d(a)
                        }
                    }
                })
            }, remove: function (a) {
                return new Promise(function (b, c) {
                    if (!a)return b();
                    typeof a === r && (a = a.name);
                    var d;
                    "string" == typeof a && (d = v[a]), d && "function" == typeof d.close && d.close();
                    var e;
                    try {
                        e = k().deleteDatabase(a)
                    } catch (f) {
                        c(f)
                    }
                    e.onsuccess = function () {
                        delete v[a], b(a)
                    }, e.onerror = function (a) {
                        c(a)
                    }, e.onblocked = function (a) {
                        c(a)
                    }
                })
            }
        };
        "undefined" != typeof a && "undefined" != typeof a.exports ? a.exports = w : (d = function () {
            return w
        }.call(b, c, b, a), !(d !== f && (a.exports = d)))
    }(window)
}, function (a) {
    var b = {};
    b.set = function (a, c, d) {
        b[a] = c, d && (d.support = c)
    }, a.exports = b
}]), !function (a, b) {
    "object" == typeof exports && "object" == typeof module ? module.exports = b() : "function" == typeof define && define.amd ? define([], b) : "object" == typeof exports ? exports.NIM = b() : a.NIM = b()
}(this, function () {
    return webpackJsonp_NIM_Web_SDK_v2_1_0([1], [function (a, b, c) {
        c(1), c(2), c(3).polyfill();
        var d = c(87);
        d.platform = c(25), d.xhr = c(77), d.io = c(45), d.naturalSort = c(11), d.deepAccess = c(12), d.db = c(85), d.util = c(10), d.support = c(86), d.blob = c(39), a.exports = d
    }, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (a, b, c) {
        function d(a) {
            var b = this;
            return a.Protocol = f, a.Message = h, a.constructor = d, b.init(a)
        }

        var e = c(9), f = c(88), g = c(28), h = c(122);
        d.name = "NIM", d.setDebug = e.setDebug, d.getInstance = e.getInstance, d.genInstanceName = function (a) {
            return d.name + "-" + a.account
        };
        var i = d.fn = d.prototype = Object.create(e.prototype);
        d.info = i.info = g.info, a.exports = d, c(133), c(134), c(135), c(136), c(137), c(138), c(139), c(140), c(141), c(142), c(143), c(144), c(145)
    }, function (a, b, c) {
        function d(a) {
            var b = this;
            i.verifyOptions(a, "appKey account token"), i.verifyCallback(a, "onconnect onerror onwillreconnect ondisconnect onloginportschange onmyinfo onblacklist onmutelist onfriends onusers onteams onsessions onroamingmsgs onofflinemsgs onofflinefiltermsgs onofflinesysmsgs onsysmsgunread onofflinecustomsysmsgs onsyncdone onteammembers onsyncteammembersdone onmsg onsysmsg oncustomsysmsg onupdatemyinfo onupdateuser onupdateteammember onupdatesession onupdatesysmsgunread onupdatesysmsg onsynccreateteam onsyncmarkinblacklist onsyncmarkinmutelist  onsyncfriendaction"),
                b.db = a.api.db = new e, b.name = "IMProtocol-" + a.account, f.call(b, a)
        }

        var e = c(89), f = c(42), g = c(14), h = c(28), i = c(10), j = i.notundef, k = c(52), l = c(100), m = c(101), n = c(102), o = k.getInstance({
            type: "IM",
            configMap: l,
            serializeMap: m,
            unserializeMap: n
        }), p = d.fn = d.prototype = Object.create(f.prototype);
        p.reset = function () {
            var a = this, b = a.options;
            a.db.reset(b.db), j(b.lbsUrl) && (h.lbsUrl = b.lbsUrl), a.socketUrls = [], a.parser = o, a.syncing = !0, a.hasSynced = !1, a.hasSyncedTeamMembers = !1, a.syncPromiseArray = [], a.syncResult = {}, a.syncTeamMembersPromiseArray = [], a.syncTeamMembersResult = {}, a.timetags = {}, a.sysMsgUnread = {}, a.resetUnsettledMsgs(), a.resetUnsettledSysMsgs(), a.msgPromise = Promise.resolve(), a.sysMsgPromise = Promise.resolve(), a.sessionSet = {}, a.msgReceiptTasks = {}, a.userSet = {}, a.resetAutoMarkRead()
        }, p.resetUnsettledMsgs = function () {
            var a = this;
            a.unhandledMsgs = [], a.unupdatedMsgs = []
        }, p.resetUnsettledSysMsgs = function () {
            var a = this;
            a.unhandledSysMsgs = [], a.unupdatedSysMsgs = []
        }, p.resetAutoMarkRead = function () {
            var a = this.options;
            i.verifyBooleanWithDefault(a, "autoMarkRead", !0)
        }, p.packetFromSync = function (a) {
            return !a.obj || !!a.obj.sync
        }, p.onDBError = function (a) {
            var b = g.newDBError();
            b.event = a, this.notifyError(b)
        }, a.exports = d, c(103), c(104), c(105), c(107), c(110), c(112), c(114), c(115), c(116), c(117), c(119), c(120), c(121)
    }, function (a, b, c) {
        function d(a) {
            q = a, k.set("db", a, h)
        }

        function e() {
        }

        var f = c(25), g = c(12), h = c(85), i = c(10), j = c(24), k = c(86), l = c(14), m = l.newSupportDBError, n = l.noDBError, o = c(90), p = "nim-", q = !1;
        if (d(!!window.indexedDB), "Safari" === f.name) {
            var r = parseInt(f.version.split(".")[0], 10);
            9 > r && d(!1)
        }
        var s = e.fn = e.prototype;
        s.reset = i.emptyFunc, q && (s.reset = function (a) {
            this.enable = a !== !1
        }), s.init = function (a) {
            var b = this;
            return b.enable ? b.server ? Promise.resolve() : (b.name = p + a, h.open({
                server: b.name,
                version: o.version,
                schema: o.schema
            }).then(function (a) {
                j.warn("init db", b.name), b.server = a
            }, function (a) {
                throw d(!1), b.server = null, b.name = null, a
            })) : Promise.reject(m())
        }, s.destroy = function () {
            var a = this;
            return a.enable ? a.server ? h.remove(a.name).then(function () {
                j.warn("delete db", a.name), a.server = null, a.name = null
            }) : Promise.resolve() : Promise.reject(m())
        }, s.clear = function () {
            var a = this;
            return a.enable ? a.server ? a.server.clear("timetag").then(function () {
                var b = [].slice.call(a.server.getIndexedDB().objectStoreNames), c = [];
                return b.forEach(function (b) {
                    c.push(a.server.clear(b))
                }), c.length ? Promise.all(c).then(function () {
                    j.warn("clear db", a.name)
                }) : void 0
            }) : Promise.resolve() : Promise.reject(m())
        }, s.close = function () {
            var a = this;
            a.server && (a.server.close(), a.server = null, a.name = null)
        }, s.remove = function (a, b) {
            var c = this;
            return c.enable ? c.server ? (i.isArray(b) || (b = [b]), c.server.remove(a, b).then(function () {
                j.warn("delete", a, 1 === b.length ? b[0] : b)
            })) : Promise.reject(n()) : Promise.reject(m())
        }, s.put = function (a, b) {
            var c = this;
            return c.enable ? c.server ? (i.isArray(b) || (b = [b]), c.server.update(a, b).then(function (b) {
                var c = ["put", a], d = o.schema[a].key.keyPath, e = [];
                return d && (b.forEach(function (a) {
                    e.push(g(a, d))
                }), c.push(1 === e.length ? e[0] : e)), c.push(1 === b.length ? b[0] : b), j.warn.apply(j.warn, c), b
            })) : Promise.reject(n()) : Promise.reject(m())
        }, s.modifyOrPut = function (a) {
            var b = this, c = a.table, d = i.copy(a.obj), e = a.key, f = a.modifyObjWhenPut, g = i.copy(d);
            return delete g[e], b.getOne(c, null, d[e], {modifyObj: g}).then(function (a) {
                return a ? (j.warn("update " + c, d), a) : (d = i.merge(d, f), b.put(c, d).then(function (a) {
                    return a[0]
                }))
            })
        }, s.updateAndDelete = function (a, b, c) {
            var d = this;
            return d.enable ? d.server ? d.server.updateAndDelete(a, b, c) : Promise.reject(n()) : Promise.reject(m())
        }, s.get = function (a, b) {
            var c = this;
            return c.enable ? c.server ? c.server.get(a, b) : Promise.reject(n()) : Promise.reject(m())
        }, s.getAll = function (a, b) {
            var c = this;
            return c.enable ? c.server ? (b = b || {}, b.keys = b.keys === !0, b.desc = b.desc === !0, b.distinct = b.distinct === !0, c.server.query(a, b.index).filter(b.filter).keys(b.keys).desc(b.desc).limit(b.limit).distinct(b.distinct).map(b.mapper).modify(b.modifyObj).execute()) : Promise.reject(n()) : Promise.reject(m())
        }, s.getOnly = function (a, b, c, d) {
            var e = this;
            if (!e.enable)throw m();
            if (!e.server)throw n();
            return d = d || {}, d.keys = d.keys === !0, d.desc = d.desc === !0, d.distinct = d.distinct === !0, d.remove = d.remove === !0, e.server.query(a, b).only(c).filter(d.filter).keys(d.keys).desc(d.desc).limit(d.limit).distinct(d.distinct).map(d.mapper).modify(d.modifyObj).remove(d.remove).execute()
        }, s.getOne = function () {
            var a = this;
            return a.getOnly.apply(a, arguments).then(function (a) {
                return a[0]
            })
        }, s.clearTable = function (a) {
            var b = this;
            if (!b.enable)throw m();
            if (!b.server)throw n();
            return b.server.clear(a)
        }, a.exports = e, c(91), c(92), c(93), c(94), c(96), c(97), c(98), c(99)
    }, function (a) {
        var b = {version: 1}, c = {
            timetag: {key: {keyPath: "name"}},
            blacklist: {key: {keyPath: "account"}},
            mutelist: {key: {keyPath: "account"}},
            friend: {key: {keyPath: "account"}},
            user: {key: {keyPath: "account"}},
            team: {key: {keyPath: "teamId"}},
            teamMember: {key: {keyPath: "id"}, indexes: {teamId: {unique: !1}}},
            msg: {
                key: {autoIncrement: !0},
                indexes: {idClient: {unique: !0}, sessionId: {unique: !1}, sessionType: {unique: !1}}
            },
            sysMsg: {
                key: {autoIncrement: !0},
                indexes: {idServer: {unique: !0}, category: {unique: !1}, type: {unique: !1}}
            },
            sysMsgUnread: {key: {keyPath: "type"}},
            session: {key: {keyPath: "id"}, indexes: {updateTime: {unique: !1}}}
        };
        b.schema = c, b.keyPath = function (a) {
            return b.schema[a].key.keyPath
        }, a.exports = b
    }, function (a, b, c) {
        var d = c(89).fn;
        d.getTimetags = function (a) {
            var b = {}, c = function (a) {
                return b[a.name] = a.value, a
            };
            return this.getAll("timetag", {filter: a, mapper: c}).then(function () {
                return b
            })
        }, d.getTeamMemberTimetags = function () {
            return this.getTimetags(function (a) {
                return -1 !== a.name.indexOf("team-")
            })
        }, d.getTimetag = function (a) {
            return this.getOne("timetag", null, a).then(function (a) {
                return a = a || {value: 0}, a.value
            })
        }, d.getTeamMemberTimetag = function (a) {
            return this.getTimetag("team-" + a)
        }, d.updateTimetag = function (a, b) {
            var c = {name: a, value: b};
            return this.put("timetag", c)
        }, d.updateMyInfoTimetag = function (a) {
            return this.updateTimetag("myInfo", a)
        }, d.updateRelationTimetag = function (a) {
            return this.updateTimetag("relations", a)
        }, d.getRelationsTimetag = function () {
            return this.getTimetag("relations")
        }, d.updateFriendTimetag = function (a) {
            return this.updateTimetag("friends", a)
        }, d.getFriendsTimetag = function () {
            return this.getTimetag("friends")
        }, d.updateFriendUserTimetag = function (a) {
            return this.updateTimetag("friendUsers", a)
        }, d.updateTeamTimetag = function (a) {
            return this.updateTimetag("teams", a)
        }, d.getTeamsTimetag = function () {
            return this.getTimetag("teams")
        }, d.updateTeamMemberTimetag = function (a, b) {
            return this.updateTimetag("team-" + a, b)
        }, d.getTeamMembersTimetag = function (a) {
            return this.getTimetag("team-" + a)
        }, d.updateRoamingMsgTimetag = function (a) {
            return this.updateTimetag("roamingMsgs", a)
        }, d.updateMsgReceiptsTimetag = function (a) {
            return this.updateTimetag("msgReceipts", a)
        }, d.deleteTimetag = function (a) {
            return this.remove("timetag", a)
        }, d.deleteTeamMemberTimetag = function (a) {
            return this.deleteTimetag("team-" + a)
        }
    }, function (a, b, c) {
        var d = c(89).fn, e = c(10), f = c(24), g = "blacklist", h = "mutelist";
        d.mergeRelations = function (a, b, c, d, e) {
            var i = this, j = i.updateAndDelete(g, a, b), k = i.updateAndDelete(h, c, d);
            return Promise.all([j, k]).then(function () {
                return f.warn("merge relations"), i.updateRelationTimetag(e), [a, b, c, d, e]
            })
        }, d.getRelations = function () {
            var a = this, b = a.getAll(g), c = a.getAll(h);
            return Promise.all([b, c])
        }, d.markInBlacklist = function (a) {
            var b = this;
            if (a = e.copy(a), a.isAdd) {
                var c = a.record;
                return b.put(g, c)
            }
            var d = a.account;
            return b.remove(g, d)
        }, d.markInMutelist = function (a) {
            var b = this;
            if (a = e.copy(a), a.isAdd) {
                var c = a.record;
                return b.put(h, c)
            }
            var d = a.account;
            return b.remove(h, d)
        }
    }, function (a, b, c) {
        var d = c(89).fn, e = c(10), f = c(24), g = "friend";
        d.mergeFriends = function (a, b, c) {
            var d = this;
            return d.updateAndDelete(g, a, b).then(function () {
                return f.warn("merge friends"), c && d.updateFriendTimetag(c), [a, b, c]
            })
        }, d.putFriend = function (a) {
            return this.put(g, a)
        }, d.updateFriend = function (a) {
            a = e.copy(a);
            var b = a.account;
            return this.getOne(g, null, b, {modifyObj: a}).then(function (c) {
                return c ? f.warn("update friend", b, a) : f.warn("update friend no", b), c
            })
        }, d.deleteFriend = function (a) {
            var b = this, c = b.remove(g, a), d = b.deleteUser(a);
            return Promise.all([c, d])
        }, d.getFriends = function () {
            var a = function (a) {
                return a.valid
            };
            return this.getAll(g, {filter: a})
        }, d.getFriend = function (a) {
            return this.getOne(g, null, a)
        }
    }, function (a, b, c) {
        function d(a) {
            return a.valid && a.validToCurrentUser
        }

        var e = c(89).fn, f = c(10), g = c(24), h = c(14), i = c(95), j = "team", k = "teamId", l = "teamMember";
        e.mergeTeams = function (a, b, c) {
            var d = this, e = d.put(j, a), f = d.leaveTeams(b, c);
            return Promise.all([e, f]).then(function () {
                return g.warn("merge teams"), d.updateTeamTimetag(c), [a, b, c]
            })
        }, e.putTeam = function (a) {
            return a.validToCurrentUser = !0, this.put(j, a)
        }, e.updateTeam = function (a) {
            var b = this;
            a = f.copy(a);
            var c = a.teamId;
            return b.getOne(j, null, c, {modifyObj: a}).then(function (d) {
                return d ? (g.warn("update team", c, a), d) : (g.warn("update team no", c), b.putTeam(a))
            })
        }, e.transferTeam = function (a, b, c) {
            var d = this, e = a.teamId, f = a.memberUpdateTime, h = {
                teamId: e,
                account: b,
                type: "normal",
                updateTime: f
            }, i = {teamId: e, account: c, type: "owner", updateTime: f};
            return d.updateTeamMembers([h, i]).then(function () {
                return d.putTeam(a).then(function () {
                    return g.warn("transfer team", a.teamId, b, c), [a, b, c]
                })
            })
        }, e.leaveTeam = function (a) {
            var b = this;
            return b.updateTeam({teamId: a, validToCurrentUser: !1}).then(function () {
                return b.removeAllTeamMembers(a)
            })
        }, e.dismissTeam = function (a, b) {
            var c = this, d = {teamId: a, valid: !1, validToCurrentUser: !1, updateTime: b};
            return c.updateTeam(d).then(function () {
                return c.removeAllTeamMembers(a)
            })
        }, e.leaveTeams = function (a, b) {
            var c, d = this, e = [];
            return a.forEach(function (a) {
                c = d.leaveTeam(a.teamId, b), e.push(c)
            }), Promise.all(e)
        }, e.getTeams = function () {
            return this.getAll(j, {filter: d})
        }, e.getTeam = function (a) {
            return a = "" + a, this.getOne(j, null, a)
        }, e.getTeamsByTeamIds = function (a) {
            var b, c = this, d = [];
            return a.forEach(function (a) {
                b = c.getTeam(a), d.push(b)
            }), Promise.all(d)
        }, e.mergeTeamMembers = function (a, b, c, d) {
            var e = this, f = e.putTeamMembers(b), h = e.updateTeamMembers(c);
            return Promise.all([f, h]).then(function () {
                return g.warn("merge members", a), e.updateTeamMemberTimetag(a, d)
            })
        }, e.putTeamMembers = function (a) {
            return this.put(l, a)
        }, e.getTeamMembers = function (a) {
            a = "" + a;
            var b = function (a) {
                return a.valid
            };
            return this.getOnly(l, k, a, {filter: b})
        }, e.getInvalidTeamMembers = function (a, b) {
            var c = this;
            a = "" + a;
            var d, e = [];
            return b.forEach(function (b) {
                d = c.getOne(l, null, i.genId(a, b)), e.push(d)
            }), Promise.all(e)
        }, e.updateTeamMember = function (a) {
            var b = a.teamId, c = a.account, d = i.genId(b, c), e = f.filterObj(a, "nickInTeam muteTeam updateTime type valid");
            return this.getOne(l, null, d, {modifyObj: e}).then(function (a) {
                return a ? g.warn("update member", b, c, e) : g.warn("update member no", b, c), a
            })
        }, e.updateTeamMembers = function (a) {
            var b = this;
            if (!a.length)return Promise.resolve();
            var c, d = [];
            return a.forEach(function (a) {
                c = b.updateTeamMember(a).then(function () {
                }), d.push(c)
            }), Promise.all(d)
        }, e.updateTeamManagers = function (a, b, c, d) {
            var e = b.map(function (b) {
                return {teamId: a, account: b, type: c ? "manager" : "normal", updateTime: d}
            });
            return this.updateTeamMembers(e)
        }, e.removeTeamMembersByAccounts = function (a, b) {
            var c = b.map(function (b) {
                return {teamId: a, account: b, valid: !1}
            });
            return this.updateTeamMembers(c)
        }, e.removeAllTeamMembers = function (a) {
            var b = this, c = {valid: !1};
            return b.getOnly(l, k, a, {modifyObj: c}).then(function () {
                return g.warn("invalid all teamMembers", a), b.deleteTeamMemberTimetag(a)
            })
        }, e.deleteTeamMembers = function (a) {
            var b = this;
            return b.getOnly(l, k, a, {remove: !0}).then(function () {
                g.warn("delete all teamMembers", a), b.deleteTeamMemberTimetag(a)
            })
        }, e.deleteTeam = function (a) {
            var b, c = this, e = [];
            return f.isArray(a) || (a = [a]), a.forEach(function (a) {
                a = "" + a, b = c.get(j, a).then(function (b) {
                    if (b && d(b))throw h.stillInTeamError();
                    var e = c.remove(j, a), f = c.deleteTeamMembers(a);
                    return Promise.all([e, f])
                }), e.push(b)
            }), 1 === e.length ? e[0] : Promise.all(e)
        }
    }, function (a, b, c) {
        function d(a) {
            e.verifyOptions(a, "teamId"), e.verifyParamAtLeastPresentOne(a, "nickInTeam muteTeam"), this.teamId = a.teamId, f(a.account) && (this.account = a.account), f(a.nickInTeam) && (this.nickInTeam = a.nickInTeam), f(a.muteTeam) && (this.bits = 0, a.muteTeam && (this.bits += 1))
        }

        var e = c(10), f = e.notundef, g = {0: "normal", 1: "owner", 2: "manager"};
        d.reverse = function (a) {
            var b = e.copy(a);
            if (f(b.teamId) && (b.teamId = "" + b.teamId), f(b.type) && (b.type = g[b.type]), f(b.active) && (b.active = 1 === +b.active), f(b.valid) && (b.valid = 1 === +b.valid), f(b.joinTime) && (b.joinTime = +b.joinTime), f(b.updateTime) && (b.updateTime = +b.updateTime), f(b.bits)) {
                var c = b.bits;
                delete b.bits, b.muteTeam = !!(1 & c)
            }
            return f(b.teamId) && f(b.account) && (b.id = d.genId(b.teamId, b.account)), b
        }, d.genId = function (a, b) {
            return a + "-" + b
        }, d.accounts2ids = function (a, b) {
            return b.map(function (b) {
                return d.genId(a, b)
            })
        }, d.assembleMembers = function (a, b) {
            return e.isArray(b) || (b = [b]), b.map(function (b) {
                return d.assembleMember(a, b)
            })
        }, d.assembleMember = function (a, b) {
            return {
                account: b,
                active: !0,
                id: d.genId(a.teamId, b),
                joinTime: a.memberUpdateTime,
                muteTeam: !1,
                nickInTeam: "",
                teamId: a.teamId,
                type: "normal",
                updateTime: a.memberUpdateTime,
                valid: !0
            }
        }, d.assembleOwner = function (a) {
            var b = d.assembleMember(a, a.owner);
            return b.type = "owner", b
        }, a.exports = d
    }, function (a, b, c) {
        var d = c(89).fn, e = c(24), f = c(10), g = "user";
        d.mergeMyInfo = function (a, b) {
            var c = this;
            return c.put(g, a).then(function () {
                return b ? c.updateMyInfoTimetag(a.updateTime) : a
            })
        }, d.mergeFriendUsers = function (a, b) {
            var c = this;
            return c.putUsers(a).then(function () {
                c.updateFriendUserTimetag(b)
            })
        }, d.putUsers = function (a) {
            return this.put(g, a)
        }, d.putUser = function (a) {
            return this.put(g, a)
        }, d.updateUser = function (a) {
            a = f.copy(a);
            var b = a.account;
            return this.getOne(g, null, b, {modifyObj: a}).then(function (c) {
                return c ? e.warn("update user", b, a) : e.warn("update user no", b), c
            })
        }, d.updateUsersIfIsFriend = function (a) {
            var b, c = this, d = [], e = [];
            return a.forEach(function (a) {
                b = c.getFriend(a.account).then(function (d) {
                    return d && (b = c.putUser(a), e.push(b)), d
                }), d.push(b)
            }), Promise.all(d).then(function () {
                return Promise.all(e).then(function (a) {
                    return a
                })
            })
        }, d.deleteUser = function (a) {
            return this.remove(g, a)
        }, d.getUser = function (a) {
            return this.getOne(g, null, a)
        }, d.getUsers = function (a) {
            function b(b) {
                return -1 !== a.indexOf(b.account)
            }

            return this.getAll(g, {filter: b})
        }, d.getAllUsers = function () {
            return this.getAll(g)
        }
    }, function (a, b, c) {
        var d = c(89).fn, e = c(10), f = e.notundef, g = c(24), h = "session", i = "msg", j = "idClient", k = "sessionId", l = "sessionType";
        d.putMsg = function (a) {
            var b = this;
            return new Promise(function (c) {
                function d() {
                    g--, 0 === g && c(f)
                }

                if (e.isArray(a) || (a = [a]), !a[0].filter) {
                    var f = [], g = a.length;
                    a.forEach(function (a) {
                        a = e.copy(a), a.sessionType = a.sessionId + "-" + a.type, b.put(i, a).then(function (a) {
                            f.push(a[0]), d()
                        }, d)
                    })
                }
            })
        }, d.updateMsg = function (a) {
            var b = this;
            if (!a.filter) {
                var c = a.idClient, d = e.filterObj(a, "resend status idServer time localCustom");
                return b.getOne(i, j, c, {modifyObj: d}).then(function (a) {
                    return a ? g.warn("update msg", c, d) : g.warn("udpate msg no", c), a
                })
            }
        }, d.getMsgsBySessionId = function (a) {
            var b = this;
            a = a || {};
            var c = !a.reverse, d = a.limit || 100, e = k, g = a.sessionId, h = a.type, j = a.keyword;
            f(j) && (h = "text"), f(h) && (e = l, g = g + "-" + h);
            var m, n = a.lastMsgIdClient, o = !1;
            return (f(n) || f(j)) && (m = function (a) {
                function b() {
                    return f(j) ? -1 !== a.text.indexOf(j) : !0
                }

                return f(n) ? o ? b() : (a.idClient === n && (o = !0), !1) : b()
            }), b.getOnly(i, e, g, {filter: m, desc: c, limit: d, mapper: b.pruneMsg})
        }, d.pruneMsg = function (a) {
            return a ? (delete a.sessionTime, delete a.sessionType, a) : null
        }, d.getMsgByIdClient = function (a) {
            var b = this;
            return b.getOne(i, j, a).then(function (a) {
                return b.pruneMsg(a)
            })
        }, d.getMsgsByIdClients = function (a) {
            var b, c = this, d = [];
            return a.forEach(function (a) {
                b = c.getMsgByIdClient(a), d.push(b)
            }), Promise.all(d)
        }, d.deleteMsg = function (a) {
            var b, c = this, d = [];
            return e.isArray(a) || (a = [a]), a.forEach(function (a) {
                b = c.getOne(i, j, a, {remove: !0}), d.push(b)
            }), 1 === d.length ? d[0] : Promise.all(d)
        }, d.deleteMsgsBySessionId = function (a) {
            var b = this;
            return b.getOnly(i, k, a, {remove: !0})
        }, d.deleteAllMsgs = function () {
            var a = this, b = a.clearTable(i), c = a.clearTable(h);
            return Promise.all([b, c])
        }
    }, function (a, b, c) {
        var d = c(89).fn, e = c(10), f = e.notundef, g = c(24), h = "sysMsg", i = "idServer", j = "type", k = "category", l = "sysMsgUnread";
        d.putSysMsg = function (a) {
            var b = this;
            return new Promise(function (c) {
                function d() {
                    g--, 0 === g && c(f)
                }

                if (e.isArray(a) || (a = [a]), !a[0].filter) {
                    var f = [], g = a.length;
                    a.forEach(function (a) {
                        a = e.copy(a), b.put(h, a).then(function (a) {
                            f.push(a[0]), d()
                        }, d)
                    })
                }
            })
        }, d.getSysMsgs = function (a) {
            var b = this;
            a = a || {};
            var c = !a.reverse, d = a.limit || 100, e = null, g = null;
            a.category && (e = k, g = a.category), a.type && (e = j, g = a.type);
            var i, l = a.lastIdServer, m = !1;
            return f(l) && (l = "" + l, i = function (a) {
                return m ? !0 : (a.idServer === l && (m = !0), !1)
            }), a = {filter: i, desc: c, limit: d}, e ? b.getOnly(h, e, g, a) : b.getAll(h, a)
        }, d.updateSysMsg = function (a) {
            if (!a.filter) {
                var b = "" + a.idServer, c = e.filterObj(a, "read state error localCustom");
                return this.getOne(h, i, b, {modifyObj: c}).then(function (a) {
                    return a ? g.warn("update sysMsg", b, c) : g.warn("update sysMsg no", b), a
                })
            }
        }, d.markSysMsgRead = function (a) {
            var b, c = this, d = [];
            return e.isArray(a) || (a = [a]), a.forEach(function (a) {
                b = c.updateSysMsg({idServer: a.idServer, read: !0}), d.push(b)
            }), 1 === d.length ? d[0] : Promise.all(d)
        }, d.deleteSysMsg = function (a) {
            var b, c = this, d = [];
            return e.isArray(a) || (a = [a]), a.forEach(function (a) {
                a = "" + a, b = c.getOne(h, i, a, {remove: !0}), d.push(b)
            }), 1 === d.length ? d[0] : Promise.all(d)
        }, d.deleteAllSysMsgs = function () {
            var a = this, b = a.clearTable(h), c = a.clearTable(l);
            return Promise.all([b, c])
        }, d.getSysMsgUnread = function () {
            return this.getAll(l).then(function (a) {
                var b = {};
                return a.forEach(function (a) {
                    b[a.type] = a.num
                }), b
            })
        }, d.updateSysMsgUnread = function (a) {
            a = e.copy(a);
            var b = [];
            return Object.keys(a).forEach(function (c) {
                b.push({type: c, num: a[c]})
            }), this.put(l, b).then(function () {
                return g.warn("update sysMsg unread", a), a
            })
        }
    }, function (a, b, c) {
        var d = c(89).fn, e = c(10), f = e.notundef, g = c(24), h = "session", i = "updateTime";
        d.putSession = function (a) {
            return this.modifyOrPut({table: h, obj: a, key: "id", modifyObjWhenPut: {unread: 0}})
        }, d.getSessions = function (a) {
            a = a || {};
            var b, c = !a.reverse, d = a.limit || 100, e = a.lastSessionId, g = !1;
            return f(e) && (b = function (a) {
                return g ? !0 : (a.id === e && (g = !0), !1)
            }), this.getAll(h, {index: i, desc: c, limit: d, filter: b})
        }, d.getSession = function (a) {
            return this.get(h, a)
        }, d.updateSession = function (a) {
            var b = a.id, c = e.filterObj(a, "unread lastMsg localCustom");
            return Object.keys(a).forEach(function (b) {
                0 === b.indexOf("last") && (c[b] = a[b])
            }), this.getOne(h, null, b, {modifyObj: c}).then(function (a) {
                return a ? g.warn("update session", b, c) : g.warn("update session no", b), a
            })
        }, d.resetSessionUnread = function (a) {
            return this.updateSession({id: a, unread: 0})
        }, d.deleteSession = function (a) {
            return this.remove(h, a)
        }
    }, function (a, b, c) {
        var d = c(10), e = c(54), f = d.merge({}, e.idMap, {
            auth: {
                id: 2,
                login: 3,
                kicked: 5,
                logout: 6,
                multiPortLogin: 7,
                kick: 8
            },
            user: {
                id: 3,
                markInBlacklist: 3,
                getBlacklist: 4,
                markInMutelist: 5,
                getMutelist: 6,
                getRelations: 8,
                getUsers: 7,
                updateMyInfo: 10,
                syncMyInfo: 109,
                syncUpdateMyInfo: 110
            },
            notify: {
                id: 4,
                markRead: 3,
                syncOfflineMsgs: 4,
                batchMarkRead: 5,
                syncOfflineSysMsgs: 6,
                syncRoamingMsgs: 9,
                syncMsgReceipts: 12
            },
            sync: {id: 5, sync: 1, syncTeamMembers: 2},
            msg: {
                id: 7,
                sendMsg: 1,
                msg: 2,
                sysMsg: 3,
                getHistoryMsgs: 6,
                sendCustomSysMsg: 7,
                searchHistoryMsgs: 8,
                deleteSessions: 9,
                sendMsgReceipt: 11,
                msgReceipt: 12,
                getSessions: 10,
                syncSendMsg: 101
            },
            team: {
                id: 8,
                createTeam: 1,
                sendTeamMsg: 2,
                teamMsg: 3,
                teamMsgs: 4,
                addTeamMembers: 5,
                removeTeamMembers: 6,
                updateTeam: 7,
                leaveTeam: 8,
                getTeam: 9,
                getTeams: 10,
                getTeamMembers: 11,
                dismissTeam: 12,
                applyTeam: 13,
                passTeamApply: 14,
                rejectTeamApply: 15,
                addTeamManagers: 16,
                removeTeamManagers: 17,
                transferTeam: 18,
                updateInfoInTeam: 19,
                updateNickInTeam: 20,
                acceptTeamInvite: 21,
                rejectTeamInvite: 22,
                getTeamHistoryMsgs: 23,
                searchTeamHistoryMsgs: 24,
                syncTeams: 109,
                syncTeamMembers: 111,
                syncCreateTeam: 101,
                syncSendTeamMsg: 102,
                syncUpdateTeamMember: 119
            },
            friend: {
                id: 12,
                friendRequest: 1,
                syncFriendRequest: 101,
                deleteFriend: 2,
                syncDeleteFriend: 102,
                updateFriend: 3,
                syncUpdateFriend: 103,
                getFriends: 4
            },
            chatroom: {id: 13, getChatroomAddress: 1},
            filter: {id: 101, sendFilterMsg: 1, filterMsg: 2, filterSysMsg: 3, sendFilterCustomSysMsg: 7}
        }), g = d.merge({}, e.cmdConfig, {
            login: {
                sid: f.auth.id,
                cid: f.auth.login,
                params: [{type: "Property", name: "login"}]
            },
            logout: {sid: f.auth.id, cid: f.auth.logout},
            kick: {sid: f.auth.id, cid: f.auth.kick, params: [{type: "StrArray", name: "deviceIds"}]},
            markInBlacklist: {
                sid: f.user.id,
                cid: f.user.markInBlacklist,
                params: [{type: "String", name: "account"}, {type: "bool", name: "isAdd"}]
            },
            getBlacklist: {sid: f.user.id, cid: f.user.getBlacklist, params: [{type: "long", name: "time"}]},
            markInMutelist: {
                sid: f.user.id,
                cid: f.user.markInMutelist,
                params: [{type: "String", name: "account"}, {type: "bool", name: "isAdd"}]
            },
            getMutelist: {sid: f.user.id, cid: f.user.getMutelist, params: [{type: "long", name: "time"}]},
            getRelations: {sid: f.user.id, cid: f.user.getRelations, params: [{type: "long", name: "timetag"}]},
            getUsers: {sid: f.user.id, cid: f.user.getUsers, params: [{type: "StrArray", name: "accounts"}]},
            updateMyInfo: {sid: f.user.id, cid: f.user.updateMyInfo, params: [{type: "Property", name: "user"}]},
            markRead: {
                sid: f.notify.id,
                cid: f.notify.markRead,
                params: [{type: "long", name: "id"}, {type: "ph", name: "ph"}]
            },
            batchMarkRead: {
                sid: f.notify.id,
                cid: f.notify.batchMarkRead,
                params: [{type: "byte", name: "sid"}, {type: "byte", name: "cid"}, {type: "LongArray", name: "ids"}]
            },
            sync: {sid: f.sync.id, cid: f.sync.sync, params: [{type: "Property", name: "sync"}]},
            syncTeamMembers: {
                sid: f.sync.id,
                cid: f.sync.syncTeamMembers,
                params: [{type: "LongLongMap", name: "sync"}]
            },
            sendMsg: {sid: f.msg.id, cid: f.msg.sendMsg, params: [{type: "Property", name: "msg"}]},
            getHistoryMsgs: {
                sid: f.msg.id,
                cid: f.msg.getHistoryMsgs,
                params: [{type: "String", name: "to"}, {type: "long", name: "beginTime"}, {
                    type: "long",
                    name: "endTime"
                }, {type: "long", name: "lastMsgId"}, {type: "int", name: "limit"}, {type: "bool", name: "reverse"}]
            },
            sendCustomSysMsg: {
                sid: f.msg.id,
                cid: f.msg.sendCustomSysMsg,
                params: [{type: "Property", name: "sysMsg"}]
            },
            searchHistoryMsgs: {
                sid: f.msg.id,
                cid: f.msg.searchHistoryMsgs,
                params: [{type: "String", name: "to"}, {type: "long", name: "beginTime"}, {
                    type: "long",
                    name: "endTime"
                }, {type: "String", name: "keyword"}, {type: "int", name: "limit"}, {type: "bool", name: "reverse"}]
            },
            getSessions: {sid: f.msg.id, cid: f.msg.getSessions, params: [{type: "long", name: "time"}]},
            deleteSessions: {sid: f.msg.id, cid: f.msg.deleteSessions, params: [{type: "StrArray", name: "sessions"}]},
            sendMsgReceipt: {
                sid: f.msg.id,
                cid: f.msg.sendMsgReceipt,
                params: [{type: "Property", name: "msgReceipt"}]
            },
            createTeam: {
                sid: f.team.id,
                cid: f.team.createTeam,
                params: [{type: "Property", name: "team"}, {type: "StrArray", name: "accounts"}, {
                    type: "String",
                    name: "ps"
                }]
            },
            sendTeamMsg: {sid: f.team.id, cid: f.team.sendTeamMsg, params: [{type: "Property", name: "msg"}]},
            addTeamMembers: {
                sid: f.team.id,
                cid: f.team.addTeamMembers,
                params: [{type: "long", name: "teamId"}, {type: "StrArray", name: "accounts"}, {
                    type: "String",
                    name: "ps"
                }]
            },
            removeTeamMembers: {
                sid: f.team.id,
                cid: f.team.removeTeamMembers,
                params: [{type: "long", name: "teamId"}, {type: "StrArray", name: "accounts"}]
            },
            updateTeam: {sid: f.team.id, cid: f.team.updateTeam, params: [{type: "Property", name: "team"}]},
            leaveTeam: {sid: f.team.id, cid: f.team.leaveTeam, params: [{type: "long", name: "teamId"}]},
            getTeam: {sid: f.team.id, cid: f.team.getTeam, params: [{type: "long", name: "teamId"}]},
            getTeams: {sid: f.team.id, cid: f.team.getTeams, params: [{type: "long", name: "timetag"}]},
            getTeamMembers: {
                sid: f.team.id,
                cid: f.team.getTeamMembers,
                params: [{type: "long", name: "teamId"}, {type: "long", name: "timetag"}]
            },
            dismissTeam: {sid: f.team.id, cid: f.team.dismissTeam, params: [{type: "long", name: "teamId"}]},
            applyTeam: {
                sid: f.team.id,
                cid: f.team.applyTeam,
                params: [{type: "long", name: "teamId"}, {type: "String", name: "ps"}]
            },
            passTeamApply: {
                sid: f.team.id,
                cid: f.team.passTeamApply,
                params: [{type: "long", name: "teamId"}, {type: "String", name: "from"}]
            },
            rejectTeamApply: {
                sid: f.team.id,
                cid: f.team.rejectTeamApply,
                params: [{type: "long", name: "teamId"}, {type: "String", name: "from"}, {type: "String", name: "ps"}]
            },
            addTeamManagers: {
                sid: f.team.id,
                cid: f.team.addTeamManagers,
                params: [{type: "long", name: "teamId"}, {type: "StrArray", name: "accounts"}]
            },
            removeTeamManagers: {
                sid: f.team.id,
                cid: f.team.removeTeamManagers,
                params: [{type: "long", name: "teamId"}, {type: "StrArray", name: "accounts"}]
            },
            transferTeam: {
                sid: f.team.id,
                cid: f.team.transferTeam,
                params: [{type: "long", name: "teamId"}, {type: "String", name: "account"}, {
                    type: "bool",
                    name: "leave"
                }]
            },
            updateInfoInTeam: {
                sid: f.team.id,
                cid: f.team.updateInfoInTeam,
                params: [{type: "Property", name: "teamMember"}]
            },
            updateNickInTeam: {
                sid: f.team.id,
                cid: f.team.updateNickInTeam,
                params: [{type: "Property", name: "teamMember"}]
            },
            acceptTeamInvite: {
                sid: f.team.id,
                cid: f.team.acceptTeamInvite,
                params: [{type: "long", name: "teamId"}, {type: "String", name: "from"}]
            },
            rejectTeamInvite: {
                sid: f.team.id,
                cid: f.team.rejectTeamInvite,
                params: [{type: "long", name: "teamId"}, {type: "String", name: "from"}, {type: "String", name: "ps"}]
            },
            getTeamHistoryMsgs: {
                sid: f.team.id,
                cid: f.team.getTeamHistoryMsgs,
                params: [{type: "long", name: "to"}, {type: "long", name: "beginTime"}, {
                    type: "long",
                    name: "endTime"
                }, {type: "long", name: "lastMsgId"}, {type: "int", name: "limit"}, {type: "bool", name: "reverse"}]
            },
            searchTeamHistoryMsgs: {
                sid: f.team.id,
                cid: f.team.searchTeamHistoryMsgs,
                params: [{type: "long", name: "to"}, {type: "long", name: "beginTime"}, {
                    type: "long",
                    name: "endTime"
                }, {type: "String", name: "keyword"}, {type: "int", name: "limit"}, {type: "bool", name: "reverse"}]
            },
            friendRequest: {
                sid: f.friend.id,
                cid: f.friend.friendRequest,
                params: [{type: "String", name: "account"}, {type: "byte", name: "type"}, {type: "String", name: "ps"}]
            },
            deleteFriend: {sid: f.friend.id, cid: f.friend.deleteFriend, params: [{type: "String", name: "account"}]},
            updateFriend: {sid: f.friend.id, cid: f.friend.updateFriend, params: [{type: "Property", name: "friend"}]},
            getFriends: {sid: f.friend.id, cid: f.friend.getFriends, params: [{type: "long", name: "timetag"}]},
            getChatroomAddress: {
                sid: f.chatroom.id,
                cid: f.chatroom.getChatroomAddress,
                params: [{type: "long", name: "chatroomId"}]
            },
            sendFilterMsg: {sid: f.filter.id, cid: f.filter.sendFilterMsg, params: [{type: "Property", name: "msg"}]},
            sendFilterCustomSysMsg: {
                sid: f.filter.id,
                cid: f.filter.sendFilterCustomSysMsg,
                params: [{type: "Property", name: "sysMsg"}]
            }
        }), h = d.merge({}, e.packetConfig, {
            "2_3": {
                service: "auth",
                cmd: "login",
                response: [{type: "Property", name: "loginRes"}, {
                    type: "PropertyArray",
                    name: "loginPorts",
                    entity: "loginPort"
                }]
            },
            "2_5": {
                service: "auth",
                cmd: "kicked",
                response: [{type: "Number", name: "from"}, {type: "Number", name: "reason"}]
            },
            "2_6": {service: "auth", cmd: "logout"},
            "2_7": {
                service: "auth",
                cmd: "multiPortLogin",
                response: [{type: "Number", name: "state"}, {
                    type: "PropertyArray",
                    name: "loginPorts",
                    entity: "loginPort"
                }]
            },
            "2_8": {service: "auth", cmd: "kick", response: [{type: "StrArray", name: "deviceIds"}]},
            "3_3": {service: "user", cmd: "markInBlacklist"},
            "3_103": {
                service: "user",
                cmd: "syncMarkInBlacklist",
                response: [{type: "String", name: "account"}, {type: "Boolean", name: "isAdd"}]
            },
            "3_4": {service: "user", cmd: "getBlacklist", response: [{type: "StrArray", name: "blacklist"}]},
            "3_5": {service: "user", cmd: "markInMutelist"},
            "3_105": {
                service: "user",
                cmd: "syncMarkInMutelist",
                response: [{type: "String", name: "account"}, {type: "Boolean", name: "isAdd"}]
            },
            "3_6": {service: "user", cmd: "getMutelist", response: [{type: "StrArray", name: "mutelist"}]},
            "3_8": {
                service: "user",
                cmd: "getRelations",
                response: [{
                    type: "PropertyArray",
                    name: "specialRelations",
                    entity: "specialRelation"
                }, {type: "Number", name: "timetag"}]
            },
            "3_7": {
                service: "user",
                cmd: "getUsers",
                response: [{type: "PropertyArray", name: "users", entity: "user"}]
            },
            "3_10": {service: "user", cmd: "updateMyInfo", response: [{type: "Number", name: "timetag"}]},
            "3_109": {
                service: "user",
                cmd: "syncMyInfo",
                response: [{type: "Property", name: "user"}, {type: "Number", name: "timetag"}]
            },
            "3_110": {service: "user", cmd: "syncUpdateMyInfo", response: [{type: "Property", name: "user"}]},
            "4_1": {service: "notify"},
            "4_2": {service: "notify"},
            "4_3": {service: "notify", cmd: "markRead"},
            "4_4": {
                service: "notify",
                cmd: "syncOfflineMsgs",
                response: [{type: "PropertyArray", name: "msgs", entity: "msg"}]
            },
            "4_5": {service: "notify", cmd: "batchMarkRead"},
            "4_6": {
                service: "notify",
                cmd: "syncOfflineSysMsgs",
                response: [{type: "PropertyArray", name: "sysMsgs", entity: "sysMsg"}]
            },
            "4_9": {
                service: "notify",
                cmd: "syncRoamingMsgs",
                response: [{type: "PropertyArray", name: "msgs", entity: "msg"}]
            },
            "4_12": {
                service: "notify",
                cmd: "syncMsgReceipts",
                response: [{type: "PropertyArray", name: "msgReceipts", entity: "msgReceipt"}, {
                    type: "Number",
                    name: "timetag"
                }]
            },
            "4_100": {
                service: "notify",
                cmd: "syncOfflineFilterMsgs",
                response: [{type: "PropertyArray", name: "msgs", entity: "msg"}]
            },
            "4_101": {
                service: "notify",
                cmd: "syncOfflineFilterSysMsgs",
                response: [{type: "PropertyArray", name: "sysMsgs", entity: "sysMsg"}]
            },
            "5_1": {service: "sync", cmd: "syncDone", response: [{type: "Number", name: "timetag"}]},
            "5_2": {service: "sync", cmd: "syncTeamMembersDone", response: [{type: "Number", name: "timetag"}]},
            "7_1": {service: "msg", cmd: "sendMsg", response: [{type: "Property", name: "msg"}]},
            "7_2": {service: "msg", cmd: "msg", response: [{type: "Property", name: "msg"}]},
            "7_3": {service: "msg", cmd: "sysMsg", response: [{type: "Property", name: "sysMsg"}]},
            "7_6": {
                service: "msg",
                cmd: "getHistoryMsgs",
                response: [{type: "PropertyArray", name: "msgs", entity: "msg"}]
            },
            "7_7": {service: "msg", cmd: "sendCustomSysMsg"},
            "7_8": {
                service: "msg",
                cmd: "searchHistoryMsgs",
                response: [{type: "PropertyArray", name: "msgs", entity: "msg"}]
            },
            "7_9": {service: "msg", cmd: "deleteSessions"},
            "7_10": {service: "msg", cmd: "getSessions", response: [{type: "StrArray", name: "sessions"}]},
            "7_11": {service: "msg", cmd: "sendMsgReceipt", response: [{type: "Property", name: "msgReceipt"}]},
            "7_12": {service: "msg", cmd: "msgReceipt", response: [{type: "Property", name: "msgReceipt"}]},
            "7_101": {service: "msg", cmd: "syncSendMsg", response: [{type: "Property", name: "msg"}]},
            "8_1": {service: "team", cmd: "createTeam", response: [{type: "Property", name: "team"}]},
            "8_2": {service: "team", cmd: "sendTeamMsg", response: [{type: "Property", name: "msg"}]},
            "8_3": {service: "team", cmd: "teamMsg", response: [{type: "Property", name: "msg"}]},
            "8_4": {service: "team", cmd: "teamMsgs", response: [{type: "PropertyArray", name: "msgs", entity: "msg"}]},
            "8_5": {service: "team", cmd: "addTeamMembers"},
            "8_6": {service: "team", cmd: "removeTeamMembers"},
            "8_7": {
                service: "team",
                cmd: "updateTeam",
                response: [{type: "Number", name: "id"}, {type: "Number", name: "time"}]
            },
            "8_8": {service: "team", cmd: "leaveTeam"},
            "8_9": {service: "team", cmd: "getTeam", response: [{type: "Property", name: "team"}]},
            "8_10": {
                service: "team",
                cmd: "getTeams",
                response: [{type: "PropertyArray", name: "teams", entity: "team"}, {type: "Number", name: "timetag"}]
            },
            "8_11": {
                service: "team",
                cmd: "getTeamMembers",
                response: [{type: "Number", name: "teamId"}, {
                    type: "PropertyArray",
                    name: "members",
                    entity: "teamMember"
                }, {type: "Number", name: "timetag"}]
            },
            "8_12": {service: "team", cmd: "dismissTeam"},
            "8_13": {service: "team", cmd: "applyTeam", response: [{type: "Property", name: "team"}]},
            "8_14": {service: "team", cmd: "passTeamApply"},
            "8_15": {service: "team", cmd: "rejectTeamApply"},
            "8_16": {service: "team", cmd: "addTeamManagers"},
            "8_17": {service: "team", cmd: "removeTeamManagers"},
            "8_18": {service: "team", cmd: "transferTeam"},
            "8_19": {service: "team", cmd: "updateInfoInTeam"},
            "8_20": {service: "team", cmd: "updateNickInTeam"},
            "8_21": {service: "team", cmd: "acceptTeamInvite", response: [{type: "Property", name: "team"}]},
            "8_22": {service: "team", cmd: "rejectTeamInvite"},
            "8_23": {
                service: "team",
                cmd: "getTeamHistoryMsgs",
                response: [{type: "PropertyArray", name: "msgs", entity: "msg"}]
            },
            "8_24": {
                service: "team",
                cmd: "searchTeamHistoryMsgs",
                response: [{type: "PropertyArray", name: "msgs", entity: "msg"}]
            },
            "8_109": {
                service: "team",
                cmd: "syncTeams",
                response: [{type: "Number", name: "timetag"}, {type: "PropertyArray", name: "teams", entity: "team"}]
            },
            "8_111": {
                service: "team",
                cmd: "syncTeamMembers",
                response: [{type: "Number", name: "teamId"}, {
                    type: "PropertyArray",
                    name: "members",
                    entity: "teamMember"
                }, {type: "Number", name: "timetag"}]
            },
            "8_101": {service: "team", cmd: "syncCreateTeam", response: [{type: "Property", name: "team"}]},
            "8_102": {service: "team", cmd: "syncSendTeamMsg", response: [{type: "Property", name: "msg"}]},
            "8_119": {service: "team", cmd: "syncUpdateTeamMember", response: [{type: "Property", name: "teamMember"}]},
            "12_1": {service: "friend", cmd: "friendRequest"},
            "12_101": {
                service: "friend",
                cmd: "syncFriendRequest",
                response: [{type: "String", name: "account"}, {type: "Number", name: "type"}, {
                    type: "String",
                    name: "ps"
                }]
            },
            "12_2": {service: "friend", cmd: "deleteFriend"},
            "12_102": {service: "friend", cmd: "syncDeleteFriend", response: [{type: "String", name: "account"}]},
            "12_3": {service: "friend", cmd: "updateFriend"},
            "12_103": {service: "friend", cmd: "syncUpdateFriend", response: [{type: "Property", name: "friend"}]},
            "12_4": {
                service: "friend",
                cmd: "getFriends",
                response: [{type: "PropertyArray", name: "friends", entity: "friend"}, {
                    type: "Number",
                    name: "timetag"
                }]
            },
            "12_5": {
                service: "friend",
                cmd: "syncFriends",
                response: [{type: "PropertyArray", name: "friends", entity: "friend"}, {
                    type: "Number",
                    name: "timetag"
                }]
            },
            "12_6": {
                service: "friend",
                cmd: "syncFriendUsers",
                response: [{type: "PropertyArray", name: "users", entity: "user"}, {type: "Number", name: "timetag"}]
            },
            "13_1": {service: "chatroom", cmd: "getChatroomAddress", response: [{type: "StrArray", name: "address"}]},
            "101_1": {service: "filter", cmd: "sendFilterMsg", response: [{type: "Property", name: "msg"}]},
            "101_2": {service: "filter", cmd: "filterMsg", response: [{type: "Property", name: "msg"}]},
            "101_3": {service: "filter", cmd: "filterSysMsg", response: [{type: "Property", name: "sysMsg"}]},
            "101_7": {service: "filter", cmd: "sendFilterCustomSysMsg"}
        });
        a.exports = {idMap: f, cmdConfig: g, packetConfig: h}
    }, function (a) {
        a.exports = {
            nosToken: {objectName: 1, token: 2, bucket: 3, expireTime: 4},
            audioToText: {url: 2},
            imageOp: {
                type: 0,
                stripMeta: 1,
                typeType: 2,
                blurRadius: 3,
                blurSigma: 4,
                qualityQuality: 5,
                cropX: 6,
                cropY: 7,
                cropWidth: 8,
                cropHeight: 9,
                rotateAngle: 10,
                pixelPixel: 11,
                thumbnailMode: 12,
                thumbnailWidth: 13,
                thumbnailHeight: 14,
                thumbnailAxisX: 15,
                thumbnailAxisY: 16,
                thumbnailCenterX: 17,
                thumbnailCenterY: 18,
                thumbnailEnlarge: 19,
                thumbnailToStatic: 20,
                watermarkType: 21,
                watermarkGravity: 22,
                watermarkDissolve: 23,
                watermarkDx: 24,
                watermarkDy: 25,
                watermarkImage: 26,
                watermarkText: 27,
                watermarkFont: 28,
                watermarkFontSize: 29,
                watermarkFontColor: 30,
                interlace: 31
            },
            login: {
                os: 4,
                sdkVersion: 6,
                protocolVersion: 9,
                deviceId: 13,
                appKey: 18,
                account: 19,
                browser: 24,
                session: 26,
                token: 1e3
            },
            loginRes: {lastLoginDeviceId: 17, connectionId: 102, ip: 103, port: 104, country: 106},
            loginPort: {type: 3, os: 4, mac: 5, deviceId: 13, account: 19, connectionId: 102, ip: 103, time: 109},
            sync: {
                myInfo: 1,
                offlineMsgs: 2,
                teams: 3,
                roamingMsgs: 7,
                relations: 9,
                friends: 11,
                sessions: 12,
                friendUsers: 13,
                msgReceipts: 14,
                filterMsgs: 100
            },
            team: {
                teamId: 1,
                name: 3,
                type: 4,
                owner: 5,
                level: 6,
                selfCustom: 7,
                valid: 8,
                memberNum: 9,
                memberUpdateTime: 10,
                createTime: 11,
                updateTime: 12,
                validToCurrentUser: 13,
                intro: 14,
                announcement: 15,
                joinMode: 16,
                bits: 17,
                custom: 18,
                serverCustom: 19
            },
            teamMember: {
                teamId: 1,
                account: 3,
                type: 4,
                nickInTeam: 5,
                bits: 7,
                active: 8,
                valid: 9,
                joinTime: 10,
                updateTime: 11
            },
            msg: {
                scene: 0,
                to: 1,
                from: 2,
                fromClientType: 4,
                fromDeviceId: 5,
                fromNick: 6,
                time: 7,
                type: 8,
                body: 9,
                attach: 10,
                idClient: 11,
                idServer: 12,
                resend: 13,
                userUpdateTime: 14,
                custom: 15,
                pushPayload: 16,
                pushContent: 17,
                isHistoryable: 100,
                isRoamingable: 101,
                isSyncable: 102,
                isMuted: 104,
                cc: 105,
                isPushable: 107,
                isOfflinable: 108,
                isUnreadable: 109,
                needPushNick: 110
            },
            msgReceipt: {to: 1, from: 2, time: 7, idClient: 11},
            sysMsg: {
                time: 0,
                type: 1,
                to: 2,
                from: 3,
                ps: 4,
                attach: 5,
                idServer: 6,
                sendToOnlineUsersOnly: 7,
                apnsText: 8,
                pushPayload: 9,
                cc: 105,
                isPushable: 107,
                isUnreadable: 109,
                needPushNick: 110
            },
            friend: {
                account: 4,
                flag: 5,
                beflag: 6,
                source: 7,
                alias: 8,
                bits: 9,
                custom: 10,
                createTime: 11,
                updateTime: 12
            },
            user: {
                account: 1,
                nick: 3,
                avatar: 4,
                sign: 5,
                gender: 6,
                email: 7,
                birth: 8,
                tel: 9,
                custom: 10,
                createTime: 12,
                updateTime: 13
            },
            specialRelation: {account: 0, isMuted: 1, isBlacked: 2, createTime: 3, updateTime: 4}
        }
    }, function (a) {
        a.exports = {
            nosToken: {1: "objectName", 2: "token", 3: "bucket", 4: "expireTime"},
            audioToText: {2: "url"},
            imageOp: {
                0: "type",
                1: "stripMeta",
                2: "typeType",
                3: "blurRadius",
                4: "blurSigma",
                5: "qualityQuality",
                6: "cropX",
                7: "cropY",
                8: "cropWidth",
                9: "cropHeight",
                10: "rotateAngle",
                11: "pixelPixel",
                12: "thumbnailMode",
                13: "thumbnailWidth",
                14: "thumbnailHeight",
                15: "thumbnailAxisX",
                16: "thumbnailAxisY",
                17: "thumbnailCenterX",
                18: "thumbnailCenterY",
                19: "thumbnailEnlarge",
                20: "thumbnailToStatic",
                21: "watermarkType",
                22: "watermarkGravity",
                23: "watermarkDissolve",
                24: "watermarkDx",
                25: "watermarkDy",
                26: "watermarkImage",
                27: "watermarkText",
                28: "watermarkFont",
                29: "watermarkFontSize",
                30: "watermarkFontColor",
                31: "interlace"
            },
            login: {
                4: "os",
                6: "sdkVersion",
                9: "protocolVersion",
                13: "deviceId",
                18: "appKey",
                19: "account",
                24: "browser",
                26: "session",
                1e3: "token"
            },
            loginRes: {17: "lastLoginDeviceId", 102: "connectionId", 103: "ip", 104: "port", 106: "country"},
            loginPort: {
                3: "type",
                4: "os",
                5: "mac",
                13: "deviceId",
                19: "account",
                102: "connectionId",
                103: "ip",
                109: "time"
            },
            sync: {
                1: "myInfo",
                2: "offlineMsgs",
                3: "teams",
                7: "roamingMsgs",
                9: "relations",
                11: "friends",
                12: "sessions",
                13: "friendUsers",
                14: "msgReceipts",
                100: "filterMsgs"
            },
            team: {
                1: "teamId",
                3: "name",
                4: "type",
                5: "owner",
                6: "level",
                7: "selfCustom",
                8: "valid",
                9: "memberNum",
                10: "memberUpdateTime",
                11: "createTime",
                12: "updateTime",
                13: "validToCurrentUser",
                14: "intro",
                15: "announcement",
                16: "joinMode",
                17: "bits",
                18: "custom",
                19: "serverCustom"
            },
            teamMember: {
                1: "teamId",
                3: "account",
                4: "type",
                5: "nickInTeam",
                7: "bits",
                8: "active",
                9: "valid",
                10: "joinTime",
                11: "updateTime"
            },
            msg: {
                0: "scene",
                1: "to",
                2: "from",
                4: "fromClientType",
                5: "fromDeviceId",
                6: "fromNick",
                7: "time",
                8: "type",
                9: "body",
                10: "attach",
                11: "idClient",
                12: "idServer",
                13: "resend",
                14: "userUpdateTime",
                15: "custom",
                16: "pushPayload",
                17: "pushContent",
                100: "isHistoryable",
                101: "isRoamingable",
                102: "isSyncable",
                104: "isMuted",
                105: "cc",
                107: "isPushable",
                108: "isOfflinable",
                109: "isUnreadable",
                110: "needPushNick"
            },
            msgReceipt: {1: "to", 2: "from", 7: "time", 11: "idClient"},
            sysMsg: {
                0: "time",
                1: "type",
                2: "to",
                3: "from",
                4: "ps",
                5: "attach",
                6: "idServer",
                7: "sendToOnlineUsersOnly",
                8: "apnsText",
                9: "pushPayload",
                105: "cc",
                107: "isPushable",
                109: "isUnreadable",
                110: "needPushNick"
            },
            friend: {
                4: "account",
                5: "flag",
                6: "beflag",
                7: "source",
                8: "alias",
                9: "bits",
                10: "custom",
                11: "createTime",
                12: "updateTime"
            },
            user: {
                1: "account",
                3: "nick",
                4: "avatar",
                5: "sign",
                6: "gender",
                7: "email",
                8: "birth",
                9: "tel",
                10: "custom",
                12: "createTime",
                13: "updateTime"
            },
            specialRelation: {0: "account", 1: "isMuted", 2: "isBlacked", 3: "createTime", 4: "updateTime"}
        }
    }, function (a, b, c) {
        var d = c(88).fn, e = c(77), f = c(28), g = c(24);
        d.refreshSocketUrl = function () {
            var a = this, b = a.options, c = f.info, d = f.lbsUrl + "?k=" + b.appKey + "&id=" + b.account + "&sv=" + c.sdkVersion + "&pv=" + c.protocolVersion;
            g.log("will refresh lbs", d), e({
                method: "GET",
                cors: !0,
                url: d,
                timeout: f.xhrTimeout
            }, function (b, c, d) {
                b ? a.onDisconnect() : (a.socketUrls = [], d = JSON.parse(d), d.common.link.forEach(function (b) {
                    a.socketUrls.push(f.formatSocketUrl(b))
                }), d.common["link.default"].forEach(function (b) {
                    b = f.formatSocketUrl(b), -1 === a.socketUrls.indexOf(b) && a.socketUrls.push(b)
                }), a.connectToUrl(a.getNextSocketUrl()))
            })
        }
    }, function (a, b, c) {
        var d = c(88).fn, e = c(24), f = c(47);
        d.assembleLogin = function () {
            return {login: this.assembleIMLogin()}
        }, d.afterLogin = function () {
            var a = this, b = a.db;
            b.enable ? a.db.init(a.account).then(function () {
                a.syncData()
            }, function (c) {
                e.warn("no db", c), b.reset(!1), a.syncData()
            }) : (e.warn("no db"), a.syncData())
        }, d.processAuth = function (a) {
            var b = this;
            switch (a.cmd) {
                case"login":
                    a.error || (a.obj = a.content.loginRes, b.onLoginPortsChange(a.content.loginPorts, 2));
                    break;
                case"kicked":
                    return void b.onKicked(a);
                case"multiPortLogin":
                    b.onLoginPortsChange(a.content.loginPorts, a.content.state);
                    break;
                case"kick":
                    a.error || (a.obj.deviceIds = a.content.deviceIds)
            }
        }, d.onLoginPortsChange = function (a, b) {
            if (a && a.length) {
                var c = !0;
                switch (b) {
                    case 2:
                        c = !0;
                        break;
                    case 3:
                        c = !1
                }
                a.forEach(function (a) {
                    a.type = f.reverseType(a.type), a.time = +a.time, a.online = c
                }), e.info("on login ports", a), this.options.onloginportschange(a)
            }
        }, d.kickedReasons = ["", "samePlatformKick", "serverKick", "otherPlatformKick", "silentlyKick"], d.shouldNotifyKicked = function (a) {
            return "silentlyKick" !== a.reason
        }, d.kickedMessages = ["", "不允许同一个帐号在多个地方同时登录", "被服务器踢了", "被其它端踢了", "悄悄被踢"]
    }, function (a, b, c) {
        var d = c(88).fn, e = c(10), f = e.undef, g = e.objs2ids, h = e.objs2accounts, i = e.teams2ids, j = c(24), k = c(106);
        d.syncData = function () {
            function a(a) {
                b.syncPromiseArray = [], b.syncResult = {}, b.syncTeamMembersPromiseArray = [], b.syncTeamMembersResult = {}, e.verifyBooleanWithDefault(d, "syncRelations syncFriends syncFriendUsers syncTeams syncRoamingMsgs syncMsgReceipts syncTeamMembers", !0), e.verifyBooleanWithDefault(d, "syncFilter", !1);
                var c = {};
                a = a || {}, c.myInfo = a.myInfo || 0, c.offlineMsgs = 0, d.syncRelations && (c.relations = a.relations || 0), d.syncFriends && (c.friends = a.friends || 0), d.syncFriendUsers && (c.friendUsers = a.friendUsers || 0), d.syncTeams && (c.teams = a.teams || 0), d.syncRoamingMsgs && (c.roamingMsgs = a.roamingMsgs || 0), d.syncMsgReceipts && (c.msgReceipts = a.msgReceipts || 0), d.syncFilter && (c.filterMsgs = 0), b.sendCmd("sync", {sync: c}, b.onSyncData.bind(b))
            }

            var b = this, c = b.db, d = b.options, f = c.enable;
            b.notifyLogin(), b.syncing = !0, f ? b.db.getTimetags().then(function (b) {
                a(b)
            }, function () {
                a()
            }) : a(b.timetags)
        }, d.onSyncData = function (a, b) {
            this.onMiscError(a, b, "sync error")
        }, d.processSync = function (a) {
            var b = this;
            switch (a.cmd) {
                case"syncDone":
                    b.timetags.sync = a.content.timetag, b.onSyncDone();
                    break;
                case"syncTeamMembersDone":
                    b.onSyncTeamMembersDone()
            }
        }, d.onSyncDone = function () {
            function a() {
                if (H.processUnsettledMsgs(), H.processUnsettledSysMsgs(), H.syncing = !1, j.warn("after sync", e.promises2cmds(L)), L = [], n = M.blacklist, o = M.invalidBlacklist || [], p = M.mutelist, q = M.invalidMutelist || [], r = M.friends, s = M.invalidFriends || [], t = M.myInfo, u = M.users, v = M.teams, w = M.invalidTeams || [], x = M.sessions, y = M.msgReceipts, z = M.roamingMsgs, A = M.offlineMsgs, B = M.offlineFilterMsgs, C = M.offlineSysMsgs, D = M.offlineCustomSysMsgs, E = M.offlineFilterSysMsgs, F = M.offlineFilterCustomSysMsgs, G = M.sysMsgUnread, x) {
                    var a = [];
                    Object.keys(x).forEach(function (b) {
                        a.push(x[b])
                    }), x = a.sort(function (a, b) {
                        return b.updateTime - a.updateTime
                    })
                }
                J && !H.hasSynced && (H.hasSynced = !0, b()), L.length ? Promise.all(L).then(c, function (a) {
                    H.onDBError(a)
                }) : c()
            }

            function b() {
                K.syncRelations && (m = I.getRelations().then(function (a) {
                    n = a[0], p = a[1], n.invalid = o, p.invalid = q
                }, function (a) {
                    return a._msg = "on relations error", a
                }), L.push(m)), K.syncFriends && (m = I.getFriends().then(function (a) {
                    r = a, r.invalid = s
                }, function (a) {
                    return a._msg = "on friends error", a
                }), L.push(m)), f(t) && (m = I.getUser(H.account).then(function (a) {
                    t = a
                }, function (a) {
                    return a._msg = "on myInfo error", a
                }), L.push(m)), K.syncFriendUsers && (m = I.getAllUsers().then(function (a) {
                    u = a
                }, function (a) {
                    return a._msg = "on users error", a
                }), L.push(m)), K.syncTeams && (m = I.getTeams().then(function (a) {
                    v = a, v.invalid = w
                }, function (a) {
                    return a._msg = "on teams error", a
                }), L.push(m)), m = I.getSessions().then(function (a) {
                    x = a
                }, function (a) {
                    return a._msg = "on sessions error", a
                }), L.push(m), m = I.getSysMsgUnread().then(function (a) {
                    G = a
                }, function (a) {
                    return a._msg = "on sysMsgUnread error", a
                }), L.push(m)
            }

            function c() {
                setTimeout(d, 0)
            }

            function d() {
                var a, b, c = [];
                n && (j.info("on blacklist", h(n), n), j.info("on mutelist", h(p), p), K.onblacklist(n), K.onmutelist(p)), r && (j.info("on friends", h(r), r), K.onfriends(r)), t && (j.info("on myInfo", t), H.myInfo = t, K.onmyinfo(e.copy(t))), u && (u.forEach(function (a) {
                    H.mergeUser(a)
                }), j.info("on users", h(u), u), K.onusers(u)), v && (j.info("on teams", i(v), v), K.onteams(v)), (x || y) && (x = H.mergeSessionAndMsgReceipts(x, y)), x && x.length && (x.forEach(function (a) {
                    H.mergeSession(a), k.trim(a)
                }), j.info("on sessions", g(x), x), K.onsessions(x)), z && z.forEach(function (a) {
                    c.push(a.timetag), b = a.msgs, b.length && (j.info("on roaming msgs", a.sessionId, b.length, b), K.onroamingmsgs(a))
                }), A && A.forEach(function (a) {
                    c.push(a.timetag), b = a.msgs, b.length && (j.info("on offline msgs", a.sessionId, b.length, b), K.onofflinemsgs(a))
                }), B && B.forEach(function (a) {
                    c.push(a.timetag), b = a.msgs, b.length && (j.info("on offline filter msgs", a.sessionId, b.length, b), K.onofflinefiltermsgs(b))
                }), C && (j.info("on offline sys msgs", C.length, C), K.onofflinesysmsgs(C)), E && (j.info("on offline filter sys msgs", E.length, E), K.onofflinefiltersysmsgs(E)), D && (j.info("on offline custom sys msgs", D.length, D), K.onofflinecustomsysmsgs(D)), F && (j.info("on offline filter custom sys msgs", F.length, F), K.onofflinefiltercustomsysmsgs(F)), G && (j.info("on sysMsgUnread", G), K.onsysmsgunread(G)), c.length ? (a = Math.max.apply(Math, c), H.updateRoamingMsgTimetag(a).then(l, l)) : l(), H.syncPromiseArray = null, H.syncResult = null
            }

            function l() {
                j.info("sync done"), K.onsyncdone(), K.syncTeamMembers && v && v.length ? H.syncTeamMembers(v) : setTimeout(function () {
                    H.onSyncTeamMembersDone()
                }, 0)
            }

            var m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G, H = this, I = H.db, J = I.enable, K = H.options, L = H.syncPromiseArray, M = H.syncResult;
            L.length ? Promise.all(L).then(a, function (a) {
                H.onDBError(a)
            }) : a()
        }, d.syncTeamMembers = function (a) {
            function b(b) {
                var d = {};
                b = b || {}, a.forEach(function (a) {
                    d[a.teamId] = b["team-" + a.teamId] || 0
                }, c), c.sendCmd("syncTeamMembers", {sync: d}, c.onSyncTeamMembers.bind(c))
            }

            var c = this, d = c.db;
            d.enable ? d.getTeamMemberTimetags().then(function (a) {
                b(a)
            }, function () {
                b()
            }) : b(c.timetags)
        }, d.onSyncTeamMembers = function (a, b) {
            this.onMiscError(a, b, "sync teamMembers error")
        }, d.onSyncTeamMembersDone = function () {
            function a() {
                j.warn("after sync members", e.promises2cmds(o)), o = [], l.enable && !k.hasSyncedTeamMembers ? (k.hasSyncedTeamMembers = !0, b()) : c()
            }

            function b() {
                return m.syncTeams && m.syncTeamMembers ? void l.getTeams().then(function (a) {
                    a.forEach(function (a) {
                        var b = a.teamId;
                        i = l.getTeamMembers(b).then(function (a) {
                            n[b] = a
                        }, function (a) {
                            return a._msg = "on members error", a
                        }), o.push(i)
                    }), o.length ? Promise.all(o).then(c, function (a) {
                        k.onDBError(a)
                    }) : c()
                }, function (a) {
                    a._msg = "on members error", k.onDBError(a)
                }) : g()
            }

            function c() {
                setTimeout(d, 0)
            }

            function d() {
                var a, b;
                Object.keys(n).forEach(function (c) {
                    -1 === c.indexOf("invalid") && (a = n[c], b = n[c + "-invalid"] || [], a.invalid = b, f(c, a))
                }), g()
            }

            function f(a, b) {
                j.info("on members", a, h(b), b), m.onteammembers({teamId: a, members: b})
            }

            function g() {
                j.info("sync members done"), m.onsyncteammembersdone(), k.syncTeamMembersResult = null, k.syncTeamMembersPromiseArray = null
            }

            var i, k = this, l = k.db, m = k.options, n = k.syncTeamMembersResult, o = k.syncTeamMembersPromiseArray;
            o.length ? Promise.all(o).then(a, function (a) {
                k.onDBError(a)
            }) : a()
        }
    }, function (a, b, c) {
        function d() {
        }

        var e = c(10);
        d.parse = function (a) {
            var b = a.split("|");
            return {scene: b[0], to: b[1]}
        }, d.genSessionByMsg = function (a) {
            var b = {id: a.sessionId, scene: a.scene, to: a.target, updateTime: a.time, lastMsg: a};
            return d.appendLastMsg(b), b
        }, d.appendLastMsg = function (a) {
            var b = a.lastMsg, c = e.capFirstLetter(b.type);
            a["last" + c + "Msg"] = b;
            var d = e.capFirstLetter(b.flow);
            a["last" + d + "Msg"] = b
        }, d.genSessionByMsgs = function (a, b, c) {
            var e = b.getLastMsg(c), f = d.genSessionByMsg(e);
            if ("roamingMsgs" === a)for (var g, h = "in" === e.flow ? "out" : "in", i = c.length - 2; i >= 0; i--)if (g = c[i], g.flow === h) {
                f["last" + h + "Msg"] = g;
                break
            }
            return f
        }, d.trim = function (a) {
            delete a.msgReceiptSendTime, delete a.msgReceiptServerTime
        }, a.exports = d
    }, function (a, b, c) {
        var d = c(88).fn, e = c(10), f = e.objs2accounts, g = c(24), h = c(108), i = c(109);
        d.processUser = function (a) {
            var b, c = this, d = c.db, e = a.obj, f = a.error, g = a.content;
            switch (a.cmd) {
                case"markInBlacklist":
                    f || c.markInBlacklist(e);
                    break;
                case"syncMarkInBlacklist":
                    c.markInBlacklist(g, !0);
                    break;
                case"markInMutelist":
                    f || c.markInMutelist(e);
                    break;
                case"syncMarkInMutelist":
                    c.markInMutelist(g, !0);
                    break;
                case"getRelations":
                    f || c.onRelations(a);
                    break;
                case"syncMyInfo":
                    c.onMyInfo(a, !0);
                    break;
                case"updateMyInfo":
                    f || (e.updateTime = g.timetag, c.onUpdateMyInfo(a, e));
                    break;
                case"syncUpdateMyInfo":
                    c.onUpdateMyInfo(a, g.user, !0);
                    break;
                case"getUsers":
                    f || (b = g.users.map(function (a) {
                        return a = i.reverse(a), c.mergeUser(a), a
                    }), a.obj = b, d.enable && d.updateUsersIfIsFriend(b))
            }
        }, d.onMyInfo = function (a) {
            function b() {
                e = i.reverse(k.user), g.warn("parse myInfo", e)
            }

            function c(a, b) {
                h.mergeMyInfo(e, l).then(function () {
                    d(), a()
                }).then(void 0, function (a) {
                    a._msg = "merge myInfo error", b(a)
                })
            }

            function d() {
                f.timetags.myInfo = e.updateTime, l && (f.syncResult.myInfo = e)
            }

            var e, f = this, h = f.db, j = a.error, k = a.content, l = !0, m = new Promise(function (a, e) {
                j ? e(j) : (b(), h.enable ? c(a, e) : (d(), a()))
            });
            l && (m.cmd = "myInfo", f.syncPromiseArray.push(m))
        }, d.onUpdateMyInfo = function (a, b, c) {
            var d = this, f = d.db, h = i.reverse(b), j = e.merge(d.myInfo, h);
            d.myInfo = j, c ? (g.info("on update myInfo", j), d.options.onupdatemyinfo(j)) : a.obj = j, f.enable && (h.account = d.account, f.updateUser(h))
        }, d.onRelations = function (a) {
            function b() {
                m.forEach(function (a) {
                    a = h.parse(a);
                    var b = {account: a.account, createTime: a.createTime, updateTime: a.updateTime};
                    a.isBlacked ? o.push(b) : p.push(b), a.isMuted ? q.push(b) : r.push(b)
                }), g.warn("parse blacklist", f(o), o, "delete", f(p), p), g.warn("parse mutelist", f(q), q, "delete", f(r), r), m.length ? (n = !0, e = a.content.timetag) : n = !1
            }

            function c(b, c) {
                a.promise = new Promise(function (a, f) {
                    function h() {
                        l ? (d(), a(), b()) : j.getRelations().then(function (c) {
                            o = c[0], q = c[1], d(), a(), b()
                        }).then(void 0, function (a) {
                            a._msg = "get relations error", f(a), c(a)
                        })
                    }

                    n ? j.mergeRelations(o, p, q, r, e).then(function () {
                        h()
                    }).then(void 0, function (a) {
                        a._msg = "merge relations error", f(a), c(a)
                    }) : (g.warn("no merge relations"), h())
                }).then(void 0, function (a) {
                    throw a._msg = "merge relations data error", c(a), a
                })
            }

            function d() {
                i.timetags.relations = e, o.invalid = p, q.invalid = r, l ? (i.syncResult.blacklist = o, i.syncResult.mutelist = q, i.syncResult.invalidBlacklist = p, i.syncResult.invalidMutelist = r) : (g.warn("get relations", o, q), a.obj.blacklist = o, a.obj.mutelist = q)
            }

            var e, i = this, j = i.db, k = a.error, l = i.packetFromSync(a), m = a.content.specialRelations, n = !0, o = [], p = [], q = [], r = [], s = new Promise(function (a, e) {
                k ? e(k) : (b(), j.enable ? c(a, e) : (d(), a()))
            });
            l && (s.cmd = "relations", i.syncPromiseArray.push(s))
        }, d.markInBlacklist = function (a, b) {
            var c = this, d = c.db;
            a.record = {
                account: a.account,
                updateTime: +new Date
            }, d.enable && d.markInBlacklist(a), b && (g.info("on sync markInBlacklist", a), c.options.onsyncmarkinblacklist(a))
        }, d.markInMutelist = function (a, b) {
            var c = this, d = c.db;
            a.record = {
                account: a.account,
                updateTime: +new Date
            }, d.enable && d.markInMutelist(a), b && (g.info("on sync markInMutelist", a), c.options.onsyncmarkinmutelist(a))
        }, d.mergeUser = function (a) {
            this.userSet[a.account] = a
        }
    }, function (a, b, c) {
        function d() {
        }

        var e = c(10);
        d.parse = function (a) {
            var b = e.copy(a);
            return b.isBlacked = "1" === b.isBlacked, b.isMuted = "1" === b.isMuted, b.createTime = +b.createTime, b.updateTime = +b.updateTime, b
        }, a.exports = d
    }, function (a, b, c) {
        function d(a) {
            e.merge(this, a), e.notundef(this.gender) && (e.verifyParamValid("gender", this.gender, d.validGenders), this.gender = f[this.gender]), e.notundef(this.email) && "" !== this.email && e.verifyEmail("email", this.email), e.notundef(this.birth) && "" !== this.birth && e.verifyBirth("birth", this.birth), e.notundef(this.tel) && "" !== this.tel && e.verifyTel("tel", this.tel)
        }

        var e = c(10), f = {unknown: 0, male: 1, female: 2}, g = {0: "unknown", 1: "male", 2: "female"};
        d.reverse = function (a) {
            var b = e.filterObj(a, "account nick avatar sign gender email birth tel custom createTime updateTime");
            return e.notundef(b.gender) && (b.gender = g[b.gender]), e.notundef(b.createTime) && (b.createTime = +b.createTime), e.notundef(b.updateTime) && (b.updateTime = +b.updateTime), b
        }, d.reverseUsers = function (a) {
            return a.map(function (a) {
                return d.reverse(a)
            })
        }, d.validGenders = Object.keys(f), a.exports = d
    }, function (a, b, c) {
        var d = c(88).fn, e = c(10), f = e.objs2accounts, g = c(24), h = c(111), i = c(109);
        d.processFriend = function (a) {
            var b = this, c = a.obj, d = a.content, e = a.error;
            switch (a.cmd) {
                case"friendRequest":
                    b.updateFriendSysMsg(a), e || b.onFriendRequest(c);
                    break;
                case"syncFriendRequest":
                    b.onFriendRequest(d, !0);
                    break;
                case"deleteFriend":
                    e || b.onDeleteFriend(c);
                    break;
                case"syncDeleteFriend":
                    b.onDeleteFriend(d, !0);
                    break;
                case"updateFriend":
                    e || b.onUpdateFriend(c);
                    break;
                case"syncUpdateFriend":
                    b.onUpdateFriend(d.friend, !0);
                    break;
                case"getFriends":
                    b.onFriends(a);
                    break;
                case"syncFriends":
                    b.onFriends(a);
                    break;
                case"syncFriendUsers":
                    b.onFriendUsers(a)
            }
        }, d.onFriends = function (a) {
            function b() {
                n && m.forEach(function (a) {
                    a = h.reverse(a), a.valid ? o.push(a) : p.push(a)
                }), g.warn("parse friends", f(o), o, "delete", f(p), p), m.length ? (n = !0, e = a.content.timetag) : n = !1
            }

            function c(b, c) {
                a.promise = new Promise(function (a, f) {
                    function h() {
                        l ? (d(), a(), b()) : j.getFriends().then(function (c) {
                            o = c, d(), a(), b()
                        }).then(void 0, function (a) {
                            a._msg = "get friends error", f(a), c(a)
                        })
                    }

                    n ? j.mergeFriends(o, p, e).then(function () {
                        h()
                    }).then(void 0, function (a) {
                        a._msg = "merge friends error", f(a), c(a)
                    }) : (g.warn("no merge friends"), h())
                }).then(void 0, function (a) {
                    throw a._msg = "merge friends data error", c(a), a
                })
            }

            function d() {
                i.timetags.friends = e, o.invalid = p, l ? (i.syncResult.friends = o, i.syncResult.invalidFriends = p) : (g.warn("get friends", f(o), o), a.obj = o)
            }

            var e, i = this, j = i.db, k = a.error, l = i.packetFromSync(a), m = a.content.friends, n = !0, o = [], p = [], q = new Promise(function (a, e) {
                k ? e(k) : (b(), j.enable ? c(a, e) : (d(), a()))
            });
            l && (q.cmd = "friends", i.syncPromiseArray.push(q))
        }, d.onFriendRequest = function (a, b) {
            var c = Promise.resolve(), d = this, e = d.db, f = a.type;
            f = a.type = h.getTypeFromByte(f) || f;
            var g = "addFriend" === f || "passFriendApply" === f;
            if (g) {
                var i = a.friend = h.assembleFriend(a.account);
                e.enable && (c = e.putFriend(i))
            }
            return b && d.onSyncFriendAction(a), c
        }, d.onSyncFriendAction = function (a) {
            g.info("on sync friendAction", a), this.options.onsyncfriendaction(a)
        }, d.onDeleteFriend = function (a, b) {
            var c = Promise.resolve(), d = this, e = d.db;
            return e.enable && (c = e.deleteFriend(a.account)), b && (a.type = "deleteFriend", d.onSyncFriendAction(a)), c
        }, d.onUpdateFriend = function (a, b) {
            var c = this, d = c.db, e = h.reverse(a);
            d.enable && d.updateFriend(e), b && c.onSyncFriendAction({type: "updateFriend", friend: e})
        }, d.onFriendUsers = function (a) {
            var b = this, c = b.db, d = a.content, e = d.users.map(function (a) {
                return i.reverse(a)
            });
            g.warn("parse users", f(e), e);
            var h = d.timetag, j = Promise.resolve();
            c.enable && (j = c.mergeFriendUsers(e, h)), b.timetags.friendUsers = h, j.cmd = "friendUsers", b.syncPromiseArray.push(j), b.syncResult.users = e
        }, d.updateFriendSysMsg = function (a) {
            var b, c, d = a.obj, f = a.error;
            if (a.obj.idServer) {
                if (f)b = "error", f = e.filterObj(f, "code message"); else {
                    var g = d.type;
                    switch (g = h.getTypeFromByte(g) || g) {
                        case"passFriendApply":
                            b = "passed";
                            break;
                        case"rejectFriendApply":
                            b = "rejected"
                    }
                }
                c = {idServer: d.idServer, state: b}, f && (c.error = f), this.updateSysMsg(c)
            }
        }
    }, function (a, b, c) {
        function d(a) {
            e.verifyOptions(a, "account"), e.verifyParamAtLeastPresentOne(a, "alias custom"), this.account = a.account, f(a.alias) && (this.alias = a.alias), f(a.custom) && (this.custom = a.custom)
        }

        var e = c(10), f = e.notundef, g = {
            addFriend: 1,
            applyFriend: 2,
            passFriendApply: 3,
            rejectFriendApply: 4
        }, h = {1: "addFriend", 2: "applyFriend", 3: "passFriendApply", 4: "rejectFriendApply"};
        d.reverse = function (a) {
            var b = e.filterObj(a, "account alias custom createTime updateTime");
            return f(a.flag) && (b.valid = "1" === a.flag), f(b.createTime) && (b.createTime = +b.createTime), f(b.updateTime) && (b.updateTime = +b.updateTime), b
        }, d.validTypes = function () {
            return Object.keys(g)
        }, d.getByteFromType = function (a) {
            return g[a]
        }, d.getTypeFromByte = function (a) {
            return h[a]
        }, d.assembleFriend = function (a) {
            var b = +new Date;
            return {account: a, alias: "", createTime: b, custom: "", updateTime: b, valid: !0}
        }, a.exports = d
    }, function (a, b, c) {
        var d = c(88).fn, e = c(10), f = e.objs2accounts, g = e.teams2ids, h = c(24), i = c(113), j = c(95);
        d.processTeam = function (a) {
            var b, c, d, e = this, f = a.error;
            switch (a.cmd) {
                case"createTeam":
                    b = a.obj.team, f || (b = a.content.team), b = i.reverse(b), a.obj.team = b, d = j.assembleOwner(b), a.obj.owner = d, f || e.onCreateTeam(b, d);
                    break;
                case"syncCreateTeam":
                    b = i.reverse(a.content.team), h.info("on sync createTeam", b), d = j.assembleOwner(b), e.options.onsynccreateteam(b, d), e.onCreateTeam(b, d);
                    break;
                case"sendTeamMsg":
                    e.onSendMsg(a);
                    break;
                case"teamMsg":
                    e.onMsg(a);
                    break;
                case"teamMsgs":
                    e.onMsgs(a);
                    break;
                case"addTeamMembers":
                case"removeTeamMembers":
                case"leaveTeam":
                case"dismissTeam":
                case"addTeamManagers":
                case"removeTeamManagers":
                case"transferTeam":
                    break;
                case"updateInfoInTeam":
                    c = a.obj, c.account = e.account, c.id = j.genId(c.teamId, c.account), c = j.reverse(c), a.obj = c, e.onTeamMember(c);
                    break;
                case"updateNickInTeam":
                    a.obj = j.reverse(a.obj);
                    break;
                case"updateTeam":
                    a.obj = i.reverse(a.obj);
                    break;
                case"applyTeam":
                    a.error || (a.obj = i.reverse(a.content.team));
                    break;
                case"passTeamApply":
                    e.updateTeamSysMsgState(a, "passed");
                    break;
                case"rejectTeamApply":
                    e.updateTeamSysMsgState(a, "rejected");
                    break;
                case"acceptTeamInvite":
                    e.updateTeamSysMsgState(a, "passed"), a.error || (a.obj = i.reverse(a.content.team));
                    break;
                case"rejectTeamInvite":
                    e.updateTeamSysMsgState(a, "rejected");
                    break;
                case"getTeam":
                    a.error || (a.obj = i.reverse(a.content.team));
                    break;
                case"getTeams":
                    e.onTeams(a);
                    break;
                case"getTeamMembers":
                    e.onTeamMembers(a);
                    break;
                case"syncTeams":
                    e.onTeams(a);
                    break;
                case"syncTeamMembers":
                    e.onTeamMembers(a);
                    break;
                case"getTeamHistoryMsgs":
                case"searchTeamHistoryMsgs":
                    e.onHistoryMsgs(a);
                    break;
                case"syncSendTeamMsg":
                    e.onMsg(a);
                    break;
                case"syncUpdateTeamMember":
                    c = j.reverse(a.content.teamMember), h.info("on update teamMember", c), e.options.onupdateteammember(c), e.onTeamMember(c)
            }
        }, d.onCreateTeam = function (a, b) {
            var c = this.db;
            c.enable && (c.putTeam(a), c.putTeamMembers(b))
        }, d.onTeams = function (a) {
            function b() {
                m && l.forEach(function (a) {
                    a = i.reverse(a), a.validToCurrentUser ? n.push(a) : o.push(a)
                }), h.warn("parse teams", g(n), n, "invalid", g(o), o), l.length ? (m = !0, e = a.content.timetag) : m = !1
            }

            function c(b, c) {
                a.promise = new Promise(function (a, f) {
                    function g() {
                        k ? (d(), a(), b()) : j.getTeams().then(function (c) {
                            n = c, d(), a(), b()
                        }).then(void 0, function (a) {
                            a._msg = "get teams error", f(a), c(a)
                        })
                    }

                    m ? j.mergeTeams(n, o, e).then(function () {
                        g()
                    }).then(void 0, function (a) {
                        a._msg = "merge teams error", f(a), c(a)
                    }) : (h.warn("no merge teams"), g())
                }).then(void 0, function (a) {
                    throw a._msg = "merge teams data error", c(a), a
                })
            }

            function d() {
                f.timetags.teams = e, n.invalid = o, k ? (f.syncResult.teams = n, f.syncResult.invalidTeams = o) : (h.warn("get teams", g(n), n), a.obj = n)
            }

            a.content = a.content || {};
            var e, f = this, j = f.db, k = f.packetFromSync(a), l = a.content.teams || [], m = !0, n = [], o = [];
            if (a.error)switch (a.error.code) {
                case 803:
                    a.error = null, m = !1
            }
            var p = new Promise(function (e, f) {
                a.error ? f(a.error) : (b(), j.enable ? c(e, f) : (d(), e()))
            });
            k && (p.cmd = "teams", f.syncPromiseArray.push(p))
        }, d.onTeamMembers = function (a) {
            function b() {
                n && m.forEach(function (a) {
                    a = j.reverse(a), a.valid ? o.push(a) : p.push(a)
                }), h.warn("parse members", g, f(o), o, "invalid", f(p), p), m.length ? (n = !0, e = a.content.timetag) : n = !1
            }

            function c(b, c) {
                a.promise = new Promise(function (a, f) {
                    function i() {
                        l ? (d(), a(), b()) : k.getTeamMembers(g).then(function (c) {
                            o = c, d(), a(), b()
                        }).then(void 0, function (a) {
                            a._msg = "get members error", f(a), c(a)
                        })
                    }

                    n ? k.mergeTeamMembers(g, o, p, e).then(function () {
                        i()
                    }).then(void 0, function (a) {
                        a._msg = "merge members error " + g, f(a), c(a)
                    }) : (h.warn("no merge members", g), i())
                }).then(void 0, function (a) {
                    throw a._msg = "merge members data error", c(a), a
                })
            }

            function d() {
                o.invalid = p, l ? (i.syncTeamMembersResult[g] = o, i.syncTeamMembersResult[g + "-invalid"] = p, i.timetags["team-" + g] = e) : (h.warn("get members", g, f(o), o), a.obj = {
                    teamId: g,
                    members: o
                })
            }

            a.content = a.content || {};
            var e, g, i = this, k = i.db, l = i.packetFromSync(a), m = a.content.members || [], n = !0, o = [], p = [];
            if (a.obj && (g = a.obj.teamId), g || (g = a.content.teamId), g = "" + g, a.error)switch (a.error.code) {
                case 406:
                    a.error = null, n = !1
            }
            var q = new Promise(function (e, f) {
                a.error ? f(a.error) : (b(), k.enable ? c(e, f) : (d(), e()))
            });
            l && (q.cmd = g, i.syncTeamMembersPromiseArray.push(q))
        }, d.onTeamMember = function (a) {
            h.warn("parse update member", a);
            var b = this.db;
            b.enable && b.updateTeamMember(a)
        }, d.updateTeamSysMsgState = function (a, b) {
            var c, d = a.error;
            d && (b = "error", d = e.filterObj(d, "code message")), c = {
                idServer: a.obj.idServer,
                state: b
            }, d && (c.error = d), this.updateSysMsg(c)
        }
    }, function (a, b, c) {
        function d(a) {
            switch (e.verifyOptions(a, "action"), a.action) {
                case"create":
                    e.verifyOptions(a, "teamId", !1), e.verifyOptions(a, "type name"), e.verifyParamValid("type", a.type, k);
                    break;
                case"update":
                    e.verifyOptions(a, "teamId"), e.verifyOptions(a, "type", !1)
            }
            f(a.teamId) && (this.teamId = a.teamId), f(a.type) && (this.type = g[a.type]), f(a.name) && (this.name = "" + a.name), f(a.intro) && (this.intro = "" + a.intro), f(a.announcement) && (this.announcement = "" + a.announcement), f(a.joinMode) && (e.verifyParamValid("joinMode", a.joinMode, l), this.joinMode = i[a.joinMode]), f(a.custom) && (this.custom = "" + a.custom)
        }

        var e = c(10), f = e.notundef, g = {normal: 0, advanced: 1}, h = {0: "normal", 1: "advanced"}, i = {
            noVerify: 0,
            needVerify: 1,
            rejectAll: 2
        }, j = {0: "noVerify", 1: "needVerify", 2: "rejectAll"};
        d.reverse = function (a) {
            var b = e.filterObj(a, "teamId name type owner level selfCustom valid memberNum memberUpdateTime createTime updateTime validToCurrentUser intro announcement joinMode bits custom serverCustom");
            return f(b.teamId) && (b.teamId = "" + b.teamId), f(b.type) && (b.type = h[b.type]), f(b.level) && (b.level = +b.level), f(b.valid) && (b.valid = "1" === b.valid), f(b.memberNum) && (b.memberNum = +b.memberNum), f(b.memberUpdateTime) && (b.memberUpdateTime = +b.memberUpdateTime), f(b.createTime) && (b.createTime = +b.createTime), f(b.updateTime) && (b.updateTime = +b.updateTime), f(b.validToCurrentUser) && (b.validToCurrentUser = "1" === b.validToCurrentUser), f(b.joinMode) && (b.joinMode = j[b.joinMode]), b
        };
        var k = Object.keys(g), l = Object.keys(i);
        a.exports = d
    }, function (a, b, c) {
        var d = c(88).fn;
        d.processNotify = function (a) {
            var b = this;
            switch (a.cmd) {
                case"syncOfflineMsgs":
                    b.onOfflineMsgs(a);
                    break;
                case"batchMarkRead":
                    break;
                case"syncOfflineSysMsgs":
                    b.onOfflineSysMsgs(a);
                    break;
                case"syncRoamingMsgs":
                    b.onRoamingMsgs(a);
                    break;
                case"syncOfflineFilterMsgs":
                    b.onOfflineMsgs(a, !0);
                    break;
                case"syncOfflineFilterSysMsgs":
                    b.onOfflineSysMsgs(a, !0);
                    break;
                case"syncMsgReceipts":
                    b.onOfflineMsgReceipts(a)
            }
        }
    }, function (a, b, c) {
        var d = c(88).fn, e = c(10), f = e.undef, g = c(48), h = c(24), i = c(95), j = c(106), k = c(100);
        d.processMsg = function (a) {
            var b = this;
            switch (a.cmd) {
                case"sendMsg":
                    b.onSendMsg(a);
                    break;
                case"msg":
                    b.onMsg(a);
                    break;
                case"sysMsg":
                    b.onSysMsg(a);
                    break;
                case"sendCustomSysMsg":
                    b.onSendSysMsg(a);
                    break;
                case"getHistoryMsgs":
                case"searchHistoryMsgs":
                    b.onHistoryMsgs(a);
                    break;
                case"syncSendMsg":
                    b.onMsg(a);
                    break;
                case"deleteSessions":
                    b.onDeleteSessions(a);
                    break;
                case"sendMsgReceipt":
                    b.onSendMsgReceipt(a);
                    break;
                case"msgReceipt":
                    b.onMsgReceipt(a)
            }
        }, d.onRoamingMsgs = function (a) {
            var b = this, c = b.message, d = c.Message, e = d.getMaxTimetag, f = c.reverseMsgs(a.content.msgs), g = e(f);
            f = f.reverse(), f = d.deduplication(f);
            var i = f[0], k = i.sessionId, l = j.genSessionByMsgs("roamingMsgs", d, f);
            b.cacheSyncedSession(l);
            var m = b.putMsg(f, "roamingMsgs").then(function (a) {
                f = a, h.warn("sync roamingMsgs", k, f.length, f), b.syncResult.roamingMsgs = b.syncResult.roamingMsgs || [], b.syncResult.roamingMsgs.push({
                    sessionId: k,
                    scene: i.scene,
                    to: i.target,
                    msgs: f,
                    timetag: g
                })
            });
            m.cmd = "roamingMsgs-" + k, b.syncPromiseArray.push(m)
        }, d.onOfflineMsgs = function (a, b) {
            function c() {
                if (m.length) {
                    var a = f.getMaxTimetag(m), b = m[0].scene, c = m[0].target;
                    d.markMsgRead(m), m = m.reverse(), m = f.deduplication(m);
                    var e = j.genSessionByMsgs("offlineMsgs", f, l);
                    d.cacheSyncedSession(e), k = d.putMsg(m, "offlineMsgs").then(function (e) {
                        m = e, h.warn("sync", o, n, m.length, m), d.syncResult[o] = d.syncResult[o] || [], d.syncResult[o].push({
                            sessionId: n,
                            scene: b,
                            to: c,
                            msgs: m,
                            timetag: a
                        })
                    }), k.cmd = "offlineMsgs-" + n, d.syncPromiseArray.push(k)
                }
            }

            var d = this, e = d.message, f = e.Message, g = null;
            b && (g = {filter: !0});
            var i, k, l = e.reverseMsgs(a.content.msgs, {modifyObj: g}), m = [], n = "", o = b ? "offlineFilterMsgs" : "offlineMsgs";
            l.forEach(function (a) {
                i = a.sessionId, i !== n ? (c(), m = [], m.push(a), n = i) : m.push(a)
            }), c()
        }, d.completeMsg = function (a) {
            var b = this;
            return a.from = b.account, a.fromNick = b.myInfo && b.myInfo.nick, a.fromClientType = "Web", a.fromDeviceId = g.deviceId, a.time || (a.time = +new Date), a
        }, d.storeSendMsg = function (a) {
            var b = this;
            if (!b.syncing) {
                var c = b.putMsg(a, "sendMsg");
                return b.msgPromise = b.msgPromise.then(function () {
                    return c
                }), c
            }
            b.unhandledMsgs.push({type: "sendMsg", msg: a})
        }, d.updateSendMsgError = function (a) {
            var b = this;
            if (!b.syncing) {
                var c = b.updateMsg(a);
                return b.msgPromise = b.msgPromise.then(function () {
                    return c
                }), c
            }
            b.unupdatedMsgs.push(a)
        }, d.onSendMsg = function (a, b) {
            var c = this, d = a.obj.msg;
            c.completeMsg(d), a.error ? d.status = "fail" : (d.idServer = a.content.msg.idServer, d.time = +a.content.msg.time, d.status = "success", c.resolveMsgReceiptTask(d)), d = c.message.reverse(d), b && (d.filter = !0), a.obj = d, c.syncing ? c.unupdatedMsgs.push(d) : c.msgPromise = Promise.all([c.msgPromise, a.obj.promise]).then(function (a) {
                return a.length || (d.resend = !0), c.updateMsg(d)
            })
        }, d.onMsgs = function (a) {
            var b = this;
            b.message.reverseMsgs(a.content.msgs, {
                mapper: function (a) {
                    b.handleMsg(a)
                }
            })
        }, d.onMsg = function (a, b) {
            var c = this, d = c.message.reverse(a.content.msg);
            b && (d.filter = !0), c.syncing ? c.unhandledMsgs.push({type: "onMsg", msg: d}) : c.handleMsg(d)
        }, d.handleMsg = function (a) {
            var b = this, c = a.time;
            b.markMsgRead(a), b.msgPromise = b.msgPromise.then(function () {
                return b.putMsg(a, "onMsg")
            }).then(function (d) {
                return a = d[0], b.updateRoamingMsgTimetag(c)
            }).then(function () {
                return a ? b.checkUserUpdate(a) : void 0
            }).then(function () {
                if (a) {
                    var c = a.type;
                    switch (h.log("handle " + a.scene + " " + c + " msg" + ("notification" === c ? " " + a.attach.type : ""), a), c) {
                        case"notification":
                            return b.onTeamNotificationMsg(a)
                    }
                }
            }).then(function () {
                a && (h.info("on msg", a), setTimeout(function () {
                    b.options.onmsg(e.copy(a))
                }, 0))
            }).then(void 0, function (a) {
                a._msg = "handle msg error", b.onDBError(a)
            })
        }, d.putMsg = function (a, b) {
            function c(a) {
                "roamingMsgs" !== b && "offlineMsgs" !== b || d.cacheSyncedSession(a)
            }

            if (e.isArray(a) || (a = [a]), a[0].filter)return Promise.resolve(a);
            var d = this, g = d.db, h = g.enable, i = Promise.resolve(), k = d.message.Message, l = k.getLastMsg(a), m = l.flow, n = j.genSessionByMsgs(b, k, a), o = n.id !== d.currSessionId, p = !1, q = [];
            return c(n), i = i.then(function () {
                return h ? g.putMsg(a) : a
            }).then(function (b) {
                var c = [];
                a.forEach(function (a) {
                    d.checkMsgUnique(a) && c.push(a)
                }), a = c, q = h ? b : a
            }), i = i.then(function () {
                if (a.length && (l = k.getLastMsg(a), n = j.genSessionByMsgs(b, k, a), c(n), h)) {
                    if (q.length)return g.putSession(n);
                    p = !0, q = a
                }
            }), ("offlineMsgs" === b || "onMsg" === b && "in" === m && o) && (i = i.then(function (a) {
                if (q.length) {
                    h && a ? n = a : (a = d.sessionSet[n.id], a && (n.unread = a.unread || 0)), c(n), n.unread = n.unread || 0;
                    var b = 0;
                    return q.forEach(function (a) {
                        "notification" !== a.type && (f(a.isUnreadable) || a.isUnreadable) && b++
                    }), n.unread += b, c(n), h && !p ? g.updateSession({id: n.id, unread: n.unread}) : void 0
                }
            })), "onMsg" === b && (i = i.then(function () {
                a.length && d.onUpdateSession(n)
            })), i.then(function () {
                return a
            })
        }, d.cacheSyncedSession = function (a) {
            if (a) {
                var b = this;
                b.syncResult.sessions = b.syncResult.sessions || {};
                var c = a.id;
                b.syncResult.sessions[c] = e.merge(b.syncResult.sessions[c], a)
            }
        }, d.checkMsgUnique = e.genCheckUniqueFunc("idClient"), d.updateMsg = function (a) {
            if (a.filter)return Promise.resolve(a);
            var b = this, c = b.db, d = "success" === a.status, e = j.genSessionByMsg(a);
            return b.onUpdateSession(e), c.enable ? c.updateMsg(a).then(function (a) {
                var b = c.updateSession(e), f = Promise.resolve();
                return d && (f = c.updateRoamingMsgTimetag(a.time)), Promise.all([b, f])
            }) : (d && (b.timetags.roamingMsgs = a.time), Promise.resolve(a))
        }, d.updateRoamingMsgTimetag = function (a) {
            var b = this, c = b.db;
            return c.enable ? c.updateRoamingMsgTimetag(a) : (b.timetags.roamingMsgs = a, Promise.resolve(a))
        }, d.checkUserUpdate = function (a) {
            var b = this, c = a.from;
            return c === b.account ? Promise.resolve() : new Promise(function (d) {
                function f() {
                    b.api.getUser({
                        account: c, sync: !0, done: function (a, c) {
                            a || setTimeout(function () {
                                h.info("on update user", c.account, c), b.options.onupdateuser(c)
                            }, 0), d()
                        }
                    })
                }

                var g = b.userSet[c];
                if (g) {
                    var i = +g.updateTime;
                    e.isNumber(i) && i < a.userUpdateTime ? f() : d()
                } else f()
            })
        }, d.processUnsettledMsgs = function () {
            var a = this;
            a.unhandledMsgs.forEach(function (b) {
                var c = b.msg;
                switch (b.type) {
                    case"onMsg":
                        a.handleMsg(c);
                        break;
                    case"sendMsg":
                        a.msgPromise = a.msgPromise.then(function () {
                            return a.putMsg(c)
                        })
                }
            }), a.unupdatedMsgs.forEach(function (b) {
                a.msgPromise = a.msgPromise.then(function () {
                    return a.updateMsg(b)
                })
            }), a.resetUnsettledMsgs()
        }, d.onTeamNotificationMsg = function (a) {
            var b = this, c = b.db, d = a.attach.type, e = a.from, f = a.to, g = a.time, h = a.attach.team, i = a.attach.account, j = a.attach.accounts;
            switch (d) {
                case"updateTeam":
                    if (!c.enable)return;
                    return h.updateTime = g, c.updateTeam(h);
                case"addTeamMembers":
                    return b.onAddTeamMembers(a, h, j);
                case"removeTeamMembers":
                    return b.onRemoveTeamMembers(h, f, j);
                case"acceptTeamInvite":
                    return b.onAddTeamMembers(a, h, [e]);
                case"passTeamApply":
                    return b.onAddTeamMembers(a, h, [i]);
                case"addTeamManagers":
                    return b.updateTeamManagers(a, f, j, !0, g);
                case"removeTeamManagers":
                    return b.updateTeamManagers(a, f, j, !1, g);
                case"leaveTeam":
                    return b.onRemoveTeamMembers(h, f, [e]);
                case"dismissTeam":
                    if (!c.enable)return;
                    return c.dismissTeam(f, g);
                case"transferTeam":
                    return b.transferTeam(a, h, e, i)
            }
        }, d.onAddTeamMembers = function (a, b, c) {
            var d = this, e = d.db, f = b.teamId, g = i.assembleMembers(b, c), j = -1 === c.indexOf(d.account);
            if (j && (a.attach.members = g), e.enable) {
                var k, l = e.putTeam(b);
                return j ? k = e.putTeamMembers(g) : (h.warn("join team", f), l = new Promise(function (a) {
                    d.api.getTeamMembers({
                        teamId: f, sync: !0, done: function () {
                            a()
                        }
                    })
                })), Promise.all([k, l])
            }
        }, d.onRemoveTeamMembers = function (a, b, c) {
            var d = this, e = d.db;
            if (e.enable) {
                if (-1 === c.indexOf(d.account)) {
                    var f = e.removeTeamMembersByAccounts(b, c), g = Promise.resolve();
                    return a && (g = e.putTeam(a)), Promise.all([f, g])
                }
                return e.leaveTeam(b)
            }
        }, d.updateTeamManagers = function (a, b, c, d, e) {
            var f = this.db;
            return a.attach.members = c.map(function (a) {
                return {id: i.genId(b, a), type: d ? "manager" : "normal", updateTime: e}
            }), f.enable ? f.updateTeamManagers(b, c, d, e) : void 0
        }, d.transferTeam = function (a, b, c, d) {
            var e = this.db, f = b.teamId, g = b.memberUpdateTime, h = {
                id: i.genId(f, c),
                type: "normal",
                updateTime: g
            }, j = {id: i.genId(f, d), type: "owner", updateTime: g};
            return a.attach.members = [h, j], e.enable ? e.transferTeam(b, c, d) : void 0
        }, d.onHistoryMsgs = function (a) {
            a.error || (a.obj.msgs = this.message.reverseMsgs(a.content.msgs))
        }, d.isFilterMsgs = function (a) {
            return !!a[0].filter
        }, d.splitMsgs = function (a, b, c, d) {
            a.forEach(function (a) {
                if (a.filter)d.push(a); else switch (a.scene) {
                    case"p2p":
                        b.push(a);
                        break;
                    case"team":
                        c.push(a)
                }
            })
        }, d.markMsgRead = function (a, b) {
            e.isArray(a) || (a = [a]);
            var c = this, d = c.db;
            if (d.enable || c.options.autoMarkRead || b) {
                var f = [], g = [], h = [];
                c.splitMsgs(a, f, g, h), c.markP2pMsgsRead(f), c.markTeamMsgsRead(g), c.markFilterMsgsRead(h)
            }
        }, d.markP2pMsgsRead = function (a) {
            if (a.length) {
                var b = k.idMap.msg.id, c = k.idMap.msg.msg;
                this.doMarkMsgsRead(b, c, a)
            }
        }, d.markTeamMsgsRead = function (a) {
            if (a.length) {
                var b = k.idMap.team.id, c = k.idMap.team.teamMsg;
                this.doMarkMsgsRead(b, c, a)
            }
        }, d.markFilterMsgsRead = function (a) {
            if (a.length) {
                var b = k.idMap.filter.id, c = k.idMap.filter.filterMsg;
                this.doMarkMsgsRead(b, c, a)
            }
        }, d.markSysMsgRead = function (a, b) {
            e.isArray(a) || (a = [a]);
            var c = this, d = c.db;
            if (d.enable || c.options.autoMarkRead || b) {
                var f, g;
                c.isFilterMsgs(a) ? (f = k.idMap.filter.id, g = k.idMap.filter.filterSysMsg) : (f = k.idMap.msg.id, g = k.idMap.msg.sysMsg), c.doMarkMsgsRead(f, g, a)
            }
        }, d.doMarkMsgsRead = function (a, b, c) {
            c.length && this.sendCmd("batchMarkRead", {
                sid: a, cid: b, ids: c.map(function (a) {
                    return a.idServer
                })
            })
        }
    }, function (a, b, c) {
        var d = c(88).fn;
        d.onOfflineMsgReceipts = function (a) {
            var b, c = this, d = c.db, e = a.content.msgReceipts, f = c.syncResult.msgReceipts = [], g = [], h = "msgReceipts", i = c.syncResult.sessions || {};
            e.forEach(function (a) {
                a.time = +a.time;
                var e = a.sessionId = "p2p-" + a.from;
                h += "-" + e, b = Promise.resolve();
                var j = i[e];
                d.enable ? b = d.getSession(e).then(function (b) {
                    if (b = b || j, b && c.shouldUpdateSessionFromMsgReceipt(b, a)) {
                        var e = c.genSessionFromMsgReceipt(b, a);
                        return d.putSession(e).then(function (a) {
                            a && c.cacheSyncedSession(a)
                        })
                    }
                }) : j && f.push(a), g.push(b)
            }), b = Promise.all(g).then(function () {
                return d.enable ? d.updateMsgReceiptsTimetag(a.content.timetag) : void 0
            }), b.cmd = h, c.syncPromiseArray.push(b)
        }, d.mergeSessionAndMsgReceipts = function (a, b) {
            var c = this, d = {};
            return a = a || [], b = b || [], a.forEach(function (a) {
                d[a.id] = a
            }), b.forEach(function (b) {
                var e = d[b.sessionId];
                if (c.shouldUpdateSessionFromMsgReceipt(e, b)) {
                    var f = c.genSessionFromMsgReceipt(e, b);
                    a = c.api.mergeSessions(a, f)
                }
            }), a
        }, d.shouldUpdateSessionFromMsgReceipt = function (a, b) {
            return !a || !a.msgReceiptServerTime || b.time > a.msgReceiptServerTime
        }, d.genSessionFromMsgReceipt = function (a, b) {
            var c = b.time, d = {id: b.sessionId, msgReceiptTime: c, msgReceiptServerTime: c};
            return a && a.updateTime || (d.updateTime = c), d
        }, d.onMsgReceipt = function (a) {
            var b = this, c = b.db, d = a.content.msgReceipt;
            d.time = +d.time;
            var e = d.idClient, f = Promise.resolve();
            c.enable && e && (f = c.getMsgByIdClient(e)), f.then(function (a) {
                var c;
                if (a) {
                    if ("success" !== a.status)return void(b.msgReceiptTasks[e] = d);
                    c = a.time
                } else c = d.time;
                d.msgReceiptTime = c, b.updateSessionMsgReceiptTime(d)
            })
        }, d.resolveMsgReceiptTask = function (a) {
            var b = this, c = b.msgReceiptTasks[a.idClient];
            c && (c.msgReceiptTime = a.time, this.updateSessionMsgReceiptTime(c))
        }, d.updateSessionMsgReceiptTime = function (a) {
            var b = this, c = b.db, d = {
                id: "p2p-" + a.from,
                msgReceiptTime: a.msgReceiptTime,
                msgReceiptServerTime: a.time
            };
            c.enable && c.putSession(d), b.onUpdateSession(d)
        }, d.onSendMsgReceipt = function (a) {
            var b = this;
            if (!a.error) {
                var c = a.obj.msgReceipt, d = +c.time, e = +a.content.msgReceipt.time, f = b.sessionSet["p2p-" + c.to];
                f.msgReceiptSendTime = Math.min(d, e)
            }
        }, d.shouldSendMsgReceipt = function (a) {
            if (a && "p2p" === a.scene && "success" === a.status) {
                var b = this.sessionSet[a.sessionId];
                if (b) {
                    var c = b.msgReceiptSendTime;
                    return !c || c < a.time
                }
            }
            return !1
        }, d.isMsgRemoteRead = function (a) {
            var b = this;
            if (a && "p2p" === a.scene && "out" === a.flow && "success" === a.status) {
                var c = b.sessionSet[a.sessionId];
                if (c && c.msgReceiptTime)return a.time <= c.msgReceiptTime
            }
            return !1
        }
    }, function (a, b, c) {
        var d = c(88).fn, e = c(10), f = c(24), g = c(118);
        d.splitSysMsgs = function (a, b) {
            for (var c, d = a.length - 1; d >= 0; d--)c = a[d], g.isCustom(c) && (a.splice(d, 1), b.push(c))
        }, d.onOfflineSysMsgs = function (a, b) {
            var c = this, d = a.content.sysMsgs.map(function (a) {
                return a = g.reverse(a), b && (a.filter = !0), a
            });
            d = d.reverse(), c.markSysMsgRead(d);
            var e = [];
            c.splitSysMsgs(d, e);
            var h = b ? "offlineFilterSysMsgs" : "offlineSysMsgs", i = b ? "offlineFilterCustomSysMsgs" : "offlineCustomSysMsgs";
            if (d.length) {
                var j = c.putSysMsg(d, "offlineSysMsgs").then(function (a) {
                    d = a, d.length && (f.warn("sync", h, d.length, d), c.syncResult[h] = d)
                });
                j.cmd = "sysMsgs", c.syncPromiseArray.push(j)
            }
            e.length && (f.warn("sync " + i, e), c.syncResult[i] = e)
        }, d.onSendSysMsg = function (a, b) {
            var c = this, d = a.obj;
            c.completeSysMsg(d), d.status = a.error ? "fail" : "success", d = g.reverse(d), b && (a.obj.filter = !0), a.obj = d
        }, d.completeSysMsg = function (a) {
            return a.from = this.account, a
        }, d.onSysMsg = function (a, b) {
            var c = this, d = g.reverse(a.content.sysMsg);
            c.markSysMsgRead(d), b && (d.filter = !0), g.isCustom(d) ? (f.info("on customSysMsg", d), c.options.oncustomsysmsg(d)) : c.syncing ? c.unhandledSysMsgs.push(d) : c.handleSysMsg(d)
        }, d.handleSysMsg = function (a) {
            var b = this, c = a.type, d = a.from;
            b.sysMsgPromise = b.sysMsgPromise.then(function () {
                return b.putSysMsg(a, "onSysMsg")
            }).then(function (b) {
                a = b[0]
            }).then(function () {
                if (a) {
                    var e, f = Promise.resolve();
                    switch (c) {
                        case"addFriend":
                            e = {type: "addFriend", account: d}, f = b.onFriendRequest(e);
                            break;
                        case"passFriendApply":
                            e = {type: "passFriendApply", account: d}, f = b.onFriendRequest(e);
                            break;
                        case"deleteFriend":
                            f = b.onDeleteFriend({account: d})
                    }
                    return e && e.friend && (a.friend = e.friend), f
                }
            }).then(function () {
                a && (f.info("on sysMsg", c, a), setTimeout(function () {
                    b.options.onsysmsg(a)
                }, 0))
            })
        }, d.putSysMsg = function (a, b) {
            if (e.isArray(a) || (a = [a]), a[0].filter)return Promise.resolve(a);
            var c = this, d = c.db, f = d.enable, g = Promise.resolve(), h = [];
            return g = g.then(function () {
                return f ? d.putSysMsg(a) : a
            }).then(function (b) {
                var d = [];
                a.forEach(function (a) {
                    c.checkSysMsgUnique(a) && d.push(a)
                }), a = d, h = f ? b : a
            }), g = g.then(function () {
                return c.getSysMsgUnread().then(function (d) {
                    return h.length || (h = a, h.backward = !0), c.updateSysMsgUnread(h, d, 1).then(function (a) {
                        "offlineSysMsgs" === b && (c.syncResult.sysMsgUnread = a), "onSysMsg" === b && c.onUpdateSysMsgUnread(a)
                    })
                })
            }), g.then(function () {
                return a
            })
        }, d.checkSysMsgUnique = e.genCheckUniqueFunc("idServer"), d.getSysMsgUnread = function () {
            var a = this, b = a.db;
            return new Promise(function (c) {
                b.enable ? b.getSysMsgUnread().then(function (a) {
                    c(a)
                }, function () {
                    c(a.sysMsgUnread)
                }) : c(a.sysMsgUnread)
            })
        }, d.updateSysMsgUnread = function (a, b, c) {
            if (e.isArray(a) || (a = [a]), !a.length)return Promise.resolve(b);
            b = b || {};
            var d, f = this, h = f.db;
            return a.forEach(function (a) {
                d = a.type, b[d] = (b[d] || 0) + c
            }), b = g.completeUnread(b), f.sysMsgUnread = b, h.enable && !a.backward ? h.updateSysMsgUnread(b) : Promise.resolve(b)
        }, d.reduceSysMsgUnread = function (a) {
            var b = this;
            return b.getSysMsgUnread().then(function (c) {
                return b.updateSysMsgUnread(a, c, -1)
            }).then(function (a) {
                b.onUpdateSysMsgUnread(a)
            })
        }, d.onUpdateSysMsgUnread = function (a) {
            var b = this;
            setTimeout(function () {
                f.info("on update sysMsg unread", a), b.options.onupdatesysmsgunread(a)
            }, 0)
        }, d.updateSysMsg = function (a) {
            var b, c = this, d = c.db;
            b = d.enable ? d.updateSysMsg(a) : Promise.resolve(a), b.then(function (a) {
                c.onUpdateSysMsg(a)
            })
        }, d.onUpdateSysMsg = function (a) {
            var b = this;
            setTimeout(function () {
                e.isArray(a) || (a = [a]), a.forEach(function (a) {
                    f.info("on update sysMsg", a), b.options.onupdatesysmsg(a)
                })
            }, 0)
        }, d.processUnsettledSysMsgs = function () {
            var a = this;
            a.unhandledSysMsgs.forEach(function (b) {
                a.handleSysMsg(b)
            }), a.resetUnsettledSysMsgs()
        }
    }, function (a, b, c) {
        function d(a) {
            var b = this;
            e.verifyOptions(a, "type to"), e.verifyParamValid("type", a.type, d.validTypes), -1 !== a.type.indexOf("custom") && (e.verifyOptions(a, "content"), b.attach = a.content, g(a.apnsText) && (b.apnsText = "" + a.apnsText), g(a.pushPayload) && (b.pushPayload = "" + a.pushPayload), g(a.sendToOnlineUsersOnly) && (b.sendToOnlineUsersOnly = a.sendToOnlineUsersOnly ? 0 : 1), g(a.cc) && (b.cc = a.cc ? 1 : 0), g(a.isPushable) && (b.isPushable = a.isPushable ? 1 : 0), g(a.isUnreadable) && (b.isUnreadable = a.isUnreadable ? 1 : 0), g(a.needPushNick) && (b.needPushNick = a.needPushNick ? 1 : 0)), b.time = +new Date, b.to = a.to, b.type = k[a.type], b.idClient = e.guid()
        }

        var e = c(10), f = e.undef, g = e.notundef, h = c(52).getInstance("IM"), i = c(113), j = c(95), k = {
            customP2p: 100,
            customTeam: 101
        }, l = {
            0: "applyTeam",
            1: "rejectTeamApply",
            2: "teamInvite",
            3: "rejectTeamInvite",
            5: "friendRequest",
            6: "deleteFriend",
            100: "customP2p",
            101: "customTeam",
            102: "customP2p"
        }, m = {
            1: "addFriend",
            2: "applyFriend",
            3: "passFriendApply",
            4: "rejectFriendApply"
        }, n = "team", o = "friend", p = {
            applyTeam: n,
            rejectTeamApply: n,
            teamInvite: n,
            rejectTeamInvite: n,
            addFriend: o,
            applyFriend: o,
            passFriendApply: o,
            rejectFriendApply: o,
            deleteFriend: o
        };
        d.validTypes = Object.keys(k).concat(Object.keys(p)), d.validCategories = ["team", "friend"], d.isCustom = function (a) {
            return "custom" === a.type
        }, d.reverse = function (a) {
            var b = {time: +a.time, to: a.to, type: l[a.type]};
            if (g(a.from) && (b.from = a.from), g(a.idServer) && (b.idServer = "" + a.idServer), g(a.idClient) && (b.idClient = a.idClient), g(a.ps) && (b.ps = a.ps), a.attach = a.attach ? "" + a.attach : "", -1 === b.type.indexOf("custom")) {
                if (a.attach) {
                    b.attach = {};
                    var c = JSON.parse(a.attach);
                    g(c.vt) ? (b.type = m[c.vt], delete b.attach) : (g(c.tinfo) && (b.attach.team = i.reverse(h.unserialize(c.tinfo, "team"))), g(c.tlist) && (b.attach.member = j.reverse(h.unserialize(c.tlist, "teamMember"))))
                }
                b.category = p[b.type], b.read = !1, b.state = "init"
            } else"customTeam" === b.type && (b.to = +b.to), b.content = a.attach, g(a.apnsText) && (b.apnsText = a.apnsText), g(a.pushPayload) && (b.pushPayload = a.pushPayload), e.merge(b, {
                sendToOnlineUsersOnly: f(a.sendToOnlineUsersOnly) || 0 === +a.sendToOnlineUsersOnly,
                cc: f(a.cc) || 1 === +a.cc,
                isPushable: f(a.isPushable) || 1 === +a.isPushable,
                isUnreadable: f(a.isUnreadable) || 1 === +a.isUnreadable,
                needPushNick: g(a.needPushNick) && 1 === +a.needPushNick
            }), b.scene = b.type.slice(6).toLowerCase(), b.type = "custom";
            return g(a.cc) && (b.cc = 1 === +a.cc), b.status = a.status || "success", g(a.filter) && (b.filter = a.filter), b
        }, d.completeUnread = function (a) {
            delete a[n], delete a[o];
            var b;
            return Object.keys(p).forEach(function (c) {
                a[c] = a[c] || 0, a[c] < 0 && (a[c] = 0), b = p[c], a[b] = a[b] || 0, a[b] = a[b] + a[c]
            }), a.total = a[n] + a[o], a
        }, a.exports = d
    }, function (a, b, c) {
        var d = c(88).fn, e = c(10), f = c(24), g = c(106), h = c(14);
        d.mergeSession = function (a) {
            var b = this.sessionSet, c = a.id;
            b[c] = e.merge(b[c], a)
        }, d.mergeSessions = function (a) {
            var b = this;
            a.forEach(function (a) {
                b.mergeSession(a)
            })
        }, d.onDeleteSessions = function (a) {
            a.obj = a.obj.sessions.map(function (a) {
                return g.parse(a)
            })
        }, d.onUpdateSession = function (a) {
            var b = this;
            b.mergeSession(a), g.trim(a), setTimeout(function () {
                f.info("on update session", a.id, a), b.options.onupdatesession(a)
            }, 0)
        }, d.setCurrSession = function (a) {
            var b = this;
            a = "" + a, b.currSessionId = a, b.resetSessionUnread(a), f.warn("set curr session", a)
        }, d.resetSessionUnread = function (a) {
            function b() {
                c = {id: a, unread: 0}, d.onUpdateSession(c)
            }

            a = "" + a;
            var c, d = this, e = d.db;
            return d.sessionSet[a] ? void(e.enable ? e.resetSessionUnread(a).then(function () {
                b()
            }) : b()) : void f.warn("reset session unread, no session-" + a)
        }, d.insertLocalSession = function (a) {
            var b = this, c = b.db, d = b.sessionSet;
            return new Promise(function (g, i) {
                var j = a.scene, k = a.to, l = j + "-" + k, m = d[l];
                if (m)f.warn("session exist"), i(h.sessionExist()); else {
                    var n;
                    if (e.isNumber(a.updateTime))n = a.updateTime; else {
                        var o, p = [];
                        for (var q in d)d.hasOwnProperty(q) && (o = d[q], e.isNumber(o.updateTime) && p.push(o.updateTime));
                        n = Math.max.apply(Math, p) + 1, n = Math.max(n, +new Date)
                    }
                    m = {
                        id: l,
                        scene: j,
                        to: k,
                        updateTime: n
                    }, c.enable ? c.putSession(m).then(g, i) : g(m), b.onUpdateSession(m)
                }
            })
        }
    }, function (a, b, c) {
        var d = c(88).fn;
        d.processChatroom = function (a) {
            var b = this;
            switch (a.cmd) {
                case"getChatroomAddress":
                    b.onChatroomAddress(a)
            }
        }, d.onChatroomAddress = function (a) {
            a.error || (a.obj.address = a.content.address)
        }
    }, function (a, b, c) {
        var d = c(88).fn;
        d.processFilter = function (a) {
            var b = this;
            switch (a.cmd) {
                case"sendFilterMsg":
                    b.onSendMsg(a, !0);
                    break;
                case"filterMsg":
                    b.onMsg(a, !0);
                    break;
                case"filterSysMsg":
                    b.onSysMsg(a, !0);
                    break;
                case"sendFilterCustomSysMsg":
                    b.onSendSysMsg(a, !0)
            }
        }
    }, function (a, b, c) {
        var d = c(10), e = function (a) {
            this.account = a.account
        }, f = e.prototype, g = f.Message = c(123), h = f.TextMessage = c(124), i = f.FileMessage = c(125), j = f.GeoMessage = c(129), k = f.NotificationMessage = c(130), l = f.CustomMessage = c(131), m = f.TipMessage = c(132);
        f.validScenes = g.validScenes, f.validTypes = g.validTypes, f.reverse = function (a) {
            var b, c = g.getType(a);
            switch (c) {
                case"text":
                    b = h.reverse(a);
                    break;
                case"image":
                case"audio":
                case"video":
                case"file":
                    b = i.reverse(a);
                    break;
                case"geo":
                    b = j.reverse(a);
                    break;
                case"notification":
                    b = k.reverse(a);
                    break;
                case"custom":
                    b = l.reverse(a);
                    break;
                case"tip":
                    b = m.reverse(a);
                    break;
                default:
                    b = g.reverse(a)
            }
            return g.setExtra(b, this.account), b
        }, f.reverseMsgs = function (a, b) {
            var c, e, f = this;
            return a.map(function (a) {
                return a = f.reverse(a), b && (c = b.modifyObj, c && (a = d.merge(a, c)), e = b.mapper, d.isFunction(e) && (a = e(a))), a
            })
        }, a.exports = e
    }, function (a, b, c) {
        function d(a) {
            e.verifyOptions(a, "scene to type"), e.verifyParamValid("scene", a.scene, l);
            var b = this;
            b.scene = j[a.scene], b.to = "" + a.to, b.type = m[a.type], b.resend = a.resend ? 1 : 0, a.resend ? (e.verifyOptions(a, "idClient"), b.idClient = a.idClient) : b.idClient = e.guid(), g(a.custom) && (b.custom = "" + a.custom), g(a.pushContent) && (b.pushContent = "" + a.pushContent), g(a.pushPayload) && (b.pushPayload = "" + a.pushPayload), g(a.isHistoryable) && (b.isHistoryable = a.isHistoryable ? 1 : 0), g(a.isRoamingable) && (b.isRoamingable = a.isRoamingable ? 1 : 0), g(a.isSyncable) && (b.isSyncable = a.isSyncable ? 1 : 0), g(a.cc) && (b.cc = a.cc ? 1 : 0), g(a.isPushable) && (b.isPushable = a.isPushable ? 1 : 0), g(a.isOfflinable) && (b.isOfflinable = a.isOfflinable ? 1 : 0), g(a.isUnreadable) && (b.isUnreadable = a.isUnreadable ? 1 : 0), g(a.needPushNick) && (b.needPushNick = a.needPushNick ? 1 : 0)
        }

        var e = c(10), f = e.undef, g = e.notundef, h = c(47), i = c(65), j = {p2p: 0, team: 1}, k = {
            0: "p2p",
            1: "team"
        }, l = Object.keys(j), m = i.typeMap, n = i.validTypes;
        d.prototype.getScene = function () {
            return k[this.scene]
        }, d.getScene = function (a) {
            var b = a.scene;
            return k[b] || b
        }, d.getType = i.getType, d.reverse = function (a) {
            var b = k[a.scene], c = {
                scene: b || a.scene,
                from: a.from,
                fromNick: a.fromNick,
                fromClientType: h.reverseType(a.fromClientType),
                fromDeviceId: a.fromDeviceId,
                to: "" + a.to,
                time: +a.time,
                type: d.getType(a),
                isHistoryable: f(a.isHistoryable) || 1 === +a.isHistoryable,
                isRoamingable: f(a.isRoamingable) || 1 === +a.isRoamingable,
                isSyncable: f(a.isSyncable) || 1 === +a.isSyncable,
                cc: f(a.cc) || 1 === +a.cc,
                isPushable: f(a.isPushable) || 1 === +a.isPushable,
                isOfflinable: f(a.isOfflinable) || 1 === +a.isOfflinable,
                isUnreadable: f(a.isUnreadable) || 1 === +a.isUnreadable,
                needPushNick: f(a.needPushNick) || 1 === +a.needPushNick
            };
            return g(a.isMuted) && (c.isMuted = 1 === +a.isMuted), g(a.resend) && (c.resend = 1 === +a.resend), g(a.idClient) && (c.idClient = a.idClient), g(a.idServer) && (c.idServer = "" + a.idServer), g(a.userUpdateTime) && (c.userUpdateTime = +a.userUpdateTime), g(a.custom) && (c.custom = a.custom), g(a.pushContent) && (c.pushContent = a.pushContent), g(a.pushPayload) && (c.pushPayload = a.pushPayload), c.status = a.status || "success", g(a.filter) && (c.filter = a.filter), c
        }, d.setExtra = function (a, b) {
            a.target = d.getMsgTarget(a, b), a.sessionId = a.scene + "-" + a.target, i.setFlow(a, b)
        }, d.getMsgTarget = function (a, b) {
            return "p2p" === a.scene ? a.to === b ? a.from : a.to : "team" === a.scene ? a.to : void 0
        }, d.deduplication = function (a) {
            var b, c = {}, d = [];
            return a.forEach(function (a) {
                b = a.idClient, c[b] || (c[b] = !0, d.push(a))
            }), d
        }, d.getLastMsg = function (a) {
            var b = a[0] || {}, c = a[1] || {}, d = b.time || 0, e = c.time || 0, f = b;
            return e > d && (f = a[a.length - 1]), f
        }, d.getMaxTimetag = function (a) {
            return d.getLastMsg(a).time
        }, d.validScenes = l, d.validTypes = n, a.exports = d
    }, function (a, b, c) {
        function d(a) {
            f.verifyOptions(a, "text"), a.type = "text", e.call(this, a), this.body = a.text
        }

        var e = c(123), f = c(10);
        d.prototype = Object.create(e.prototype), d.reverse = function (a) {
            var b = e.reverse(a);
            return b.text = a.body, b
        }, a.exports = d
    }, function (a, b, c) {
        function d(a) {
            switch (f.notundef(a.type) ? f.verifyFileType(a.type) : a.type = "file", f.verifyOptions(a, "file"), f.verifyOptions(a.file, "url ext size md5", !0, "file."), a.type) {
                case"image":
                    g.verifyFile(a.file);
                    break;
                case"audio":
                    h.verifyFile(a.file);
                    break;
                case"video":
                    i.verifyFile(a.file)
            }
            e.call(this, a), this.attach = JSON.stringify(a.file)
        }

        var e = c(123), f = c(10);
        d.prototype = Object.create(e.prototype), d.reverse = function (a) {
            var b = e.reverse(a);
            return a.attach = a.attach ? "" + a.attach : "", b.file = a.attach ? JSON.parse(a.attach) : {}, "audio" === b.type && (b.file.mp3Url = b.file.url + "?audioTrans&type=mp3"), b
        }, a.exports = d;
        var g = c(126), h = c(127), i = c(128)
    }, function (a, b, c) {
        function d() {
        }

        var e = c(10), f = c(125);
        d.prototype = Object.create(f.prototype), d.verifyFile = function (a) {
            e.verifyOptions(a, "w h", !0, "file.")
        }, a.exports = d
    }, function (a, b, c) {
        function d() {
        }

        var e = c(125), f = c(10);
        d.prototype = Object.create(e.prototype), d.verifyFile = function (a) {
            f.verifyOptions(a, "dur", !0, "file.")
        }, a.exports = d
    }, function (a, b, c) {
        function d() {
        }

        var e = c(125), f = c(10);
        d.prototype = Object.create(e.prototype), d.verifyFile = function (a) {
            f.verifyOptions(a, "dur w h", !0, "file.")
        }, a.exports = d
    }, function (a, b, c) {
        function d(a) {
            a.type = "geo", f.verifyOptions(a, "geo"), f.verifyOptions(a.geo, "lng lat title", !0, "geo."), f.verifyParamType("geo.lng", a.geo.lng, "number"), f.verifyParamType("geo.lat", a.geo.lat, "number"), f.verifyParamType("geo.title", a.geo.title, "string"), e.call(this, a), this.attach = JSON.stringify(a.geo)
        }

        var e = c(123), f = c(10);
        d.prototype = Object.create(e.prototype), d.reverse = function (a) {
            var b = e.reverse(a);
            return a.attach = a.attach ? "" + a.attach : "", b.geo = a.attach ? JSON.parse(a.attach) : {}, b
        }, a.exports = d
    }, function (a, b, c) {
        function d() {
        }

        var e = c(10), f = e.notundef, g = c(123), h = c(52).getInstance("IM"), i = c(113), j = c(109), k = {
            0: "addTeamMembers",
            1: "removeTeamMembers",
            2: "leaveTeam",
            3: "updateTeam",
            4: "dismissTeam",
            5: "passTeamApply",
            6: "transferTeam",
            7: "addTeamManagers",
            8: "removeTeamManagers",
            9: "acceptTeamInvite"
        };
        d.prototype = Object.create(g.prototype), d.reverse = function (a) {
            var b = g.reverse(a);
            if (a.attach = a.attach ? "" + a.attach : "", a.attach) {
                var c = JSON.parse(a.attach);
                if (b.attach = {type: k[c.id]}, f(c.data)) {
                    var d = c.data;
                    f(d.tinfo) && (b.attach.team = i.reverse(h.unserialize(d.tinfo, "team"))), f(d.ids) && (b.attach.accounts = d.ids), f(d.id) && (b.attach.account = d.id), f(d.uinfos) && (b.attach.users = d.uinfos.map(function (a) {
                        return j.reverse(h.unserialize(a, "user"))
                    }))
                }
            } else b.attach = {};
            return b
        }, a.exports = d
    }, function (a, b, c) {
        function d(a) {
            f.verifyOptions(a, "content"), a.type = "custom", e.call(this, a), this.attach = a.content
        }

        var e = c(123), f = c(10);
        d.prototype = Object.create(e.prototype), d.reverse = function (a) {
            var b = e.reverse(a);
            return b.content = a.attach, b
        }, a.exports = d
    }, function (a, b, c) {
        function d(a) {
            f.verifyOptions(a, "tip"), a.type = "tip", e.call(this, a), this.body = a.tip
        }

        var e = c(123), f = c(10);
        d.prototype = Object.create(e.prototype), d.reverse = function (a) {
            var b = e.reverse(a);
            return b.tip = a.body, b
        }, a.exports = d
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10), f = e.isArray, g = c(95);
        d.mergeObjArray = function (a, b, c) {
            return a || (a = []), b ? (f(b) || (b = [b]), b.length ? (c = c || {}, e.mergeObjArray(a, b, c)) : a) : a
        }, d.cutObjArray = function (a, b, c) {
            return a && b ? (f(b) || (b = [b]), b.length ? (c = c || {}, e.cutObjArray(a, b, c)) : a) : a
        }, d.mergeLoginPorts = function (a, b) {
            return this.mergeObjArray(a, b, {keyPath: "deviceId"})
        }, d.cutLoginPorts = function (a, b) {
            return this.cutObjArray(a, b, {keyPath: "deviceId", sortPath: "type"})
        }, d.mergeRelations = function (a, b) {
            return this.mergeObjArray(a, b, {keyPath: "account"})
        }, d.cutRelations = function (a, b) {
            return this.cutObjArray(a, b, {keyPath: "account"})
        }, d.findRelation = function (a, b) {
            return e.findObjInArray(a, {keyPath: "account", value: b})
        }, d.mergeFriends = function (a, b) {
            return this.mergeObjArray(a, b, {keyPath: "account"})
        }, d.cutFriends = function (a, b) {
            return this.cutObjArray(a, b, {keyPath: "account"})
        }, d.cutFriendsByAccounts = function (a, b) {
            f(b) || (b = [b]);
            var c = b.map(function (a) {
                return {account: a}
            });
            return this.cutFriends(a, c)
        }, d.findFriend = function (a, b) {
            return e.findObjInArray(a, {keyPath: "account", value: b})
        }, d.mergeUsers = function (a, b) {
            return this.mergeObjArray(a, b, {keyPath: "account"})
        }, d.findUser = function (a, b) {
            return e.findObjInArray(a, {keyPath: "account", value: b})
        }, d.mergeTeams = function (a, b) {
            return this.mergeObjArray(a, b, {keyPath: "teamId"})
        }, d.cutTeams = function (a, b) {
            return this.cutObjArray(a, b, {keyPath: "teamId"})
        }, d.findTeam = function (a, b) {
            return e.findObjInArray(a, {keyPath: "teamId", value: b})
        }, d.assembleTeamOwner = g.assembleOwner, d.assembleTeamMembers = g.assembleMembers, d.genTeamMemberId = g.genId, d.mergeTeamMembers = function (a, b) {
            return this.mergeObjArray(a, b)
        }, d.cutTeamMembers = function (a, b) {
            return this.cutObjArray(a, b)
        }, d.cutTeamMembersByAccounts = function (a, b, c) {
            f(c) || (c = [c]);
            var d = g.assembleMembers({teamId: b}, c);
            return this.cutTeamMembers(a, d)
        }, d.findTeamMember = function (a, b) {
            return e.findObjInArray(a, {keyPath: "id", value: b})
        }, d.mergeSessions = function (a, b) {
            return this.mergeObjArray(a, b, {sortPath: "updateTime", desc: !0})
        }, d.cutSessions = function (a, b) {
            return this.cutObjArray(a, b)
        }, d.cutSessionsByIds = function (a, b) {
            f(b) || (b = [b]);
            var c = b.map(function (a) {
                return {id: a}
            });
            return this.cutSessions(a, c)
        }, d.findSession = function (a, b) {
            return e.findObjInArray(a, {keyPath: "id", value: b})
        }, d.mergeMsgs = function (a, b) {
            return this.mergeObjArray(a, b, {keyPath: "idClient", notSort: !0})
        }, d.cutMsgs = function (a, b) {
            return this.cutObjArray(a, b, {keyPath: "idClient"})
        }, d.cutMsgsByIdClients = function (a, b) {
            f(b) || (b = [b]);
            var c = b.map(function (a) {
                return {idClient: a}
            });
            return this.cutMsgs(a, c)
        }, d.findMsg = function (a, b) {
            return e.findObjInArray(a, {keyPath: "idClient", value: b})
        }, d.mergeSysMsgs = function (a, b) {
            return this.mergeObjArray(a, b, {keyPath: "idServer", desc: !0})
        }, d.cutSysMsgs = function (a, b) {
            return this.cutObjArray(a, b, {keyPath: "idServer"})
        }, d.cutSysMsgsByIdServers = function (a, b) {
            f(b) || (b = [b]);
            var c = b.map(function (a) {
                return {idServer: a}
            });
            return this.cutSysMsgs(a, c)
        }, d.findSysMsg = function (a, b) {
            return e.findObjInArray(a, {keyPath: "idServer", value: b})
        }
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10);
        d.kick = function (a) {
            e.verifyOptions(a, "deviceIds"), this.processCallback(a), this.sendCmd("kick", {deviceIds: a.deviceIds.slice(0)}, a.callback)
        }
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10);
        d.markInBlacklist = function (a) {
            e.verifyOptions(a, "account isAdd"), e.verifyParamType("isAdd", a.isAdd, "boolean"), this.processCallback(a), this.sendCmd("markInBlacklist", {
                account: a.account,
                isAdd: a.isAdd
            }, a.callback)
        }, d.addToBlacklist = function (a) {
            a.isAdd = !0, this.markInBlacklist(a)
        }, d.removeFromBlacklist = function (a) {
            a.isAdd = !1, this.markInBlacklist(a)
        }, d.markInMutelist = function (a) {
            e.verifyOptions(a, "account"), e.verifyParamType("isAdd", a.isAdd, "boolean"), this.processCallback(a), this.sendCmd("markInMutelist", {
                account: a.account,
                isAdd: a.isAdd
            }, a.callback)
        }, d.addToMutelist = function (a) {
            a.isAdd = !0, this.markInMutelist(a)
        }, d.removeFromMutelist = function (a) {
            a.isAdd = !1, this.markInMutelist(a)
        }, d.getRelations = function (a) {
            function b() {
                c.sendCmd("getRelations", {timetag: f, NOTSTORE: "timetag"}, a.callback)
            }

            var c = this, d = c.db, f = 0;
            e.verifyOptions(a), c.processCallback(a), d.enable ? d.getRelationsTimetag().then(function (a) {
                f = a, b()
            }, b) : b()
        }
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10), f = e.objs2accounts, g = c(24), h = c(109);
        d.updateMyInfo = function (a) {
            e.verifyOptions(a), this.processCallback(a), a.user = new h(a), delete a.user.account, this.sendCmd("updateMyInfo", {
                user: a.user,
                single: !0
            }, a.callback)
        }, d.getMyInfo = function (a) {
            var b = this;
            return a = a || {}, a.account = b.account, b.getUser(a)
        }, d.getUser = function (a) {
            function b() {
                f.sendCmd("getUsers", {accounts: [d], single: !0}, a.callback)
            }

            function c(a) {
                g.warn("get user", d, a)
            }

            var d, f = this, h = f.db;
            e.verifyOptions(a, "account"), f.processCallback(a), a.cbaop = function (a, b) {
                return a ? void 0 : (b = b[0] || null, c(b), b)
            }, d = a.account, a.sync ? b() : h.enable ? h.getUser(d).then(function (d) {
                d ? (c(d), a.done(null, d)) : b()
            }, b) : b()
        }, d.getUsers = function (a) {
            function b() {
                h.sendCmd("getUsers", {accounts: d, single: !0}, a.callback)
            }

            function c(a) {
                g.warn("get users", f(a), a)
            }

            var d, h = this, i = h.db, j = [];
            e.verifyOptions(a, "accounts"), e.verifyParamType("accounts", a.accounts, "array"), h.processCallback(a), a.cbaop = function (a, b) {
                return a ? void 0 : (b = b.concat(j), c(b), b)
            }, d = a.accounts.slice(0), a.sync ? b() : i.enable ? i.getUsers(d).then(function (e) {
                if (e && e.length === d.length)c(e), a.done(null, e); else {
                    j = e;
                    var g = f(e), h = [];
                    d.forEach(function (a) {
                        -1 === g.indexOf(a) && h.push(a)
                    }), d = h, b()
                }
            }, b) : b()
        }
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10), f = e.notundef, g = c(111);
        d.friendRequest = function (a) {
            e.verifyOptions(a, "type account"), e.verifyParamValid("type", a.type, g.validTypes()), this.processPs(a), this.processCallback(a);
            var b = {account: a.account, type: g.getByteFromType(a.type), ps: a.ps};
            f(a.idServer) && (b.idServer = a.idServer), this.sendCmd("friendRequest", b, a.callback)
        }, d.addFriend = function (a) {
            a.type = "addFriend", this.friendRequest(a)
        }, d.applyFriend = function (a) {
            a.type = "applyFriend", this.friendRequest(a)
        }, d.passFriendApply = function (a) {
            e.verifyOptions(a, "idServer"), a.type = "passFriendApply", this.friendRequest(a)
        }, d.rejectFriendApply = function (a) {
            e.verifyOptions(a, "idServer"), a.type = "rejectFriendApply", this.friendRequest(a)
        }, d.deleteFriend = function (a) {
            e.verifyOptions(a, "account"), this.processCallback(a), this.sendCmd("deleteFriend", {account: a.account}, a.callback)
        }, d.updateFriend = function (a) {
            this.processCallback(a);
            var b = new g(a);
            this.sendCmd("updateFriend", {friend: b, single: !0}, a.callback)
        }, d.getFriends = function (a) {
            function b() {
                c.sendCmd("getFriends", {timetag: f, NOTSTORE: "timetag"}, a.callback)
            }

            var c = this, d = c.db, f = 0;
            e.verifyOptions(a), c.processCallback(a), d.enable ? d.getFriendsTimetag().then(function (a) {
                f = a, b()
            }, b) : b()
        }
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10), f = e.undef, g = c(24), h = c(113), i = c(95);
        d.createTeam = function (a) {
            e.verifyOptions(a, "type name"), f(a.accounts) ? a.accounts = [] : e.verifyParamType("accounts", a.accounts, "array"), a.action = "create", this.processPs(a), this.processCallback(a), a.team = new h(a);
            var b = {team: a.team, accounts: a.accounts.slice(0), ps: a.ps};
            this.sendCmd("createTeam", b, a.callback)
        }, d.updateTeam = function (a) {
            e.verifyOptions(a, "teamId"), a.action = "update", this.processCallback(a), a.team = new h(a), this.sendCmd("updateTeam", {
                team: a.team,
                single: !0
            }, a.callback)
        }, d.addTeamMembers = function (a) {
            e.verifyOptions(a, "teamId accounts"), e.verifyParamType("accounts", a.accounts, "array"), this.processPs(a), this.processCallback(a);
            var b = {teamId: a.teamId, accounts: a.accounts.slice(0), ps: a.ps};
            this.sendCmd("addTeamMembers", b, a.callback)
        }, d.removeTeamMembers = function (a) {
            e.verifyOptions(a, "teamId accounts"), e.verifyParamType("accounts", a.accounts, "array"), this.processCallback(a);
            var b = {teamId: a.teamId, accounts: a.accounts.slice(0)};
            this.sendCmd("removeTeamMembers", b, a.callback)
        }, d.acceptTeamInvite = function (a) {
            e.verifyOptions(a, "idServer teamId from"), this.processCallback(a);
            var b = {idServer: a.idServer, teamId: a.teamId, from: a.from};
            this.sendCmd("acceptTeamInvite", b, a.callback)
        }, d.rejectTeamInvite = function (a) {
            e.verifyOptions(a, "idServer teamId from"), this.processPs(a), this.processCallback(a);
            var b = {idServer: a.idServer, teamId: a.teamId, from: a.from, ps: a.ps};
            this.sendCmd("rejectTeamInvite", b, a.callback)
        }, d.applyTeam = function (a) {
            e.verifyOptions(a, "teamId"), this.processPs(a), this.processCallback(a);
            var b = {teamId: a.teamId, ps: a.ps};
            this.sendCmd("applyTeam", b, a.callback)
        }, d.passTeamApply = function (a) {
            e.verifyOptions(a, "idServer teamId from"), this.processCallback(a);
            var b = {idServer: a.idServer, teamId: a.teamId, from: a.from};
            this.sendCmd("passTeamApply", b, a.callback)
        }, d.rejectTeamApply = function (a) {
            e.verifyOptions(a, "idServer teamId from"), this.processPs(a), this.processCallback(a);
            var b = {idServer: a.idServer, teamId: a.teamId, from: a.from, ps: a.ps};
            this.sendCmd("rejectTeamApply", b, a.callback)
        }, d.addTeamManagers = function (a) {
            e.verifyOptions(a, "teamId accounts"), e.verifyParamType("accounts", a.accounts, "array"), this.processCallback(a);
            var b = {teamId: a.teamId, accounts: a.accounts.slice(0)};
            this.sendCmd("addTeamManagers", b, a.callback)
        }, d.removeTeamManagers = function (a) {
            e.verifyOptions(a, "teamId accounts"), e.verifyParamType("accounts", a.accounts, "array"), this.processCallback(a);
            var b = {teamId: a.teamId, accounts: a.accounts.slice(0)};
            this.sendCmd("removeTeamManagers", b, a.callback)
        }, d.updateInfoInTeam = function (a) {
            e.verifyOptions(a, "teamId"), this.processCallback(a), this.sendCmd("updateInfoInTeam", {
                teamMember: new i(a),
                single: !0
            }, a.callback)
        }, d.updateNickInTeam = function (a) {
            e.verifyOptions(a, "teamId account"), this.processCallback(a), this.sendCmd("updateNickInTeam", {
                teamMember: new i(a),
                single: !0
            }, a.callback)
        }, d.leaveTeam = function (a) {
            e.verifyOptions(a, "teamId"), this.processCallback(a);
            var b = {teamId: a.teamId};
            this.sendCmd("leaveTeam", b, a.callback)
        }, d.transferTeam = function (a) {
            e.verifyOptions(a, "teamId account leave"), e.verifyParamType("leave", a.leave, "boolean"), this.processCallback(a);
            var b = {teamId: a.teamId, account: a.account, leave: a.leave};
            this.sendCmd("transferTeam", b, a.callback)
        }, d.dismissTeam = function (a) {
            e.verifyOptions(a, "teamId"),
                this.processCallback(a);
            var b = {teamId: a.teamId};
            this.sendCmd("dismissTeam", b, a.callback)
        }, d.getTeam = function (a) {
            function b() {
                f.sendCmd("getTeam", {teamId: a.teamId}, a.callback)
            }

            function c(a) {
                g.warn("get team", d, a)
            }

            var d, f = this, h = f.db;
            e.verifyOptions(a, "teamId"), f.processCallback(a), a.cbaop = function (a, b) {
                a || c(b)
            }, d = a.teamId, a.sync ? b() : h.enable ? h.getTeam(d).then(function (d) {
                d ? (c(d), a.done(null, d)) : b()
            }, b) : b()
        }, d.getTeams = function (a) {
            function b() {
                c.sendCmd("getTeams", {timetag: f, NOTSTORE: "timetag"}, a.callback)
            }

            var c = this, d = c.db, f = 0;
            e.verifyOptions(a), c.processCallback(a), d.enable ? d.getTeamsTimetag().then(function (a) {
                f = a, b()
            }, b) : b()
        }, d.getTeamMembers = function (a) {
            function b() {
                c.sendCmd("getTeamMembers", {teamId: a.teamId, timetag: f, NOTSTORE: "timetag"}, a.callback)
            }

            var c = this, d = c.db, f = 0;
            e.verifyOptions(a, "teamId"), c.processCallback(a), d.enable ? d.getTeamMembersTimetag(a.teamId).then(function (a) {
                f = a, b()
            }, b) : b()
        }, d.getLocalTeams = function (a) {
            function b() {
                a.teams = g, a.done(c, a)
            }

            var c, d = this, f = d.db, g = [];
            e.verifyOptions(a, "teamIds"), e.verifyParamType("teamIds", a.teamIds, "array"), d.processCallback(a), f.enable ? f.getTeamsByTeamIds(a.teamIds).then(function (a) {
                g = a.filter(function (a) {
                    return !!a
                }), b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.getLocalTeamMembers = function (a) {
            function b() {
                a.members = g, a.done(c, a)
            }

            var c, d = this, f = d.db, g = [];
            e.verifyOptions(a, "teamId accounts"), e.verifyParamType("accounts", a.accounts, "array"), d.processCallback(a), f.enable ? f.getInvalidTeamMembers(a.teamId, a.accounts).then(function (a) {
                g = a.filter(function (a) {
                    return !!a
                }), b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.deleteLocalTeam = function (a) {
            function b() {
                a.done(c, a)
            }

            var c, d = this, f = d.db;
            e.verifyOptions(a, "teamId"), d.processCallback(a), f.enable ? f.deleteTeam(a.teamId).then(function () {
                b()
            }, function (a) {
                c = a, b()
            }) : b()
        }
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10), f = e.undef, g = e.notundef;
        d.setCurrSession = function (a) {
            this.protocol.setCurrSession(a)
        }, d.resetCurrSession = function () {
            this.protocol.setCurrSession("")
        }, d.resetSessionUnread = function (a) {
            this.protocol.resetSessionUnread(a)
        }, d.insertLocalSession = function (a) {
            function b() {
                a.session = d, a.done(c, a)
            }

            var c, d, f = this;
            e.verifyOptions(a, "scene to"), e.verifyParamValid("scene", a.scene, f.message.validScenes), f.processCallback(a), f.protocol.insertLocalSession(a).then(function (a) {
                d = a, b()
            }, function (a) {
                c = a, b()
            })
        }, d.getLocalSessions = function (a) {
            function b() {
                a.sessions = i, a.done(c, a)
            }

            var c, d = this, h = d.db, i = [];
            e.verifyOptions(a), f(a.limit) && (a.limit = 100), e.verifyParamType("limit", a.limit, "number"), e.verifyParamMax("limit", a.limit, 100), g(a.reverse) ? e.verifyParamType("reverse", a.reverse, "boolean") : a.reverse = !1, d.processCallback(a), h.enable ? h.getSessions(a).then(function (a) {
                i = a, d.protocol.mergeSessions(i), b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.updateLocalSession = function (a) {
            function b() {
                a.session = g, a.done(c, a)
            }

            var c, d = this, f = d.db, g = null;
            if (e.verifyOptions(a, "id"), d.processCallback(a), f.enable) {
                var h = e.filterObj(a, "id localCustom");
                f.updateSession(h).then(function (a) {
                    g = a, b()
                }, function (a) {
                    c = a, b()
                })
            } else b()
        }, d.deleteLocalSession = function (a) {
            function b() {
                a.done(c, a)
            }

            var c, d = this, f = d.db;
            e.verifyOptions(a, "id"), d.processCallback(a), f.enable ? f.deleteSession(a.id).then(function () {
                b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.deleteSession = function (a) {
            e.verifyOptions(a, "scene to"), this.processCallback(a), a.sessions = [{
                scene: a.scene,
                to: a.to
            }], this.deleteSessions(a)
        }, d.deleteSessions = function (a) {
            e.verifyOptions(a, "sessions"), e.verifyParamType("sessions", a.sessions, "array"), a.sessions.forEach(function (a, b) {
                e.verifyOptions(a, "scene to", !0, "sessions[" + b + "].")
            }), this.processCallback(a), this.sendCmd("deleteSessions", {
                sessions: a.sessions.map(function (a) {
                    return a.scene + "|" + a.to
                })
            }, a.callback)
        }
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10), f = e.undef, g = e.notundef, h = c(48);
        d.beforeSendMsg = function (a) {
            var b = this, c = b.protocol, d = a.msg;
            d.to === b.account && (d.fromDeviceId = h.deviceId), d.userUpdateTime = c.myInfo && c.myInfo.updateTime;
            var e;
            switch (d.getScene()) {
                case"p2p":
                    e = "sendMsg";
                    break;
                case"team":
                    e = "sendTeamMsg"
            }
            a.filter && (e = "sendFilterMsg", d.filter = !0), a.cmd = e
        }, d.markMsgRead = function (a) {
            var b = this, c = b.protocol;
            !a || b.db.enable || c.options.autoMarkRead || c.markMsgRead(a, !0)
        }, d.sendMsgReceipt = function (a) {
            var b = this;
            if (e.verifyOptions(a), b.processCallback(a), !a.msg)return void a.done();
            var c = "target idClient time";
            e.verifyOptions(a, "msg");
            var d = a.msg;
            e.verifyOptions(d, c, !0, "msg."), b.protocol.shouldSendMsgReceipt(d) ? b.sendCmd("sendMsgReceipt", {
                msgReceipt: {
                    to: d.target,
                    idClient: d.idClient,
                    time: d.time
                }
            }, a.callback) : a.done()
        }, d.isMsgRemoteRead = function (a) {
            return this.protocol.isMsgRemoteRead(a)
        }, d.getHistoryMsgs = function (a) {
            var b = this;
            e.verifyOptions(a, "scene to"), e.verifyParamValid("scene", a.scene, b.message.validScenes), "undefined" == typeof a.beginTime && (a.beginTime = 0), e.verifyParamType("beginTime", a.beginTime, "number"), "undefined" == typeof a.endTime && (a.endTime = 0), e.verifyParamType("endTime", a.endTime, "number"), "undefined" == typeof a.lastMsgId && (a.lastMsgId = "0"), "undefined" == typeof a.limit && (a.limit = 100), e.verifyParamType("limit", a.limit, "number"), e.verifyParamMax("limit", a.limit, 100), g(a.reverse) ? e.verifyParamType("reverse", a.reverse, "boolean") : a.reverse = !1, g(a.asc) ? e.verifyParamType("asc", a.asc, "boolean") : a.asc = !1, b.processCallback(a), a.asc && (a.cbaop = function (a, b) {
                a || (b.msgs = b.msgs.reverse())
            });
            var c;
            switch (a.scene) {
                case"p2p":
                    c = "getHistoryMsgs";
                    break;
                case"team":
                    c = "getTeamHistoryMsgs"
            }
            var d = {
                scene: a.scene,
                to: a.to,
                beginTime: a.beginTime,
                endTime: a.endTime,
                lastMsgId: a.lastMsgId,
                limit: a.limit,
                reverse: a.reverse
            };
            b.sendCmd(c, d, a.callback)
        }, d.searchHistoryMsgs = function (a) {
            var b = this;
            e.verifyOptions(a, "scene to keyword"), e.verifyParamValid("scene", a.scene, b.message.validScenes), "undefined" == typeof a.beginTime && (a.beginTime = 0), e.verifyParamType("beginTime", a.beginTime, "number"), "undefined" == typeof a.endTime && (a.endTime = 0), e.verifyParamType("endTime", a.endTime, "number"), "undefined" == typeof a.limit && (a.limit = 100), e.verifyParamType("limit", a.limit, "number"), e.verifyParamMax("limit", a.limit, 100), g(a.reverse) ? e.verifyParamType("reverse", a.reverse, "boolean") : a.reverse = !1, g(a.asc) ? e.verifyParamType("asc", a.asc, "boolean") : a.asc = !1, b.processCallback(a), a.asc && (a.cbaop = function (a, b) {
                a || (b.msgs = b.msgs.reverse())
            });
            var c;
            switch (a.scene) {
                case"p2p":
                    c = "searchHistoryMsgs";
                    break;
                case"team":
                    c = "searchTeamHistoryMsgs"
            }
            var d = e.filterObj(a, "scene to beginTime endTime keyword limit reverse");
            b.sendCmd(c, d, a.callback)
        }, d.getLocalMsgs = function (a) {
            function b() {
                a.asc && (i = i.reverse()), a.msgs = i, a.done(c, a)
            }

            var c, d = this, h = d.db, i = [];
            e.verifyOptions(a, "scene to"), e.verifyParamValid("scene", a.scene, d.message.validScenes), a.sessionId = a.scene + "-" + a.to, g(a.type) && e.verifyParamValid("type", a.type, d.message.validTypes), f(a.limit) && (a.limit = 100), e.verifyParamType("limit", a.limit, "number"), e.verifyParamMax("limit", a.limit, 100), g(a.reverse) ? e.verifyParamType("reverse", a.reverse, "boolean") : a.reverse = !1, g(a.asc) ? e.verifyParamType("asc", a.asc, "boolean") : a.asc = !1, d.processCallback(a), h.enable ? h.getMsgsBySessionId(a).then(function (a) {
                i = a, b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.searchLocalMsgs = function (a) {
            return e.verifyOptions(a, "keyword"), a.type = "text", this.getLocalMsgs(a)
        }, d.getLocalMsgByIdClient = function (a) {
            function b() {
                a.msg = g, a.done(c, a)
            }

            var c, d = this, f = d.db, g = null;
            e.verifyOptions(a, "idClient"), d.processCallback(a), f.enable ? f.getMsgByIdClient(a.idClient).then(function (a) {
                a && (g = a), b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.getLocalMsgsByIdClients = function (a) {
            function b() {
                a.msgs = g, a.done(c, a)
            }

            var c, d = this, f = d.db, g = [];
            e.verifyOptions(a, "idClients"), e.verifyParamType("idClients", a.idClients, "array"), d.processCallback(a), f.enable ? f.getMsgsByIdClients(a.idClients).then(function (a) {
                g = a.filter(function (a) {
                    return !!a
                }), b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.updateLocalMsg = function (a) {
            function b() {
                a.msg = g, a.done(c, a)
            }

            var c, d = this, f = d.db, g = null;
            if (e.verifyOptions(a, "idClient"), d.processCallback(a), f.enable) {
                var h = e.filterObj(a, "idClient localCustom");
                f.updateMsg(h).then(function (a) {
                    g = a, b()
                }, function (a) {
                    c = a, b()
                })
            } else b()
        }, d.deleteLocalMsg = function (a) {
            function b() {
                a.done(c, a)
            }

            var c, d = this, f = d.db;
            e.verifyOptions(a, "idClient"), d.processCallback(a), f.enable ? f.deleteMsg(a.idClient).then(function () {
                b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.deleteLocalMsgsBySession = function (a) {
            function b() {
                a.done(c, a)
            }

            var c, d = this, f = d.db;
            e.verifyOptions(a, "scene to"), e.verifyParamValid("scene", a.scene, d.message.validScenes), a.sessionId = a.scene + "-" + a.to, d.processCallback(a), f.enable ? f.deleteMsgsBySessionId(a.sessionId).then(function () {
                b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.deleteAllLocalMsgs = function (a) {
            function b() {
                a.done(c, a)
            }

            var c, d = this, e = d.db;
            d.processCallback(a), e.enable && e.deleteAllMsgs().then(function () {
                b()
            }, function (a) {
                c = a, b()
            })
        }
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10), f = e.undef, g = e.notundef, h = c(118);
        d.markSysMsgRead = function (a) {
            function b() {
                a.done(c, a)
            }

            var c, d = this, f = d.db, g = Promise.resolve(), h = d.protocol;
            e.verifyOptions(a, "sysMsgs");
            var i = a.sysMsgs;
            f.enable ? g = f.markSysMsgRead(i).then(function (a) {
                h.onUpdateSysMsg(a)
            }) : h.options.autoMarkRead || h.markSysMsgRead(i, !0), g.then(function () {
                return h.reduceSysMsgUnread(i)
            }).then(b, function (a) {
                c = a, b()
            })
        }, d.sendCustomSysMsg = function (a) {
            var b = this;
            e.verifyOptions(a, "scene to content"), e.verifyParamValid("scene", a.scene, b.message.validScenes), b.processCallback(a), a.type = "p2p" === a.scene ? "customP2p" : "customTeam", a.sysMsg = new h(a);
            var c = "sendCustomSysMsg";
            return a.filter && (c = "sendFilterCustomSysMsg"), b.sendCmd(c, {
                sysMsg: a.sysMsg,
                single: !0
            }, a.callback), b.formatReturnSysMsg(a.sysMsg)
        }, d.formatReturnSysMsg = function (a) {
            var b = this;
            return a = e.copy(a), b.protocol.completeSysMsg(a), a.status = "sending", a = h.reverse(a)
        }, d.getLocalSysMsgs = function (a) {
            function b() {
                a.sysMsgs = j, a.done(c, a)
            }

            var c, d = this, i = d.db, j = [];
            e.verifyOptions(a), a.category && e.verifyParamValid("category", a.category, h.validCategories), a.type && e.verifyParamValid("type", a.type, h.validTypes), f(a.limit) && (a.limit = 100), e.verifyParamType("limit", a.limit, "number"), e.verifyParamMax("limit", a.limit, 100), g(a.reverse) ? e.verifyParamType("reverse", a.reverse, "boolean") : a.reverse = !1, d.processCallback(a), i.enable ? i.getSysMsgs(a).then(function (a) {
                j = a, b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.updateLocalSysMsg = function (a) {
            function b() {
                a.sysMsg = g, a.done(c, a)
            }

            var c, d = this, f = d.db, g = null;
            if (e.verifyOptions(a, "idServer"), d.processCallback(a), f.enable) {
                var h = e.filterObj(a, "idServer state localCustom");
                f.updateSysMsg(h).then(function (a) {
                    g = a, b()
                }, function (a) {
                    c = a, b()
                })
            } else b()
        }, d.deleteLocalSysMsg = function (a) {
            function b() {
                a.done(c, a)
            }

            var c, d = this, f = d.db;
            e.verifyOptions(a, "idServer"), d.processCallback(a), f.enable ? f.deleteSysMsg(a.idServer).then(function () {
                b()
            }, function (a) {
                c = a, b()
            }) : b()
        }, d.deleteAllLocalSysMsgs = function (a) {
            function b() {
                d.protocol.onUpdateSysMsgUnread({}), a.done(c, a)
            }

            var c, d = this, e = d.db;
            d.processCallback(a), e.enable && e.deleteAllSysMsgs().then(function () {
                b()
            }, function (a) {
                c = a, b()
            })
        }
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10);
        d.getChatroomAddress = function (a) {
            e.verifyOptions(a, "chatroomId");
            var b = this;
            b.processCallback(a), b.sendCmd("getChatroomAddress", a)
        }
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10), f = c(51);
        d.qualityImage = function (a) {
            return this.beforeProcessImage(a, "quality")
        }, d.interlaceImage = function (a) {
            return this.beforeProcessImage(a, "interlace")
        }, d.rotateImage = function (a) {
            return this.beforeProcessImage(a, "rotate")
        }, d.blurImage = function (a) {
            return this.beforeProcessImage(a, "blur")
        }, d.cropImage = function (a) {
            return this.beforeProcessImage(a, "crop")
        }, d.thumbnailImage = function (a) {
            return this.beforeProcessImage(a, "thumbnail")
        }, d.beforeProcessImage = function (a, b) {
            var c = e.copy(a);
            return c.type = b, a.ops = [c], this.processImage(a)
        }, d.processImage = function (a) {
            var b = this;
            e.verifyOptions(a, "url ops"), e.verifyParamType("ops", a.ops, "array");
            var c = a.ops.map(function (a) {
                return e.verifyOptions(a, "type"), e.verifyParamValid("type", a.type, f.validTypes), b["gen" + a.type.slice(0, 1).toUpperCase() + a.type.slice(1) + "Op"](a)
            });
            b.processCallback(a), b.sendCmd("processImage", {url: a.url, imageOps: c}, a.callback)
        }, d.genQualityOp = function (a) {
            e.verifyOptions(a, "quality"), e.verifyParamType("quality", a.quality, "number"), e.verifyParamMin("quality", a.quality, 0), e.verifyParamMax("quality", a.quality, 100);
            var b = Math.round(a.quality);
            return new f({type: a.type, qualityQuality: b})
        }, d.genInterlaceOp = function (a) {
            return new f({type: a.type})
        }, d.genRotateOp = function (a) {
            for (e.verifyOptions(a, "angle"), e.verifyParamType("angle", a.angle, "number"); a.angle < 0;)a.angle = a.angle + 360;
            a.angle = a.angle % 360;
            var b = Math.round(a.angle);
            return new f({type: a.type, rotateAngle: b})
        }, d.genBlurOp = function (a) {
            e.verifyOptions(a, "radius sigma"), e.verifyParamType("radius", a.radius, "number"), e.verifyParamMin("radius", a.radius, 1), e.verifyParamMax("radius", a.radius, 50), e.verifyParamType("sigma", a.sigma, "number"), e.verifyParamMin("sigma", a.sigma, 0);
            var b = Math.round(a.radius), c = Math.round(a.sigma);
            return new f({type: a.type, blurRadius: b, blurSigma: c})
        }, d.genCropOp = function (a) {
            e.verifyOptions(a, "x y width height"), e.verifyParamType("x", a.x, "number"), e.verifyParamMin("x", a.x, 0), e.verifyParamType("y", a.y, "number"), e.verifyParamMin("y", a.y, 0), e.verifyParamType("width", a.width, "number"), e.verifyParamMin("width", a.width, 0), e.verifyParamType("height", a.height, "number"), e.verifyParamMin("height", a.height, 0);
            var b = Math.round(a.x), c = Math.round(a.y), d = Math.round(a.width), g = Math.round(a.height);
            return new f({type: a.type, cropX: b, cropY: c, cropWidth: d, cropHeight: g})
        }, d.genThumbnailOp = function () {
            var a = {cover: "z", contain: "x", crop: "y"};
            return function (b) {
                e.verifyOptions(b, "mode"), e.verifyParamValid("mode", b.mode, Object.keys(a)), "contain" === b.mode ? e.verifyParamAtLeastPresentOne(b, "width height") : e.verifyOptions(b, "width height"), e.undef(b.width) && (b.width = 0), e.undef(b.height) && (b.height = 0), e.verifyParamType("width", b.width, "number"), e.verifyParamMin("width", b.width, 0), e.verifyParamType("height", b.height, "number"), e.verifyParamMin("height", b.height, 0);
                var c = Math.round(b.width), d = Math.round(b.height), g = new f({
                    type: b.type,
                    thumbnailMode: a[b.mode],
                    thumbnailWidth: c,
                    thumbnailHeight: d
                });
                if ("crop" === b.mode && e.notundef(b.axis)) {
                    e.undef(b.axis.x) && (b.axis.x = 5), e.undef(b.axis.y) && (b.axis.y = 5), e.verifyParamMin("axis.x", b.axis.x, 0), e.verifyParamMax("axis.x", b.axis.x, 10), e.verifyParamMin("axis.y", b.axis.y, 0), e.verifyParamMax("axis.y", b.axis.y, 10);
                    var h = Math.round(b.axis.x), i = Math.round(b.axis.y);
                    g.thumbnailAxisX = h, g.thumbnailAxisY = i
                }
                return e.notundef(b.enlarge) && (e.verifyParamType("enlarge", b.enlarge, "boolean"), b.enlarge && (g.thumbnailEnlarge = 1)), g
            }
        }()
    }, function (a, b, c) {
        var d = c(87).fn, e = c(10);
        d.audioToText = function (a) {
            e.verifyOptions(a, "url"), a.audioToText = e.filterObj(a, "url");
            var b = this;
            b.processCallback(a), b.sendCmd("audioToText", a)
        }
    }, function (a, b, c) {
        var d = c(87).fn;
        d.clearDB = function (a) {
            var b = this, c = b.db;
            b.processCallback(a);
            var d = a.done;
            c.enable ? c.clear().then(d, d) : d()
        }
    }])
}), !function (a, b) {
    if ("function" == typeof define && define.amd)define(["exports", "module"], b); else if ("undefined" != typeof exports && "undefined" != typeof module)b(exports, module); else {
        var c = {exports: {}};
        b(c.exports, c), a.autosize = c.exports
    }
}(this, function (a, b) {
    "use strict";
    function c(a) {
        function b() {
            var b = window.getComputedStyle(a, null);
            n = b.overflowY, "vertical" === b.resize ? a.style.resize = "none" : "both" === b.resize && (a.style.resize = "horizontal"), m = "content-box" === b.boxSizing ? -(parseFloat(b.paddingTop) + parseFloat(b.paddingBottom)) : parseFloat(b.borderTopWidth) + parseFloat(b.borderBottomWidth), isNaN(m) && (m = 0), e()
        }

        function c(b) {
            var c = a.style.width;
            a.style.width = "0px", a.offsetWidth, a.style.width = c, n = b, l && (a.style.overflowY = b), d()
        }

        function d() {
            var b = window.pageYOffset, c = document.body.scrollTop, d = a.style.height;
            a.style.height = "auto";
            var e = a.scrollHeight + m;
            return 0 === a.scrollHeight ? void(a.style.height = d) : (a.style.height = e + "px", o = a.clientWidth, document.documentElement.scrollTop = b, void(document.body.scrollTop = c))
        }

        function e() {
            var b = a.style.height;
            d();
            var e = window.getComputedStyle(a, null);
            if (e.height !== a.style.height ? "visible" !== n && c("visible") : "hidden" !== n && c("hidden"), b !== a.style.height) {
                var f = g("autosize:resized");
                a.dispatchEvent(f)
            }
        }

        var h = void 0 === arguments[1] ? {} : arguments[1], i = h.setOverflowX, j = void 0 === i ? !0 : i, k = h.setOverflowY, l = void 0 === k ? !0 : k;
        if (a && a.nodeName && "TEXTAREA" === a.nodeName && !f.has(a)) {
            var m = null, n = null, o = a.clientWidth, p = function () {
                a.clientWidth !== o && e()
            }, q = function (b) {
                window.removeEventListener("resize", p, !1), a.removeEventListener("input", e, !1), a.removeEventListener("keyup", e, !1), a.removeEventListener("autosize:destroy", q, !1), a.removeEventListener("autosize:update", e, !1), f["delete"](a), Object.keys(b).forEach(function (c) {
                    a.style[c] = b[c]
                })
            }.bind(a, {
                height: a.style.height,
                resize: a.style.resize,
                overflowY: a.style.overflowY,
                overflowX: a.style.overflowX,
                wordWrap: a.style.wordWrap
            });
            a.addEventListener("autosize:destroy", q, !1), "onpropertychange"in a && "oninput"in a && a.addEventListener("keyup", e, !1), window.addEventListener("resize", p, !1), a.addEventListener("input", e, !1), a.addEventListener("autosize:update", e, !1), f.add(a), j && (a.style.overflowX = "hidden", a.style.wordWrap = "break-word"), b()
        }
    }

    function d(a) {
        if (a && a.nodeName && "TEXTAREA" === a.nodeName) {
            var b = g("autosize:destroy");
            a.dispatchEvent(b)
        }
    }

    function e(a) {
        if (a && a.nodeName && "TEXTAREA" === a.nodeName) {
            var b = g("autosize:update");
            a.dispatchEvent(b)
        }
    }

    var f = "function" == typeof Set ? new Set : function () {
        var a = [];
        return {
            has: function (b) {
                return Boolean(a.indexOf(b) > -1)
            }, add: function (b) {
                a.push(b)
            }, "delete": function (b) {
                a.splice(a.indexOf(b), 1)
            }
        }
    }(), g = function (a) {
        return new Event(a)
    };
    try {
        new Event("test")
    } catch (h) {
        g = function (a) {
            var b = document.createEvent("Event");
            return b.initEvent(a, !0, !1), b
        }
    }
    var i = null;
    "undefined" == typeof window || "function" != typeof window.getComputedStyle ? (i = function (a) {
        return a
    }, i.destroy = function (a) {
        return a
    }, i.update = function (a) {
        return a
    }) : (i = function (a, b) {
        return a && Array.prototype.forEach.call(a.length ? a : [a], function (a) {
            return c(a, b)
        }), a
    }, i.destroy = function (a) {
        return a && Array.prototype.forEach.call(a.length ? a : [a], d), a
    }, i.update = function (a) {
        return a && Array.prototype.forEach.call(a.length ? a : [a], e), a
    }), b.exports = i
});
var _host = window.location.host, _domain = _host.substr(_host.split(".")[0].length + 1), hostname = window.location.hostname.split(".").splice(-2).join(".");